var sU=Object.defineProperty,oU=Object.defineProperties;var aU=Object.getOwnPropertyDescriptors;var Lp=Object.getOwnPropertySymbols,cU=Object.getPrototypeOf,PA=Object.prototype.hasOwnProperty,NA=Object.prototype.propertyIsEnumerable,uU=Reflect.get;var RA=(n,e,t)=>e in n?sU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,H=(n,e)=>{for(var t in e||={})PA.call(e,t)&&RA(n,t,e[t]);if(Lp)for(var t of Lp(e))NA.call(e,t)&&RA(n,t,e[t]);return n},se=(n,e)=>oU(n,aU(e));var Qv=(n,e)=>{var t={};for(var r in n)PA.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Lp)for(var r of Lp(n))e.indexOf(r)<0&&NA.call(n,r)&&(t[r]=n[r]);return t};var Yr=(n,e,t)=>uU(cU(n),t,e);var C=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(d){i(d)}},o=c=>{try{a(t.throw(c))}catch(d){i(d)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});var Yv;function Vp(){return Yv}function Jr(n){let e=Yv;return Yv=n,e}var xA=Symbol("NotFound");function Oc(n){return n===xA||n?.name==="\u0275NotFound"}var on=null,Up=!1,Jv=1,lU=null,an=Symbol("SIGNAL");function ve(n){let e=on;return on=n,e}function Hp(){return on}var Fc={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Lc(n){if(Up)throw new Error("");if(on===null)return;on.consumerOnSignalRead(n);let e=on.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=on.recomputing;if(r&&(t=e!==void 0?e.nextProducer:on.producers,t!==void 0&&t.producer===n)){on.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===on&&(!r||hU(i,on)))return;let s=Uc(on),o={producer:n,consumer:on,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};on.producersTail=o,e!==void 0?e.nextProducer=o:on.producers=o,s&&FA(n,o)}function MA(){Jv++}function qp(n){if(!(Uc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Jv)){if(!n.producerMustRecompute(n)&&!wd(n)){$p(n);return}n.producerRecomputeValue(n),$p(n)}}function Xv(n){if(n.consumers===void 0)return;let e=Up;Up=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||dU(r)}}finally{Up=e}}function Zv(){return on?.consumerAllowSignalWrites!==!1}function dU(n){n.dirty=!0,Xv(n),n.consumerMarkedDirty?.(n)}function $p(n){n.dirty=!1,n.lastCleanEpoch=Jv}function Vc(n){return n&&kA(n),ve(n)}function kA(n){n.producersTail=void 0,n.recomputing=!0}function Id(n,e){ve(e),n&&OA(n)}function OA(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Uc(n))do t=eE(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function wd(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(qp(t),r!==t.version))return!0}return!1}function Td(n){if(Uc(n)){let e=n.producers;for(;e!==void 0;)e=eE(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function FA(n,e){let t=n.consumersTail,r=Uc(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)FA(i.producer,i)}function eE(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Uc(e)){let s=e.producers;for(;s!==void 0;)s=eE(s)}return t}function Uc(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function zp(n){lU?.(n)}function hU(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Gp(n,e){return Object.is(n,e)}function Wp(n,e){let t=Object.create(fU);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(qp(t),Lc(t),t.value===Ed)throw t.error;return t.value};return r[an]=t,zp(t),r}var jp=Symbol("UNSET"),Bp=Symbol("COMPUTING"),Ed=Symbol("ERRORED"),fU=se(H({},Fc),{value:jp,dirty:!0,error:null,equal:Gp,kind:"computed",producerMustRecompute(n){return n.value===jp||n.value===Bp},producerRecomputeValue(n){if(n.value===Bp)throw new Error("");let e=n.value;n.value=Bp;let t=Vc(n),r,i=!1;try{r=n.computation(),ve(null),i=e!==jp&&e!==Ed&&r!==Ed&&n.equal(e,r)}catch(s){r=Ed,n.error=s}finally{Id(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function pU(){throw new Error}var LA=pU;function VA(n){LA(n)}function tE(n){LA=n}var gU=null;function nE(n,e){let t=Object.create(Kp);t.value=n,e!==void 0&&(t.equal=e);let r=()=>UA(t);return r[an]=t,zp(t),[r,o=>jc(t,o),o=>rE(t,o)]}function UA(n){return Lc(n),n.value}function jc(n,e){Zv()||VA(n),n.equal(n.value,e)||(n.value=e,mU(n))}function rE(n,e){Zv()||VA(n),jc(n,e(n.value))}var Kp=se(H({},Fc),{equal:Gp,value:void 0,kind:"signal"});function mU(n){n.version++,MA(),Xv(n),gU?.(n)}function ye(n){return typeof n=="function"}function Bc(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Qp=Bc(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Qo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var lt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ye(r))try{r()}catch(s){e=s instanceof Qp?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{jA(s)}catch(o){e=e??[],o instanceof Qp?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Qp(e)}}add(e){var t;if(e&&e!==this)if(this.closed)jA(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Qo(t,e)}remove(e){let{_finalizers:t}=this;t&&Qo(t,e),e instanceof n&&e._removeParent(this)}};lt.EMPTY=(()=>{let n=new lt;return n.closed=!0,n})();var iE=lt.EMPTY;function Yp(n){return n instanceof lt||n&&"closed"in n&&ye(n.remove)&&ye(n.add)&&ye(n.unsubscribe)}function jA(n){ye(n)?n():n.unsubscribe()}var br={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var $c={setTimeout(n,e,...t){let{delegate:r}=$c;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=$c;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Jp(n){$c.setTimeout(()=>{let{onUnhandledError:e}=br;if(e)e(n);else throw n})}function bd(){}var BA=sE("C",void 0,void 0);function $A(n){return sE("E",void 0,n)}function HA(n){return sE("N",n,void 0)}function sE(n,e,t){return{kind:n,value:e,error:t}}var Yo=null;function Hc(n){if(br.useDeprecatedSynchronousErrorHandling){let e=!Yo;if(e&&(Yo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Yo;if(Yo=null,t)throw r}}else n()}function qA(n){br.useDeprecatedSynchronousErrorHandling&&Yo&&(Yo.errorThrown=!0,Yo.error=n)}var Jo=class extends lt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Yp(e)&&e.add(this)):this.destination=vU}static create(e,t,r){return new qc(e,t,r)}next(e){this.isStopped?aE(HA(e),this):this._next(e)}error(e){this.isStopped?aE($A(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?aE(BA,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},yU=Function.prototype.bind;function oE(n,e){return yU.call(n,e)}var cE=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Xp(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Xp(r)}else Xp(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Xp(t)}}},qc=class extends Jo{constructor(e,t,r){super();let i;if(ye(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&br.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&oE(e.next,s),error:e.error&&oE(e.error,s),complete:e.complete&&oE(e.complete,s)}):i=e}this.destination=new cE(i)}};function Xp(n){br.useDeprecatedSynchronousErrorHandling?qA(n):Jp(n)}function _U(n){throw n}function aE(n,e){let{onStoppedNotification:t}=br;t&&$c.setTimeout(()=>t(n,e))}var vU={closed:!0,next:bd,error:_U,complete:bd};var zc=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Vn(n){return n}function Zp(...n){return uE(n)}function uE(n){return n.length===0?Vn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var fe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=IU(t)?t:new qc(t,r,i);return Hc(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=zA(r),new r((i,s)=>{let o=new qc({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[zc](){return this}pipe(...t){return uE(t)(this)}toPromise(t){return t=zA(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function zA(n){var e;return(e=n??br.Promise)!==null&&e!==void 0?e:Promise}function EU(n){return n&&ye(n.next)&&ye(n.error)&&ye(n.complete)}function IU(n){return n&&n instanceof Jo||EU(n)&&Yp(n)}function lE(n){return ye(n?.lift)}function xe(n){return e=>{if(lE(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ae(n,e,t,r,i){return new dE(n,e,t,r,i)}var dE=class extends Jo{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Gc(){return xe((n,e)=>{let t=null;n._refCount++;let r=Ae(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Wc=class extends fe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,lE(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new lt;let t=this.getSubject();e.add(this.source.subscribe(Ae(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=lt.EMPTY)}return e}refCount(){return Gc()(this)}};var GA=Bc(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ft=(()=>{class n extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new eg(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new GA}next(t){Hc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Hc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Hc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?iE:(this.currentObservers=null,s.push(t),new lt(()=>{this.currentObservers=null,Qo(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new fe;return t.source=this,t}}return n.create=(e,t)=>new eg(e,t),n})(),eg=class extends Ft{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:iE}};var Jt=class extends Ft{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var hE={now(){return(hE.delegate||Date).now()},delegate:void 0};var tg=class extends lt{constructor(e,t){super()}schedule(e,t=0){return this}};var Cd={setInterval(n,e,...t){let{delegate:r}=Cd;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Cd;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Kc=class extends tg{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Cd.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Cd.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Qo(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Qc=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Qc.now=hE.now;var Yc=class extends Qc{constructor(e,t=Qc.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var fE=new Yc(Kc);var ng=class extends Kc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var rg=class extends Yc{};var pE=new rg(ng);var Dn=new fe(n=>n.complete());function WA(n){return n&&ye(n.schedule)}function KA(n){return n[n.length-1]}function ig(n){return ye(KA(n))?n.pop():void 0}function Us(n){return WA(KA(n))?n.pop():void 0}function gE(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function YA(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(r.next(h))}catch(g){o(g)}}function c(h){try{d(r.throw(h))}catch(g){o(g)}}function d(h){h.done?s(h.value):i(h.value).then(a,c)}d((r=r.apply(n,e||[])).next())})}function QA(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xo(n){return this instanceof Xo?(this.v=n,this):new Xo(n)}function JA(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(S){return function(P){return Promise.resolve(P).then(S,g)}}function a(S,P){r[S]&&(i[S]=function(U){return new Promise(function(O,G){s.push([S,U,O,G])>1||c(S,U)})},P&&(i[S]=P(i[S])))}function c(S,P){try{d(r[S](P))}catch(U){I(s[0][3],U)}}function d(S){S.value instanceof Xo?Promise.resolve(S.value.v).then(h,g):I(s[0][2],S)}function h(S){c("next",S)}function g(S){c("throw",S)}function I(S,P){S(P),s.shift(),s.length&&c(s[0][0],s[0][1])}}function XA(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof QA=="function"?QA(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},o)}}var sg=n=>n&&typeof n.length=="number"&&typeof n!="function";function og(n){return ye(n?.then)}function ag(n){return ye(n[zc])}function cg(n){return Symbol.asyncIterator&&ye(n?.[Symbol.asyncIterator])}function ug(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function wU(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var lg=wU();function dg(n){return ye(n?.[lg])}function hg(n){return JA(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Xo(t.read());if(i)return yield Xo(void 0);yield yield Xo(r)}}finally{t.releaseLock()}})}function fg(n){return ye(n?.getReader)}function wt(n){if(n instanceof fe)return n;if(n!=null){if(ag(n))return TU(n);if(sg(n))return bU(n);if(og(n))return CU(n);if(cg(n))return ZA(n);if(dg(n))return DU(n);if(fg(n))return SU(n)}throw ug(n)}function TU(n){return new fe(e=>{let t=n[zc]();if(ye(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function bU(n){return new fe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function CU(n){return new fe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Jp)})}function DU(n){return new fe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function ZA(n){return new fe(e=>{AU(n,e).catch(t=>e.error(t))})}function SU(n){return ZA(hg(n))}function AU(n,e){var t,r,i,s;return YA(this,void 0,void 0,function*(){try{for(t=XA(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Sn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function js(n,e=0){return xe((t,r)=>{t.subscribe(Ae(r,i=>Sn(r,n,()=>r.next(i),e),()=>Sn(r,n,()=>r.complete(),e),i=>Sn(r,n,()=>r.error(i),e)))})}function Bs(n,e=0){return xe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function eR(n,e){return wt(n).pipe(Bs(e),js(e))}function tR(n,e){return wt(n).pipe(Bs(e),js(e))}function nR(n,e){return new fe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function rR(n,e){return new fe(t=>{let r;return Sn(t,e,()=>{r=n[lg](),Sn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>ye(r?.return)&&r.return()})}function pg(n,e){if(!n)throw new Error("Iterable cannot be null");return new fe(t=>{Sn(t,e,()=>{let r=n[Symbol.asyncIterator]();Sn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function iR(n,e){return pg(hg(n),e)}function sR(n,e){if(n!=null){if(ag(n))return eR(n,e);if(sg(n))return nR(n,e);if(og(n))return tR(n,e);if(cg(n))return pg(n,e);if(dg(n))return rR(n,e);if(fg(n))return iR(n,e)}throw ug(n)}function ot(n,e){return e?sR(n,e):wt(n)}function de(...n){let e=Us(n);return ot(n,e)}function Jc(n,e){let t=ye(n)?n:()=>n,r=i=>i.error(t());return new fe(e?i=>e.schedule(r,0,i):r)}function mE(n){return!!n&&(n instanceof fe||ye(n.lift)&&ye(n.subscribe))}var Ri=Bc(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ae(n,e){return xe((t,r)=>{let i=0;t.subscribe(Ae(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:RU}=Array;function PU(n,e){return RU(e)?n(...e):n(e)}function gg(n){return ae(e=>PU(n,e))}var{isArray:NU}=Array,{getPrototypeOf:xU,prototype:MU,keys:kU}=Object;function mg(n){if(n.length===1){let e=n[0];if(NU(e))return{args:e,keys:null};if(OU(e)){let t=kU(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function OU(n){return n&&typeof n=="object"&&xU(n)===MU}function yg(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function _g(...n){let e=Us(n),t=ig(n),{args:r,keys:i}=mg(n);if(r.length===0)return ot([],e);let s=new fe(FU(r,e,i?o=>yg(i,o):Vn));return t?s.pipe(gg(t)):s}function FU(n,e,t=Vn){return r=>{oR(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)oR(e,()=>{let d=ot(n[c],e),h=!1;d.subscribe(Ae(r,g=>{s[c]=g,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function oR(n,e,t){n?Sn(t,n,e):e()}function aR(n,e,t,r,i,s,o,a){let c=[],d=0,h=0,g=!1,I=()=>{g&&!c.length&&!d&&e.complete()},S=U=>d<r?P(U):c.push(U),P=U=>{s&&e.next(U),d++;let O=!1;wt(t(U,h++)).subscribe(Ae(e,G=>{i?.(G),s?S(G):e.next(G)},()=>{O=!0},void 0,()=>{if(O)try{for(d--;c.length&&d<r;){let G=c.shift();o?Sn(e,o,()=>P(G)):P(G)}I()}catch(G){e.error(G)}}))};return n.subscribe(Ae(e,S,()=>{g=!0,I()})),()=>{a?.()}}function Lt(n,e,t=1/0){return ye(e)?Lt((r,i)=>ae((s,o)=>e(r,s,i,o))(wt(n(r,i))),t):(typeof e=="number"&&(t=e),xe((r,i)=>aR(r,i,n,t)))}function cR(n=1/0){return Lt(Vn,n)}function uR(){return cR(1)}function Xc(...n){return uR()(ot(n,Us(n)))}function Dd(n){return new fe(e=>{wt(n()).subscribe(e)})}function yE(...n){let e=ig(n),{args:t,keys:r}=mg(n),i=new fe(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,d=o;for(let h=0;h<o;h++){let g=!1;wt(t[h]).subscribe(Ae(s,I=>{g||(g=!0,d--),a[h]=I},()=>c--,void 0,()=>{(!c||!g)&&(d||s.next(r?yg(r,a):a),s.complete())}))}});return e?i.pipe(gg(e)):i}function Un(n,e){return xe((t,r)=>{let i=0;t.subscribe(Ae(r,s=>n.call(e,s,i++)&&r.next(s)))})}function $s(n){return xe((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Ae(t,void 0,void 0,o=>{s=wt(n(o,$s(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function lR(n,e,t,r,i){return(s,o)=>{let a=t,c=e,d=0;s.subscribe(Ae(o,h=>{let g=d++;c=a?n(c,h,g):(a=!0,h),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Zc(n,e){return ye(e)?Lt(n,e,1):Lt(n,1)}function Hs(n){return xe((e,t)=>{let r=!1;e.subscribe(Ae(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Pi(n){return n<=0?()=>Dn:xe((e,t)=>{let r=0;e.subscribe(Ae(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function vg(n=LU){return xe((e,t)=>{let r=!1;e.subscribe(Ae(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function LU(){return new Ri}function Sd(n){return xe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ni(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Un((i,s)=>n(i,s,r)):Vn,Pi(1),t?Hs(e):vg(()=>new Ri))}function eu(n){return n<=0?()=>Dn:xe((e,t)=>{let r=[];e.subscribe(Ae(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function _E(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Un((i,s)=>n(i,s,r)):Vn,eu(1),t?Hs(e):vg(()=>new Ri))}function Eg(n,e){return xe(lR(n,e,arguments.length>=2,!0))}function Ig(...n){let e=Us(n);return xe((t,r)=>{(e?Xc(n,t,e):Xc(n,t)).subscribe(r)})}function An(n,e){return xe((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Ae(r,c=>{i?.unsubscribe();let d=0,h=s++;wt(n(c,h)).subscribe(i=Ae(r,g=>r.next(e?e(c,g,h,d++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function wg(n){return xe((e,t)=>{wt(n).subscribe(Ae(t,()=>t.complete(),bd)),!t.closed&&e.subscribe(t)})}function qt(n,e,t){let r=ye(n)||e||t?{next:n,error:e,complete:t}:n;return r?xe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Ae(s,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),s.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):Vn}function dR(n){let e=ve(null);try{return n()}finally{ve(e)}}var ea=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},NE=new ea("20.3.13");var xE="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Z=class extends Error{code;constructor(e,t){super(nu(e,t)),this.code=e}};function VU(n){return`NG0${Math.abs(n)}`}function nu(n,e){return`${VU(n)}${e?": "+e:""}`}function We(n){for(let e in n)if(n[e]===We)return e;throw Error("")}function pR(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Mi(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Mi).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function ME(n,e){return n?e?`${n} ${e}`:n:e||""}var UU=We({__forward_ref__:We});function gn(n){return n.__forward_ref__=gn,n.toString=function(){return Mi(this())},n}function Xt(n){return kE(n)?n():n}function kE(n){return typeof n=="function"&&n.hasOwnProperty(UU)&&n.__forward_ref__===gn}function ie(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Xr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Nd(n){return jU(n,Dg)}function OE(n){return Nd(n)!==null}function jU(n,e){return n.hasOwnProperty(e)&&n[e]||null}function BU(n){let e=n?.[Dg]??null;return e||null}function EE(n){return n&&n.hasOwnProperty(bg)?n[bg]:null}var Dg=We({\u0275prov:We}),bg=We({\u0275inj:We}),ee=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ie({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function FE(n){return n&&!!n.\u0275providers}var LE=We({\u0275cmp:We}),VE=We({\u0275dir:We}),UE=We({\u0275pipe:We}),jE=We({\u0275mod:We}),Rd=We({\u0275fac:We}),sa=We({__NG_ELEMENT_ID__:We}),hR=We({__NG_ENV_ID__:We});function ru(n){return typeof n=="string"?n:n==null?"":String(n)}function gR(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ru(n)}var mR=We({ngErrorCode:We}),$U=We({ngErrorMessage:We}),HU=We({ngTokenPath:We});function BE(n,e){return yR("",-200,e)}function Sg(n,e){throw new Z(-201,!1)}function yR(n,e,t){let r=new Z(e,n);return r[mR]=e,r[$U]=n,t&&(r[HU]=t),r}function qU(n){return n[mR]}var IE;function _R(){return IE}function jn(n){let e=IE;return IE=n,e}function $E(n,e,t){let r=Nd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Sg(n,"Injector")}var zU={},Zo=zU,wE="__NG_DI_FLAG__",TE=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=ta(t)||0;try{return this.injector.get(e,r&8?null:Zo,r)}catch(i){if(Oc(i))return i;throw i}}};function GU(n,e=0){let t=Vp();if(t===void 0)throw new Z(-203,!1);if(t===null)return $E(n,void 0,e);{let r=WU(e),i=t.retrieve(n,r);if(Oc(i)){if(r.optional)return null;throw i}return i}}function we(n,e=0){return(_R()||GU)(Xt(n),e)}function j(n,e){return we(n,ta(e))}function ta(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function WU(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function bE(n){let e=[];for(let t=0;t<n.length;t++){let r=Xt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Z(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=KU(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(we(i,s))}else e.push(we(r))}return e}function vR(n,e){return n[wE]=e,n.prototype[wE]=e,n}function KU(n){return n[wE]}function na(n,e){let t=n.hasOwnProperty(Rd);return t?n[Rd]:null}function Ag(n,e){n.forEach(t=>Array.isArray(t)?Ag(t,e):e(t))}function HE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function xd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ER(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function IR(n,e,t){let r=iu(n,e);return r>=0?n[r|1]=t:(r=~r,ER(n,r,e,t)),r}function Rg(n,e){let t=iu(n,e);if(t>=0)return n[t|1]}function iu(n,e){return QU(n,e,1)}function QU(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var zs={},Bn=[],Oi=new ee(""),qE=new ee("",-1),zE=new ee(""),Pd=class{get(e,t=Zo){if(t===Zo){let i=yR("",-201);throw i.name="\u0275NotFound",i}return t}};function GE(n){return n[jE]||null}function Gs(n){return n[LE]||null}function WE(n){return n[VE]||null}function wR(n){return n[UE]||null}function $n(n){return{\u0275providers:n}}function TR(n){return $n([{provide:Oi,multi:!0,useValue:n}])}function bR(...n){return{\u0275providers:KE(!0,n),\u0275fromNgModule:!0}}function KE(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Ag(e,o=>{let a=o;Cg(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&CR(i,s),t}function CR(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];QE(i,s=>{e(s,r)})}}function Cg(n,e,t,r){if(n=Xt(n),!n)return!1;let i=null,s=EE(n),o=!s&&Gs(n);if(!s&&!o){let c=n.ngModule;if(s=EE(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of c)Cg(d,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let d;try{Ag(s.imports,h=>{Cg(h,e,t,r)&&(d||=[],d.push(h))})}finally{}d!==void 0&&CR(d,e)}if(!a){let d=na(i)||(()=>new i);e({provide:i,useFactory:d,deps:Bn},i),e({provide:zE,useValue:i,multi:!0},i),e({provide:Oi,useValue:()=>we(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let d=n;QE(c,h=>{e(h,d)})}}else return!1;return i!==n&&n.providers!==void 0}function QE(n,e){for(let t of n)FE(t)&&(t=t.\u0275providers),Array.isArray(t)?QE(t,e):e(t)}var YU=We({provide:String,useValue:We});function DR(n){return n!==null&&typeof n=="object"&&YU in n}function JU(n){return!!(n&&n.useExisting)}function XU(n){return!!(n&&n.useFactory)}function ra(n){return typeof n=="function"}function SR(n){return!!n.useClass}var Md=new ee(""),Tg={},fR={},vE;function kd(){return vE===void 0&&(vE=new Pd),vE}var Vt=class{},ia=class extends Vt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,DE(e,o=>this.processProvider(o)),this.records.set(qE,tu(void 0,this)),i.has("environment")&&this.records.set(Vt,tu(void 0,this));let s=this.records.get(Md);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(zE,Bn,{self:!0}))}retrieve(e,t){let r=ta(t)||0;try{return this.get(e,Zo,r)}catch(i){if(Oc(i))return i;throw i}}destroy(){Ad(this),this._destroyed=!0;let e=ve(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ve(e)}}onDestroy(e){return Ad(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ad(this);let t=Jr(this),r=jn(void 0),i;try{return e()}finally{Jr(t),jn(r)}}get(e,t=Zo,r){if(Ad(this),e.hasOwnProperty(hR))return e[hR](this);let i=ta(r),s,o=Jr(this),a=jn(void 0);try{if(!(i&4)){let d=this.records.get(e);if(d===void 0){let h=rj(e)&&Nd(e);h&&this.injectableDefInScope(h)?d=tu(CE(e),Tg):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,i)}let c=i&2?kd():this.parent;return t=i&8&&t===Zo?null:t,c.get(e,t)}catch(c){let d=qU(c);throw d===-200||d===-201?new Z(d,null):c}finally{jn(a),Jr(o)}}resolveInjectorInitializers(){let e=ve(null),t=Jr(this),r=jn(void 0),i;try{let s=this.get(Oi,Bn,{self:!0});for(let o of s)o()}finally{Jr(t),jn(r),ve(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Mi(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Xt(e);let t=ra(e)?e:Xt(e&&e.provide),r=ej(e);if(!ra(e)&&e.multi===!0){let i=this.records.get(t);i||(i=tu(void 0,Tg,!0),i.factory=()=>bE(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ve(null);try{if(t.value===fR)throw BE(Mi(e));return t.value===Tg&&(t.value=fR,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&nj(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ve(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Xt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function CE(n){let e=Nd(n),t=e!==null?e.factory:na(n);if(t!==null)return t;if(n instanceof ee)throw new Z(204,!1);if(n instanceof Function)return ZU(n);throw new Z(204,!1)}function ZU(n){if(n.length>0)throw new Z(204,!1);let t=BU(n);return t!==null?()=>t.factory(n):()=>new n}function ej(n){if(DR(n))return tu(void 0,n.useValue);{let e=YE(n);return tu(e,Tg)}}function YE(n,e,t){let r;if(ra(n)){let i=Xt(n);return na(i)||CE(i)}else if(DR(n))r=()=>Xt(n.useValue);else if(XU(n))r=()=>n.useFactory(...bE(n.deps||[]));else if(JU(n))r=(i,s)=>we(Xt(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Xt(n&&(n.useClass||n.provide));if(tj(n))r=()=>new i(...bE(n.deps));else return na(i)||CE(i)}return r}function Ad(n){if(n.destroyed)throw new Z(205,!1)}function tu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function tj(n){return!!n.deps}function nj(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function rj(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function DE(n,e){for(let t of n)Array.isArray(t)?DE(t,e):t&&FE(t)?DE(t.\u0275providers,e):e(t)}function Ut(n,e){let t;n instanceof ia?(Ad(n),t=n):t=new TE(n);let r,i=Jr(t),s=jn(void 0);try{return e()}finally{Jr(i),jn(s)}}function AR(){return _R()!==void 0||Vp()!=null}var Dr=0,Ee=1,pe=2,Zt=3,ir=4,sr=5,Od=6,su=7,cn=8,Ws=9,Fi=10,dt=11,ou=12,JE=13,oa=14,or=15,aa=16,ca=17,ua=18,Fd=19,XE=20,xi=21,Pg=22,Ld=23,Hn=24,la=25,Vd=26,qn=27,RR=1;var Ks=7,Ud=8,jd=9,Rn=10;function Zr(n){return Array.isArray(n)&&typeof n[RR]=="object"}function Sr(n){return Array.isArray(n)&&n[RR]===!0}function ZE(n){return(n.flags&4)!==0}function Qs(n){return n.componentOffset>-1}function Bd(n){return(n.flags&1)===1}function ei(n){return!!n.template}function au(n){return(n[pe]&512)!==0}function da(n){return(n[pe]&256)===256}var eI="svg",PR="math";function ar(n){for(;Array.isArray(n);)n=n[Dr];return n}function tI(n,e){return ar(e[n])}function Ar(n,e){return ar(e[n.index])}function Ng(n,e){return n.data[e]}function cr(n,e){let t=e[n];return Zr(t)?t:t[Dr]}function xg(n){return(n[pe]&128)===128}function NR(n){return Sr(n[Zt])}function $d(n,e){return e==null?null:n[e]}function nI(n){n[ca]=0}function rI(n){n[pe]&1024||(n[pe]|=1024,xg(n)&&cu(n))}function xR(n,e){for(;n>0;)e=e[oa],n--;return e}function Hd(n){return!!(n[pe]&9216||n[Hn]?.dirty)}function Mg(n){n[Fi].changeDetectionScheduler?.notify(8),n[pe]&64&&(n[pe]|=1024),Hd(n)&&cu(n)}function cu(n){n[Fi].changeDetectionScheduler?.notify(0);let e=qs(n);for(;e!==null&&!(e[pe]&8192||(e[pe]|=8192,!xg(e)));)e=qs(e)}function iI(n,e){if(da(n))throw new Z(911,!1);n[xi]===null&&(n[xi]=[]),n[xi].push(e)}function MR(n,e){if(n[xi]===null)return;let t=n[xi].indexOf(e);t!==-1&&n[xi].splice(t,1)}function qs(n){let e=n[Zt];return Sr(e)?e[Zt]:e}function kR(n){return n[su]??=[]}function OR(n){return n.cleanup??=[]}var be={lFrame:JR(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var SE=!1;function FR(){return be.lFrame.elementDepthCount}function LR(){be.lFrame.elementDepthCount++}function VR(){be.lFrame.elementDepthCount--}function sI(){return be.bindingsEnabled}function UR(){return be.skipHydrationRootTNode!==null}function jR(n){return be.skipHydrationRootTNode===n}function BR(){be.skipHydrationRootTNode=null}function et(){return be.lFrame.lView}function zn(){return be.lFrame.tView}function Pn(n){return be.lFrame.contextLView=n,n[cn]}function Nn(n){return be.lFrame.contextLView=null,n}function mn(){let n=oI();for(;n!==null&&n.type===64;)n=n.parent;return n}function oI(){return be.lFrame.currentTNode}function $R(){let n=be.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function uu(n,e){let t=be.lFrame;t.currentTNode=n,t.isParent=e}function aI(){return be.lFrame.isParent}function HR(){be.lFrame.isParent=!1}function cI(){return SE}function uI(n){let e=SE;return SE=n,e}function qR(){return be.lFrame.bindingIndex}function zR(n){return be.lFrame.bindingIndex=n}function qd(){return be.lFrame.bindingIndex++}function lI(n){let e=be.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function GR(){return be.lFrame.inI18n}function WR(n,e){let t=be.lFrame;t.bindingIndex=t.bindingRootIndex=n,kg(e)}function KR(){return be.lFrame.currentDirectiveIndex}function kg(n){be.lFrame.currentDirectiveIndex=n}function QR(n){let e=be.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function dI(n){be.lFrame.currentQueryIndex=n}function ij(n){let e=n[Ee];return e.type===2?e.declTNode:e.type===1?n[sr]:null}function hI(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=ij(s),i===null||(s=s[oa],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=be.lFrame=YR();return r.currentTNode=e,r.lView=n,!0}function Og(n){let e=YR(),t=n[Ee];be.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function YR(){let n=be.lFrame,e=n===null?null:n.child;return e===null?JR(n):e}function JR(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function XR(){let n=be.lFrame;return be.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var fI=XR;function Fg(){let n=XR();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ZR(n){return(be.lFrame.contextLView=xR(n,be.lFrame.contextLView))[cn]}function Ys(){return be.lFrame.selectedIndex}function Js(n){be.lFrame.selectedIndex=n}function Lg(){let n=be.lFrame;return Ng(n.tView,n.selectedIndex)}function Rr(){be.lFrame.currentNamespace=eI}function Pr(){sj()}function sj(){be.lFrame.currentNamespace=null}function eP(){return be.lFrame.currentNamespace}var tP=!0;function Vg(){return tP}function Ug(n){tP=n}function AE(n,e=null,t=null,r){let i=pI(n,e,t,r);return i.resolveInjectorInitializers(),i}function pI(n,e=null,t=null,r,i=new Set){let s=[t||Bn,bR(n)];return r=r||(typeof n=="object"?void 0:Mi(n)),new ia(s,e||kd(),r||null,i)}var Tt=class n{static THROW_IF_NOT_FOUND=Zo;static NULL=new Pd;static create(e,t){if(Array.isArray(e))return AE({name:""},t,e,"");{let r=e.name??"";return AE({name:r},e.parent,e.providers,r)}}static \u0275prov=ie({token:n,providedIn:"any",factory:()=>we(qE)});static __NG_ELEMENT_ID__=-1},zt=new ee(""),Nr=(()=>{class n{static __NG_ELEMENT_ID__=oj;static __NG_ENV_ID__=t=>t}return n})(),RE=class extends Nr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return da(this._lView)}onDestroy(e){let t=this._lView;return iI(t,e),()=>MR(t,e)}};function oj(){return new RE(et())}var Cr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},xn=new ee("",{providedIn:"root",factory:()=>{let n=j(Vt),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Cr),e.handleError(t))}}}),nP={provide:Oi,useValue:()=>void j(Cr),multi:!0},aj=new ee("",{providedIn:"root",factory:()=>{let n=j(zt).defaultView;if(!n)return;let e=j(xn),t=s=>{e(s.reason),s.preventDefault()},r=s=>{s.error?e(s.error):e(new Error(s.message,{cause:s})),s.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),j(Nr).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function gI(){return $n([TR(()=>void j(aj))])}function mI(n){return typeof n=="function"&&n[an]!==void 0}function Gn(n,e){let[t,r,i]=nE(n,e?.equal),s=t,o=s[an];return s.set=r,s.update=i,s.asReadonly=rP.bind(s),s}function rP(){let n=this[an];if(n.readonlyFn===void 0){let e=()=>this();e[an]=n,n.readonlyFn=e}return n.readonlyFn}function yI(n){return mI(n)&&typeof n.set=="function"}var jg=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=cj}return n})();function cj(){return new jg(et(),mn())}var ki=class{},zd=new ee("",{providedIn:"root",factory:()=>!1});var _I=new ee(""),vI=new ee(""),ti=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Jt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new fe(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}return n})(),lu=(()=>{class n{internalPendingTasks=j(ti);scheduler=j(ki);errorHandler=j(xn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}return n})();function Gd(...n){}var EI=(()=>{class n{static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new PE})}return n})(),PE=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function yu(n){return{toString:n}.toString()}var Bg="__parameters__";function gj(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function mj(n,e,t){return yu(()=>{let r=gj(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,d,h){let g=c.hasOwnProperty(Bg)?c[Bg]:Object.defineProperty(c,Bg,{value:[]})[Bg];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Wn=vR(mj("Optional"),8);function yj(n){return typeof n=="function"}var Gg=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function FP(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Vi=(()=>{let n=()=>LP;return n.ngInherit=!0,n})();function LP(n){return n.type.prototype.ngOnChanges&&(n.setInput=vj),_j}function _j(){let n=UP(this),e=n?.current;if(e){let t=n.previous;if(t===zs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function vj(n,e,t,r,i){let s=this.declaredInputs[r],o=UP(n)||Ej(n,{previous:zs,current:null}),a=o.current||(o.current={}),c=o.previous,d=c[s];a[s]=new Gg(d&&d.currentValue,t,c===zs),FP(n,e,i,t)}var VP="__ngSimpleChanges__";function UP(n){return n[VP]||null}function Ej(n,e){return n[VP]=e}var iP=[];var Qe=function(n,e=null,t){for(let r=0;r<iP.length;r++){let i=iP[r];i(n,e,t)}};function Ij(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=LP(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function jP(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Hg(n,e,t){BP(n,e,3,t)}function qg(n,e,t,r){(n[pe]&3)===t&&BP(n,e,t,r)}function II(n,e){let t=n[pe];(t&3)===e&&(t&=16383,t+=1,n[pe]=t)}function BP(n,e,t,r){let i=r!==void 0?n[ca]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[ca]+=65536),(a<s||s==-1)&&(wj(n,t,e,c),n[ca]=(n[ca]&4294901760)+c+2),c++}function sP(n,e){Qe(4,n,e);let t=ve(null);try{e.call(n)}finally{ve(t),Qe(5,n,e)}}function wj(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[pe]>>14<n[ca]>>16&&(n[pe]&3)===e&&(n[pe]+=16384,sP(a,s)):sP(a,s)}var hu=-1,fa=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function Tj(n){return(n.flags&8)!==0}function bj(n){return(n.flags&16)!==0}function Cj(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];Sj(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Dj(n){return n===3||n===4||n===6}function Sj(n){return n.charCodeAt(0)===64}function Qd(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?oP(n,t,i,null,e[++r]):oP(n,t,i,null,null))}}return n}function oP(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function $P(n){return n!==hu}function Wg(n){return n&32767}function Aj(n){return n>>16}function Kg(n,e){let t=Aj(n),r=e;for(;t>0;)r=r[oa],t--;return r}var NI=!0;function aP(n){let e=NI;return NI=n,e}var Rj=256,HP=Rj-1,qP=5,Pj=0,ni={};function Nj(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(sa)&&(r=t[sa]),r==null&&(r=t[sa]=Pj++);let i=r&HP,s=1<<i;e.data[n+(i>>qP)]|=s}function Qg(n,e){let t=zP(n,e);if(t!==-1)return t;let r=e[Ee];r.firstCreatePass&&(n.injectorIndex=e.length,wI(r.data,n),wI(e,null),wI(r.blueprint,null));let i=JI(n,e),s=n.injectorIndex;if($P(i)){let o=Wg(i),a=Kg(i,e),c=a[Ee].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|c[o+d]}return e[s+8]=i,s}function wI(n,e){n.push(0,0,0,0,0,0,0,0,e)}function zP(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function JI(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=YP(i),r===null)return hu;if(t++,i=i[oa],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return hu}function xI(n,e,t){Nj(n,e,t)}function GP(n,e,t){if(t&8||n!==void 0)return n;Sg(e,"NodeInjector")}function WP(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Ws],s=jn(void 0);try{return i?i.get(e,r,t&8):$E(e,r,t&8)}finally{jn(s)}}return GP(r,e,t)}function KP(n,e,t,r=0,i){if(n!==null){if(e[pe]&2048&&!(r&2)){let o=Fj(n,e,t,r,ni);if(o!==ni)return o}let s=QP(n,e,t,r,ni);if(s!==ni)return s}return WP(e,t,r,i)}function QP(n,e,t,r,i){let s=kj(t);if(typeof s=="function"){if(!hI(e,n,r))return r&1?GP(i,t,r):WP(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))Sg(t);else return o}finally{fI()}}else if(typeof s=="number"){let o=null,a=zP(n,e),c=hu,d=r&1?e[or][sr]:null;for((a===-1||r&4)&&(c=a===-1?JI(n,e):e[a+8],c===hu||!uP(r,!1)?a=-1:(o=e[Ee],a=Wg(c),e=Kg(c,e)));a!==-1;){let h=e[Ee];if(cP(s,a,h.data)){let g=xj(a,e,t,o,r,d);if(g!==ni)return g}c=e[a+8],c!==hu&&uP(r,e[Ee].data[a+8]===d)&&cP(s,a,e)?(o=h,a=Wg(c),e=Kg(c,e)):a=-1}}return i}function xj(n,e,t,r,i,s){let o=e[Ee],a=o.data[n+8],c=r==null?Qs(a)&&NI:r!=o&&(a.type&3)!==0,d=i&1&&s===a,h=Mj(a,o,t,c,d);return h!==null?Yg(e,o,h,a,i):ni}function Mj(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,d=n.directiveEnd,h=s>>20,g=r?a:a+h,I=i?a+h:d;for(let S=g;S<I;S++){let P=o[S];if(S<c&&t===P||S>=c&&P.type===t)return S}if(i){let S=o[c];if(S&&ei(S)&&S.type===t)return c}return null}function Yg(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof fa){let a=s;if(a.resolving){let S=gR(o[t]);throw BE(S)}let c=aP(a.canSeeViewProviders);a.resolving=!0;let d=o[t].type||o[t],h,g=a.injectImpl?jn(a.injectImpl):null,I=hI(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&Ij(t,o[t],e)}finally{g!==null&&jn(g),aP(c),a.resolving=!1,fI()}}return s}function kj(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(sa)?n[sa]:void 0;return typeof e=="number"?e>=0?e&HP:Oj:e}function cP(n,e,t){let r=1<<n;return!!(t[e+(n>>qP)]&r)}function uP(n,e){return!(n&2)&&!(n&1&&e)}var ha=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return KP(this._tNode,this._lView,e,ta(r),t)}};function Oj(){return new ha(mn(),et())}function Mr(n){return yu(()=>{let e=n.prototype.constructor,t=e[Rd]||MI(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Rd]||MI(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function MI(n){return kE(n)?()=>{let e=MI(Xt(n));return e&&e()}:na(n)}function Fj(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[pe]&2048&&!au(o);){let a=QP(s,o,t,r|2,ni);if(a!==ni)return a;let c=s.parent;if(!c){let d=o[XE];if(d){let h=d.get(t,ni,r);if(h!==ni)return h}c=YP(o),o=o[oa]}s=c}return i}function YP(n){let e=n[Ee],t=e.type;return t===2?e.declTNode:t===1?n[sr]:null}function Lj(){return am(mn(),et())}function am(n,e){return new Ui(Ar(n,e))}var Ui=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Lj}return n})();function JP(n){return(n.flags&128)===128}var XI=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(XI||{}),XP=new Map,Vj=0;function Uj(){return Vj++}function jj(n){XP.set(n[Fd],n)}function kI(n){XP.delete(n[Fd])}var lP="__ngContext__";function fu(n,e){Zr(e)?(n[lP]=e[Fd],jj(e)):n[lP]=e}function ZP(n){return tN(n[ou])}function eN(n){return tN(n[ir])}function tN(n){for(;n!==null&&!Sr(n);)n=n[ir];return n}var OI;function ZI(n){OI=n}function nN(){if(OI!==void 0)return OI;if(typeof document<"u")return document;throw new Z(210,!1)}var cm=new ee("",{providedIn:"root",factory:()=>Bj}),Bj="ng",um=new ee(""),_a=new ee("",{providedIn:"platform",factory:()=>"unknown"});var lm=new ee("",{providedIn:"root",factory:()=>nN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var $j="h",Hj="b";var rN=!1,iN=new ee("",{providedIn:"root",factory:()=>rN});var qj=(n,e,t,r)=>{};function zj(n,e,t,r){qj(n,e,t,r)}function ew(n){return(n.flags&32)===32}var Gj=()=>null;function sN(n,e,t=!1){return Gj(n,e,t)}function oN(n,e){let t=n.contentQueries;if(t!==null){let r=ve(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];dI(s),a.contentQueries(2,e[o],o)}}}finally{ve(r)}}}function FI(n,e,t){dI(0);let r=ve(null);try{e(n,t)}finally{ve(r)}}function aN(n,e,t){if(ZE(e)){let r=ve(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{ve(r)}}}var Li=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Li||{});var LI=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${xE})`}};function cN(n){return n instanceof LI?n.changingThisBreaksApplicationSecurity:n}function uN(n){return n instanceof Function?n():n}function Wj(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var lN="ng-template";function Kj(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Wj(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(tw(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function tw(n){return n.type===4&&n.value!==lN}function Qj(n,e,t){let r=n.type===4&&!t?lN:n.value;return e===r}function Yj(n,e,t){let r=4,i=n.attrs,s=i!==null?Zj(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!xr(r)&&!xr(c))return!1;if(o&&xr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!Qj(n,c,t)||c===""&&e.length===1){if(xr(r))return!1;o=!0}}else if(r&8){if(i===null||!Kj(n,i,c,t)){if(xr(r))return!1;o=!0}}else{let d=e[++a],h=Jj(c,i,tw(n),t);if(h===-1){if(xr(r))return!1;o=!0;continue}if(d!==""){let g;if(h>s?g="":g=i[h+1].toLowerCase(),r&2&&d!==g){if(xr(r))return!1;o=!0}}}}return xr(r)||o}function xr(n){return(n&1)===0}function Jj(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return eB(e,n)}function Xj(n,e,t=!1){for(let r=0;r<e.length;r++)if(Yj(n,e[r],t))return!0;return!1}function Zj(n){for(let e=0;e<n.length;e++){let t=n[e];if(Dj(t))return e}return n.length}function eB(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function dP(n,e){return n?":not("+e.trim()+")":e}function tB(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!xr(o)&&(e+=dP(s,i),i=""),r=o,s=s||!xr(r);t++}return i!==""&&(e+=dP(s,i)),e}function nB(n){return n.map(tB).join(",")}function rB(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!xr(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var ii={};function iB(n,e){return n.createText(e)}function sB(n,e,t){n.setValue(e,t)}function dN(n,e,t){return n.createElement(e,t)}function Jg(n,e,t,r,i){n.insertBefore(e,t,r,i)}function hN(n,e,t){n.appendChild(e,t)}function hP(n,e,t,r,i){r!==null?Jg(n,e,t,r,i):hN(n,e,t)}function oB(n,e,t,r){n.removeChild(null,e,t,r)}function aB(n,e,t){n.setAttribute(e,"style",t)}function cB(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function fN(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Cj(n,e,r),i!==null&&cB(n,e,i),s!==null&&aB(n,e,s)}function nw(n,e,t,r,i,s,o,a,c,d,h){let g=qn+r,I=g+i,S=uB(g,I),P=typeof d=="function"?d():d;return S[Ee]={type:n,blueprint:S,template:t,queries:null,viewQuery:a,declTNode:e,data:S.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:I,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:P,incompleteFirstPass:!1,ssrId:h}}function uB(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ii);return t}function lB(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=nw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function rw(n,e,t,r,i,s,o,a,c,d,h){let g=e.blueprint.slice();return g[Dr]=i,g[pe]=r|4|128|8|64|1024,(d!==null||n&&n[pe]&2048)&&(g[pe]|=2048),nI(g),g[Zt]=g[oa]=n,g[cn]=t,g[Fi]=o||n&&n[Fi],g[dt]=a||n&&n[dt],g[Ws]=c||n&&n[Ws]||null,g[sr]=s,g[Fd]=Uj(),g[Od]=h,g[XE]=d,g[or]=e.type==2?n[or]:g,g}function dB(n,e,t){let r=Ar(e,n),i=lB(t),s=n[Fi].rendererFactory,o=iw(n,rw(n,i,null,pN(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function pN(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function gN(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function iw(n,e){return n[ou]?n[JE][ir]=e:n[ou]=e,n[JE]=e,e}function B(n=1){mN(zn(),et(),Ys()+n,!1)}function mN(n,e,t,r){if(!r)if((e[pe]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Hg(e,s,t)}else{let s=n.preOrderHooks;s!==null&&qg(e,s,0,t)}Js(t)}var dm=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(dm||{});function VI(n,e,t,r){let i=ve(null);try{let[s,o,a]=n.inputs[t],c=null;(o&dm.SignalBased)!==0&&(c=e[s][an]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):FP(e,c,s,r)}finally{ve(i)}}var ri=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(ri||{}),hB;function sw(n,e){return hB(n,e)}var pu=new Set,hm=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(hm||{}),va=new ee(""),fP=new Set;function Zd(n){fP.has(n)||(fP.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var yN=!1,UI=class extends Ft{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,AR()&&(this.destroyRef=j(Nr,{optional:!0})??void 0,this.pendingTasks=j(ti,{optional:!0})??void 0)}emit(e){let t=ve(null);try{super.next(e)}finally{ve(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof lt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},_t=UI;function _N(n){let e,t;function r(){n=Gd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function pP(n){return queueMicrotask(()=>n()),()=>{n=Gd}}var ow="isAngularZone",Xg=ow+"_ID",fB=0,Ke=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new _t(!1);onMicrotaskEmpty=new _t(!1);onStable=new _t(!1);onError=new _t(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=yN}=e;if(typeof Zone>"u")throw new Z(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,mB(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ow)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Z(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Z(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,pB,Gd,Gd);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},pB={};function aw(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function gB(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){_N(()=>{n.callbackScheduled=!1,jI(n),n.isCheckStableRunning=!0,aw(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),jI(n)}function mB(n){let e=()=>{gB(n)},t=fB++;n._inner=n._inner.fork({name:"angular",properties:{[ow]:!0,[Xg]:t,[Xg+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(yB(c))return r.invokeTask(s,o,a,c);try{return gP(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),mP(n)}},onInvoke:(r,i,s,o,a,c,d)=>{try{return gP(n),r.invoke(s,o,a,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!_B(c)&&e(),mP(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,jI(n),aw(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function jI(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function gP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function mP(n){n._nesting--,aw(n)}var Zg=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new _t;onMicrotaskEmpty=new _t;onStable=new _t;onError=new _t;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function yB(n){return vN(n,"__ignore_ng_zone__")}function _B(n){return vN(n,"__scheduler_tick__")}function vN(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var cw=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}return n})(),EN=[0,1,2,3],IN=(()=>{class n{ngZone=j(Ke);scheduler=j(ki);errorHandler=j(Cr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){j(va,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Qe(16),this.executing=!0;for(let r of EN)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Qe(17)}register(t){let{view:r}=t;r!==void 0?((r[la]??=[]).push(t),cu(r),r[pe]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(hm.AFTER_NEXT_RENDER,t):t()}static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}return n})(),em=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[la];e&&(this.view[la]=e.filter(t=>t!==this))}};function fm(n,e){let t=e?.injector??j(Tt);return Zd("NgAfterNextRender"),EB(n,t,e,!0)}function vB(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function EB(n,e,t,r){let i=e.get(cw);i.impl??=e.get(IN);let s=e.get(va,null,{optional:!0}),o=t?.manualCleanup!==!0?e.get(Nr):null,a=e.get(jg,null,{optional:!0}),c=new em(i.impl,vB(n),a?.view,r,o,s?.snapshot(null));return i.impl.register(c),c}var IB=new ee("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function wN(n,e,t){let r=n.get(IB);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function wB(n,e){for(let[t,r]of e)wN(n,r.animateFns)}function yP(n,e,t,r){let i=n?.[Vd]?.enter;e!==null&&i&&i.has(t.index)&&wB(r,i)}function du(n,e,t,r,i,s,o,a){if(i!=null){let c,d=!1;Sr(i)?c=i:Zr(i)&&(d=!0,i=i[Dr]);let h=ar(i);n===0&&r!==null?(yP(a,r,s,t),o==null?hN(e,r,h):Jg(e,r,h,o||null,!0)):n===1&&r!==null?(yP(a,r,s,t),Jg(e,r,h,o||null,!0)):n===2?_P(a,s,t,g=>{oB(e,h,d,g)}):n===3&&_P(a,s,t,()=>{e.destroyNode(h)}),c!=null&&OB(e,n,t,c,s,r,o)}}function TB(n,e){TN(n,e),e[Dr]=null,e[sr]=null}function bB(n,e,t,r,i,s){r[Dr]=i,r[sr]=e,pm(n,r,t,1,i,s)}function TN(n,e){e[Fi].changeDetectionScheduler?.notify(9),pm(n,e,e[dt],2,null,null)}function CB(n){let e=n[ou];if(!e)return TI(n[Ee],n);for(;e;){let t=null;if(Zr(e))t=e[ou];else{let r=e[Rn];r&&(t=r)}if(!t){for(;e&&!e[ir]&&e!==n;)Zr(e)&&TI(e[Ee],e),e=e[Zt];e===null&&(e=n),Zr(e)&&TI(e[Ee],e),t=e&&e[ir]}e=t}}function uw(n,e){let t=n[jd],r=t.indexOf(e);t.splice(r,1)}function bN(n,e){if(da(e))return;let t=e[dt];t.destroyNode&&pm(n,e,t,3,null,null),CB(e)}function TI(n,e){if(da(e))return;let t=ve(null);try{e[pe]&=-129,e[pe]|=256,e[Hn]&&Td(e[Hn]),AB(n,e),SB(n,e),e[Ee].type===1&&e[dt].destroy();let r=e[aa];if(r!==null&&Sr(e[Zt])){r!==e[Zt]&&uw(r,e);let i=e[ua];i!==null&&i.detachView(n)}kI(e)}finally{ve(t)}}function _P(n,e,t,r){let i=n?.[Vd];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&pu.add(n),wN(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let d=o.animateFns[c],{promise:h}=d();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),DB(n,r)}else n&&pu.delete(n),r(!1)},i)}function DB(n,e){let t=n[Vd]?.running;if(t){t.then(()=>{n[Vd].running=void 0,pu.delete(n),e(!0)});return}e(!1)}function SB(n,e){let t=n.cleanup,r=e[su];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[su]=null);let i=e[xi];if(i!==null){e[xi]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Ld];if(s!==null){e[Ld]=null;for(let o of s)o.destroy()}}function AB(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof fa)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Qe(4,a,c);try{c.call(a)}finally{Qe(5,a,c)}}else{Qe(4,i,s);try{s.call(i)}finally{Qe(5,i,s)}}}}}function RB(n,e,t){return PB(n,e.parent,t)}function PB(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Dr];if(Qs(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Li.None||i===Li.Emulated)return null}return Ar(r,t)}function NB(n,e,t){return MB(n,e,t)}function xB(n,e,t){return n.type&40?Ar(n,t):null}var MB=xB,vP;function lw(n,e,t,r){let i=RB(n,r,e),s=e[dt],o=r.parent||e[sr],a=NB(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)hP(s,i,t[c],a,!1);else hP(s,i,t,a,!1);vP!==void 0&&vP(s,r,e,t,i)}function Wd(n,e){if(e!==null){let t=e.type;if(t&3)return Ar(e,n);if(t&4)return BI(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Wd(n,r);{let i=n[e.index];return Sr(i)?BI(-1,i):ar(i)}}else{if(t&128)return Wd(n,e.next);if(t&32)return sw(e,n)()||ar(n[e.index]);{let r=CN(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=qs(n[or]);return Wd(i,r)}else return Wd(n,e.next)}}}return null}function CN(n,e){if(e!==null){let r=n[or][sr],i=e.projection;return r.projection[i]}return null}function BI(n,e){let t=Rn+n+1;if(t<e.length){let r=e[t],i=r[Ee].firstChild;if(i!==null)return Wd(r,i)}return e[Ks]}function dw(n,e,t,r,i,s,o){for(;t!=null;){let a=r[Ws];if(t.type===128){t=t.next;continue}let c=r[t.index],d=t.type;if(o&&e===0&&(c&&fu(ar(c),r),t.flags|=2),!ew(t))if(d&8)dw(n,e,t.child,r,i,s,!1),du(e,n,a,i,c,t,s,r);else if(d&32){let h=sw(t,r),g;for(;g=h();)du(e,n,a,i,g,t,s,r);du(e,n,a,i,c,t,s,r)}else d&16?kB(n,e,r,t,i,s):du(e,n,a,i,c,t,s,r);t=o?t.projectionNext:t.next}}function pm(n,e,t,r,i,s){dw(t,r,n.firstChild,e,i,s,!1)}function kB(n,e,t,r,i,s){let o=t[or],c=o[sr].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let h=c[d];du(e,n,t[Ws],i,h,r,s,t)}else{let d=c,h=o[Zt];JP(r)&&(d.flags|=128),dw(n,e,d,h,i,s,!0)}}function OB(n,e,t,r,i,s,o){let a=r[Ks],c=ar(r);a!==c&&du(e,n,t,s,a,i,o);for(let d=Rn;d<r.length;d++){let h=r[d];pm(h[Ee],h,n,e,s,a)}}function FB(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:ri.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ri.Important),n.setStyle(t,r,i,s))}}function DN(n,e,t,r,i){let s=Ys(),o=r&2;try{Js(-1),o&&e.length>qn&&mN(n,e,qn,!1),Qe(o?2:0,i,t),t(r,i)}finally{Js(s),Qe(o?3:1,i,t)}}function hw(n,e,t){HB(n,e,t),(t.flags&64)===64&&qB(n,e,t)}function SN(n,e,t=Ar){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function LB(n,e,t,r){let s=r.get(iN,rN)||t===Li.ShadowDom,o=n.selectRootElement(e,s);return VB(o),o}function VB(n){UB(n)}var UB=()=>null;function jB(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function AN(n,e,t,r,i,s){let o=e[Ee];if(fw(n,o,e,t,r)){Qs(n)&&$B(e,n.index);return}n.type&3&&(t=jB(t)),BB(n,e,t,r,i,s)}function BB(n,e,t,r,i,s){if(n.type&3){let o=Ar(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function $B(n,e){let t=cr(e,n);t[pe]&16||(t[pe]|=64)}function HB(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Qs(t)&&dB(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Qg(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=Yg(e,n,o,t);if(fu(c,e),s!==null&&KB(e,o-r,c,a,t,s),ei(a)){let d=cr(t.index,e);d[cn]=Yg(e,n,o,t)}}}function qB(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=KR();try{Js(s);for(let a=r;a<i;a++){let c=n.data[a],d=e[a];kg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&zB(c,d)}}finally{Js(-1),kg(o)}}function zB(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function RN(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];Xj(e,s.selectors,!1)&&(r??=[],ei(s)?r.unshift(s):r.push(s))}return r}function GB(n,e,t,r,i,s){let o=Ar(n,e);WB(e[dt],o,s,n.value,t,r,i)}function WB(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?ru(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function KB(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],d=o[a+1];VI(r,t,c,d)}}function QB(n,e,t,r,i){let s=qn+t,o=e[Ee],a=i(o,e,n,r,t);e[s]=a,uu(n,!0);let c=n.type===2;return c?(fN(e[dt],a,n),(FR()===0||Bd(n))&&fu(a,e),LR()):fu(a,e),Vg()&&(!c||!ew(n))&&lw(o,e,a,n),n}function YB(n){let e=n;return aI()?HR():(e=e.parent,uu(e,!1)),e}function JB(n,e){let t=n[Ws];if(!t)return;let r;try{r=t.get(xn,null)}catch{r=null}r?.(e)}function fw(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let d=o[c],h=o[c+1],g=e.data[d];VI(g,t[d],h,i),a=!0}if(s)for(let c of s){let d=t[c],h=e.data[c];VI(h,d,r,i),a=!0}return a}function XB(n,e){let t=cr(e,n),r=t[Ee];ZB(r,t);let i=t[Dr];i!==null&&t[Od]===null&&(t[Od]=sN(i,t[Ws])),Qe(18),pw(r,t,t[cn]),Qe(19,t[cn])}function ZB(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function pw(n,e,t){Og(e);try{let r=n.viewQuery;r!==null&&FI(1,r,t);let i=n.template;i!==null&&DN(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ua]?.finishViewCreation(n),n.staticContentQueries&&oN(n,e),n.staticViewQueries&&FI(2,n.viewQuery,t);let s=n.components;s!==null&&e4(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[pe]&=-5,Fg()}}function e4(n,e){for(let t=0;t<e.length;t++)XB(n,e[t])}function t4(n,e,t,r){let i=ve(null);try{let s=e.tView,a=n[pe]&4096?4096:16,c=rw(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];c[aa]=d;let h=n[ua];return h!==null&&(c[ua]=h.createEmbeddedView(s)),pw(s,c,t),c}finally{ve(i)}}function EP(n,e){return!e||e.firstChild===null||JP(n)}function Yd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(ar(s)),Sr(s)&&PN(s,r);let o=t.type;if(o&8)Yd(n,e,t.child,r);else if(o&32){let a=sw(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=CN(e,t);if(Array.isArray(a))r.push(...a);else{let c=qs(e[or]);Yd(c[Ee],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function PN(n,e){for(let t=Rn;t<n.length;t++){let r=n[t],i=r[Ee].firstChild;i!==null&&Yd(r[Ee],r,i,e)}n[Ks]!==n[Dr]&&e.push(n[Ks])}function NN(n){if(n[la]!==null){for(let e of n[la])e.impl.addSequence(e);n[la].length=0}}var xN=[];function n4(n){return n[Hn]??r4(n)}function r4(n){let e=xN.pop()??Object.create(s4);return e.lView=n,e}function i4(n){n.lView[Hn]!==n&&(n.lView=null,xN.push(n))}var s4=se(H({},Fc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{cu(n.lView)},consumerOnSignalRead(){this.lView[Hn]=this}});function o4(n){let e=n[Hn]??Object.create(a4);return e.lView=n,e}var a4=se(H({},Fc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=qs(n.lView);for(;e&&!MN(e[Ee]);)e=qs(e);e&&rI(e)},consumerOnSignalRead(){this.lView[Hn]=this}});function MN(n){return n.type!==2}function kN(n){if(n[Ld]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Ld])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[pe]&8192)}}var c4=100;function ON(n,e=0){let r=n[Fi].rendererFactory,i=!1;i||r.begin?.();try{u4(n,e)}finally{i||r.end?.()}}function u4(n,e){let t=cI();try{uI(!0),$I(n,e);let r=0;for(;Hd(n);){if(r===c4)throw new Z(103,!1);r++,$I(n,1)}}finally{uI(t)}}function l4(n,e,t,r){if(da(e))return;let i=e[pe],s=!1,o=!1;Og(e);let a=!0,c=null,d=null;s||(MN(n)?(d=n4(e),c=Vc(d)):Hp()===null?(a=!1,d=o4(e),c=Vc(d)):e[Hn]&&(Td(e[Hn]),e[Hn]=null));try{nI(e),zR(n.bindingStartIndex),t!==null&&DN(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let S=n.preOrderCheckHooks;S!==null&&Hg(e,S,null)}else{let S=n.preOrderHooks;S!==null&&qg(e,S,0,null),II(e,0)}if(o||d4(e),kN(e),FN(e,0),n.contentQueries!==null&&oN(n,e),!s)if(h){let S=n.contentCheckHooks;S!==null&&Hg(e,S)}else{let S=n.contentHooks;S!==null&&qg(e,S,1),II(e,1)}f4(n,e);let g=n.components;g!==null&&VN(e,g,0);let I=n.viewQuery;if(I!==null&&FI(2,I,r),!s)if(h){let S=n.viewCheckHooks;S!==null&&Hg(e,S)}else{let S=n.viewHooks;S!==null&&qg(e,S,2),II(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Pg]){for(let S of e[Pg])S();e[Pg]=null}s||(NN(e),e[pe]&=-73)}catch(h){throw s||cu(e),h}finally{d!==null&&(Id(d,c),a&&i4(d)),Fg()}}function FN(n,e){for(let t=ZP(n);t!==null;t=eN(t))for(let r=Rn;r<t.length;r++){let i=t[r];LN(i,e)}}function d4(n){for(let e=ZP(n);e!==null;e=eN(e)){if(!(e[pe]&2))continue;let t=e[jd];for(let r=0;r<t.length;r++){let i=t[r];rI(i)}}}function h4(n,e,t){Qe(18);let r=cr(e,n);LN(r,t),Qe(19,r[cn])}function LN(n,e){xg(n)&&$I(n,e)}function $I(n,e){let r=n[Ee],i=n[pe],s=n[Hn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&wd(s)),o||=!1,s&&(s.dirty=!1),n[pe]&=-9217,o)l4(r,n,r.template,n[cn]);else if(i&8192){let a=ve(null);try{kN(n),FN(n,1);let c=r.components;c!==null&&VN(n,c,1),NN(n)}finally{ve(a)}}}function VN(n,e,t){for(let r=0;r<e.length;r++)h4(n,e[r],t)}function f4(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Js(~i);else{let s=i,o=t[++r],a=t[++r];WR(o,s);let c=e[s];Qe(24,c),a(2,c),Qe(25,c)}}}finally{Js(-1)}}function gw(n,e){let t=cI()?64:1088;for(n[Fi].changeDetectionScheduler?.notify(e);n;){n[pe]|=t;let r=qs(n);if(au(n)&&!r)return n;n=r}return null}function UN(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function p4(n,e,t,r=!0){let i=e[Ee];if(g4(i,e,n,t),r){let o=BI(t,n),a=e[dt],c=a.parentNode(n[Ks]);c!==null&&bB(i,n[sr],a,e,c,o)}let s=e[Od];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function HI(n,e){if(n.length<=Rn)return;let t=Rn+e,r=n[t];if(r){let i=r[aa];i!==null&&i!==n&&uw(i,r),e>0&&(n[t-1][ir]=r[ir]);let s=xd(n,Rn+e);TB(r[Ee],r);let o=s[ua];o!==null&&o.detachView(s[Ee]),r[Zt]=null,r[ir]=null,r[pe]&=-129}return r}function g4(n,e,t,r){let i=Rn+r,s=t.length;r>0&&(t[i-1][ir]=e),r<s-Rn?(e[ir]=t[i],HE(t,Rn+r,e)):(t.push(e),e[ir]=null),e[Zt]=t;let o=e[aa];o!==null&&t!==o&&jN(o,e);let a=e[ua];a!==null&&a.insertView(n),Mg(e),e[pe]|=128}function jN(n,e){let t=n[jd],r=e[Zt];if(Zr(r))n[pe]|=2;else{let i=r[Zt][or];e[or]!==i&&(n[pe]|=2)}t===null?n[jd]=[e]:t.push(e)}var Xs=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Ee];return Yd(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[cn]}set context(e){this._lView[cn]=e}get destroyed(){return da(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Zt];if(Sr(e)){let t=e[Ud],r=t?t.indexOf(this):-1;r>-1&&(HI(e,r),xd(t,r))}this._attachedToViewContainer=!1}bN(this._lView[Ee],this._lView)}onDestroy(e){iI(this._lView,e)}markForCheck(){gw(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[pe]&=-129}reattach(){Mg(this._lView),this._lView[pe]|=128}detectChanges(){this._lView[pe]|=1024,ON(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=au(this._lView),t=this._lView[aa];t!==null&&!e&&uw(t,this._lView),TN(this._lView[Ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Z(902,!1);this._appRef=e;let t=au(this._lView),r=this._lView[aa];r!==null&&!t&&jN(r,this._lView),Mg(this._lView)}};var eh=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=m4;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=t4(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Xs(s)}}return n})();function m4(){return y4(mn(),et())}function y4(n,e){return n.type&4?new eh(e,n,am(n,e)):null}function mw(n,e,t,r,i){let s=n.data[e];if(s===null)s=_4(n,e,t,r,i),GR()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=$R();s.injectorIndex=o===null?-1:o.injectorIndex}return uu(s,!0),s}function _4(n,e,t,r,i){let s=oI(),o=aI(),a=o?s:s&&s.parent,c=n.data[e]=E4(n,a,t,e,r,i);return v4(n,c,s,o),c}function v4(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function E4(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return UR()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Oie=new RegExp(`^(\\d+)*(${Hj}|${$j})*(.*)`);var I4=()=>null;function IP(n,e){return I4(n,e)}var BN=class{},gm=class{},qI=class{resolveComponentFactory(e){throw new Z(917,!1)}},th=class{static NULL=new qI},pa=class{},Zs=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>w4()}return n})();function w4(){let n=et(),e=mn(),t=cr(e.index,n);return(Zr(t)?t:n)[dt]}var $N=(()=>{class n{static \u0275prov=ie({token:n,providedIn:"root",factory:()=>null})}return n})();var zg={},zI=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,zg,r);return i!==zg||t===zg?i:this.parentInjector.get(e,t,r)}};function wP(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=ME(i,a);else if(s==2){let c=a,d=e[++o];r=ME(r,c+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function he(n,e=0){let t=et();if(t===null)return we(n,e);let r=mn();return KP(r,t,Xt(n),e)}function HN(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,d=null;for(let h of o)if(h.resolveHostDirectives!==null){[a,c,d]=h.resolveHostDirectives(o);break}C4(n,e,t,a,s,c,d)}s!==null&&r!==null&&T4(t,r,s)}function T4(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new Z(-301,!1);r.push(e[i],s)}}function b4(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function C4(n,e,t,r,i,s,o){let a=r.length,c=!1;for(let I=0;I<a;I++){let S=r[I];!c&&ei(S)&&(c=!0,b4(n,t,I)),xI(Qg(t,e),n,S.type)}N4(t,n.data.length,a);for(let I=0;I<a;I++){let S=r[I];S.providersResolver&&S.providersResolver(S)}let d=!1,h=!1,g=gN(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let I=0;I<a;I++){let S=r[I];if(t.mergedAttrs=Qd(t.mergedAttrs,S.hostAttrs),S4(n,t,e,g,S),P4(g,S,i),o!==null&&o.has(S)){let[U,O]=o.get(S);t.directiveToIndex.set(S.type,[g,U+t.directiveStart,O+t.directiveStart])}else(s===null||!s.has(S))&&t.directiveToIndex.set(S.type,g);S.contentQueries!==null&&(t.flags|=4),(S.hostBindings!==null||S.hostAttrs!==null||S.hostVars!==0)&&(t.flags|=64);let P=S.type.prototype;!d&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(P.ngOnChanges||P.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),g++}D4(n,t,s)}function D4(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))TP(0,e,i,r),TP(1,e,i,r),CP(e,r,!1);else{let s=t.get(i);bP(0,e,s,r),bP(1,e,s,r),CP(e,r,!0)}}}function TP(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),qN(e,s)}}function bP(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),qN(e,o)}}function qN(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function CP(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||tw(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let d=i[c];for(let h of d)if(h===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let d=s[c];for(let h=0;h<d.length;h+=2)if(d[h]===e){o??=[],o.push(d[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function S4(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=na(i.type,!0)),o=new fa(s,ei(i),he,null);n.blueprint[r]=o,t[r]=o,A4(n,e,r,gN(n,t,i.hostVars,ii),i)}function A4(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;R4(o)!=a&&o.push(a),o.push(t,r,s)}}function R4(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function P4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ei(e)&&(t[""]=n)}}function N4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function zN(n,e,t,r,i,s,o,a){let c=e[Ee],d=c.consts,h=$d(d,o),g=mw(c,n,t,r,h);return s&&HN(c,e,g,$d(d,a),i),g.mergedAttrs=Qd(g.mergedAttrs,g.attrs),g.attrs!==null&&wP(g,g.attrs,!1),g.mergedAttrs!==null&&wP(g,g.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,g),g}function GN(n,e){jP(n,e),ZE(e)&&n.queries.elementEnd(e)}function yw(n){return KN(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function WN(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function KN(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function ga(n,e,t){if(t===ii)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function x4(n,e,t,r){let i=ga(n,e,t);return ga(n,e+1,r)||i}function bI(n,e,t){return function r(i){let s=Qs(n)?cr(n.index,e):e;gw(s,5);let o=e[cn],a=DP(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=DP(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function DP(n,e,t,r){let i=ve(null);try{return Qe(6,e,t),t(r)!==!1}catch(s){return JB(n,s),!1}finally{Qe(7,e,t),ve(i)}}function M4(n,e,t,r,i,s,o,a){let c=Bd(n),d=!1,h=null;if(!r&&c&&(h=O4(e,t,s,n.index)),h!==null){let g=h.__ngLastListenerFn__||h;g.__ngNextListenerFn__=o,h.__ngLastListenerFn__=o,d=!0}else{let g=Ar(n,t),I=r?r(g):g;zj(t,I,s,a);let S=i.listen(I,s,a);if(!k4(s)){let P=r?U=>r(ar(U[n.index])):n.index;QN(P,e,t,s,a,S,!1)}}return d}function k4(n){return n.startsWith("animation")||n.startsWith("transition")}function O4(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[su],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function QN(n,e,t,r,i,s,o){let a=e.firstCreatePass?OR(e):null,c=kR(t),d=c.length;c.push(i,s),a&&a.push(r,n,d,(d+1)*(o?-1:1))}function SP(n,e,t,r,i,s){let o=e[t],a=e[Ee],d=a.data[t].outputs[r],g=o[d].subscribe(s);QN(n.index,a,e,i,s,g,!0)}var GI=Symbol("BINDING");var tm=class extends th{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Gs(e);return new gu(t,this.ngModule)}};function F4(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&dm.SignalBased)!==0};return i&&(s.transform=i),s})}function L4(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function V4(n,e,t){let r=e instanceof Vt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new zI(t,r):t}function U4(n){let e=n.get(pa,null);if(e===null)throw new Z(407,!1);let t=n.get($N,null),r=n.get(ki,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function j4(n,e){let t=YN(n);return dN(e,t,t==="svg"?eI:t==="math"?PR:null)}function YN(n){return(n.selectors[0][0]||"div").toLowerCase()}var gu=class extends gm{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=F4(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=L4(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=nB(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){Qe(22);let a=ve(null);try{let c=this.componentDef,d=B4(r,c,o,s),h=V4(c,i||this.ngModule,e),g=U4(h),I=g.rendererFactory.createRenderer(null,c),S=r?LB(I,r,c.encapsulation,h):j4(c,I),P=o?.some(AP)||s?.some(G=>typeof G!="function"&&G.bindings.some(AP)),U=rw(null,d,null,512|pN(c),null,null,g,I,h,null,sN(S,h,!0));U[qn]=S,Og(U);let O=null;try{let G=zN(qn,U,2,"#host",()=>d.directiveRegistry,!0,0);fN(I,S,G),fu(S,U),hw(d,U,G),aN(d,G,U),GN(d,G),t!==void 0&&H4(G,this.ngContentSelectors,t),O=cr(G.index,U),U[cn]=O[cn],pw(d,U,null)}catch(G){throw O!==null&&kI(O),kI(U),G}finally{Qe(23),Fg()}return new nm(this.componentType,U,!!P)}finally{ve(a)}}};function B4(n,e,t,r){let i=n?["ng-version","20.3.13"]:rB(e.selectors[0]),s=null,o=null,a=0;if(t)for(let h of t)a+=h[GI].requiredVars,h.create&&(h.targetIdx=0,(s??=[]).push(h)),h.update&&(h.targetIdx=0,(o??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let g=r[h];if(typeof g!="function")for(let I of g.bindings){a+=I[GI].requiredVars;let S=h+1;I.create&&(I.targetIdx=S,(s??=[]).push(I)),I.update&&(I.targetIdx=S,(o??=[]).push(I))}}let c=[e];if(r)for(let h of r){let g=typeof h=="function"?h:h.type,I=WE(g);c.push(I)}return nw(0,null,$4(s,o),1,a,c,null,null,null,[i],null)}function $4(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function AP(n){let e=n[GI].kind;return e==="input"||e==="twoWay"}var nm=class extends BN{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Ng(t[Ee],qn),this.location=am(this._tNode,t),this.instance=cr(this._tNode.index,t)[cn],this.hostView=this.changeDetectorRef=new Xs(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=fw(r,i[Ee],i,e,t);this.previousInputValues.set(e,t);let o=cr(r.index,i);gw(o,1)}get injector(){return new ha(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function H4(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var Ea=(()=>{class n{static __NG_ELEMENT_ID__=q4}return n})();function q4(){let n=mn();return G4(n,et())}var z4=Ea,JN=class extends z4{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return am(this._hostTNode,this._hostLView)}get injector(){return new ha(this._hostTNode,this._hostLView)}get parentInjector(){let e=JI(this._hostTNode,this._hostLView);if($P(e)){let t=Kg(e,this._hostLView),r=Wg(e),i=t[Ee].data[r+8];return new ha(i,t)}else return new ha(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=RP(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Rn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=IP(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,EP(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!yj(e),d;if(c)d=t;else{let O=t||{};d=O.index,r=O.injector,i=O.projectableNodes,s=O.environmentInjector||O.ngModuleRef,o=O.directives,a=O.bindings}let h=c?e:new gu(Gs(e)),g=r||this.parentInjector;if(!s&&h.ngModule==null){let G=(c?g:this.parentInjector).get(Vt,null);G&&(s=G)}let I=Gs(h.componentType??{}),S=IP(this._lContainer,I?.id??null),P=S?.firstChild??null,U=h.create(g,i,P,s,o,a);return this.insertImpl(U.hostView,d,EP(this._hostTNode,S)),U}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(NR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Zt],d=new JN(c,c[sr],c[Zt]);d.detach(d.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return p4(o,i,s,r),e.attachToViewContainerRef(),HE(CI(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=RP(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=HI(this._lContainer,t);r&&(xd(CI(this._lContainer),t),bN(r[Ee],r))}detach(e){let t=this._adjustIndex(e,-1),r=HI(this._lContainer,t);return r&&xd(CI(this._lContainer),t)!=null?new Xs(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function RP(n){return n[Ud]}function CI(n){return n[Ud]||(n[Ud]=[])}function G4(n,e){let t,r=e[n.index];return Sr(r)?t=r:(t=UN(r,e,null,n),e[n.index]=t,iw(e,t)),K4(t,e,n,r),new JN(t,n,e)}function W4(n,e){let t=n[dt],r=t.createComment(""),i=Ar(e,n),s=t.parentNode(i);return Jg(t,s,r,t.nextSibling(i),!1),r}var K4=J4,Q4=()=>!1;function Y4(n,e,t){return Q4(n,e,t)}function J4(n,e,t,r){if(n[Ks])return;let i;t.type&8?i=ar(r):i=W4(e,t),n[Ks]=i}var ma=class{},mm=class{};var rm=class extends ma{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new tm(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=GE(e);this._bootstrapComponents=uN(s.bootstrap),this._r3Injector=pI(e,t,[{provide:ma,useValue:this},{provide:th,useValue:this.componentFactoryResolver},...r],Mi(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},im=class extends mm{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new rm(this.moduleType,e,[])}};var Jd=class extends ma{injector;componentFactoryResolver=new tm(this);instance=null;constructor(e){super();let t=new ia([...e.providers,{provide:ma,useValue:this},{provide:th,useValue:this.componentFactoryResolver}],e.parent||kd(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function nh(n,e,t=null){return new Jd({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var X4=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=KE(!1,t.type),i=r.length>0?nh([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ie({token:n,providedIn:"environment",factory:()=>new n(we(Vt))})}return n})();function Kn(n){return yu(()=>{let e=XN(n),t=se(H({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===XI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(X4).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Li.Emulated,styles:n.styles||Bn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Zd("NgStandalone"),ZN(t);let r=n.dependencies;return t.directiveDefs=PP(r,Z4),t.pipeDefs=PP(r,wR),t.id=n3(t),t})}function Z4(n){return Gs(n)||WE(n)}function ji(n){return yu(()=>({type:n.type,bootstrap:n.bootstrap||Bn,declarations:n.declarations||Bn,imports:n.imports||Bn,exports:n.exports||Bn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function e3(n,e){if(n==null)return zs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=dm.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function t3(n){if(n==null)return zs;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function tt(n){return yu(()=>{let e=XN(n);return ZN(e),e})}function XN(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||zs,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Bn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:e3(n.inputs,e),outputs:t3(n.outputs),debugInfo:null}}function ZN(n){n.features?.forEach(e=>e(n))}function PP(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function n3(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function r3(n){return Object.getPrototypeOf(n.prototype).constructor}function en(n){let e=r3(n.type),t=!0,r=[n];for(;e;){let i;if(ei(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Z(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=DI(n.inputs),o.declaredInputs=DI(n.declaredInputs),o.outputs=DI(n.outputs);let a=i.hostBindings;a&&c3(n,a);let c=i.viewQuery,d=i.contentQueries;if(c&&o3(n,c),d&&a3(n,d),i3(n,i),pR(n.outputs,i.outputs),ei(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===en&&(t=!1)}}e=Object.getPrototypeOf(e)}s3(r)}function i3(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function s3(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Qd(i.hostAttrs,t=Qd(t,i.hostAttrs))}}function DI(n){return n===zs?{}:n===Bn?[]:n}function o3(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function a3(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function c3(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function u3(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=Qd(n.mergedAttrs,n.attrs);let h=n.tView=nw(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),uu(n,!1);let c=d3(t,e,n,r);Vg()&&lw(t,e,c,n),fu(c,e);let d=UN(c,e,c,n);e[r+qn]=d,iw(e,d),Y4(d,n,e)}function l3(n,e,t,r,i,s,o,a,c,d,h){let g=t+qn,I;return e.firstCreatePass?(I=mw(e,g,4,o||null,a||null),sI()&&HN(e,n,I,$d(e.consts,d),RN),jP(e,I)):I=e.data[g],u3(I,n,e,t,r,i,s,c),Bd(I)&&hw(e,n,I),d!=null&&SN(n,I,h),I}function Pe(n,e,t,r,i,s,o,a){let c=et(),d=zn(),h=$d(d.consts,s);return l3(c,d,n,e,t,r,i,h,void 0,o,a),Pe}var d3=h3;function h3(n,e,t,r){return Ug(!0),e[dt].createComment("")}var _w=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var vw=new ee("");function eo(n){return!!n&&typeof n.then=="function"}function Ew(n){return!!n&&typeof n.subscribe=="function"}var ex=new ee("");var Iw=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=j(ex,{optional:!0})??[];injector=j(Tt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=Ut(this.injector,i);if(eo(s))t.push(s);else if(Ew(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ym=new ee("");function tx(){tE(()=>{let n="";throw new Z(600,n)})}function nx(n){return n.isBoundToModule}var f3=10;var Bi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=j(xn);afterRenderManager=j(cw);zonelessEnabled=j(zd);rootEffectScheduler=j(EI);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ft;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=j(ti);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ae(t=>!t))}constructor(){j(va,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=j(Vt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Tt.NULL){return this._injector.get(Ke).run(()=>{Qe(10);let o=t instanceof gm;if(!this._injector.get(Iw).done){let P="";throw new Z(405,P)}let c;o?c=t:c=this._injector.get(th).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let d=nx(c)?void 0:this._injector.get(ma),h=r||c.selector,g=c.create(i,[],h,d),I=g.location.nativeElement,S=g.injector.get(vw,null);return S?.registerApplication(I),g.onDestroy(()=>{this.detachView(g.hostView),Kd(this.components,g),S?.unregisterApplication(I)}),this._loadComponent(g),Qe(11,g),g})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Qe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(hm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Z(101,!1);let t=ve(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ve(t),this.afterTick.next(),Qe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(pa,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<f3;)Qe(14),this.synchronizeOnce(),Qe(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Hd(i))continue;let s=r&&!this.zonelessEnabled?0:1;ON(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Hd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Kd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(ym,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Kd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Z(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Kd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function _m(n,e,t,r){let i=et(),s=qd();if(ga(i,s,e)){let o=zn(),a=Lg();GB(a,i,n,e,t,r)}return _m}var $ie=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function X(n,e,t){let r=et(),i=qd();if(ga(r,i,e)){let s=zn(),o=Lg();AN(o,r,n,e,r[dt],t)}return X}function NP(n,e,t,r,i){fw(e,n,t,i?"class":"style",r)}function k(n,e,t,r){let i=et(),s=i[Ee],o=n+qn,a=s.firstCreatePass?zN(o,i,2,e,RN,sI(),t,r):s.data[o];if(QB(a,i,n,e,p3),Bd(a)){let c=i[Ee];hw(c,i,a),aN(c,a,i)}return r!=null&&SN(i,a),k}function M(){let n=zn(),e=mn(),t=YB(e);return n.firstCreatePass&&GN(n,t),jR(t)&&BR(),VR(),t.classesWithoutHost!=null&&Tj(t)&&NP(n,t,et(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&bj(t)&&NP(n,t,et(),t.stylesWithoutHost,!1),M}function je(n,e,t,r){return k(n,e,t,r),M(),je}var p3=(n,e,t,r,i)=>(Ug(!0),dN(e[dt],r,eP()));function kr(){return et()}var rh="en-US";var g3=rh;function rx(n){typeof n=="string"&&(g3=n.toLowerCase().replace(/_/g,"-"))}function Be(n,e,t){let r=et(),i=zn(),s=mn();return ix(i,r,r[dt],s,n,e,t),Be}function ix(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=bI(r,e,s),M4(r,n,e,o,t,i,s,c)&&(a=!1)),a){let d=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let g=0;g<h.length;g+=2){let I=h[g],S=h[g+1];c??=bI(r,e,s),SP(r,e,I,S,i,c)}if(d&&d.length)for(let g of d)c??=bI(r,e,s),SP(r,e,g,i,i,c)}}function Ye(n=1){return ZR(n)}function $g(n,e){return n<<17|e<<2}function ya(n){return n>>17&32767}function m3(n){return(n&2)==2}function y3(n,e){return n&131071|e<<17}function WI(n){return n|2}function mu(n){return(n&131068)>>2}function SI(n,e){return n&-131069|e<<2}function _3(n){return(n&1)===1}function KI(n){return n|1}function v3(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ya(o),c=mu(o);n[r]=t;let d=!1,h;if(Array.isArray(t)){let g=t;h=g[1],(h===null||iu(g,h)>0)&&(d=!0)}else h=t;if(i)if(c!==0){let I=ya(n[a+1]);n[r+1]=$g(I,a),I!==0&&(n[I+1]=SI(n[I+1],r)),n[a+1]=y3(n[a+1],r)}else n[r+1]=$g(a,0),a!==0&&(n[a+1]=SI(n[a+1],r)),a=r;else n[r+1]=$g(c,0),a===0?a=r:n[c+1]=SI(n[c+1],r),c=r;d&&(n[r+1]=WI(n[r+1])),xP(n,h,r,!0),xP(n,h,r,!1),E3(e,h,n,r,s),o=$g(a,c),s?e.classBindings=o:e.styleBindings=o}function E3(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&iu(s,e)>=0&&(t[r+1]=KI(t[r+1]))}function xP(n,e,t,r){let i=n[t+1],s=e===null,o=r?ya(i):mu(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],d=n[o+1];I3(c,e)&&(a=!0,n[o+1]=r?KI(d):WI(d)),o=r?ya(d):mu(d)}a&&(n[t+1]=r?WI(i):KI(i))}function I3(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?iu(n,e)>=0:!1}function _u(n,e,t){return sx(n,e,t,!1),_u}function vt(n,e){return sx(n,e,null,!0),vt}function sx(n,e,t,r){let i=et(),s=zn(),o=lI(2);if(s.firstUpdatePass&&T3(s,n,o,r),e!==ii&&ga(i,o,e)){let a=s.data[Ys()];A3(s,a,i,i[dt],n,i[o+1]=R3(e,t),r,o)}}function w3(n,e){return e>=n.expandoStartIndex}function T3(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Ys()],o=w3(n,t);P3(s,r)&&e===null&&!o&&(e=!1),e=b3(i,s,e,r),v3(i,s,e,t,o,r)}}function b3(n,e,t,r){let i=QR(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=AI(null,n,e,t,r),t=Xd(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=AI(i,n,e,t,r),s===null){let c=C3(n,e,r);c!==void 0&&Array.isArray(c)&&(c=AI(null,n,e,c[1],r),c=Xd(c,e.attrs,r),D3(n,e,r,c))}else s=S3(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function C3(n,e,t){let r=t?e.classBindings:e.styleBindings;if(mu(r)!==0)return n[ya(r)]}function D3(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ya(i)]=r}function S3(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Xd(r,o,t)}return Xd(r,e.attrs,t)}function AI(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Xd(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Xd(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),IR(n,o,t?!0:e[++s]))}return n===void 0?null:n}function A3(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,d=c[a+1],h=_3(d)?MP(c,e,t,i,mu(d),o):void 0;if(!sm(h)){sm(s)||m3(d)&&(s=MP(c,null,t,i,a,o));let g=tI(Ys(),t);FB(r,o,g,i,s)}}function MP(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],d=Array.isArray(c),h=d?c[1]:c,g=h===null,I=t[i+1];I===ii&&(I=g?Bn:void 0);let S=g?Rg(I,r):h===r?I:void 0;if(d&&!sm(S)&&(S=Rg(c,r)),sm(S)&&(a=S,o))return a;let P=n[i+1];i=o?ya(P):mu(P)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Rg(c,r))}return a}function sm(n){return n!==void 0}function R3(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Mi(cN(n)))),n}function P3(n,e){return(n.flags&(e?8:16))!==0}function V(n,e=""){let t=et(),r=zn(),i=n+qn,s=r.firstCreatePass?mw(r,i,1,e,null):r.data[i],o=N3(r,t,s,e,n);t[i]=o,Vg()&&lw(r,t,o,s),uu(s,!1)}var N3=(n,e,t,r,i)=>(Ug(!0),iB(e[dt],r));function x3(n,e,t,r=""){return ga(n,qd(),t)?e+ru(t)+r:ii}function M3(n,e,t,r,i,s=""){let o=qR(),a=x4(n,o,t,i);return lI(2),a?e+ru(t)+r+ru(i)+s:ii}function He(n){return at("",n),He}function at(n,e,t){let r=et(),i=x3(r,n,e,t);return i!==ii&&ox(r,Ys(),i),at}function vu(n,e,t,r,i){let s=et(),o=M3(s,n,e,t,r,i);return o!==ii&&ox(s,Ys(),o),vu}function ox(n,e,t){let r=tI(e,n);sB(n[dt],r,t)}function Eu(n,e,t){yI(e)&&(e=e());let r=et(),i=qd();if(ga(r,i,e)){let s=zn(),o=Lg();AN(o,r,n,e,r[dt],t)}return Eu}function ih(n,e){let t=yI(n);return t&&n.set(e),t}function Iu(n,e){let t=et(),r=zn(),i=mn();return ix(r,t,t[dt],i,n,e),Iu}function k3(n,e,t){let r=zn();if(r.firstCreatePass){let i=ei(n);QI(t,r.data,r.blueprint,i,!0),QI(e,r.data,r.blueprint,i,!1)}}function QI(n,e,t,r,i){if(n=Xt(n),Array.isArray(n))for(let s=0;s<n.length;s++)QI(n[s],e,t,r,i);else{let s=zn(),o=et(),a=mn(),c=ra(n)?n:Xt(n.provide),d=YE(n),h=a.providerIndexes&1048575,g=a.directiveStart,I=a.providerIndexes>>20;if(ra(n)||!n.multi){let S=new fa(d,i,he,null),P=PI(c,e,i?h:h+I,g);P===-1?(xI(Qg(a,o),s,c),RI(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(S),o.push(S)):(t[P]=S,o[P]=S)}else{let S=PI(c,e,h+I,g),P=PI(c,e,h,h+I),U=S>=0&&t[S],O=P>=0&&t[P];if(i&&!O||!i&&!U){xI(Qg(a,o),s,c);let G=L3(i?F3:O3,t.length,i,r,d,n);!i&&O&&(t[P].providerFactory=G),RI(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(G),o.push(G)}else{let G=ax(t[i?P:S],d,!i&&r);RI(s,n,S>-1?S:P,G)}!i&&r&&O&&t[P].componentProviders++}}}function RI(n,e,t,r){let i=ra(e),s=SR(e);if(i||s){let c=(s?Xt(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=d.indexOf(t);h===-1?d.push(t,[r,c]):d[h+1].push(r,c)}else d.push(t,c)}}}function ax(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function PI(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function O3(n,e,t,r,i){return YI(this.multi,[])}function F3(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Yg(r,r[Ee],this.providerFactory.index,i);o=c.slice(0,a),YI(s,o);for(let d=a;d<c.length;d++)o.push(c[d])}else o=[],YI(s,o);return o}function YI(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function L3(n,e,t,r,i,s){let o=new fa(n,t,he,null);return o.multi=[],o.index=e,o.componentProviders=0,ax(o,i,r&&!t),o}function ur(n,e=[]){return t=>{t.providersResolver=(r,i)=>k3(r,i?i(n):n,e)}}var om=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},ww=(()=>{class n{compileModuleSync(t){return new im(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=GE(t),s=uN(i.declarations).reduce((o,a)=>{let c=Gs(a);return c&&o.push(new gu(c)),o},[]);return new om(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var V3=(()=>{class n{zone=j(Ke);changeDetectionScheduler=j(ki);applicationRef=j(Bi);applicationErrorHandler=j(xn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cx=new ee("",{factory:()=>!1});function Tw({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ke(se(H({},Cw()),{scheduleInRootZone:t})),[{provide:Ke,useFactory:n},{provide:Oi,multi:!0,useFactory:()=>{let r=j(V3,{optional:!0});return()=>r.initialize()}},{provide:Oi,multi:!0,useFactory:()=>{let r=j(U3);return()=>{r.initialize()}}},e===!0?{provide:_I,useValue:!0}:[],{provide:vI,useValue:t??yN},{provide:xn,useFactory:()=>{let r=j(Ke),i=j(Vt),s;return o=>{r.runOutsideAngular(()=>{i.destroyed&&!s?setTimeout(()=>{throw o}):(s??=i.get(Cr),s.handleError(o))})}}}]}function bw(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=Tw({ngZoneFactory:()=>{let i=Cw(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Zd("NgZone_CoalesceEvent"),new Ke(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return $n([{provide:cx,useValue:!0},{provide:zd,useValue:!1},r])}function Cw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var U3=(()=>{class n{subscription=new lt;initialized=!1;zone=j(Ke);pendingTasks=j(ti);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ke.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ke.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ux=(()=>{class n{applicationErrorHandler=j(xn);appRef=j(Bi);taskService=j(ti);ngZone=j(Ke);zonelessEnabled=j(zd);tracing=j(va,{optional:!0});disableScheduling=j(_I,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new lt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Xg):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(vI,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Zg||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?pP:_N;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Xg+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,pP(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function j3(){return typeof $localize<"u"&&$localize.locale||rh}var vm=new ee("",{providedIn:"root",factory:()=>j(vm,{optional:!0,skipSelf:!0})||j3()});function tn(n){return dR(n)}function wu(n,e){return Wp(n,e?.equal)}var lx=class{[an];constructor(e){this[an]=e}destroy(){this[an].destroy()}};var px=Symbol("InputSignalNode#UNSET"),r6=se(H({},Kp),{transformFn:void 0,applyValueToInputSignal(n,e){jc(n,e)}});function gx(n,e){let t=Object.create(r6);t.value=n,t.transformFn=e?.transform;function r(){if(Lc(t),t.value===px){let i=null;throw new Z(-950,i)}return t.value}return r[an]=t,r}var i6=new ee("");i6.__NG_ELEMENT_ID__=n=>{let e=mn();if(e===null)throw new Z(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new Z(204,!1)};function dx(n,e){return gx(n,e)}function s6(n){return gx(px,n)}var mx=(dx.required=s6,dx);var Dw=new ee(""),o6=new ee("");function sh(n){return!n.moduleRef}function a6(n){let e=sh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ke);return t.run(()=>{sh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(xn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),sh(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Dw);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Dw);o.add(s),n.moduleRef.onDestroy(()=>{Kd(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return u6(r,t,()=>{let s=e.get(ti),o=s.add(),a=e.get(Iw);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(vm,rh);if(rx(c||rh),!e.get(o6,!0))return sh(n)?e.get(Bi):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(sh(n)){let h=e.get(Bi);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return c6?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var c6;function u6(n,e,t){try{let r=t();return eo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Em=null;function l6(n=[],e){return Tt.create({name:e,providers:[{provide:Md,useValue:"platform"},{provide:Dw,useValue:new Set([()=>Em=null])},...n]})}function d6(n=[]){if(Em)return Em;let e=l6(n);return Em=e,tx(),h6(e),e}function h6(n){let e=n.get(um,null);Ut(n,()=>{e?.forEach(t=>t())})}function Nw(){return!1}var Tu=(()=>{class n{static __NG_ELEMENT_ID__=f6}return n})();function f6(n){return p6(mn(),et(),(n&16)===16)}function p6(n,e,t){if(Qs(n)&&!t){let r=cr(n.index,e);return new Xs(r,r)}else if(n.type&175){let r=e[or];return new Xs(r,e)}return null}var Sw=class{constructor(){}supports(e){return yw(e)}create(e){return new Aw(e)}},g6=(n,e)=>e,Aw=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||g6}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<hx(r,i,s)?t:r,a=hx(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let d=a-i,h=c-i;if(d!=h){for(let I=0;I<d;I++){let S=I<s.length?s[I]:s[I]=0,P=S+I;h<=P&&P<d&&(s[I]=S+1)}let g=o.previousIndex;s[g]=h-d}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!yw(e))throw new Z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,WN(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Rw(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Im),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Im),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Rw=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Pw=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Im=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Pw,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function hx(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function fx(){return new xw([new Sw])}var xw=(()=>{class n{factories;static \u0275prov=ie({token:n,providedIn:"root",factory:fx});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=j(n,{optional:!0,skipSelf:!0});return n.create(t,r||fx())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Z(901,!1)}}return n})();function yx(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Qe(8);try{let s=i?.injector??d6(r),o=[Tw({}),{provide:ki,useExisting:ux},nP,...t||[]],a=new Jd({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return a6({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{Qe(9)}}function Mw(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var Ex=null;function lr(){return Ex}function kw(n){Ex??=n}var ah=class{},Ow=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>j(Ix),providedIn:"platform"})}return n})();var Ix=(()=>{class n extends Ow{_location;_history;_doc=j(zt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return lr().getBaseHref(this._doc)}onPopState(t){let r=lr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=lr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function wx(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function _x(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function to(n){return n&&n[0]!=="?"?`?${n}`:n}var wm=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>j(bx),providedIn:"root"})}return n})(),Tx=new ee(""),bx=(()=>{class n extends wm{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(zt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return wx(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+to(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+to(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+to(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(we(Ow),we(Tx,8))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bu=(()=>{class n{_subject=new Ft;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=_6(_x(vx(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+to(r))}normalize(t){return n.stripTrailingSlash(y6(this._basePath,vx(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+to(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+to(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=to;static joinWithSlash=wx;static stripTrailingSlash=_x;static \u0275fac=function(r){return new(r||n)(we(wm))};static \u0275prov=ie({token:n,factory:()=>m6(),providedIn:"root"})}return n})();function m6(){return new bu(we(wm))}function y6(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function vx(n){return n.replace(/\/index.html$/,"")}function _6(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Fw=/\s+/,Cx=[],ch=(()=>{class n{_ngEl;_renderer;initialClasses=Cx;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(Fw):Cx}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Fw):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Fw).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(he(Ui),he(Zs))};static \u0275dir=tt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Tm=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},no=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Tm(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),Dx(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);Dx(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(he(Ea),he(eh),he(xw))};static \u0275dir=tt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Dx(n,e){n.context.$implicit=e.item}var $i=(()=>{class n{_viewContainer;_context=new bm;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Sx(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Sx(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(he(Ea),he(eh))};static \u0275dir=tt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),bm=class{$implicit=null;ngIf=null};function Sx(n,e){if(n&&!n.createEmbeddedView)throw new Z(2020,!1)}var si=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ji({type:n});static \u0275inj=Xr({})}return n})();function Lw(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var uh=class{};var Ax="browser";var lh=class{_doc;constructor(e){this._doc=e}manager},Dm=(()=>{class n extends lh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(we(zt))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),Am=new ee(""),$w=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof Dm));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof Dm);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new Z(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(we(Am),we(Ke))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),Vw="ng-app-id";function Rx(n){for(let e of n)e.remove()}function Px(n,e){let t=e.createElement("style");return t.textContent=n,t}function v6(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Vw}="${e}"],link[${Vw}="${e}"]`);if(i)for(let s of i)s.removeAttribute(Vw),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function jw(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Hw=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,v6(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Px);r?.forEach(i=>this.addUsage(i,this.external,jw))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Rx(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Rx(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Px(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,jw(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(we(zt),we(cm),we(lm,8),we(_a))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),Uw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},qw=/%COMP%/g;var xx="%COMP%",E6=`_nghost-${xx}`,I6=`_ngcontent-${xx}`,w6=!0,T6=new ee("",{providedIn:"root",factory:()=>w6});function b6(n){return I6.replace(qw,n)}function C6(n){return E6.replace(qw,n)}function Mx(n,e){return e.map(t=>t.replace(qw,n))}var zw=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=d,this.platformIsServer=!1,this.defaultRenderer=new dh(t,o,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Sm?i.applyToHost(t):i instanceof hh&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer,I=this.tracingService;switch(r.encapsulation){case Li.Emulated:s=new Sm(c,d,r,this.appId,h,o,a,g,I);break;case Li.ShadowDom:return new Bw(c,d,t,r,o,a,this.nonce,g,I);default:s=new hh(c,d,r,h,o,a,g,I);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(we($w),we(Hw),we(cm),we(T6),we(zt),we(Ke),we(lm),we(va,8))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),dh=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Uw[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Nx(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Nx(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Z(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Uw[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Uw[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ri.DashCase|ri.Important)?e.style.setProperty(t,r,i&ri.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ri.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=lr().getGlobalEventTarget(this.doc,e),!e))throw new Z(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function Nx(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Bw=class extends dh{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,s,o,a,c,d){super(e,s,o,c,d),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=Mx(i.id,h);for(let I of h){let S=document.createElement("style");a&&S.setAttribute("nonce",a),S.textContent=I,this.shadowRoot.appendChild(S)}let g=i.getExternalStyles?.();if(g)for(let I of g){let S=jw(I,s);a&&S.setAttribute("nonce",a),this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},hh=class extends dh{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,d){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=d?Mx(d,h):h,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&pu.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Sm=class extends hh{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,d){let h=i+"-"+r.id;super(e,t,r,s,o,a,c,d,h),this.contentAttr=b6(h),this.hostAttr=C6(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Rm=class n extends ah{supportsDOMEvents=!0;static makeCurrent(){kw(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=D6();return t==null?null:S6(t)}resetBaseElement(){fh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Lw(document.cookie,e)}},fh=null;function D6(){return fh=fh||document.head.querySelector("base"),fh?fh.getAttribute("href"):null}function S6(n){return new URL(n,document.baseURI).pathname}var A6=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),kx=["alt","control","meta","shift"],R6={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},P6={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Ox=(()=>{class n extends lh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>lr().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),kx.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=R6[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),kx.forEach(o=>{if(o!==i){let a=P6[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(we(zt))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})();function Gw(n,e,t){let r=H({rootComponent:n,platformRef:t?.platformRef},N6(e));return yx(r)}function N6(n){return{appProviders:[...F6,...n?.providers??[]],platformProviders:O6}}function x6(){Rm.makeCurrent()}function M6(){return new Cr}function k6(){return ZI(document),document}var O6=[{provide:_a,useValue:Ax},{provide:um,useValue:x6,multi:!0},{provide:zt,useFactory:k6}];var F6=[{provide:Md,useValue:"root"},{provide:Cr,useFactory:M6},{provide:Am,useClass:Dm,multi:!0,deps:[zt]},{provide:Am,useClass:Ox,multi:!0,deps:[zt]},zw,Hw,$w,{provide:pa,useExisting:zw},{provide:uh,useClass:A6},[]];var Fx=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(we(zt))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ge="primary",Ah=Symbol("RouteTitle"),Jw=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ta(n){return new Jw(n)}function qx(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function V6(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!oi(n[t],e[t]))return!1;return!0}function oi(n,e){let t=n?Xw(n):void 0,r=e?Xw(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!zx(n[i],e[i]))return!1;return!0}function Xw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function zx(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function Gx(n){return n.length>0?n[n.length-1]:null}function zi(n){return mE(n)?n:eo(n)?ot(Promise.resolve(n)):de(n)}var U6={exact:Kx,subset:Qx},Wx={exact:j6,subset:B6,ignored:()=>!0};function Lx(n,e,t){return U6[t.paths](n.root,e.root,t.matrixParams)&&Wx[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function j6(n,e){return oi(n,e)}function Kx(n,e,t){if(!Ia(n.segments,e.segments)||!xm(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Kx(n.children[r],e.children[r],t))return!1;return!0}function B6(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>zx(n[t],e[t]))}function Qx(n,e,t){return Yx(n,e,e.segments,t)}function Yx(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ia(i,t)||e.hasChildren()||!xm(i,t,r))}else if(n.segments.length===t.length){if(!Ia(n.segments,t)||!xm(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Qx(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Ia(n.segments,i)||!xm(n.segments,i,r)||!n.children[ge]?!1:Yx(n.children[ge],e,s,r)}}function xm(n,e,t){return e.every((r,i)=>Wx[t](n[i].parameters,r.parameters))}var ci=class{root;queryParams;fragment;_queryParamMap;constructor(e=new qe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ta(this.queryParams),this._queryParamMap}toString(){return q6.serialize(this)}},qe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mm(this)}},ro=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ta(this.parameters),this._parameterMap}toString(){return Xx(this)}};function $6(n,e){return Ia(n,e)&&n.every((t,r)=>oi(t.parameters,e[r].parameters))}function Ia(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function H6(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ge&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ge&&(t=t.concat(e(i,r)))}),t}var Rh=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>new ba,providedIn:"root"})}return n})(),ba=class{parse(e){let t=new eT(e);return new ci(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ph(e.root,!0)}`,r=W6(e.queryParams),i=typeof e.fragment=="string"?`#${z6(e.fragment)}`:"";return`${t}${r}${i}`}},q6=new ba;function Mm(n){return n.segments.map(e=>Xx(e)).join("/")}function ph(n,e){if(!n.hasChildren())return Mm(n);if(e){let t=n.children[ge]?ph(n.children[ge],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==ge&&r.push(`${i}:${ph(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=H6(n,(r,i)=>i===ge?[ph(n.children[ge],!1)]:[`${i}:${ph(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ge]!=null?`${Mm(n)}/${t[0]}`:`${Mm(n)}/(${t.join("//")})`}}function Jx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pm(n){return Jx(n).replace(/%3B/gi,";")}function z6(n){return encodeURI(n)}function Zw(n){return Jx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function km(n){return decodeURIComponent(n)}function Vx(n){return km(n.replace(/\+/g,"%20"))}function Xx(n){return`${Zw(n.path)}${G6(n.parameters)}`}function G6(n){return Object.entries(n).map(([e,t])=>`;${Zw(e)}=${Zw(t)}`).join("")}function W6(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Pm(t)}=${Pm(i)}`).join("&"):`${Pm(t)}=${Pm(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var K6=/^[^\/()?;#]+/;function Ww(n){let e=n.match(K6);return e?e[0]:""}var Q6=/^[^\/()?;=#]+/;function Y6(n){let e=n.match(Q6);return e?e[0]:""}var J6=/^[^=?&#]+/;function X6(n){let e=n.match(J6);return e?e[0]:""}var Z6=/^[^&#]+/;function e$(n){let e=n.match(Z6);return e?e[0]:""}var eT=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new qe([],{}):new qe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ge]=new qe(e,t)),r}parseSegment(){let e=Ww(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Z(4009,!1);return this.capture(e),new ro(km(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Y6(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ww(this.remaining);i&&(r=i,this.capture(r))}e[km(t)]=km(r)}parseQueryParam(e){let t=X6(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=e$(this.remaining);o&&(r=o,this.capture(r))}let i=Vx(t),s=Vx(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ww(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Z(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ge);let o=this.parseChildren();t[s??ge]=Object.keys(o).length===1&&o[ge]?o[ge]:new qe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Z(4011,!1)}};function Zx(n){return n.segments.length>0?new qe([],{[ge]:n}):n}function eM(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=eM(i);if(r===ge&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new qe(n.segments,e);return t$(t)}function t$(n){if(n.numberOfChildren===1&&n.children[ge]){let e=n.children[ge];return new qe(n.segments.concat(e.segments),e.children)}return n}function Ru(n){return n instanceof ci}function tM(n,e,t=null,r=null){let i=nM(n);return rM(i,e,t,r)}function nM(n){let e;function t(s){let o={};for(let c of s.children){let d=t(c);o[c.outlet]=d}let a=new qe(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=Zx(r);return e??i}function rM(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Kw(i,i,i,t,r);let s=n$(e);if(s.toRoot())return Kw(i,i,new qe([],{}),t,r);let o=r$(s,i,n),a=o.processChildren?mh(o.segmentGroup,o.index,s.commands):sM(o.segmentGroup,o.index,s.commands);return Kw(i,o.segmentGroup,a,t,r)}function Om(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function vh(n){return typeof n=="object"&&n!=null&&n.outlets}function Kw(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,d])=>{s[c]=Array.isArray(d)?d.map(h=>`${h}`):`${d}`});let o;n===e?o=t:o=iM(n,e,t);let a=Zx(eM(o));return new ci(a,s,i)}function iM(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=iM(s,e,t)}),new qe(n.segments,r)}var Fm=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Om(r[0]))throw new Z(4003,!1);let i=r.find(vh);if(i&&i!==Gx(r))throw new Z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function n$(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Fm(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Fm(t,e,r)}var Su=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function r$(n,e,t){if(n.isAbsolute)return new Su(e,!0,0);if(!t)return new Su(e,!1,NaN);if(t.parent===null)return new Su(t,!0,0);let r=Om(n.commands[0])?0:1,i=t.segments.length-1+r;return i$(t,i,n.numberOfDoubleDots)}function i$(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Z(4005,!1);i=r.segments.length}return new Su(r,!1,i-s)}function s$(n){return vh(n[0])?n[0].outlets:{[ge]:n}}function sM(n,e,t){if(n??=new qe([],{}),n.segments.length===0&&n.hasChildren())return mh(n,e,t);let r=o$(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new qe(n.segments.slice(0,r.pathIndex),{});return s.children[ge]=new qe(n.segments.slice(r.pathIndex),n.children),mh(s,0,i)}else return r.match&&i.length===0?new qe(n.segments,{}):r.match&&!n.hasChildren()?tT(n,e,t):r.match?mh(n,0,i):tT(n,e,t)}function mh(n,e,t){if(t.length===0)return new qe(n.segments,{});{let r=s$(t),i={};if(Object.keys(r).some(s=>s!==ge)&&n.children[ge]&&n.numberOfChildren===1&&n.children[ge].segments.length===0){let s=mh(n.children[ge],e,t);return new qe(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=sM(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new qe(n.segments,i)}}function o$(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(vh(a))break;let c=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!jx(c,d,o))return s;r+=2}else{if(!jx(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function tT(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(vh(s)){let c=a$(s.outlets);return new qe(r,c)}if(i===0&&Om(t[0])){let c=n.segments[e];r.push(new ro(c.path,Ux(t[0]))),i++;continue}let o=vh(s)?s.outlets[ge]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Om(a)?(r.push(new ro(o,Ux(a))),i+=2):(r.push(new ro(o,{})),i++)}return new qe(r,{})}function a$(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=tT(new qe([],{}),0,r))}),e}function Ux(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function jx(n,e,t){return n==t.path&&oi(e,t.parameters)}var yh="imperative",Gt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Gt||{}),Yn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Ca=class extends Yn{type=Gt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Hi=class extends Yn{urlAfterRedirects;type=Gt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},_n=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(_n||{}),Eh=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Eh||{}),ai=class extends Yn{reason;code;type=Gt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},qi=class extends Yn{reason;code;type=Gt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Pu=class extends Yn{error;target;type=Gt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ih=class extends Yn{urlAfterRedirects;state;type=Gt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lm=class extends Yn{urlAfterRedirects;state;type=Gt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vm=class extends Yn{urlAfterRedirects;state;shouldActivate;type=Gt.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Um=class extends Yn{urlAfterRedirects;state;type=Gt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jm=class extends Yn{urlAfterRedirects;state;type=Gt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bm=class{route;type=Gt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},$m=class{route;type=Gt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Hm=class{snapshot;type=Gt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qm=class{snapshot;type=Gt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zm=class{snapshot;type=Gt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gm=class{snapshot;type=Gt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var wh=class{},Nu=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function c$(n){return!(n instanceof wh)&&!(n instanceof Nu)}function u$(n,e){return n.providers&&!n._injector&&(n._injector=nh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Or(n){return n.outlet||ge}function l$(n,e){let t=n.filter(r=>Or(r)===e);return t.push(...n.filter(r=>Or(r)!==e)),t}function ku(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Wm=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ku(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ou(this.rootInjector)}},Ou=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Wm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(we(Vt))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Km=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=nT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=nT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=rT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return rT(e,this._root).map(t=>t.value)}};function nT(n,e){if(n===e.value)return e;for(let t of e.children){let r=nT(n,t);if(r)return r}return null}function rT(n,e){if(n===e.value)return[e];for(let t of e.children){let r=rT(n,t);if(r.length)return r.unshift(e),r}return[]}var Qn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Du(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Th=class extends Km{snapshot;constructor(e,t){super(e),this.snapshot=t,dT(this,e)}toString(){return this.snapshot.toString()}};function oM(n){let e=d$(n),t=new Jt([new ro("",{})]),r=new Jt({}),i=new Jt({}),s=new Jt({}),o=new Jt(""),a=new dr(t,r,s,o,i,ge,n,e.root);return a.snapshot=e.root,new Th(new Qn(a,[]),e)}function d$(n){let e={},t={},r={},s=new wa([],e,r,"",t,ge,n,null,{});return new bh("",new Qn(s,[]))}var dr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ae(d=>d[Ah]))??de(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ae(e=>Ta(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ae(e=>Ta(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Qm(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:H(H({},e.params),n.params),data:H(H({},e.data),n.data),resolve:H(H(H(H({},n.data),e.data),i?.data),n._resolvedData)}:r={params:H({},n.params),data:H({},n.data),resolve:H(H({},n.data),n._resolvedData??{})},i&&cM(i)&&(r.resolve[Ah]=i.title),r}var wa=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ah]}constructor(e,t,r,i,s,o,a,c,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ta(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ta(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},bh=class extends Km{url;constructor(e,t){super(t),this.url=e,dT(this,t)}toString(){return aM(this._root)}};function dT(n,e){e.value._routerState=n,e.children.forEach(t=>dT(n,t))}function aM(n){let e=n.children.length>0?` { ${n.children.map(aM).join(", ")} } `:"";return`${n.value}${e}`}function Qw(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,oi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),oi(e.params,t.params)||n.paramsSubject.next(t.params),V6(e.url,t.url)||n.urlSubject.next(t.url),oi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function iT(n,e){let t=oi(n.params,e.params)&&$6(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||iT(n.parent,e.parent))}function cM(n){return typeof n.title=="string"||n.title===null}var uM=new ee(""),Ph=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ge;activateEvents=new _t;deactivateEvents=new _t;attachEvents=new _t;detachEvents=new _t;routerOutletData=mx();parentContexts=j(Ou);location=j(Ea);changeDetector=j(Tu);inputBinder=j(Zm,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Z(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Z(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new sT(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=tt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Vi]})}return n})(),sT=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===dr?this.route:e===Ou?this.childContexts:e===uM?this.outletData:this.parent.get(e,t)}},Zm=new ee("");var hT=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Kn({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&je(0,"router-outlet")},dependencies:[Ph],encapsulation:2})}return n})();function fT(n){let e=n.children&&n.children.map(fT),t=e?se(H({},n),{children:e}):H({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ge&&(t.component=hT),t}function h$(n,e,t){let r=Ch(n,e._root,t?t._root:void 0);return new Th(r,e)}function Ch(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=f$(n,e,t);return new Qn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ch(n,a)),o}}let r=p$(e.value),i=e.children.map(s=>Ch(n,s));return new Qn(r,i)}}function f$(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ch(n,r,i);return Ch(n,r)})}function p$(n){return new dr(new Jt(n.url),new Jt(n.params),new Jt(n.queryParams),new Jt(n.fragment),new Jt(n.data),n.outlet,n.component,n)}var xu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},lM="ngNavigationCancelingError";function Ym(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ru(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=dM(!1,_n.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function dM(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[lM]=!0,t.cancellationCode=e,t}function g$(n){return hM(n)&&Ru(n.url)}function hM(n){return!!n&&n[lM]}var m$=(n,e,t,r)=>ae(i=>(new oT(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),oT=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Qw(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Du(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Du(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Du(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Du(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Gm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new qm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Qw(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Qw(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Jm=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Au=class{component;route;constructor(e,t){this.component=e,this.route=t}};function y$(n,e,t){let r=n._root,i=e?e._root:null;return gh(r,i,t,[r.value])}function _$(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Fu(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!OE(n)?n:e.get(n):r}function gh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Du(e);return n.children.forEach(o=>{v$(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>_h(a,t.getContext(o),i)),i}function v$(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=E$(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Jm(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?gh(n,e,a?a.children:null,r,i):gh(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Au(a.outlet.component,o))}else o&&_h(e,a,i),i.canActivateChecks.push(new Jm(r)),s.component?gh(n,null,a?a.children:null,r,i):gh(n,null,t,r,i);return i}function E$(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ia(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ia(n.url,e.url)||!oi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!iT(n,e)||!oi(n.queryParams,e.queryParams);case"paramsChange":default:return!iT(n,e)}}function _h(n,e,t){let r=Du(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?_h(o,e.children.getContext(s),t):_h(o,null,t):_h(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Au(e.outlet.component,i)):t.canDeactivateChecks.push(new Au(null,i)):t.canDeactivateChecks.push(new Au(null,i))}function Nh(n){return typeof n=="function"}function I$(n){return typeof n=="boolean"}function w$(n){return n&&Nh(n.canLoad)}function T$(n){return n&&Nh(n.canActivate)}function b$(n){return n&&Nh(n.canActivateChild)}function C$(n){return n&&Nh(n.canDeactivate)}function D$(n){return n&&Nh(n.canMatch)}function fM(n){return n instanceof Ri||n?.name==="EmptyError"}var Nm=Symbol("INITIAL_VALUE");function Mu(){return An(n=>_g(n.map(e=>e.pipe(Pi(1),Ig(Nm)))).pipe(ae(e=>{for(let t of e)if(t!==!0){if(t===Nm)return Nm;if(t===!1||S$(t))return t}return!0}),Un(e=>e!==Nm),Pi(1)))}function S$(n){return Ru(n)||n instanceof xu}function A$(n,e){return Lt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?de(se(H({},t),{guardsResult:!0})):R$(o,r,i,n).pipe(Lt(a=>a&&I$(a)?P$(r,s,n,e):de(a)),ae(a=>se(H({},t),{guardsResult:a})))})}function R$(n,e,t,r){return ot(n).pipe(Lt(i=>O$(i.component,i.route,t,e,r)),Ni(i=>i!==!0,!0))}function P$(n,e,t,r){return ot(e).pipe(Zc(i=>Xc(x$(i.route.parent,r),N$(i.route,r),k$(n,i.path,t),M$(n,i.route,t))),Ni(i=>i!==!0,!0))}function N$(n,e){return n!==null&&e&&e(new zm(n)),de(!0)}function x$(n,e){return n!==null&&e&&e(new Hm(n)),de(!0)}function M$(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return de(!0);let i=r.map(s=>Dd(()=>{let o=ku(e)??t,a=Fu(s,o),c=T$(a)?a.canActivate(e,n):Ut(o,()=>a(e,n));return zi(c).pipe(Ni())}));return de(i).pipe(Mu())}function k$(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>_$(o)).filter(o=>o!==null).map(o=>Dd(()=>{let a=o.guards.map(c=>{let d=ku(o.node)??t,h=Fu(c,d),g=b$(h)?h.canActivateChild(r,n):Ut(d,()=>h(r,n));return zi(g).pipe(Ni())});return de(a).pipe(Mu())}));return de(s).pipe(Mu())}function O$(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return de(!0);let o=s.map(a=>{let c=ku(e)??i,d=Fu(a,c),h=C$(d)?d.canDeactivate(n,e,t,r):Ut(c,()=>d(n,e,t,r));return zi(h).pipe(Ni())});return de(o).pipe(Mu())}function F$(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return de(!0);let s=i.map(o=>{let a=Fu(o,n),c=w$(a)?a.canLoad(e,t):Ut(n,()=>a(e,t));return zi(c)});return de(s).pipe(Mu(),pM(r))}function pM(n){return Zp(qt(e=>{if(typeof e!="boolean")throw Ym(n,e)}),ae(e=>e===!0))}function L$(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return de(!0);let s=i.map(o=>{let a=Fu(o,n),c=D$(a)?a.canMatch(e,t):Ut(n,()=>a(e,t));return zi(c)});return de(s).pipe(Mu(),pM(r))}var Dh=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Sh=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Cu(n){return Jc(new Dh(n))}function V$(n){return Jc(new Z(4e3,!1))}function U$(n){return Jc(dM(!1,_n.GuardRejected))}var aT=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return de(r);if(i.numberOfChildren>1||!i.children[ge])return V$(`${e.redirectTo}`);i=i.children[ge]}}applyRedirectCommands(e,t,r,i,s){return j$(t,i,s).pipe(ae(o=>{if(o instanceof ci)throw new Sh(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new Sh(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new ci(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new qe(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Z(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function j$(n,e,t){if(typeof n=="string")return de(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:d,data:h,title:g}=e;return zi(Ut(t,()=>r({params:d,data:h,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:g})))}var cT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function B$(n,e,t,r,i){let s=gM(n,e,t);return s.matched?(r=u$(e,r),L$(r,e,t,i).pipe(ae(o=>o===!0?s:H({},cT)))):de(s)}function gM(n,e,t){if(e.path==="**")return $$(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?H({},cT):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||qx)(t,n,e);if(!i)return H({},cT);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?H(H({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function $$(n){return{matched:!0,parameters:n.length>0?Gx(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Bx(n,e,t,r){return t.length>0&&z$(n,t,r)?{segmentGroup:new qe(e,q$(r,new qe(t,n.children))),slicedSegments:[]}:t.length===0&&G$(n,t,r)?{segmentGroup:new qe(n.segments,H$(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new qe(n.segments,n.children),slicedSegments:t}}function H$(n,e,t,r){let i={};for(let s of t)if(ey(n,e,s)&&!r[Or(s)]){let o=new qe([],{});i[Or(s)]=o}return H(H({},r),i)}function q$(n,e){let t={};t[ge]=e;for(let r of n)if(r.path===""&&Or(r)!==ge){let i=new qe([],{});t[Or(r)]=i}return t}function z$(n,e,t){return t.some(r=>ey(n,e,r)&&Or(r)!==ge)}function G$(n,e,t){return t.some(r=>ey(n,e,r))}function ey(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function W$(n,e,t){return e.length===0&&!n.children[t]}var uT=class{};function K$(n,e,t,r,i,s,o="emptyOnly"){return new lT(n,e,t,r,i,o,s).recognize()}var Q$=31,lT=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new aT(this.urlSerializer,this.urlTree)}noMatchError(e){return new Z(4002,`'${e.segmentGroup}'`)}recognize(){let e=Bx(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ae(({children:t,rootSnapshot:r})=>{let i=new Qn(r,t),s=new bh("",i),o=tM(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new wa([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ge,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ge,t).pipe(ae(r=>({children:r,rootSnapshot:t})),$s(r=>{if(r instanceof Sh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Dh?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(ae(o=>o instanceof Qn?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return ot(s).pipe(Zc(o=>{let a=r.children[o],c=l$(t,o);return this.processSegmentGroup(e,c,a,o,i)}),Eg((o,a)=>(o.push(...a),o)),Hs(null),_E(),Lt(o=>{if(o===null)return Cu(r);let a=mM(o);return Y$(a),de(a)}))}processSegment(e,t,r,i,s,o,a){return ot(t).pipe(Zc(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe($s(d=>{if(d instanceof Dh)return de(null);throw d}))),Ni(c=>!!c),$s(c=>{if(fM(c))return W$(r,i,s)?de(new uT):Cu(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return Or(r)!==o&&(o===ge||!ey(i,s,r))?Cu(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):Cu(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:d,consumedSegments:h,positionalParamSegments:g,remainingSegments:I}=gM(t,i,s);if(!c)return Cu(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Q$&&(this.allowRedirects=!1));let S=new wa(s,d,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,$x(i),Or(i),i.component??i._loadedComponent??null,i,Hx(i)),P=Qm(S,a,this.paramsInheritanceStrategy);return S.params=Object.freeze(P.params),S.data=Object.freeze(P.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,g,S,e).pipe(An(O=>this.applyRedirects.lineralizeSegments(i,O)),Lt(O=>this.processSegment(e,r,t,O.concat(I),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=B$(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(An(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(An(({routes:d})=>{let h=r._loadedInjector??e,{parameters:g,consumedSegments:I,remainingSegments:S}=c,P=new wa(I,g,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,$x(r),Or(r),r.component??r._loadedComponent??null,r,Hx(r)),U=Qm(P,o,this.paramsInheritanceStrategy);P.params=Object.freeze(U.params),P.data=Object.freeze(U.data);let{segmentGroup:O,slicedSegments:G}=Bx(t,I,S,d);if(G.length===0&&O.hasChildren())return this.processChildren(h,d,O,P).pipe(ae(re=>new Qn(P,re)));if(d.length===0&&G.length===0)return de(new Qn(P,[]));let ne=Or(r)===s;return this.processSegment(h,d,O,G,ne?ge:s,!0,P).pipe(ae(re=>new Qn(P,re instanceof Qn?[re]:[])))}))):Cu(t)))}getChildConfig(e,t,r){return t.children?de({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?de({routes:t._loadedRoutes,injector:t._loadedInjector}):F$(e,t,r,this.urlSerializer).pipe(Lt(i=>i?this.configLoader.loadChildren(e,t).pipe(qt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):U$(t))):de({routes:[],injector:e})}};function Y$(n){n.sort((e,t)=>e.value.outlet===ge?-1:t.value.outlet===ge?1:e.value.outlet.localeCompare(t.value.outlet))}function J$(n){let e=n.value.routeConfig;return e&&e.path===""}function mM(n){let e=[],t=new Set;for(let r of n){if(!J$(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=mM(r.children);e.push(new Qn(r.value,i))}return e.filter(r=>!t.has(r))}function $x(n){return n.data||{}}function Hx(n){return n.resolve||{}}function X$(n,e,t,r,i,s){return Lt(o=>K$(n,e,t,r,o.extractedUrl,i,s).pipe(ae(({state:a,tree:c})=>se(H({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function Z$(n,e){return Lt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return de(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let d of yM(c))o.add(d);let a=0;return ot(o).pipe(Zc(c=>s.has(c)?eH(c,r,n,e):(c.data=Qm(c,c.parent,n).resolve,de(void 0))),qt(()=>a++),eu(1),Lt(c=>a===o.size?de(t):Dn))})}function yM(n){let e=n.children.map(t=>yM(t)).flat();return[n,...e]}function eH(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!cM(i)&&(s[Ah]=i.title),Dd(()=>(n.data=Qm(n,n.parent,t).resolve,tH(s,n,e,r).pipe(ae(o=>(n._resolvedData=o,n.data=H(H({},n.data),o),null)))))}function tH(n,e,t,r){let i=Xw(n);if(i.length===0)return de({});let s={};return ot(i).pipe(Lt(o=>nH(n[o],e,t,r).pipe(Ni(),qt(a=>{if(a instanceof xu)throw Ym(new ba,a);s[o]=a}))),eu(1),ae(()=>s),$s(o=>fM(o)?Dn:Jc(o)))}function nH(n,e,t,r){let i=ku(e)??r,s=Fu(n,i),o=s.resolve?s.resolve(e,t):Ut(i,()=>s(e,t));return zi(o)}function Yw(n){return An(e=>{let t=n(e);return t?ot(t).pipe(ae(()=>e)):de(e)})}var pT=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ge);return r}getResolvedTitleForRoute(t){return t.data[Ah]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>j(_M),providedIn:"root"})}return n})(),_M=(()=>{class n extends pT{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(we(Fx))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xh=new ee("",{providedIn:"root",factory:()=>({})}),Mh=new ee(""),vM=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=j(ww);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return de(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=zi(Ut(t,()=>r.loadComponent())).pipe(ae(IM),An(wM),qt(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Sd(()=>{this.componentLoaders.delete(r)})),s=new Wc(i,()=>new Ft).pipe(Gc());return this.componentLoaders.set(r,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return de({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=EM(r,this.compiler,t,this.onLoadEndListener).pipe(Sd(()=>{this.childrenLoaders.delete(r)})),o=new Wc(s,()=>new Ft).pipe(Gc());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function EM(n,e,t,r){return zi(Ut(t,()=>n.loadChildren())).pipe(ae(IM),An(wM),Lt(i=>i instanceof mm||Array.isArray(i)?de(i):ot(e.compileModuleAsync(i))),ae(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(Mh,[],{optional:!0,self:!0}).flat()),{routes:o.map(fT),injector:s}}))}function rH(n){return n&&typeof n=="object"&&"default"in n}function IM(n){return rH(n)?n.default:n}function wM(n){return de(n)}var ty=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>j(iH),providedIn:"root"})}return n})(),iH=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),TM=new ee("");var bM=new ee(""),CM=(()=>{class n{currentNavigation=Gn(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Ft;transitionAbortWithErrorSubject=new Ft;configLoader=j(vM);environmentInjector=j(Vt);destroyRef=j(Nr);urlSerializer=j(Rh);rootContexts=j(Ou);location=j(bu);inputBindingEnabled=j(Zm,{optional:!0})!==null;titleStrategy=j(pT);options=j(xh,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=j(ty);createViewTransition=j(TM,{optional:!0});navigationErrorHandler=j(bM,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>de(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Bm(i)),r=i=>this.events.next(new $m(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;tn(()=>{this.transitions?.next(se(H({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new Jt(null),this.transitions.pipe(Un(r=>r!==null),An(r=>{let i=!1;return de(r).pipe(An(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",_n.SupersededByNewNavigation),Dn;this.currentTransition=r,this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?se(H({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>s.abortController.abort()});let o=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!o&&a!=="reload")return this.events.next(new qi(s.id,this.urlSerializer.serialize(s.rawUrl),"",Eh.IgnoredSameUrlNavigation)),s.resolve(!1),Dn;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return de(s).pipe(An(c=>(this.events.next(new Ca(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?Dn:Promise.resolve(c))),X$(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),qt(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=c.urlAfterRedirects,h));let d=new Ih(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}));if(o&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:c,extractedUrl:d,source:h,restoredState:g,extras:I}=s,S=new Ca(c,this.urlSerializer.serialize(d),h,g);this.events.next(S);let P=oM(this.rootComponentType).snapshot;return this.currentTransition=r=se(H({},s),{targetSnapshot:P,urlAfterRedirects:d,extras:se(H({},I),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(U=>(U.finalUrl=d,U)),de(r)}else return this.events.next(new qi(s.id,this.urlSerializer.serialize(s.extractedUrl),"",Eh.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Dn}),qt(s=>{let o=new Lm(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(o)}),ae(s=>(this.currentTransition=r=se(H({},s),{guards:y$(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),A$(this.environmentInjector,s=>this.events.next(s)),qt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Ym(this.urlSerializer,s.guardsResult);let o=new Vm(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(o)}),Un(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",_n.GuardRejected),!1)),Yw(s=>{if(s.guards.canActivateChecks.length!==0)return de(s).pipe(qt(o=>{let a=new Um(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),An(o=>{let a=!1;return de(o).pipe(Z$(this.paramsInheritanceStrategy,this.environmentInjector),qt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(o,"",_n.NoDataFromResolver)}}))}),qt(o=>{let a=new jm(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}))}),Yw(s=>{let o=a=>{let c=[];if(a.routeConfig?.loadComponent){let d=ku(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(d,a.routeConfig).pipe(qt(h=>{a.component=h}),ae(()=>{})))}for(let d of a.children)c.push(...o(d));return c};return _g(o(s.targetSnapshot.root)).pipe(Hs(null),Pi(1))}),Yw(()=>this.afterPreactivation()),An(()=>{let{currentSnapshot:s,targetSnapshot:o}=r,a=this.createViewTransition?.(this.environmentInjector,s.root,o.root);return a?ot(a).pipe(ae(()=>r)):de(r)}),ae(s=>{let o=h$(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=se(H({},s),{targetRouterState:o}),this.currentNavigation.update(a=>(a.targetRouterState=o,a)),r}),qt(()=>{this.events.next(new wh)}),m$(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Pi(1),wg(new fe(s=>{let o=r.abortController.signal,a=()=>s.next();return o.addEventListener("abort",a),()=>o.removeEventListener("abort",a)}).pipe(Un(()=>!i&&!r.targetRouterState),qt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",_n.Aborted)}))),qt({next:s=>{i=!0,this.lastSuccessfulNavigation=tn(this.currentNavigation),this.events.next(new Hi(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),wg(this.transitionAbortWithErrorSubject.pipe(qt(s=>{throw s}))),Sd(()=>{i||this.cancelNavigationTransition(r,"",_n.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),$s(s=>{if(this.destroyed)return r.resolve(!1),Dn;if(i=!0,hM(s))this.events.next(new ai(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),g$(s)?this.events.next(new Nu(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let o=new Pu(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let a=Ut(this.environmentInjector,()=>this.navigationErrorHandler?.(o));if(a instanceof xu){let{message:c,cancellationCode:d}=Ym(this.urlSerializer,a);this.events.next(new ai(r.id,this.urlSerializer.serialize(r.extractedUrl),c,d)),this.events.next(new Nu(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(o),s}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Dn}))}))}cancelNavigationTransition(t,r,i){let s=new ai(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=tn(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sH(n){return n!==yh}var DM=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>j(oH),providedIn:"root"})}return n})(),Xm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},oH=(()=>{class n extends Xm{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Mr(n)))(i||n)}})();static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),SM=(()=>{class n{urlSerializer=j(Rh);options=j(xh,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=j(bu);urlHandlingStrategy=j(ty);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ci;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof ci?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=oM(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>j(aH),providedIn:"root"})}return n})(),aH=(()=>{class n extends SM{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Ca?this.updateStateMemento():t instanceof qi?this.commitTransition(r):t instanceof Ih?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof wh?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof ai&&t.code!==_n.SupersededByNewNavigation&&t.code!==_n.Redirect?this.restoreHistory(r):t instanceof Pu?this.restoreHistory(r,!0):t instanceof Hi&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=H(H({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=H(H({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Mr(n)))(i||n)}})();static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gT(n,e){n.events.pipe(Un(t=>t instanceof Hi||t instanceof ai||t instanceof Pu||t instanceof qi),ae(t=>t instanceof Hi||t instanceof qi?0:(t instanceof ai?t.code===_n.Redirect||t.code===_n.SupersededByNewNavigation:!1)?2:1),Un(t=>t!==2),Pi(1)).subscribe(()=>{e()})}var cH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},uH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},vn=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=j(_w);stateManager=j(SM);options=j(xh,{optional:!0})||{};pendingTasks=j(ti);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=j(CM);urlSerializer=j(Rh);location=j(bu);urlHandlingStrategy=j(ty);injector=j(Vt);_events=new Ft;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=j(DM);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=j(Mh,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!j(Zm,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new lt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=tn(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof ai&&r.code!==_n.Redirect&&r.code!==_n.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Hi)this.navigated=!0;else if(r instanceof Nu){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=H({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||sH(i.source)},o);this.scheduleNavigation(a,yh,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}c$(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),yh,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=H({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(xn)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return tn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(fT),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=H(H({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let g;try{let I=i?i.snapshot:this.routerState.snapshot.root;g=nM(I)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return rM(g,t,h,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ru(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,yh,null,r)}navigate(t,r={skipLocationChange:!1}){return lH(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(nu(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=H({},cH):r===!1?i=H({},uH):i=r,Ru(t))return Lx(this.currentUrlTree,t,i);let s=this.parseUrl(t);return Lx(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,d;o?(a=o.resolve,c=o.reject,d=o.promise):d=new Promise((g,I)=>{a=g,c=I});let h=this.pendingTasks.add();return gT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lH(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Z(4008,!1)}var hH=new ee("");function mT(n,...e){return $n([{provide:Mh,multi:!0,useValue:n},[],{provide:dr,useFactory:fH,deps:[vn]},{provide:ym,multi:!0,useFactory:pH},e.map(t=>t.\u0275providers)])}function fH(n){return n.routerState.root}function pH(){let n=j(Tt);return e=>{let t=n.get(Bi);if(e!==t.components[0])return;let r=n.get(vn),i=n.get(gH);n.get(mH)===1&&r.initialNavigation(),n.get(yH,null,{optional:!0})?.setUpPreloading(),n.get(hH,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var gH=new ee("",{factory:()=>new Ft}),mH=new ee("",{providedIn:"root",factory:()=>1});var yH=new ee("");var AM=()=>{};var NM=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},vH=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ny={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,g=(s&3)<<4|a>>4,I=(a&15)<<2|d>>6,S=d&63;c||(S=64,o||(I=64)),r.push(t[h],t[g],t[I],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(NM(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):vH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||g==null)throw new _T;let I=s<<2|a>>4;if(r.push(I),d!==64){let S=a<<4&240|d>>2;if(r.push(S),g!==64){let P=d<<6&192|g;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},_T=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},EH=function(n){let e=NM(n);return ny.encodeByteArray(e,!0)},Oh=function(n){return EH(n).replace(/\./g,"")},ry=function(n){try{return ny.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ET(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var IH=()=>ET().__FIREBASE_DEFAULTS__,wH=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},TH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&ry(n[1]);return e&&JSON.parse(e)},iy=()=>{try{return AM()||IH()||wH()||TH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},IT=n=>{var e,t;return(t=(e=iy())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},xM=n=>{let e=IT(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},wT=()=>{var n;return(n=iy())===null||n===void 0?void 0:n.config},TT=n=>{var e;return(e=iy())===null||e===void 0?void 0:e[`_${n}`]};var Da=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function io(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function sy(n){return C(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function MM(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Oh(JSON.stringify(t)),Oh(JSON.stringify(o)),""].join(".")}var kh={};function bH(){let n={prod:[],emulator:[]};for(let e of Object.keys(kh))kh[e]?n.emulator.push(e):n.prod.push(e);return n}function CH(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var RM=!1;function oy(n,e){if(typeof window>"u"||typeof document>"u"||!io(window.location.host)||kh[n]===e||kh[n]||RM)return;kh[n]=e;function t(I){return`__firebase__banner__${I}`}let r="__firebase__banner",s=bH().prod.length>0;function o(){let I=document.getElementById(r);I&&I.remove()}function a(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function c(I,S){I.setAttribute("width","24"),I.setAttribute("id",S),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function d(){let I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{RM=!0,o()},I}function h(I,S){I.setAttribute("id",S),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function g(){let I=CH(r),S=t("text"),P=document.getElementById(S)||document.createElement("span"),U=t("learnmore"),O=document.getElementById(U)||document.createElement("a"),G=t("preprendIcon"),ne=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){let re=I.element;a(re),h(O,U);let Re=d();c(ne,G),re.append(ne,P,O,Re),document.body.appendChild(re)}s?(P.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function DH(){var n;let e=(n=iy())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function OM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FM(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function LM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VM(){let n=Wt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function UM(){return!DH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fh(){try{return typeof indexedDB=="object"}catch{return!1}}function jM(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var SH="FirebaseError",Jn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=SH,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fr.prototype.create)}},Fr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?AH(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Jn(i,a,r)}};function AH(n,e){return n.replace(RH,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var RH=/\{\$([^}]+)}/g;function BM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ui(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(PM(s)&&PM(o)){if(!ui(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function PM(n){return n!==null&&typeof n=="object"}function Lh(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Lu(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Vu(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function $M(n,e){let t=new vT(n,e);return t.subscribe.bind(t)}var vT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");PH(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=yT),i.error===void 0&&(i.error=yT),i.complete===void 0&&(i.complete=yT);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function PH(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function yT(){}var Upe=14400*1e3;function Et(n){return n&&n._delegate?n._delegate:n}var En=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Sa="[DEFAULT]";var bT=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Da;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xH(e))try{this.getOrInitializeService({instanceIdentifier:Sa})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return C(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Sa){return this.instances.has(e)}getOptions(e=Sa){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NH(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Sa){return this.component?this.component.multipleInstances?e:Sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function NH(n){return n===Sa?void 0:n}function xH(n){return n.instantiationMode==="EAGER"}var ay=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new bT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var MH=[],De=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(De||{}),kH={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},OH=De.INFO,FH={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},LH=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=FH[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},li=class{constructor(e){this.name=e,this._logLevel=OH,this._logHandler=LH,this._userLogHandler=null,MH.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}};var VH=(n,e)=>e.some(t=>n instanceof t),HM,qM;function UH(){return HM||(HM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jH(){return qM||(qM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var zM=new WeakMap,DT=new WeakMap,GM=new WeakMap,CT=new WeakMap,AT=new WeakMap;function BH(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(di(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&zM.set(t,n)}).catch(()=>{}),AT.set(e,n),e}function $H(n){if(DT.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});DT.set(n,e)}var ST={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return DT.get(n);if(e==="objectStoreNames")return n.objectStoreNames||GM.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return di(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function WM(n){ST=n(ST)}function HH(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(cy(this),e,...t);return GM.set(r,e.sort?e.sort():[e]),di(r)}:jH().includes(n)?function(...e){return n.apply(cy(this),e),di(zM.get(this))}:function(...e){return di(n.apply(cy(this),e))}}function qH(n){return typeof n=="function"?HH(n):(n instanceof IDBTransaction&&$H(n),VH(n,UH())?new Proxy(n,ST):n)}function di(n){if(n instanceof IDBRequest)return BH(n);if(CT.has(n))return CT.get(n);let e=qH(n);return e!==n&&(CT.set(n,e),AT.set(e,n)),e}var cy=n=>AT.get(n);function uy(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=di(o);return r&&o.addEventListener("upgradeneeded",c=>{r(di(o.result),c.oldVersion,c.newVersion,di(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var zH=["get","getKey","getAll","getAllKeys","count"],GH=["put","add","delete","clear"],RT=new Map;function KM(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(RT.get(e))return RT.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=GH.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zH.includes(t)))return;let s=function(o,...a){return C(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),d=c.store;return r&&(d=d.index(a.shift())),(yield Promise.all([d[t](...a),i&&c.done]))[0]})};return RT.set(e,s),s}WM(n=>se(H({},n),{get:(e,t,r)=>KM(e,t)||n.get(e,t,r),has:(e,t)=>!!KM(e,t)||n.has(e,t)}));var NT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(WH(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function WH(n){let e=n.getComponent();return e?.type==="VERSION"}var xT="@firebase/app",QM="0.13.2";var Gi=new li("@firebase/app"),KH="@firebase/app-compat",QH="@firebase/analytics-compat",YH="@firebase/analytics",JH="@firebase/app-check-compat",XH="@firebase/app-check",ZH="@firebase/auth",eq="@firebase/auth-compat",tq="@firebase/database",nq="@firebase/data-connect",rq="@firebase/database-compat",iq="@firebase/functions",sq="@firebase/functions-compat",oq="@firebase/installations",aq="@firebase/installations-compat",cq="@firebase/messaging",uq="@firebase/messaging-compat",lq="@firebase/performance",dq="@firebase/performance-compat",hq="@firebase/remote-config",fq="@firebase/remote-config-compat",pq="@firebase/storage",gq="@firebase/storage-compat",mq="@firebase/firestore",yq="@firebase/ai",_q="@firebase/firestore-compat",vq="firebase",Eq="11.10.0";var MT="[DEFAULT]",Iq={[xT]:"fire-core",[KH]:"fire-core-compat",[YH]:"fire-analytics",[QH]:"fire-analytics-compat",[XH]:"fire-app-check",[JH]:"fire-app-check-compat",[ZH]:"fire-auth",[eq]:"fire-auth-compat",[tq]:"fire-rtdb",[nq]:"fire-data-connect",[rq]:"fire-rtdb-compat",[iq]:"fire-fn",[sq]:"fire-fn-compat",[oq]:"fire-iid",[aq]:"fire-iid-compat",[cq]:"fire-fcm",[uq]:"fire-fcm-compat",[lq]:"fire-perf",[dq]:"fire-perf-compat",[hq]:"fire-rc",[fq]:"fire-rc-compat",[pq]:"fire-gcs",[gq]:"fire-gcs-compat",[mq]:"fire-fst",[_q]:"fire-fst-compat",[yq]:"fire-vertex","fire-js":"fire-js",[vq]:"fire-js-all"};var Vh=new Map,wq=new Map,kT=new Map;function YM(n,e){try{n.container.addComponent(e)}catch(t){Gi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Lr(n){let e=n.name;if(kT.has(e))return Gi.debug(`There were multiple attempts to register component ${e}.`),!1;kT.set(e,n);for(let t of Vh.values())YM(t,n);for(let t of wq.values())YM(t,n);return!0}function Uu(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Mn(n){return n==null?!1:n.settings!==void 0}var Tq={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},so=new Fr("app","Firebase",Tq);var OT=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new En("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw so.create("app-deleted",{appName:this._name})}};var oo=Eq;function VT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:MT,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw so.create("bad-app-name",{appName:String(i)});if(t||(t=wT()),!t)throw so.create("no-options");let s=Vh.get(i);if(s){if(ui(t,s.options)&&ui(r,s.config))return s;throw so.create("duplicate-app",{appName:i})}let o=new ay(i);for(let c of kT.values())o.addComponent(c);let a=new OT(t,r,o);return Vh.set(i,a),a}function Aa(n=MT){let e=Vh.get(n);if(!e&&n===MT&&wT())return VT();if(!e)throw so.create("no-app",{appName:n});return e}function ly(){return Array.from(Vh.values())}function ht(n,e,t){var r;let i=(r=Iq[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gi.warn(a.join(" "));return}Lr(new En(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var bq="firebase-heartbeat-database",Cq=1,Uh="firebase-heartbeat-store",PT=null;function e1(){return PT||(PT=uy(bq,Cq,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Uh)}catch(t){console.warn(t)}}}}).catch(n=>{throw so.create("idb-open",{originalErrorMessage:n.message})})),PT}function Dq(n){return C(this,null,function*(){try{let t=(yield e1()).transaction(Uh),r=yield t.objectStore(Uh).get(t1(n));return yield t.done,r}catch(e){if(e instanceof Jn)Gi.warn(e.message);else{let t=so.create("idb-get",{originalErrorMessage:e?.message});Gi.warn(t.message)}}})}function JM(n,e){return C(this,null,function*(){try{let r=(yield e1()).transaction(Uh,"readwrite");yield r.objectStore(Uh).put(e,t1(n)),yield r.done}catch(t){if(t instanceof Jn)Gi.warn(t.message);else{let r=so.create("idb-set",{originalErrorMessage:t?.message});Gi.warn(r.message)}}})}function t1(n){return`${n.name}!${n.options.appId}`}var Sq=1024,Aq=30,FT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new LT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return C(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=XM();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Aq){let o=Pq(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Gi.warn(r)}})}getHeartbeatsHeader(){return C(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=XM(),{heartbeatsToSend:r,unsentEntries:i}=Rq(this._heartbeatsCache.heartbeats),s=Oh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Gi.warn(t),""}})}};function XM(){return new Date().toISOString().substring(0,10)}function Rq(n,e=Sq){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ZM(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),ZM(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var LT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return C(this,null,function*(){return Fh()?jM().then(()=>!0).catch(()=>!1):!1})}read(){return C(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Dq(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return C(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return JM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return C(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return JM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function ZM(n){return Oh(JSON.stringify({version:2,heartbeats:n})).length}function Pq(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Nq(n){Lr(new En("platform-logger",e=>new NT(e),"PRIVATE")),Lr(new En("heartbeat",e=>new FT(e),"PRIVATE")),ht(xT,QM,n),ht(xT,QM,"esm2017"),ht("fire-js","")}Nq("");var xq="firebase",Mq="11.10.0";ht(xq,Mq,"app");function n1(n){n===void 0&&(n=j(Tt));let e=n.get(lu);return t=>new fe(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var ao=new ea("ANGULARFIRE2_VERSION");function jh(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Bu=(n,e)=>{let t=e?[e]:ly(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},ju=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(ju||{}),r1=Nw()&&typeof Zone<"u"?ju.WARN:ju.SILENT;var dy=class{zone;delegate;constructor(e,t=pE){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},co=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=j(Ke);this.outsideAngular=t.runOutsideAngular(()=>new dy(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new dy(typeof Zone>"u"?void 0:Zone.current,fE))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),i1=!1;function kq(n,e){!i1&&(r1>ju.SILENT||Nw())&&(i1=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),r1>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function Oq(n){let e=j(Ke,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Ra(n){let e=j(Ke,{optional:!0});return e?e.run(()=>n()):n()}var Fq=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Ut(t,()=>Ra(()=>n.apply(void 0,r)))),ft=(n,e,t)=>(t||=e?ju.WARN:ju.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=j(co),o=j(lu),a=j(Vt)}catch{return kq(n,t),n.apply(this,i)}for(let d=0;d<arguments.length;d++)typeof i[d]=="function"&&(e&&(r||=Ra(()=>o.add())),i[d]=Fq(i[d],r,a));let c=Oq(()=>n.apply(this,i));return e?c instanceof fe?c.pipe(Bs(s.outsideAngular),js(s.insideAngular),n1(a)):c instanceof Promise?Ra(()=>{let d=o.add();return new Promise((h,g)=>{c.then(I=>Ut(a,()=>Ra(()=>h(I))),I=>Ut(a,()=>Ra(()=>g(I)))).finally(d)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Ra(()=>c):c instanceof fe?c.pipe(Bs(s.outsideAngular),js(s.insideAngular)):Ra(()=>c)});var Wi=class{constructor(e){return e}},Pa=class{constructor(){return ly()}};function Lq(n){return n&&n.length===1?n[0]:new Wi(Aa())}var UT=new ee("angularfire2._apps"),Vq={provide:Wi,useFactory:Lq,deps:[[new Wn,UT]]},Uq={provide:Pa,deps:[[new Wn,UT]]};function jq(n){return(e,t)=>{let r=t.get(_a);ht("angularfire",ao.full,"core"),ht("angularfire",ao.full,"app"),ht("angular",NE.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Wi(i)}}function s1(n,...e){return $n([Vq,Uq,{provide:UT,useFactory:jq(n),multi:!0,deps:[Ke,Tt,co,...e]}])}var o1=ft(VT,!0);var Bq=new Map,$q={activated:!1,tokenObservers:[]},Hq={initialized:!1,enabled:!1};function Vr(n){return Bq.get(n)||Object.assign({},$q)}function l1(){return Hq}var qq="https://content-firebaseappcheck.googleapis.com/v1";var zq="exchangeDebugToken",a1={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},$ge=1440*60*1e3;var $T=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return C(this,null,function*(){this.stop();try{this.pending=new Da,this.pending.promise.catch(t=>{}),yield Gq(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Da,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Gq(n){return new Promise(e=>{setTimeout(e,n)})}var Wq={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},uo=new Fr("appCheck","AppCheck",Wq);function d1(n){if(!Vr(n).activated)throw uo.create("use-before-activation",{appName:n.name})}function h1(r,i){return C(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let S=yield o.getHeartbeatsHeader();S&&(s["X-Firebase-Client"]=S)}let a={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(n,a)}catch(S){throw uo.create("fetch-network-error",{originalErrorMessage:S?.message})}if(c.status!==200)throw uo.create("fetch-status-error",{httpStatus:c.status});let d;try{d=yield c.json()}catch(S){throw uo.create("fetch-parse-error",{originalErrorMessage:S?.message})}let h=d.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw uo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});let g=Number(h[1])*1e3,I=Date.now();return{token:d.token,expireTimeMillis:I+g,issuedAtTimeMillis:I}})}function f1(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${qq}/projects/${t}/apps/${r}:${zq}?key=${i}`,body:{debug_token:e}}}var Kq="firebase-app-check-database",Qq=1,HT="firebase-app-check-store";var hy=null;function Yq(){return hy||(hy=new Promise((n,e)=>{try{let t=indexedDB.open(Kq,Qq);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(uo.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(HT,{keyPath:"compositeKey"})}}}catch(t){e(uo.create("storage-open",{originalErrorMessage:t?.message}))}}),hy)}function Jq(n,e){return Xq(Zq(n),e)}function Xq(n,e){return C(this,null,function*(){let r=(yield Yq()).transaction(HT,"readwrite"),s=r.objectStore(HT).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var d;a(uo.create("storage-set",{originalErrorMessage:(d=c.target.error)===null||d===void 0?void 0:d.message}))}})})}function Zq(n){return`${n.options.appId}-${n.name}`}var Bh=new li("@firebase/app-check");function jT(n,e){return Fh()?Jq(n,e).catch(t=>{Bh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function p1(){return l1().enabled}function g1(){return C(this,null,function*(){let n=l1();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var e5={error:"UNKNOWN_ERROR"};function t5(n){return ny.encodeString(JSON.stringify(n),!1)}function qT(n,e=!1,t=!1){return C(this,null,function*(){let r=n.app;d1(r);let i=Vr(r),s=i.token,o;if(s&&!$h(s)&&(i.token=void 0,s=void 0),!s){let d=yield i.cachedTokenPromise;d&&($h(d)?s=d:yield jT(r,void 0))}if(!e&&s&&$h(s))return{token:s.token};let a=!1;if(p1())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=h1(f1(r,yield g1()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let d=yield i.exchangeTokenPromise;return yield jT(r,d),i.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Bh.warn(d.message):t&&Bh.error(d),BT(d)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=yield Vr(r).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Bh.warn(d.message):t&&Bh.error(d),o=d}let c;return s?o?$h(s)?c={token:s.token,internalError:o}:c=BT(o):(c={token:s.token},i.token=s,yield jT(r,s)):c=BT(o),a&&s5(r,c),c})}function n5(n){return C(this,null,function*(){let e=n.app;d1(e);let{provider:t}=Vr(e);if(p1()){let r=yield g1(),{token:i}=yield h1(f1(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function r5(n,e,t,r){let{app:i}=n,s=Vr(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&$h(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),c1(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>c1(n))}function m1(n,e){let t=Vr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function c1(n){let{app:e}=n,t=Vr(e),r=t.tokenRefresher;r||(r=i5(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function i5(n){let{app:e}=n;return new $T(()=>C(null,null,function*(){let t=Vr(e),r;if(t.token?r=yield qT(n,!0):r=yield qT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Vr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},a1.RETRIAL_MIN_WAIT,a1.RETRIAL_MAX_WAIT)}function s5(n,e){let t=Vr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function $h(n){return n.expireTimeMillis-Date.now()>0}function BT(n){return{token:t5(e5),error:n}}var zT=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Vr(this.app);for(let t of e)m1(this.app,t.next);return Promise.resolve()}};function o5(n,e){return new zT(n,e)}function a5(n){return{getToken:e=>qT(n,e),getLimitedUseToken:()=>n5(n),addTokenListener:e=>r5(n,"INTERNAL",e),removeTokenListener:e=>m1(n.app,e)}}var c5="@firebase/app-check",u5="0.10.1";var l5="app-check",u1="app-check-internal";function d5(){Lr(new En(l5,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return o5(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(u1).initialize()})),Lr(new En(u1,n=>{let e=n.getProvider("app-check").getImmediate();return a5(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ht(c5,u5)}d5();var h5="app-check";var $u=class{constructor(){return Bu(h5)}};var f5=["localhost","0.0.0.0","127.0.0.1"],tme=typeof window<"u"&&f5.includes(window.location.hostname);var y1=()=>{};var _1=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},p5=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},v1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,g=(s&3)<<4|a>>4,I=(a&15)<<2|d>>6,S=d&63;c||(S=64,o||(I=64)),r.push(t[h],t[g],t[I],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(_1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):p5(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||g==null)throw new WT;let I=s<<2|a>>4;if(r.push(I),d!==64){let S=a<<4&240|d>>2;if(r.push(S),g!==64){let P=d<<6&192|g;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},WT=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},g5=function(n){let e=_1(n);return v1.encodeByteArray(e,!0)},QT=function(n){return g5(n).replace(/\./g,"")},fy=function(n){try{return v1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function E1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var m5=()=>E1().__FIREBASE_DEFAULTS__,y5=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},_5=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&fy(n[1]);return e&&JSON.parse(e)},I1=()=>{try{return y1()||m5()||y5()||_5()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var w1=n=>I1()?.[`_${n}`];function Hh(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Xn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function T1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xn())}function v5(){let n=I1()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function b1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function C1(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function D1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function S1(){return!v5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YT(){try{return typeof indexedDB=="object"}catch{return!1}}function A1(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var E5="FirebaseError",hr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=E5,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ki.prototype.create)}},Ki=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?I5(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new hr(i,a,r)}};function I5(n,e){return n.replace(w5,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var w5=/\{\$([^}]+)}/g;function JT(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function R1(n,e){let t=new KT(n,e);return t.subscribe.bind(t)}var KT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");T5(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=GT),i.error===void 0&&(i.error=GT),i.complete===void 0&&(i.complete=GT);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function T5(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function GT(){}var ome=14400*1e3;function lo(n){return n&&n._delegate?n._delegate:n}var Ur=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var b5=[],Se=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Se||{}),C5={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},D5=Se.INFO,S5={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},A5=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=S5[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ho=class{constructor(e){this.name=e,this._logLevel=D5,this._logHandler=A5,this._userLogHandler=null,b5.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?C5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}};var ZT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(R5(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function R5(n){return n.getComponent()?.type==="VERSION"}var e0="@firebase/app",P1="0.14.6";var Yi=new ho("@firebase/app"),P5="@firebase/app-compat",N5="@firebase/analytics-compat",x5="@firebase/analytics",M5="@firebase/app-check-compat",k5="@firebase/app-check",O5="@firebase/auth",F5="@firebase/auth-compat",L5="@firebase/database",V5="@firebase/data-connect",U5="@firebase/database-compat",j5="@firebase/functions",B5="@firebase/functions-compat",$5="@firebase/installations",H5="@firebase/installations-compat",q5="@firebase/messaging",z5="@firebase/messaging-compat",G5="@firebase/performance",W5="@firebase/performance-compat",K5="@firebase/remote-config",Q5="@firebase/remote-config-compat",Y5="@firebase/storage",J5="@firebase/storage-compat",X5="@firebase/firestore",Z5="@firebase/ai",e9="@firebase/firestore-compat",t9="firebase",n9="12.6.0";var r9={[e0]:"fire-core",[P5]:"fire-core-compat",[x5]:"fire-analytics",[N5]:"fire-analytics-compat",[k5]:"fire-app-check",[M5]:"fire-app-check-compat",[O5]:"fire-auth",[F5]:"fire-auth-compat",[L5]:"fire-rtdb",[V5]:"fire-data-connect",[U5]:"fire-rtdb-compat",[j5]:"fire-fn",[B5]:"fire-fn-compat",[$5]:"fire-iid",[H5]:"fire-iid-compat",[q5]:"fire-fcm",[z5]:"fire-fcm-compat",[G5]:"fire-perf",[W5]:"fire-perf-compat",[K5]:"fire-rc",[Q5]:"fire-rc-compat",[Y5]:"fire-gcs",[J5]:"fire-gcs-compat",[X5]:"fire-fst",[e9]:"fire-fst-compat",[Z5]:"fire-vertex","fire-js":"fire-js",[t9]:"fire-js-all"};var i9=new Map,s9=new Map,N1=new Map;function x1(n,e){try{n.container.addComponent(e)}catch(t){Yi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function fo(n){let e=n.name;if(N1.has(e))return Yi.debug(`There were multiple attempts to register component ${e}.`),!1;N1.set(e,n);for(let t of i9.values())x1(t,n);for(let t of s9.values())x1(t,n);return!0}function Ji(n){return n==null?!1:n.settings!==void 0}var o9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},r0=new Ki("app","Firebase",o9);var Hu=n9;function Qi(n,e,t){let r=r9[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yi.warn(o.join(" "));return}fo(new Ur(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var a9="firebase-heartbeat-database",c9=1,qh="firebase-heartbeat-store",XT=null;function L1(){return XT||(XT=uy(a9,c9,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(qh)}catch(t){console.warn(t)}}}}).catch(n=>{throw r0.create("idb-open",{originalErrorMessage:n.message})})),XT}function u9(n){return C(this,null,function*(){try{let t=(yield L1()).transaction(qh),r=yield t.objectStore(qh).get(V1(n));return yield t.done,r}catch(e){if(e instanceof hr)Yi.warn(e.message);else{let t=r0.create("idb-get",{originalErrorMessage:e?.message});Yi.warn(t.message)}}})}function M1(n,e){return C(this,null,function*(){try{let r=(yield L1()).transaction(qh,"readwrite");yield r.objectStore(qh).put(e,V1(n)),yield r.done}catch(t){if(t instanceof hr)Yi.warn(t.message);else{let r=r0.create("idb-set",{originalErrorMessage:t?.message});Yi.warn(r.message)}}})}function V1(n){return`${n.name}!${n.options.appId}`}var l9=1024,d9=30,t0=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new n0(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return C(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=k1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>d9){let i=f9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Yi.warn(e)}})}getHeartbeatsHeader(){return C(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=k1(),{heartbeatsToSend:t,unsentEntries:r}=h9(this._heartbeatsCache.heartbeats),i=QT(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Yi.warn(e),""}})}};function k1(){return new Date().toISOString().substring(0,10)}function h9(n,e=l9){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),O1(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),O1(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var n0=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return C(this,null,function*(){return YT()?A1().then(()=>!0).catch(()=>!1):!1})}read(){return C(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield u9(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return C(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return M1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return C(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return M1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function O1(n){return QT(JSON.stringify({version:2,heartbeats:n})).length}function f9(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function p9(n){fo(new Ur("platform-logger",e=>new ZT(e),"PRIVATE")),fo(new Ur("heartbeat",e=>new t0(e),"PRIVATE")),Qi(e0,P1,n),Qi(e0,P1,"esm2020"),Qi("fire-js","")}p9("");function G1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var W1=G1,K1=new Ki("auth","Firebase",G1());var yy=new ho("@firebase/auth");function v9(n,...e){yy.logLevel<=Se.WARN&&yy.warn(`Auth (${Hu}): ${n}`,...e)}function gy(n,...e){yy.logLevel<=Se.ERROR&&yy.error(`Auth (${Hu}): ${n}`,...e)}function U1(n,...e){throw g0(n,...e)}function p0(n,...e){return g0(n,...e)}function Q1(n,e,t){let r=se(H({},W1()),{[e]:t});return new Ki("auth","Firebase",r).create(e,{appName:n.name})}function my(n){return Q1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function g0(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return K1.create(n,...e)}function ze(n,e,...t){if(!n)throw g0(e,...t)}function zh(n){let e="INTERNAL ASSERTION FAILED: "+n;throw gy(e),new Error(e)}function _y(n,e){n||zh(e)}function E9(){return j1()==="http:"||j1()==="https:"}function j1(){return typeof self<"u"&&self.location?.protocol||null}function I9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(E9()||C1()||"connection"in navigator)?navigator.onLine:!0}function w9(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ma=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,_y(t>e,"Short delay should be less than long delay!"),this.isMobile=T1()||D1()}get(){return I9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function T9(n,e){_y(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var vy=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var b9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var C9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],D9=new Ma(3e4,6e4);function Y1(n,e){return n.tenantId&&!e.tenantId?se(H({},e),{tenantId:n.tenantId}):e}function by(s,o,a,c){return C(this,arguments,function*(n,e,t,r,i={}){return J1(n,i,()=>C(null,null,function*(){let d={},h={};r&&(e==="GET"?h=r:d={body:JSON.stringify(r)});let g=JT(H({key:n.config.apiKey},h)).slice(1),I=yield n._getAdditionalHeaders();I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode);let S=H({method:e,headers:I},d);return b1()||(S.referrerPolicy="no-referrer"),n.emulatorConfig&&Hh(n.emulatorConfig.host)&&(S.credentials="include"),vy.fetch()(yield X1(n,n.config.apiHost,t,g),S)}))})}function J1(n,e,t){return C(this,null,function*(){n._canInitEmulator=!1;let r=H(H({},b9),e);try{let i=new o0(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw py(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw py(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw py(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw py(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Q1(n,h,d);U1(n,h)}}catch(i){if(i instanceof hr)throw i;U1(n,"network-request-failed",{message:String(i)})}})}function X1(n,e,t,r){return C(this,null,function*(){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?T9(n.config,i):`${n.config.apiScheme}://${i}`;return C9.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}var o0=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(p0(this.auth,"network-request-failed")),D9.get())})}};function py(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=p0(n,e,r);return i.customData._tokenResponse=t,i}function S9(n,e){return C(this,null,function*(){return by(n,"POST","/v1/accounts:delete",e)})}function Ey(n,e){return C(this,null,function*(){return by(n,"POST","/v1/accounts:lookup",e)})}function Gh(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Z1(n,e=!1){return C(this,null,function*(){let t=lo(n),r=yield t.getIdToken(e),i=ek(r);ze(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Gh(i0(i.auth_time)),issuedAtTime:Gh(i0(i.iat)),expirationTime:Gh(i0(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function i0(n){return Number(n)*1e3}function ek(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return gy("JWT malformed, contained fewer than 3 sections"),null;try{let i=fy(t);return i?JSON.parse(i):(gy("Failed to decode base64 JWT payload"),null)}catch(i){return gy("Caught error parsing JWT payload as JSON",i?.toString()),null}}function B1(n){let e=ek(n);return ze(e,"internal-error"),ze(typeof e.exp<"u","internal-error"),ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function a0(n,e,t=!1){return C(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof hr&&A9(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function A9({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var c0=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>C(this,null,function*(){yield this.iteration()}),t)}iteration(){return C(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Kh=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gh(this.lastLoginAt),this.creationTime=Gh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Iy(n){return C(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),r=yield a0(n,Ey(e,{idToken:t}));ze(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?nk(i.providerUserInfo):[],o=R9(n.providerData,s),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,d=a?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Kh(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,h)})}function tk(n){return C(this,null,function*(){let e=lo(n);yield Iy(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function R9(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function nk(n){return n.map(r=>{var i=r,{providerId:e}=i,t=Qv(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function P9(n,e){return C(this,null,function*(){let t=yield J1(n,{},()=>C(null,null,function*(){let r=JT({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=yield X1(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Hh(n.emulatorConfig.host)&&(c.credentials="include"),vy.fetch()(o,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function N9(n,e){return C(this,null,function*(){return by(n,"POST","/v2/accounts:revokeToken",Y1(n,e))})}var Wh=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken<"u","internal-error"),ze(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):B1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ze(e.length!==0,"internal-error");let t=B1(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return C(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return C(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield P9(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(ze(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ze(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ze(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return zh("not implemented")}};function po(n,e){ze(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Na=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=Qv(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new c0(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Kh(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return C(this,null,function*(){let t=yield a0(this,this.stsTokenManager.getToken(this.auth,e));return ze(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Z1(this,e)}reload(){return tk(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>H({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(se(H({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return C(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Iy(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return C(this,null,function*(){if(Ji(this.auth.app))return Promise.reject(my(this.auth));let e=yield this.getIdToken();return yield a0(this,S9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return se(H({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>H({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,d=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:g,emailVerified:I,isAnonymous:S,providerData:P,stsTokenManager:U}=t;ze(g&&U,e,"internal-error");let O=Wh.fromJSON(this.name,U);ze(typeof g=="string",e,"internal-error"),po(r,e.name),po(i,e.name),ze(typeof I=="boolean",e,"internal-error"),ze(typeof S=="boolean",e,"internal-error"),po(s,e.name),po(o,e.name),po(a,e.name),po(c,e.name),po(d,e.name),po(h,e.name);let G=new n({uid:g,auth:e,email:i,emailVerified:I,displayName:r,isAnonymous:S,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:O,createdAt:d,lastLoginAt:h});return P&&Array.isArray(P)&&(G.providerData=P.map(ne=>H({},ne))),c&&(G._redirectEventId=c),G}static _fromIdTokenResponse(e,t,r=!1){return C(this,null,function*(){let i=new Wh;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Iy(s),s})}static _fromGetAccountInfoResponse(e,t,r){return C(this,null,function*(){let i=t.users[0];ze(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?nk(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Wh;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Kh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c})}};var $1=new Map;function xa(n){_y(n instanceof Function,"Expected a class definition");let e=$1.get(n);return e?(_y(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,$1.set(n,e),e)}var x9=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return C(this,null,function*(){return!0})}_set(t,r){return C(this,null,function*(){this.storage[t]=r})}_get(t){return C(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return C(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),u0=x9;function s0(n,e,t){return`firebase:${n}:${e}:${t}`}var wy=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=s0(this.userKey,i.apiKey,s),this.fullPersistenceKey=s0("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return C(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Ey(this.auth,{idToken:e}).catch(()=>{});return t?Na._fromGetAccountInfoResponse(this.auth,t,e):null}return Na._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return C(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return C(this,null,function*(){if(!t.length)return new n(xa(u0),e,r);let i=(yield Promise.all(t.map(d=>C(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||xa(u0),o=s0(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=yield d._get(o);if(h){let g;if(typeof h=="string"){let I=yield Ey(e,{idToken:h}).catch(()=>{});if(!I)break;g=yield Na._fromGetAccountInfoResponse(e,I,h)}else g=Na._fromJSON(e,h);d!==s&&(a=g),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(d=>C(null,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new n(s,e,r))})}};function H1(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(F9(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(M9(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(V9(e))return"Blackberry";if(U9(e))return"Webos";if(k9(e))return"Safari";if((e.includes("chrome/")||O9(e))&&!e.includes("edge/"))return"Chrome";if(L9(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function M9(n=Xn()){return/firefox\//i.test(n)}function k9(n=Xn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function O9(n=Xn()){return/crios\//i.test(n)}function F9(n=Xn()){return/iemobile/i.test(n)}function L9(n=Xn()){return/android/i.test(n)}function V9(n=Xn()){return/blackberry/i.test(n)}function U9(n=Xn()){return/webos/i.test(n)}function rk(n,e=[]){let t;switch(n){case"Browser":t=H1(Xn());break;case"Worker":t=`${H1(Xn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Hu}/${r}`}var l0=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return C(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function j9(t){return C(this,arguments,function*(n,e={}){return by(n,"GET","/v2/passwordPolicy",Y1(n,e))})}var B9=6,d0=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??B9,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var h0=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ty(this),this.idTokenSubscription=new Ty(this),this.beforeStateQueue=new l0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=K1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=xa(t)),this._initializationPromise=this.queue(()=>C(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield wy.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return C(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return C(this,null,function*(){try{let t=yield Ey(this,{idToken:e}),r=yield Na._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return C(this,null,function*(){if(Ji(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ze(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return C(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return C(this,null,function*(){try{yield Iy(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=w9()}_delete(){return C(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return C(this,null,function*(){if(Ji(this.app))return Promise.reject(my(this));let t=e?lo(e):null;return t&&ze(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return C(this,null,function*(){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>C(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return C(this,null,function*(){return Ji(this.app)?Promise.reject(my(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ji(this.app)?Promise.reject(my(this)):this.queue(()=>C(this,null,function*(){yield this.assertedPersistence.setPersistence(xa(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return C(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return C(this,null,function*(){let e=yield j9(this),t=new d0(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ki("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return C(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield N9(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return C(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return C(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&xa(e)||this._popupRedirectResolver;ze(t,this,"argument-error"),this.redirectPersistenceManager=yield wy.create(this,[xa(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return C(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>C(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return C(this,null,function*(){if(e===this.currentUser)return this.queue(()=>C(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ze(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return C(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return C(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return C(this,null,function*(){if(Ji(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&v9(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function $9(n){return lo(n)}var Ty=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=R1(t=>this.observer=t)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var H9={loadJS(){return C(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function q9(n){H9=n}function z9(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function G9(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(xa);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function m0(n,e,t,r){return lo(n).onIdTokenChanged(e,t,r)}var Fme=z9("rcb"),Lme=new Ma(3e4,6e4);var Vme=new Ma(2e3,1e4);var Ume=600*1e3;var jme=new Ma(3e4,6e4);var Bme=new Ma(5e3,15e3);var $me=encodeURIComponent("fac");var q1="@firebase/auth",z1="1.11.1";var f0=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return C(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function W9(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function K9(n){fo(new Ur("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ze(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rk(n)},d=new h0(r,i,s,c);return G9(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),fo(new Ur("auth-internal",e=>{let t=$9(e.getProvider("auth").getImmediate());return(r=>new f0(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qi(q1,z1,W9(n)),Qi(q1,z1,"esm2020")}var Q9=300,Hme=w1("authIdTokenMaxAge")||Q9;function Y9(){return document.getElementsByTagName("head")?.[0]??document}q9({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=p0("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Y9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});K9("Browser");function ik(n){return new fe(function(e){var t=m0(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function Ek(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Ik=Ek,wk=new Fr("auth","Firebase",Ek());var Py=new li("@firebase/auth");function Z9(n,...e){Py.logLevel<=De.WARN&&Py.warn(`Auth (${oo}): ${n}`,...e)}function Dy(n,...e){Py.logLevel<=De.ERROR&&Py.error(`Auth (${oo}): ${n}`,...e)}function fi(n,...e){throw B0(n,...e)}function ka(n,...e){return B0(n,...e)}function Tk(n,e,t){let r=Object.assign(Object.assign({},Ik()),{[e]:t});return new Fr("auth","Firebase",r).create(e,{appName:n.name})}function es(n){return Tk(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function B0(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return wk.create(n,...e)}function ce(n,e,...t){if(!n)throw B0(e,...t)}function Xi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Dy(e),new Error(e)}function yo(n,e){n||Xi(e)}function E0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function ez(){return sk()==="http:"||sk()==="https:"}function sk(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function tz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ez()||FM()||"connection"in navigator)?navigator.onLine:!0}function nz(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Oa=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,yo(t>e,"Short delay should be less than long delay!"),this.isMobile=kM()||LM()}get(){return tz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function $0(n,e){yo(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ny=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var rz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var iz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sz=new Oa(3e4,6e4);function _o(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ts(s,o,a,c){return C(this,arguments,function*(n,e,t,r,i={}){return bk(n,i,()=>C(null,null,function*(){let d={},h={};r&&(e==="GET"?h=r:d={body:JSON.stringify(r)});let g=Lh(Object.assign({key:n.config.apiKey},h)).slice(1),I=yield n._getAdditionalHeaders();I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode);let S=Object.assign({method:e,headers:I},d);return OM()||(S.referrerPolicy="no-referrer"),n.emulatorConfig&&io(n.emulatorConfig.host)&&(S.credentials="include"),Ny.fetch()(yield Ck(n,n.config.apiHost,t,g),S)}))})}function bk(n,e,t){return C(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},rz),e);try{let i=new I0(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Cy(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cy(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Cy(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Cy(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Tk(n,h,d);fi(n,h)}}catch(i){if(i instanceof Jn)throw i;fi(n,"network-request-failed",{message:String(i)})}})}function nf(s,o,a,c){return C(this,arguments,function*(n,e,t,r,i={}){let d=yield ts(n,e,t,r,i);return"mfaPendingCredential"in d&&fi(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function Ck(n,e,t,r){return C(this,null,function*(){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?$0(n.config,i):`${n.config.apiScheme}://${i}`;return iz.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}function oz(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var I0=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ka(this.auth,"network-request-failed")),sz.get())})}};function Cy(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ka(n,e,r);return i.customData._tokenResponse=t,i}function ok(n){return n!==void 0&&n.enterprise!==void 0}var w0=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return oz(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function az(n,e){return C(this,null,function*(){return ts(n,"GET","/v2/recaptchaConfig",_o(n,e))})}function cz(n,e){return C(this,null,function*(){return ts(n,"POST","/v1/accounts:delete",e)})}function xy(n,e){return C(this,null,function*(){return ts(n,"POST","/v1/accounts:lookup",e)})}function Yh(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function H0(n,e=!1){return C(this,null,function*(){let t=Et(n),r=yield t.getIdToken(e),i=q0(r);ce(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Yh(y0(i.auth_time)),issuedAtTime:Yh(y0(i.iat)),expirationTime:Yh(y0(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function y0(n){return Number(n)*1e3}function q0(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Dy("JWT malformed, contained fewer than 3 sections"),null;try{let i=ry(t);return i?JSON.parse(i):(Dy("Failed to decode base64 JWT payload"),null)}catch(i){return Dy("Caught error parsing JWT payload as JSON",i?.toString()),null}}function ak(n){let e=q0(n);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function qu(n,e,t=!1){return C(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Jn&&uz(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function uz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var T0=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>C(this,null,function*(){yield this.iteration()}),t)}iteration(){return C(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Xh=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yh(this.lastLoginAt),this.creationTime=Yh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function My(n){return C(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield qu(n,xy(t,{idToken:r}));ce(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Dk(s.providerUserInfo):[],a=lz(n.providerData,o),c=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!a?.length,h=c?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Xh(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,g)})}function z0(n){return C(this,null,function*(){let e=Et(n);yield My(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function lz(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Dk(n){return n.map(e=>{var{providerId:t}=e,r=gE(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function dz(n,e){return C(this,null,function*(){let t=yield bk(n,{},()=>C(null,null,function*(){let r=Lh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=yield Ck(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&io(n.emulatorConfig.host)&&(c.credentials="include"),Ny.fetch()(o,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function hz(n,e){return C(this,null,function*(){return ts(n,"POST","/v2/accounts:revokeToken",_o(n,e))})}var Jh=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ak(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ce(e.length!==0,"internal-error");let t=ak(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return C(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return C(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield dz(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ce(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ce(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Xi("not implemented")}};function go(n,e){ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var mo=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=gE(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new T0(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Xh(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return C(this,null,function*(){let t=yield qu(this,this.stsTokenManager.getToken(this.auth,e));return ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return H0(this,e)}reload(){return z0(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return C(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield My(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return C(this,null,function*(){if(Mn(this.auth.app))return Promise.reject(es(this.auth));let e=yield this.getIdToken();return yield qu(this,cz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,d,h;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,I=(i=t.email)!==null&&i!==void 0?i:void 0,S=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,P=(o=t.photoURL)!==null&&o!==void 0?o:void 0,U=(a=t.tenantId)!==null&&a!==void 0?a:void 0,O=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,G=(d=t.createdAt)!==null&&d!==void 0?d:void 0,ne=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:re,emailVerified:Re,isAnonymous:rt,providerData:Ce,stsTokenManager:b}=t;ce(re&&b,e,"internal-error");let _=Jh.fromJSON(this.name,b);ce(typeof re=="string",e,"internal-error"),go(g,e.name),go(I,e.name),ce(typeof Re=="boolean",e,"internal-error"),ce(typeof rt=="boolean",e,"internal-error"),go(S,e.name),go(P,e.name),go(U,e.name),go(O,e.name),go(G,e.name),go(ne,e.name);let E=new n({uid:re,auth:e,email:I,emailVerified:Re,displayName:g,isAnonymous:rt,photoURL:P,phoneNumber:S,tenantId:U,stsTokenManager:_,createdAt:G,lastLoginAt:ne});return Ce&&Array.isArray(Ce)&&(E.providerData=Ce.map(T=>Object.assign({},T))),O&&(E._redirectEventId=O),E}static _fromIdTokenResponse(e,t,r=!1){return C(this,null,function*(){let i=new Jh;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield My(s),s})}static _fromGetAccountInfoResponse(e,t,r){return C(this,null,function*(){let i=t.users[0];ce(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Dk(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Jh;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Xh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c})}};var ck=new Map;function Zi(n){yo(n instanceof Function,"Expected a class definition");let e=ck.get(n);return e?(yo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ck.set(n,e),e)}var fz=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return C(this,null,function*(){return!0})}_set(t,r){return C(this,null,function*(){this.storage[t]=r})}_get(t){return C(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return C(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),b0=fz;function Sy(n,e,t){return`firebase:${n}:${e}:${t}`}var ky=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Sy(this.userKey,i.apiKey,s),this.fullPersistenceKey=Sy("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return C(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield xy(this.auth,{idToken:e}).catch(()=>{});return t?mo._fromGetAccountInfoResponse(this.auth,t,e):null}return mo._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return C(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return C(this,null,function*(){if(!t.length)return new n(Zi(b0),e,r);let i=(yield Promise.all(t.map(d=>C(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||Zi(b0),o=Sy(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=yield d._get(o);if(h){let g;if(typeof h=="string"){let I=yield xy(e,{idToken:h}).catch(()=>{});if(!I)break;g=yield mo._fromGetAccountInfoResponse(e,I,h)}else g=mo._fromJSON(e,h);d!==s&&(a=g),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(d=>C(null,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new n(s,e,r))})}};function uk(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Pk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Sk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xk(e))return"Blackberry";if(Mk(e))return"Webos";if(Ak(e))return"Safari";if((e.includes("chrome/")||Rk(e))&&!e.includes("edge/"))return"Chrome";if(Nk(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Sk(n=Wt()){return/firefox\//i.test(n)}function Ak(n=Wt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Rk(n=Wt()){return/crios\//i.test(n)}function Pk(n=Wt()){return/iemobile/i.test(n)}function Nk(n=Wt()){return/android/i.test(n)}function xk(n=Wt()){return/blackberry/i.test(n)}function Mk(n=Wt()){return/webos/i.test(n)}function G0(n=Wt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function pz(n=Wt()){var e;return G0(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gz(){return VM()&&document.documentMode===10}function kk(n=Wt()){return G0(n)||Nk(n)||Mk(n)||xk(n)||/windows phone/i.test(n)||Pk(n)}function Ok(n,e=[]){let t;switch(n){case"Browser":t=uk(Wt());break;case"Worker":t=`${uk(Wt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${oo}/${r}`}var C0=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return C(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function mz(t){return C(this,arguments,function*(n,e={}){return ts(n,"GET","/v2/passwordPolicy",_o(n,e))})}var yz=6,D0=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:yz,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var S0=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Oy(this),this.idTokenSubscription=new Oy(this),this.beforeStateQueue=new C0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Zi(t)),this._initializationPromise=this.queue(()=>C(this,null,function*(){var r,i,s;if(!this._deleted&&(this.persistenceManager=yield ky.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return C(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return C(this,null,function*(){try{let t=yield xy(this,{idToken:e}),r=yield mo._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return C(this,null,function*(){var t;if(Mn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return C(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return C(this,null,function*(){try{yield My(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=nz()}_delete(){return C(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return C(this,null,function*(){if(Mn(this.app))return Promise.reject(es(this));let t=e?Et(e):null;return t&&ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return C(this,null,function*(){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>C(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return C(this,null,function*(){return Mn(this.app)?Promise.reject(es(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Mn(this.app)?Promise.reject(es(this)):this.queue(()=>C(this,null,function*(){yield this.assertedPersistence.setPersistence(Zi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return C(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return C(this,null,function*(){let e=yield mz(this),t=new D0(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return C(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield hz(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return C(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return C(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Zi(e)||this._popupRedirectResolver;ce(t,this,"argument-error"),this.redirectPersistenceManager=yield ky.create(this,[Zi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return C(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>C(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return C(this,null,function*(){if(e===this.currentUser)return this.queue(()=>C(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return C(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ok(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return C(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return C(this,null,function*(){var e;if(Mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Z9(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function La(n){return Et(n)}var Oy=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=$M(t=>this.observer=t)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var $y={loadJS(){return C(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _z(n){$y=n}function Fk(n){return $y.loadJS(n)}function vz(){return $y.recaptchaEnterpriseScript}function Ez(){return $y.gapiScript}function Lk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var A0=class{constructor(){this.enterprise=new R0}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},R0=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var Iz="recaptcha-enterprise",Vk="NO_RECAPTCHA",P0=class{constructor(e){this.type=Iz,this.auth=La(e)}verify(e="verify",t=!1){return C(this,null,function*(){function r(s){return C(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>C(null,null,function*(){az(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let d=new w0(c);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,o(d.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;ok(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(d=>{o(d)}).catch(()=>{o(Vk)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new A0().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&ok(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=vz();c.length!==0&&(c+=a),Fk(c).then(()=>{i(a,s,o)}).catch(d=>{o(d)})}}).catch(a=>{o(a)})})})}};function Qh(n,e,t,r=!1,i=!1){return C(this,null,function*(){let s=new P0(n),o;if(i)o=Vk;else try{o=yield s.verify(t)}catch{o=yield s.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,d=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function N0(n,e,t,r,i){return C(this,null,function*(){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Qh(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>C(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield Qh(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){let a=yield Qh(n,e,t);return r(n,a).catch(c=>C(null,null,function*(){var d;if(((d=n._getRecaptchaConfig())===null||d===void 0?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield Qh(n,e,t,!1,!0);return r(n,h)}return Promise.reject(c)}))}else{let a=yield Qh(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function W0(n,e){let t=Uu(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(ui(s,e??{}))return i;fi(i,"already-initialized")}return t.initialize({options:e})}function wz(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Zi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function K0(n,e,t){let r=La(n);ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=Uk(e),{host:o,port:a}=Tz(e),c=a===null?"":`:${a}`,d={url:`${s}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ce(ui(d,r.config.emulator)&&ui(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,io(o)?(sy(`${s}//${o}${c}`),oy("Auth",!0)):i||bz()}function Uk(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Tz(n){let e=Uk(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:lk(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:lk(o)}}}function lk(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function bz(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Zh=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xi("not implemented")}_getIdTokenResponse(e){return Xi("not implemented")}_linkToIdToken(e,t){return Xi("not implemented")}_getReauthenticationResolver(e){return Xi("not implemented")}};function Cz(n,e){return C(this,null,function*(){return ts(n,"POST","/v1/accounts:signUp",e)})}function Dz(n,e){return C(this,null,function*(){return nf(n,"POST","/v1/accounts:signInWithPassword",_o(n,e))})}function Sz(n,e){return C(this,null,function*(){return nf(n,"POST","/v1/accounts:signInWithEmailLink",_o(n,e))})}function Az(n,e){return C(this,null,function*(){return nf(n,"POST","/v1/accounts:signInWithEmailLink",_o(n,e))})}var ef=class n extends Zh{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return C(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return N0(e,t,"signInWithPassword",Dz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Sz(e,{email:this._email,oobCode:this._password});default:fi(e,"internal-error")}})}_linkToIdToken(e,t){return C(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return N0(e,r,"signUpPassword",Cz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Az(e,{idToken:t,email:this._email,oobCode:this._password});default:fi(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function _0(n,e){return C(this,null,function*(){return nf(n,"POST","/v1/accounts:signInWithIdp",_o(n,e))})}function Rz(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Pz(n){let e=Lu(Vu(n)).link,t=e?Lu(Vu(e)).deep_link_id:null,r=Lu(Vu(n)).deep_link_id;return(r?Lu(Vu(r)).link:null)||r||t||e||n}var Fy=class n{constructor(e){var t,r,i,s,o,a;let c=Lu(Vu(e)),d=(t=c.apiKey)!==null&&t!==void 0?t:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,g=Rz((i=c.mode)!==null&&i!==void 0?i:null);ce(d&&h&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=h,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=Pz(e);try{return new n(t)}catch{return null}}};var jk=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return ef._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Fy.parseLink(r);return ce(i,"argument-error"),ef._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Ly=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var x0=class extends Ly{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function Nz(n,e){return C(this,null,function*(){return nf(n,"POST","/v1/accounts:signUp",_o(n,e))})}var zu=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return C(this,null,function*(){let s=yield mo._fromIdTokenResponse(e,r,i),o=dk(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return C(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=dk(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function dk(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var M0=class n extends Jn{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Bk(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?M0._fromErrorAndOperation(n,s,e,r):s})}function xz(n,e,t=!1){return C(this,null,function*(){let r=yield qu(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return zu._forOperation(n,"link",r)})}function Mz(n,e,t=!1){return C(this,null,function*(){let{auth:r}=n;if(Mn(r.app))return Promise.reject(es(r));let i="reauthenticate";try{let s=yield qu(n,Bk(r,i,e,n),t);ce(s.idToken,r,"internal-error");let o=q0(s.idToken);ce(o,r,"internal-error");let{sub:a}=o;return ce(n.uid===a,r,"user-mismatch"),zu._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&fi(r,"user-mismatch"),s}})}function $k(n,e,t=!1){return C(this,null,function*(){if(Mn(n.app))return Promise.reject(es(n));let r="signIn",i=yield Bk(n,r,e),s=yield zu._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function Q0(n,e){return C(this,null,function*(){return $k(La(n),e)})}function Hk(n){return C(this,null,function*(){let e=La(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Y0(n,e,t){return C(this,null,function*(){if(Mn(n.app))return Promise.reject(es(n));let r=La(n),o=yield N0(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Nz,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&Hk(n),c}),a=yield zu._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function J0(n,e,t){return Mn(n.app)?Promise.reject(es(n)):Q0(Et(n),jk.credential(e,t)).catch(r=>C(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Hk(n),r}))}function kz(n,e){return C(this,null,function*(){return ts(n,"POST","/v1/accounts:update",e)})}function X0(r,i){return C(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let s=Et(n),a={idToken:yield s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=yield qu(s,kz(s.auth,a));s.displayName=c.displayName||null,s.photoURL=c.photoUrl||null;let d=s.providerData.find(({providerId:h})=>h==="password");d&&(d.displayName=s.displayName,d.photoURL=s.photoURL),yield s._updateTokensIfNecessary(c)})}function Z0(n,e,t,r){return Et(n).onIdTokenChanged(e,t,r)}function eb(n,e,t){return Et(n).beforeAuthStateChanged(e,t)}function tb(n){return Et(n).signOut()}var Vy="__sak";var Uy=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vy,"1"),this.storage.removeItem(Vy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Oz=1e3,Fz=10,Lz=(()=>{class n extends Uy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kk(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);gz()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,Fz):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},Oz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return C(this,null,function*(){yield Yr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return C(this,null,function*(){let r=yield Yr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return C(this,null,function*(){yield Yr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),qk=Lz;var Vz=(()=>{class n extends Uy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),nb=Vz;function Uz(n){return Promise.all(n.map(e=>C(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var jz=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return C(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(h=>C(this,null,function*(){return h(r.origin,o)})),d=yield Uz(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function zk(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var k0=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return C(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let d=zk("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){let I=g;if(I.data.eventId===d)switch(I.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(I.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function hi(){return window}function Bz(n){hi().location.href=n}function Gk(){return typeof hi().WorkerGlobalScope<"u"&&typeof hi().importScripts=="function"}function $z(){return C(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Hz(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function qz(){return Gk()?self:null}var Wk="firebaseLocalStorageDb",zz=1,jy="firebaseLocalStorage",Kk="fbase_key",Fa=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Hy(n,e){return n.transaction([jy],e?"readwrite":"readonly").objectStore(jy)}function Gz(){let n=indexedDB.deleteDatabase(Wk);return new Fa(n).toPromise()}function O0(){let n=indexedDB.open(Wk,zz);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(jy,{keyPath:Kk})}catch(i){t(i)}}),n.addEventListener("success",()=>C(null,null,function*(){let r=n.result;r.objectStoreNames.contains(jy)?e(r):(r.close(),yield Gz(),e(yield O0()))}))})}function hk(n,e,t){return C(this,null,function*(){let r=Hy(n,!0).put({[Kk]:e,value:t});return new Fa(r).toPromise()})}function Wz(n,e){return C(this,null,function*(){let t=Hy(n,!1).get(e),r=yield new Fa(t).toPromise();return r===void 0?null:r.value})}function fk(n,e){let t=Hy(n,!0).delete(e);return new Fa(t).toPromise()}var Kz=800,Qz=3,Yz=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return C(this,null,function*(){return this.db?this.db:(this.db=yield O0(),this.db)})}_withRetries(t){return C(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>Qz)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return C(this,null,function*(){return Gk()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return C(this,null,function*(){this.receiver=jz._getInstance(qz()),this.receiver._subscribe("keyChanged",(t,r)=>C(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>C(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return C(this,null,function*(){var t,r;if(this.activeServiceWorker=yield $z(),!this.activeServiceWorker)return;this.sender=new k0(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return C(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Hz()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return C(this,null,function*(){try{if(!indexedDB)return!1;let t=yield O0();return yield hk(t,Vy,"1"),yield fk(t,Vy),!0}catch{}return!1})}_withPendingWrite(t){return C(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return C(this,null,function*(){return this._withPendingWrite(()=>C(this,null,function*(){return yield this._withRetries(i=>hk(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return C(this,null,function*(){let r=yield this._withRetries(i=>Wz(i,t));return this.localCache[t]=r,r})}_remove(t){return C(this,null,function*(){return this._withPendingWrite(()=>C(this,null,function*(){return yield this._withRetries(r=>fk(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return C(this,null,function*(){let t=yield this._withRetries(s=>{let o=Hy(s,!1).getAll();return new Fa(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>C(this,null,function*(){return this._poll()}),Kz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Qk=Yz;var x_e=Lk("rcb"),M_e=new Oa(3e4,6e4);function Jz(n,e){return e?Zi(e):(ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var tf=class extends Zh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _0(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _0(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _0(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Xz(n){return $k(n.auth,new tf(n),n.bypassAuthState)}function Zz(n){let{auth:e,user:t}=n;return ce(t,e,"internal-error"),Mz(t,new tf(n),n.bypassAuthState)}function eG(n){return C(this,null,function*(){let{auth:e,user:t}=n;return ce(t,e,"internal-error"),xz(t,new tf(n),n.bypassAuthState)})}var F0=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>C(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return C(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Xz;case"linkViaPopup":case"linkViaRedirect":return eG;case"reauthViaPopup":case"reauthViaRedirect":return Zz;default:fi(this.auth,"internal-error")}}resolve(e){yo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var k_e=new Oa(2e3,1e4);var tG="pendingRedirect",Ay=new Map,L0=class n extends F0{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return C(this,null,function*(){let e=Ay.get(this.auth._key());if(!e){try{let r=(yield nG(this.resolver,this.auth))?yield Yr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ay.set(this.auth._key(),e)}return this.bypassAuthState||Ay.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return C(this,null,function*(){if(e.type==="signInViaRedirect")return Yr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Yr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return C(this,null,function*(){})}cleanUp(){}};function nG(n,e){return C(this,null,function*(){let t=sG(e),r=iG(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function rG(n,e){Ay.set(n._key(),e)}function iG(n){return Zi(n._redirectPersistence)}function sG(n){return Sy(tG,n.config.apiKey,n.name)}function oG(n,e,t=!1){return C(this,null,function*(){if(Mn(n.app))return Promise.reject(es(n));let r=La(n),i=Jz(r,e),o=yield new L0(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var aG=600*1e3,V0=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cG(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Yk(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ka(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aG&&this.cachedEventUids.clear(),this.cachedEventUids.has(pk(e))}saveEventToCache(e){this.cachedEventUids.add(pk(e)),this.lastProcessedEventTime=Date.now()}};function pk(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Yk({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function cG(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yk(n);default:return!1}}function uG(t){return C(this,arguments,function*(n,e={}){return ts(n,"GET","/v1/projects",e)})}var lG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dG=/^https?/;function hG(n){return C(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield uG(n);for(let t of e)try{if(fG(t))return}catch{}fi(n,"unauthorized-domain")})}function fG(n){let e=E0(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!dG.test(t))return!1;if(lG.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var pG=new Oa(3e4,6e4);function gk(){let n=hi().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function gG(n){return new Promise((e,t)=>{var r,i,s;function o(){gk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gk(),t(ka(n,"network-request-failed"))},timeout:pG.get()})}if(!((i=(r=hi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=hi().gapi)===null||s===void 0)&&s.load)o();else{let a=Lk("iframefcb");return hi()[a]=()=>{gapi.load?o():t(ka(n,"network-request-failed"))},Fk(`${Ez()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Ry=null,e})}var Ry=null;function mG(n){return Ry=Ry||gG(n),Ry}var yG=new Oa(5e3,15e3),_G="__/auth/iframe",vG="emulator/auth/iframe",EG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wG(n){let e=n.config;ce(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?$0(e,vG):`https://${n.config.authDomain}/${_G}`,r={apiKey:e.apiKey,appName:n.name,v:oo},i=IG.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Lh(r).slice(1)}`}function TG(n){return C(this,null,function*(){let e=yield mG(n),t=hi().gapi;return ce(t,n,"internal-error"),e.open({where:document.body,url:wG(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:EG,dontclear:!0},r=>new Promise((i,s)=>C(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=ka(n,"network-request-failed"),a=hi().setTimeout(()=>{s(o)},yG.get());function c(){hi().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var bG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CG=500,DG=600,SG="_blank",AG="http://localhost",By=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function RG(n,e,t,r=CG,i=DG){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},bG),{width:r.toString(),height:i.toString(),top:s,left:o}),d=Wt().toLowerCase();t&&(a=Rk(d)?SG:t),Sk(d)&&(e=e||AG,c.scrollbars="yes");let h=Object.entries(c).reduce((I,[S,P])=>`${I}${S}=${P},`,"");if(pz(d)&&a!=="_self")return PG(e||"",a),new By(null);let g=window.open(e||"",a,h);ce(g,n,"popup-blocked");try{g.focus()}catch{}return new By(g)}function PG(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var NG="__/auth/handler",xG="emulator/auth/handler",MG=encodeURIComponent("fac");function mk(n,e,t,r,i,s){return C(this,null,function*(){ce(n.config.authDomain,n,"auth-domain-config-required"),ce(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:oo,eventId:i};if(e instanceof Ly){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",BM(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,g]of Object.entries(s||{}))o[h]=g}if(e instanceof x0){let h=e.getScopes().filter(g=>g!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield n._getAppCheckToken(),d=c?`#${MG}=${encodeURIComponent(c)}`:"";return`${kG(n)}?${Lh(a).slice(1)}${d}`})}function kG({config:n}){return n.emulator?$0(n,xG):`https://${n.authDomain}/${NG}`}var v0="webStorageSupport",U0=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nb,this._completeRedirectFn=oG,this._overrideRedirectResult=rG}_openPopup(e,t,r,i){return C(this,null,function*(){var s;yo((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield mk(e,t,r,E0(),i);return RG(e,o,zk())})}_openRedirect(e,t,r,i){return C(this,null,function*(){yield this._originValidation(e);let s=yield mk(e,t,r,E0(),i);return Bz(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(yo(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return C(this,null,function*(){let t=yield TG(e),r=new V0(e);return t.register("authEvent",i=>(ce(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(v0,{type:v0},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[v0];o!==void 0&&t(!!o),fi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hG(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return kk()||Ak()||G0()}},Jk=U0;var yk="@firebase/auth",_k="1.10.8";var j0=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return C(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function OG(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FG(n){Lr(new En("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ok(n)},d=new S0(r,i,s,c);return wz(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Lr(new En("auth-internal",e=>{let t=La(e.getProvider("auth").getImmediate());return(r=>new j0(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ht(yk,_k,OG(n)),ht(yk,_k,"esm2017")}var LG=300,VG=TT("authIdTokenMaxAge")||LG,vk=null,UG=n=>e=>C(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>VG)return;let i=t?.token;vk!==i&&(vk=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function rb(n=Aa()){let e=Uu(n,"auth");if(e.isInitialized())return e.getImmediate();let t=W0(n,{popupRedirectResolver:Jk,persistence:[Qk,qk,nb]}),r=TT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=UG(s.toString());eb(t,o,()=>o(t.currentUser)),Z0(t,a=>o(a))}}let i=IT("auth");return i&&K0(t,`http://${i}`),t}function jG(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}_z({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=ka("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",jG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FG("Browser");var Xk="auth",Va=class{constructor(e){return e}},rf=class{constructor(){return Bu(Xk)}};var ib=new ee("angularfire2.auth-instances");function A8(n,e){let t=jh(Xk,n,e);return t&&new Va(t)}function R8(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Va(r)}}var P8={provide:rf,deps:[[new Wn,ib]]},N8={provide:Va,useFactory:A8,deps:[[new Wn,ib],Wi]};function Zk(n,...e){return ht("angularfire",ao.full,"auth"),$n([N8,P8,{provide:ib,useFactory:R8(n),multi:!0,deps:[Ke,Tt,co,Pa,[new Wn,$u],...e]}])}var eO=ft(ik,!0);var tO=ft(Y0,!0,2);var nO=ft(rb,!0);var rO=ft(J0,!0,2);var iO=ft(tb,!0,2);var sO=ft(X0,!0,2);var oO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},aO={};var ns,sb;(function(){var n;function e(b,_){function E(){}E.prototype=_.prototype,b.F=_.prototype,b.prototype=new E,b.prototype.constructor=b,b.D=function(T,w,R){for(var v=Array(arguments.length-2),st=2;st<arguments.length;st++)v[st-2]=arguments[st];return _.prototype[w].apply(T,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,_,E){E||(E=0);let T=Array(16);if(typeof _=="string")for(var w=0;w<16;++w)T[w]=_.charCodeAt(E++)|_.charCodeAt(E++)<<8|_.charCodeAt(E++)<<16|_.charCodeAt(E++)<<24;else for(w=0;w<16;++w)T[w]=_[E++]|_[E++]<<8|_[E++]<<16|_[E++]<<24;_=b.g[0],E=b.g[1],w=b.g[2];let R=b.g[3],v;v=_+(R^E&(w^R))+T[0]+3614090360&4294967295,_=E+(v<<7&4294967295|v>>>25),v=R+(w^_&(E^w))+T[1]+3905402710&4294967295,R=_+(v<<12&4294967295|v>>>20),v=w+(E^R&(_^E))+T[2]+606105819&4294967295,w=R+(v<<17&4294967295|v>>>15),v=E+(_^w&(R^_))+T[3]+3250441966&4294967295,E=w+(v<<22&4294967295|v>>>10),v=_+(R^E&(w^R))+T[4]+4118548399&4294967295,_=E+(v<<7&4294967295|v>>>25),v=R+(w^_&(E^w))+T[5]+1200080426&4294967295,R=_+(v<<12&4294967295|v>>>20),v=w+(E^R&(_^E))+T[6]+2821735955&4294967295,w=R+(v<<17&4294967295|v>>>15),v=E+(_^w&(R^_))+T[7]+4249261313&4294967295,E=w+(v<<22&4294967295|v>>>10),v=_+(R^E&(w^R))+T[8]+1770035416&4294967295,_=E+(v<<7&4294967295|v>>>25),v=R+(w^_&(E^w))+T[9]+2336552879&4294967295,R=_+(v<<12&4294967295|v>>>20),v=w+(E^R&(_^E))+T[10]+4294925233&4294967295,w=R+(v<<17&4294967295|v>>>15),v=E+(_^w&(R^_))+T[11]+2304563134&4294967295,E=w+(v<<22&4294967295|v>>>10),v=_+(R^E&(w^R))+T[12]+1804603682&4294967295,_=E+(v<<7&4294967295|v>>>25),v=R+(w^_&(E^w))+T[13]+4254626195&4294967295,R=_+(v<<12&4294967295|v>>>20),v=w+(E^R&(_^E))+T[14]+2792965006&4294967295,w=R+(v<<17&4294967295|v>>>15),v=E+(_^w&(R^_))+T[15]+1236535329&4294967295,E=w+(v<<22&4294967295|v>>>10),v=_+(w^R&(E^w))+T[1]+4129170786&4294967295,_=E+(v<<5&4294967295|v>>>27),v=R+(E^w&(_^E))+T[6]+3225465664&4294967295,R=_+(v<<9&4294967295|v>>>23),v=w+(_^E&(R^_))+T[11]+643717713&4294967295,w=R+(v<<14&4294967295|v>>>18),v=E+(R^_&(w^R))+T[0]+3921069994&4294967295,E=w+(v<<20&4294967295|v>>>12),v=_+(w^R&(E^w))+T[5]+3593408605&4294967295,_=E+(v<<5&4294967295|v>>>27),v=R+(E^w&(_^E))+T[10]+38016083&4294967295,R=_+(v<<9&4294967295|v>>>23),v=w+(_^E&(R^_))+T[15]+3634488961&4294967295,w=R+(v<<14&4294967295|v>>>18),v=E+(R^_&(w^R))+T[4]+3889429448&4294967295,E=w+(v<<20&4294967295|v>>>12),v=_+(w^R&(E^w))+T[9]+568446438&4294967295,_=E+(v<<5&4294967295|v>>>27),v=R+(E^w&(_^E))+T[14]+3275163606&4294967295,R=_+(v<<9&4294967295|v>>>23),v=w+(_^E&(R^_))+T[3]+4107603335&4294967295,w=R+(v<<14&4294967295|v>>>18),v=E+(R^_&(w^R))+T[8]+1163531501&4294967295,E=w+(v<<20&4294967295|v>>>12),v=_+(w^R&(E^w))+T[13]+2850285829&4294967295,_=E+(v<<5&4294967295|v>>>27),v=R+(E^w&(_^E))+T[2]+4243563512&4294967295,R=_+(v<<9&4294967295|v>>>23),v=w+(_^E&(R^_))+T[7]+1735328473&4294967295,w=R+(v<<14&4294967295|v>>>18),v=E+(R^_&(w^R))+T[12]+2368359562&4294967295,E=w+(v<<20&4294967295|v>>>12),v=_+(E^w^R)+T[5]+4294588738&4294967295,_=E+(v<<4&4294967295|v>>>28),v=R+(_^E^w)+T[8]+2272392833&4294967295,R=_+(v<<11&4294967295|v>>>21),v=w+(R^_^E)+T[11]+1839030562&4294967295,w=R+(v<<16&4294967295|v>>>16),v=E+(w^R^_)+T[14]+4259657740&4294967295,E=w+(v<<23&4294967295|v>>>9),v=_+(E^w^R)+T[1]+2763975236&4294967295,_=E+(v<<4&4294967295|v>>>28),v=R+(_^E^w)+T[4]+1272893353&4294967295,R=_+(v<<11&4294967295|v>>>21),v=w+(R^_^E)+T[7]+4139469664&4294967295,w=R+(v<<16&4294967295|v>>>16),v=E+(w^R^_)+T[10]+3200236656&4294967295,E=w+(v<<23&4294967295|v>>>9),v=_+(E^w^R)+T[13]+681279174&4294967295,_=E+(v<<4&4294967295|v>>>28),v=R+(_^E^w)+T[0]+3936430074&4294967295,R=_+(v<<11&4294967295|v>>>21),v=w+(R^_^E)+T[3]+3572445317&4294967295,w=R+(v<<16&4294967295|v>>>16),v=E+(w^R^_)+T[6]+76029189&4294967295,E=w+(v<<23&4294967295|v>>>9),v=_+(E^w^R)+T[9]+3654602809&4294967295,_=E+(v<<4&4294967295|v>>>28),v=R+(_^E^w)+T[12]+3873151461&4294967295,R=_+(v<<11&4294967295|v>>>21),v=w+(R^_^E)+T[15]+530742520&4294967295,w=R+(v<<16&4294967295|v>>>16),v=E+(w^R^_)+T[2]+3299628645&4294967295,E=w+(v<<23&4294967295|v>>>9),v=_+(w^(E|~R))+T[0]+4096336452&4294967295,_=E+(v<<6&4294967295|v>>>26),v=R+(E^(_|~w))+T[7]+1126891415&4294967295,R=_+(v<<10&4294967295|v>>>22),v=w+(_^(R|~E))+T[14]+2878612391&4294967295,w=R+(v<<15&4294967295|v>>>17),v=E+(R^(w|~_))+T[5]+4237533241&4294967295,E=w+(v<<21&4294967295|v>>>11),v=_+(w^(E|~R))+T[12]+1700485571&4294967295,_=E+(v<<6&4294967295|v>>>26),v=R+(E^(_|~w))+T[3]+2399980690&4294967295,R=_+(v<<10&4294967295|v>>>22),v=w+(_^(R|~E))+T[10]+4293915773&4294967295,w=R+(v<<15&4294967295|v>>>17),v=E+(R^(w|~_))+T[1]+2240044497&4294967295,E=w+(v<<21&4294967295|v>>>11),v=_+(w^(E|~R))+T[8]+1873313359&4294967295,_=E+(v<<6&4294967295|v>>>26),v=R+(E^(_|~w))+T[15]+4264355552&4294967295,R=_+(v<<10&4294967295|v>>>22),v=w+(_^(R|~E))+T[6]+2734768916&4294967295,w=R+(v<<15&4294967295|v>>>17),v=E+(R^(w|~_))+T[13]+1309151649&4294967295,E=w+(v<<21&4294967295|v>>>11),v=_+(w^(E|~R))+T[4]+4149444226&4294967295,_=E+(v<<6&4294967295|v>>>26),v=R+(E^(_|~w))+T[11]+3174756917&4294967295,R=_+(v<<10&4294967295|v>>>22),v=w+(_^(R|~E))+T[2]+718787259&4294967295,w=R+(v<<15&4294967295|v>>>17),v=E+(R^(w|~_))+T[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(w+(v<<21&4294967295|v>>>11))&4294967295,b.g[2]=b.g[2]+w&4294967295,b.g[3]=b.g[3]+R&4294967295}r.prototype.v=function(b,_){_===void 0&&(_=b.length);let E=_-this.blockSize,T=this.C,w=this.h,R=0;for(;R<_;){if(w==0)for(;R<=E;)i(this,b,R),R+=this.blockSize;if(typeof b=="string"){for(;R<_;)if(T[w++]=b.charCodeAt(R++),w==this.blockSize){i(this,T),w=0;break}}else for(;R<_;)if(T[w++]=b[R++],w==this.blockSize){i(this,T),w=0;break}}this.h=w,this.o+=_},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;_=this.o*8;for(var E=b.length-8;E<b.length;++E)b[E]=_&255,_/=256;for(this.v(b),b=Array(16),_=0,E=0;E<4;++E)for(let T=0;T<32;T+=8)b[_++]=this.g[E]>>>T&255;return b};function s(b,_){var E=a;return Object.prototype.hasOwnProperty.call(E,b)?E[b]:E[b]=_(b)}function o(b,_){this.h=_;let E=[],T=!0;for(let w=b.length-1;w>=0;w--){let R=b[w]|0;T&&R==_||(E[w]=R,T=!1)}this.g=E}var a={};function c(b){return-128<=b&&b<128?s(b,function(_){return new o([_|0],_<0?-1:0)}):new o([b|0],b<0?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return g;if(b<0)return O(d(-b));let _=[],E=1;for(let T=0;b>=E;T++)_[T]=b/E|0,E*=4294967296;return new o(_,0)}function h(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return O(h(b.substring(1),_));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=d(Math.pow(_,8)),T=g;for(let R=0;R<b.length;R+=8){var w=Math.min(8,b.length-R);let v=parseInt(b.substring(R,R+w),_);w<8?(w=d(Math.pow(_,w)),T=T.j(w).add(d(v))):(T=T.j(E),T=T.add(d(v)))}return T}var g=c(0),I=c(1),S=c(16777216);n=o.prototype,n.m=function(){if(U(this))return-O(this).m();let b=0,_=1;for(let E=0;E<this.g.length;E++){let T=this.i(E);b+=(T>=0?T:4294967296+T)*_,_*=4294967296}return b},n.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(P(this))return"0";if(U(this))return"-"+O(this).toString(b);let _=d(Math.pow(b,6));var E=this;let T="";for(;;){let w=Re(E,_).g;E=G(E,w.j(_));let R=((E.g.length>0?E.g[0]:E.h)>>>0).toString(b);if(E=w,P(E))return R+T;for(;R.length<6;)R="0"+R;T=R+T}},n.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function P(b){if(b.h!=0)return!1;for(let _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function U(b){return b.h==-1}n.l=function(b){return b=G(this,b),U(b)?-1:P(b)?0:1};function O(b){let _=b.g.length,E=[];for(let T=0;T<_;T++)E[T]=~b.g[T];return new o(E,~b.h).add(I)}n.abs=function(){return U(this)?O(this):this},n.add=function(b){let _=Math.max(this.g.length,b.g.length),E=[],T=0;for(let w=0;w<=_;w++){let R=T+(this.i(w)&65535)+(b.i(w)&65535),v=(R>>>16)+(this.i(w)>>>16)+(b.i(w)>>>16);T=v>>>16,R&=65535,v&=65535,E[w]=v<<16|R}return new o(E,E[E.length-1]&-2147483648?-1:0)};function G(b,_){return b.add(O(_))}n.j=function(b){if(P(this)||P(b))return g;if(U(this))return U(b)?O(this).j(O(b)):O(O(this).j(b));if(U(b))return O(this.j(O(b)));if(this.l(S)<0&&b.l(S)<0)return d(this.m()*b.m());let _=this.g.length+b.g.length,E=[];for(var T=0;T<2*_;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(let w=0;w<b.g.length;w++){let R=this.i(T)>>>16,v=this.i(T)&65535,st=b.i(w)>>>16,Tn=b.i(w)&65535;E[2*T+2*w]+=v*Tn,ne(E,2*T+2*w),E[2*T+2*w+1]+=R*Tn,ne(E,2*T+2*w+1),E[2*T+2*w+1]+=v*st,ne(E,2*T+2*w+1),E[2*T+2*w+2]+=R*st,ne(E,2*T+2*w+2)}for(b=0;b<_;b++)E[b]=E[2*b+1]<<16|E[2*b];for(b=_;b<2*_;b++)E[b]=0;return new o(E,0)};function ne(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function re(b,_){this.g=b,this.h=_}function Re(b,_){if(P(_))throw Error("division by zero");if(P(b))return new re(g,g);if(U(b))return _=Re(O(b),_),new re(O(_.g),O(_.h));if(U(_))return _=Re(b,O(_)),new re(O(_.g),_.h);if(b.g.length>30){if(U(b)||U(_))throw Error("slowDivide_ only works with positive integers.");for(var E=I,T=_;T.l(b)<=0;)E=rt(E),T=rt(T);var w=Ce(E,1),R=Ce(T,1);for(T=Ce(T,2),E=Ce(E,2);!P(T);){var v=R.add(T);v.l(b)<=0&&(w=w.add(E),R=v),T=Ce(T,1),E=Ce(E,1)}return _=G(b,w.j(_)),new re(w,_)}for(w=g;b.l(_)>=0;){for(E=Math.max(1,Math.floor(b.m()/_.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),R=d(E),v=R.j(_);U(v)||v.l(b)>0;)E-=T,R=d(E),v=R.j(_);P(R)&&(R=I),w=w.add(R),b=G(b,v)}return new re(w,b)}n.B=function(b){return Re(this,b).h},n.and=function(b){let _=Math.max(this.g.length,b.g.length),E=[];for(let T=0;T<_;T++)E[T]=this.i(T)&b.i(T);return new o(E,this.h&b.h)},n.or=function(b){let _=Math.max(this.g.length,b.g.length),E=[];for(let T=0;T<_;T++)E[T]=this.i(T)|b.i(T);return new o(E,this.h|b.h)},n.xor=function(b){let _=Math.max(this.g.length,b.g.length),E=[];for(let T=0;T<_;T++)E[T]=this.i(T)^b.i(T);return new o(E,this.h^b.h)};function rt(b){let _=b.g.length+1,E=[];for(let T=0;T<_;T++)E[T]=b.i(T)<<1|b.i(T-1)>>>31;return new o(E,b.h)}function Ce(b,_){let E=_>>5;_%=32;let T=b.g.length-E,w=[];for(let R=0;R<T;R++)w[R]=_>0?b.i(R+E)>>>_|b.i(R+E+1)<<32-_:b.i(R+E);return new o(w,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,sb=aO.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,ns=aO.Integer=o}).apply(typeof oO<"u"?oO:typeof self<"u"?self:typeof window<"u"?window:{});var qy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rs={};var ob,x8,Gu,ab,sf,zy,cb,ub,lb;(function(){var n,e=Object.defineProperty;function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof qy=="object"&&qy];for(var p=0;p<l.length;++p){var y=l[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function i(l,p){if(p)e:{var y=r;l=l.split(".");for(var A=0;A<l.length-1;A++){var N=l[A];if(!(N in y))break e;y=y[N]}l=l[l.length-1],A=y[l],p=p(A),p!=A&&p!=null&&e(y,l,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(p){var y=[],A;for(A in p)Object.prototype.hasOwnProperty.call(p,A)&&y.push([A,p[A]]);return y}});var s=s||{},o=this||self;function a(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function c(l,p,y){return l.call.apply(l.bind,arguments)}function d(l,p,y){return d=c,d.apply(null,arguments)}function h(l,p){var y=Array.prototype.slice.call(arguments,1);return function(){var A=y.slice();return A.push.apply(A,arguments),l.apply(this,A)}}function g(l,p){function y(){}y.prototype=p.prototype,l.Z=p.prototype,l.prototype=new y,l.prototype.constructor=l,l.Ob=function(A,N,F){for(var K=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)K[ue-2]=arguments[ue];return p.prototype[N].apply(A,K)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function S(l){let p=l.length;if(p>0){let y=Array(p);for(let A=0;A<p;A++)y[A]=l[A];return y}return[]}function P(l,p){for(let A=1;A<arguments.length;A++){let N=arguments[A];var y=typeof N;if(y=y!="object"?y:N?Array.isArray(N)?"array":y:"null",y=="array"||y=="object"&&typeof N.length=="number"){y=l.length||0;let F=N.length||0;l.length=y+F;for(let K=0;K<F;K++)l[y+K]=N[K]}else l.push(N)}}class U{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function O(l){o.setTimeout(()=>{throw l},0)}function G(){var l=b;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class ne{constructor(){this.h=this.g=null}add(p,y){let A=re.get();A.set(p,y),this.h?this.h.next=A:this.g=A,this.h=A}}var re=new U(()=>new Re,l=>l.reset());class Re{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let rt,Ce=!1,b=new ne,_=()=>{let l=Promise.resolve(void 0);rt=()=>{l.then(E)}};function E(){for(var l;l=G();){try{l.h.call(l.g)}catch(y){O(y)}var p=re;p.j(l),p.h<100&&(p.h++,l.next=p.g,p.g=l)}Ce=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let y=()=>{};o.addEventListener("test",y,p),o.removeEventListener("test",y,p)}catch{}return l})();function v(l){return/^[\s\xa0]*$/.test(l)}function st(l,p){w.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,p)}g(st,w),st.prototype.init=function(l,p){let y=this.type=l.type,A=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget,p||(y=="mouseover"?p=l.fromElement:y=="mouseout"&&(p=l.toElement)),this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&st.Z.h.call(this)},st.prototype.h=function(){st.Z.h.call(this);let l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Tn="closure_listenable_"+(Math.random()*1e6|0),zv=0;function No(l,p,y,A,N){this.listener=l,this.proxy=null,this.src=p,this.type=y,this.capture=!!A,this.ha=N,this.key=++zv,this.da=this.fa=!1}function Hr(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ms(l,p,y){for(let A in l)p.call(y,l[A],A,l)}function lp(l,p){for(let y in l)p.call(void 0,l[y],y,l)}function dp(l){let p={};for(let y in l)p[y]=l[y];return p}let yr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Nt(l,p){let y,A;for(let N=1;N<arguments.length;N++){A=arguments[N];for(y in A)l[y]=A[y];for(let F=0;F<yr.length;F++)y=yr[F],Object.prototype.hasOwnProperty.call(A,y)&&(l[y]=A[y])}}function uc(l){this.src=l,this.g={},this.h=0}uc.prototype.add=function(l,p,y,A,N){let F=l.toString();l=this.g[F],l||(l=this.g[F]=[],this.h++);let K=Jl(l,p,A,N);return K>-1?(p=l[K],y||(p.fa=!1)):(p=new No(p,this.src,F,!!A,N),p.fa=y,l.push(p)),p};function Ii(l,p){let y=p.type;if(y in l.g){var A=l.g[y],N=Array.prototype.indexOf.call(A,p,void 0),F;(F=N>=0)&&Array.prototype.splice.call(A,N,1),F&&(Hr(p),l.g[y].length==0&&(delete l.g[y],l.h--))}}function Jl(l,p,y,A){for(let N=0;N<l.length;++N){let F=l[N];if(!F.da&&F.listener==p&&F.capture==!!y&&F.ha==A)return N}return-1}var wi="closure_lm_"+(Math.random()*1e6|0),Xl={};function hp(l,p,y,A,N){if(A&&A.once)return dc(l,p,y,A,N);if(Array.isArray(p)){for(let F=0;F<p.length;F++)hp(l,p[F],y,A,N);return null}return y=gc(y),l&&l[Tn]?l.J(p,y,a(A)?!!A.capture:!!A,N):xo(l,p,y,!1,A,N)}function xo(l,p,y,A,N,F){if(!p)throw Error("Invalid event type");let K=a(N)?!!N.capture:!!N,ue=pc(l);if(ue||(l[wi]=ue=new uc(l)),y=ue.add(p,y,A,K,F),y.proxy)return y;if(A=lc(),y.proxy=A,A.src=l,A.listener=y,l.addEventListener)R||(N=K),N===void 0&&(N=!1),l.addEventListener(p.toString(),A,N);else if(l.attachEvent)l.attachEvent(fc(p.toString()),A);else if(l.addListener&&l.removeListener)l.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return y}function lc(){function l(y){return p.call(l.src,l.listener,y)}let p=fp;return l}function dc(l,p,y,A,N){if(Array.isArray(p)){for(let F=0;F<p.length;F++)dc(l,p[F],y,A,N);return null}return y=gc(y),l&&l[Tn]?l.K(p,y,a(A)?!!A.capture:!!A,N):xo(l,p,y,!0,A,N)}function hc(l,p,y,A,N){if(Array.isArray(p))for(var F=0;F<p.length;F++)hc(l,p[F],y,A,N);else A=a(A)?!!A.capture:!!A,y=gc(y),l&&l[Tn]?(l=l.i,F=String(p).toString(),F in l.g&&(p=l.g[F],y=Jl(p,y,A,N),y>-1&&(Hr(p[y]),Array.prototype.splice.call(p,y,1),p.length==0&&(delete l.g[F],l.h--)))):l&&(l=pc(l))&&(p=l.g[p.toString()],l=-1,p&&(l=Jl(p,y,A,N)),(y=l>-1?p[l]:null)&&Mo(y))}function Mo(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[Tn])Ii(p.i,l);else{var y=l.type,A=l.proxy;p.removeEventListener?p.removeEventListener(y,A,l.capture):p.detachEvent?p.detachEvent(fc(y),A):p.addListener&&p.removeListener&&p.removeListener(A),(y=pc(p))?(Ii(y,l),y.h==0&&(y.src=null,p[wi]=null)):Hr(l)}}}function fc(l){return l in Xl?Xl[l]:Xl[l]="on"+l}function fp(l,p){if(l.da)l=!0;else{p=new st(p,this);let y=l.listener,A=l.ha||l.src;l.fa&&Mo(l),l=y.call(A,p)}return l}function pc(l){return l=l[wi],l instanceof uc?l:null}var Zl="__closure_events_fn_"+(Math.random()*1e9>>>0);function gc(l){return typeof l=="function"?l:(l[Zl]||(l[Zl]=function(p){return l.handleEvent(p)}),l[Zl])}function xt(){T.call(this),this.i=new uc(this),this.M=this,this.G=null}g(xt,T),xt.prototype[Tn]=!0,xt.prototype.removeEventListener=function(l,p,y,A){hc(this,l,p,y,A)};function Mt(l,p){var y,A=l.G;if(A)for(y=[];A;A=A.G)y.push(A);if(l=l.M,A=p.type||p,typeof p=="string")p=new w(p,l);else if(p instanceof w)p.target=p.target||l;else{var N=p;p=new w(A,l),Nt(p,N)}N=!0;let F,K;if(y)for(K=y.length-1;K>=0;K--)F=p.g=y[K],N=ko(F,A,!0,p)&&N;if(F=p.g=l,N=ko(F,A,!0,p)&&N,N=ko(F,A,!1,p)&&N,y)for(K=0;K<y.length;K++)F=p.g=y[K],N=ko(F,A,!1,p)&&N}xt.prototype.N=function(){if(xt.Z.N.call(this),this.i){var l=this.i;for(let p in l.g){let y=l.g[p];for(let A=0;A<y.length;A++)Hr(y[A]);delete l.g[p],l.h--}}this.G=null},xt.prototype.J=function(l,p,y,A){return this.i.add(String(l),p,!1,y,A)},xt.prototype.K=function(l,p,y,A){return this.i.add(String(l),p,!0,y,A)};function ko(l,p,y,A){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();let N=!0;for(let F=0;F<p.length;++F){let K=p[F];if(K&&!K.da&&K.capture==y){let ue=K.listener,u=K.ha||K.src;K.fa&&Ii(l.i,K),N=ue.call(u,A)!==!1&&N}}return N&&!A.defaultPrevented}function Gv(l,p){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(l,p||0)}function mc(l){l.g=Gv(()=>{l.g=null,l.i&&(l.i=!1,mc(l))},l.l);let p=l.h;l.h=null,l.m.apply(null,p)}class ed extends T{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:mc(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ti(l){T.call(this),this.h=l,this.g={}}g(Ti,T);var kt=[];function Ht(l){ms(l.g,function(p,y){this.g.hasOwnProperty(y)&&Mo(p)},l),l.g={}}Ti.prototype.N=function(){Ti.Z.N.call(this),Ht(this)},Ti.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ys=o.JSON.stringify,pp=o.JSON.parse,gp=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function mp(){}function _s(){}var vs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function yc(){w.call(this,"d")}g(yc,w);function Oo(){w.call(this,"c")}g(Oo,w);var bi={},yp=null;function Es(){return yp=yp||new xt}bi.Ia="serverreachability";function td(l){w.call(this,bi.Ia,l)}g(td,w);function Is(l){let p=Es();Mt(p,new td(p))}bi.STAT_EVENT="statevent";function ws(l,p){w.call(this,bi.STAT_EVENT,l),this.stat=p}g(ws,w);function Ot(l){let p=Es();Mt(p,new ws(p,l))}bi.Ja="timingevent";function _c(l,p){w.call(this,bi.Ja,l),this.size=p}g(_c,w);function kn(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},p)}function Ts(){this.g=!0}Ts.prototype.ua=function(){this.g=!1};function vc(l,p,y,A,N,F){l.info(function(){if(l.g)if(F){var K="",ue=F.split("&");for(let f=0;f<ue.length;f++){var u=ue[f].split("=");if(u.length>1){let m=u[0];u=u[1];let D=m.split("_");K=D.length>=2&&D[1]=="type"?K+(m+"="+u+"&"):K+(m+"=redacted&")}}}else K=null;else K=F;return"XMLHTTP REQ ("+A+") [attempt "+N+"]: "+p+`
`+y+`
`+K})}function _p(l,p,y,A,N,F,K){l.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+N+"]: "+p+`
`+y+`
`+F+" "+K})}function nr(l,p,y,A){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+Yt(l,y)+(A?" "+A:"")})}function vp(l,p){l.info(function(){return"TIMEOUT: "+p})}Ts.prototype.info=function(){};function Yt(l,p){if(!l.g)return p;if(!p)return null;try{let F=JSON.parse(p);if(F){for(l=0;l<F.length;l++)if(Array.isArray(F[l])){var y=F[l];if(!(y.length<2)){var A=y[1];if(Array.isArray(A)&&!(A.length<1)){var N=A[0];if(N!="noop"&&N!="stop"&&N!="close")for(let K=1;K<A.length;K++)A[K]=""}}}}return ys(F)}catch{return p}}var Fo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Cs;function nd(){}g(nd,mp),nd.prototype.g=function(){return new XMLHttpRequest},Cs=new nd;function Lo(l){return encodeURIComponent(String(l))}function Ds(l){var p=1;l=l.split(":");let y=[];for(;p>0&&l.length;)y.push(l.shift()),p--;return l.length&&y.push(l.join(":")),y}function qr(l,p,y,A){this.j=l,this.i=p,this.l=y,this.S=A||1,this.V=new Ti(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ep}function Ep(){this.i=null,this.g="",this.h=!1}var Vo={},Ec={};function Uo(l,p,y){l.M=1,l.A=Ho(On(p)),l.u=y,l.R=!0,jo(l,null)}function jo(l,p){l.F=Date.now(),Ss(l),l.B=On(l.A);var y=l.B,A=l.S;Array.isArray(A)||(A=[String(A)]),Dp(y.i,"t",A),l.C=0,y=l.j.L,l.h=new Ep,l.g=Mc(l.j,y?p:null,!l.u),l.P>0&&(l.O=new ed(d(l.Y,l,l.g),l.P)),p=l.V,y=l.g,A=l.ba;var N="readystatechange";Array.isArray(N)||(N&&(kt[0]=N.toString()),N=kt);for(let F=0;F<N.length;F++){let K=hp(y,N[F],A||p.handleEvent,!1,p.h||p);if(!K)break;p.g[K.key]=K}p=l.J?dp(l.J):{},l.u?(l.v||(l.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,p)):(l.v="GET",l.g.ea(l.B,l.v,null,p)),Is(),vc(l.i,l.v,l.B,l.l,l.S,l.u)}qr.prototype.ba=function(l){l=l.target;let p=this.O;p&&$e(l)==3?p.j():this.Y(l)},qr.prototype.Y=function(l){try{if(l==this.g)e:{let ue=$e(this.g),u=this.g.ya(),f=this.g.ca();if(!(ue<3)&&(ue!=3||this.g&&(this.h.h||this.g.la()||Mp(this.g)))){this.K||ue!=4||u==7||(u==8||f<=0?Is(3):Is(2)),wc(this);var p=this.g.ca();this.X=p;var y=zr(this);if(this.o=p==200,_p(this.i,this.v,this.B,this.l,this.S,ue,p),this.o){if(this.U&&!this.L){t:{if(this.g){var A,N=this.g;if((A=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(A)){var F=A;break t}}F=null}if(l=F)nr(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Rs(this,l);else{this.o=!1,this.m=3,Ot(12),Ci(this),As(this);break e}}if(this.R){l=!0;let m;for(;!this.K&&this.C<y.length;)if(m=Ip(this,y),m==Ec){ue==4&&(this.m=4,Ot(14),l=!1),nr(this.i,this.l,null,"[Incomplete Response]");break}else if(m==Vo){this.m=4,Ot(15),nr(this.i,this.l,y,"[Invalid Chunk]"),l=!1;break}else nr(this.i,this.l,m,null),Rs(this,m);if(rd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ue!=4||y.length!=0||this.h.h||(this.m=1,Ot(16),l=!1),this.o=this.o&&l,!l)nr(this.i,this.l,y,"[Invalid Chunked Response]"),Ci(this),As(this);else if(y.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),Pc(K),K.P=!0,Ot(11))}}else nr(this.i,this.l,y,null),Rs(this,y);ue==4&&Ci(this),this.o&&!this.K&&(ue==4?md(this.j,this):(this.o=!1,Ss(this)))}else Wv(this.g),p==400&&y.indexOf("Unknown SID")>0?(this.m=3,Ot(12)):(this.m=0,Ot(13)),Ci(this),As(this)}}}catch{}finally{}};function zr(l){if(!rd(l))return l.g.la();let p=Mp(l.g);if(p==="")return"";let y="",A=p.length,N=$e(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Ci(l),As(l),"";l.h.i=new o.TextDecoder}for(let F=0;F<A;F++)l.h.h=!0,y+=l.h.i.decode(p[F],{stream:!(N&&F==A-1)});return p.length=0,l.h.g+=y,l.C=0,l.h.g}function rd(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function Ip(l,p){var y=l.C,A=p.indexOf(`
`,y);return A==-1?Ec:(y=Number(p.substring(y,A)),isNaN(y)?Vo:(A+=1,A+y>p.length?Ec:(p=p.slice(A,A+y),l.C=A+y,p)))}qr.prototype.cancel=function(){this.K=!0,Ci(this)};function Ss(l){l.T=Date.now()+l.H,Ic(l,l.H)}function Ic(l,p){if(l.D!=null)throw Error("WatchDog timer not null");l.D=kn(d(l.aa,l),p)}function wc(l){l.D&&(o.clearTimeout(l.D),l.D=null)}qr.prototype.aa=function(){this.D=null;let l=Date.now();l-this.T>=0?(vp(this.i,this.B),this.M!=2&&(Is(),Ot(17)),Ci(this),this.m=2,As(this)):Ic(this,this.T-l)};function As(l){l.j.I==0||l.K||md(l.j,l)}function Ci(l){wc(l);var p=l.O;p&&typeof p.dispose=="function"&&p.dispose(),l.O=null,Ht(l.V),l.g&&(p=l.g,l.g=null,p.abort(),p.dispose())}function Rs(l,p){try{var y=l.j;if(y.I!=0&&(y.g==l||Bo(y.h,l))){if(!l.L&&Bo(y.h,l)&&y.I==3){try{var A=y.Ba.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var N=A;if(N[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<l.F)Nc(y),Di(y);else break e;Ls(y),Ot(18)}}else y.xa=N[1],0<y.xa-y.K&&N[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=kn(d(y.Va,y),6e3));Gr(y.h)<=1&&y.ta&&(y.ta=void 0)}else Kr(y,11)}else if((l.L||y.g==l)&&Nc(y),!v(p))for(N=y.Ba.g.parse(p),p=0;p<N.length;p++){let f=N[p],m=f[0];if(!(m<=y.K))if(y.K=m,f=f[1],y.I==2)if(f[0]=="c"){y.M=f[1],y.ba=f[2];let D=f[3];D!=null&&(y.ka=D,y.j.info("VER="+y.ka));let x=f[4];x!=null&&(y.za=x,y.j.info("SVER="+y.za));let L=f[5];L!=null&&typeof L=="number"&&L>0&&(A=1.5*L,y.O=A,y.j.info("backChannelRequestTimeoutMs_="+A)),A=y;let W=l.g;if(W){let Ve=W.g?W.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ve){var F=A.h;F.g||Ve.indexOf("spdy")==-1&&Ve.indexOf("quic")==-1&&Ve.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(id(F,F.h),F.h=null))}if(A.G){let yt=W.g?W.g.getResponseHeader("X-HTTP-Session-Id"):null;yt&&(A.wa=yt,Je(A.J,A.G,yt))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-l.F,y.j.info("Handshake RTT: "+y.T+"ms")),A=y;var K=l;if(A.na=xc(A,A.L?A.ba:null,A.W),K.L){sd(A.h,K);var ue=K,u=A.O;u&&(ue.H=u),ue.D&&(wc(ue),Ss(ue)),A.g=K}else Rc(A);y.i.length>0&&Cn(y)}else f[0]!="stop"&&f[0]!="close"||Kr(y,7);else y.I==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?Kr(y,7):Ac(y):f[0]!="noop"&&y.l&&y.l.qa(f),y.A=0)}}Is(4)}catch{}}var wp=class{constructor(l,p){this.g=l,this.map=p}};function Tc(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ps(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Gr(l){return l.h?1:l.g?l.g.size:0}function Bo(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function id(l,p){l.g?l.g.add(p):l.h=p}function sd(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}Tc.prototype.cancel=function(){if(this.i=od(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function od(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let p=l.i;for(let y of l.g.values())p=p.concat(y.G);return p}return S(l.i)}var ad=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cd(l,p){if(l){l=l.split("&");for(let y=0;y<l.length;y++){let A=l[y].indexOf("="),N,F=null;A>=0?(N=l[y].substring(0,A),F=l[y].substring(A+1)):N=l[y],p(N,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function rr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;l instanceof rr?(this.l=l.l,Ns(this,l.j),this.o=l.o,this.g=l.g,$o(this,l.u),this.h=l.h,ud(this,Sp(l.i)),this.m=l.m):l&&(p=String(l).match(ad))?(this.l=!1,Ns(this,p[1]||"",!0),this.o=qo(p[2]||""),this.g=qo(p[3]||"",!0),$o(this,p[4]),this.h=qo(p[5]||"",!0),ud(this,p[6]||"",!0),this.m=qo(p[7]||"")):(this.l=!1,this.i=new vr(null,this.l))}rr.prototype.toString=function(){let l=[];var p=this.j;p&&l.push(Fn(p,zo,!0),":");var y=this.g;return(y||p=="file")&&(l.push("//"),(p=this.o)&&l.push(Fn(p,zo,!0),"@"),l.push(Lo(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&l.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(Fn(y,y.charAt(0)=="/"?Tp:bc,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",Fn(y,Cc)),l.join("")},rr.prototype.resolve=function(l){let p=On(this),y=!!l.j;y?Ns(p,l.j):y=!!l.o,y?p.o=l.o:y=!!l.g,y?p.g=l.g:y=l.u!=null;var A=l.h;if(y)$o(p,l.u);else if(y=!!l.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var N=p.h.lastIndexOf("/");N!=-1&&(A=p.h.slice(0,N+1)+A)}if(N=A,N==".."||N==".")A="";else if(N.indexOf("./")!=-1||N.indexOf("/.")!=-1){A=N.lastIndexOf("/",0)==0,N=N.split("/");let F=[];for(let K=0;K<N.length;){let ue=N[K++];ue=="."?A&&K==N.length&&F.push(""):ue==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),A&&K==N.length&&F.push("")):(F.push(ue),A=!0)}A=F.join("/")}else A=N}return y?p.h=A:y=l.i.toString()!=="",y?ud(p,Sp(l.i)):y=!!l.m,y&&(p.m=l.m),p};function On(l){return new rr(l)}function Ns(l,p,y){l.j=y?qo(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function $o(l,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);l.u=p}else l.u=null}function ud(l,p,y){p instanceof vr?(l.i=p,Go(l.i,l.l)):(y||(p=Fn(p,Ze)),l.i=new vr(p,l.l))}function Je(l,p,y){l.i.set(p,y)}function Ho(l){return Je(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function qo(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Fn(l,p,y){return typeof l=="string"?(l=encodeURI(l).replace(p,_r),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function _r(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var zo=/[#\/\?@]/g,bc=/[#\?:]/g,Tp=/[#\?]/g,Ze=/[#\?@]/g,Cc=/#/g;function vr(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function Ln(l){l.g||(l.g=new Map,l.h=0,l.i&&cd(l.i,function(p,y){l.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}n=vr.prototype,n.add=function(l,p){Ln(this),this.i=null,l=xs(this,l);let y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(p),this.h+=1,this};function bp(l,p){Ln(l),p=xs(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function ld(l,p){return Ln(l),p=xs(l,p),l.g.has(p)}n.forEach=function(l,p){Ln(this),this.g.forEach(function(y,A){y.forEach(function(N){l.call(p,N,A,this)},this)},this)};function Cp(l,p){Ln(l);let y=[];if(typeof p=="string")ld(l,p)&&(y=y.concat(l.g.get(xs(l,p))));else for(l=Array.from(l.g.values()),p=0;p<l.length;p++)y=y.concat(l[p]);return y}n.set=function(l,p){return Ln(this),this.i=null,l=xs(this,l),ld(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},n.get=function(l,p){return l?(l=Cp(this,l),l.length>0?String(l[0]):p):p};function Dp(l,p,y){bp(l,p),y.length>0&&(l.i=null,l.g.set(xs(l,p),S(y)),l.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],p=Array.from(this.g.keys());for(let A=0;A<p.length;A++){var y=p[A];let N=Lo(y);y=Cp(this,y);for(let F=0;F<y.length;F++){let K=N;y[F]!==""&&(K+="="+Lo(y[F])),l.push(K)}}return this.i=l.join("&")};function Sp(l){let p=new vr;return p.i=l.i,l.g&&(p.g=new Map(l.g),p.h=l.h),p}function xs(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function Go(l,p){p&&!l.j&&(Ln(l),l.i=null,l.g.forEach(function(y,A){let N=A.toLowerCase();A!=N&&(bp(this,A),Dp(this,N,y))},l)),l.j=p}function Wr(l,p){let y=new Ts;if(o.Image){let A=new Image;A.onload=h(Er,y,"TestLoadImage: loaded",!0,p,A),A.onerror=h(Er,y,"TestLoadImage: error",!1,p,A),A.onabort=h(Er,y,"TestLoadImage: abort",!1,p,A),A.ontimeout=h(Er,y,"TestLoadImage: timeout",!1,p,A),o.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=l}else p(!1)}function Ap(l,p){let y=new Ts,A=new AbortController,N=setTimeout(()=>{A.abort(),Er(y,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:A.signal}).then(F=>{clearTimeout(N),F.ok?Er(y,"TestPingServer: ok",!0,p):Er(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(N),Er(y,"TestPingServer: error",!1,p)})}function Er(l,p,y,A,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),A(y)}catch{}}function Rp(){this.g=new gp}function Ir(l){this.i=l.Sb||null,this.h=l.ab||!1}g(Ir,mp),Ir.prototype.g=function(){return new Dc(this.i,this.h)};function Dc(l,p){xt.call(this),this.H=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Dc,xt),n=Dc.prototype,n.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=p,this.readyState=1,bn(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(p.body=l),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Wo(this)),this.readyState=0},n.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,bn(this)),this.g&&(this.readyState=3,bn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Pp(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Pp(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}n.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Wo(this):bn(this),this.readyState==3&&Pp(this)}},n.Oa=function(l){this.g&&(this.response=this.responseText=l,Wo(this))},n.Na=function(l){this.g&&(this.response=l,Wo(this))},n.ga=function(){this.g&&Wo(this)};function Wo(l){l.readyState=4,l.l=null,l.j=null,l.B=null,bn(l)}n.setRequestHeader=function(l,p){this.A.append(l,p)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=p.next();return l.join(`\r
`)};function bn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Dc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Np(l){let p="";return ms(l,function(y,A){p+=A,p+=":",p+=y,p+=`\r
`}),p}function dd(l,p,y){e:{for(A in y){var A=!1;break e}A=!0}A||(y=Np(y),typeof l=="string"?y!=null&&Lo(y):Je(l,p,y))}function Xe(l){xt.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Xe,xt);var Sc=/^https?$/i,xp=["POST","PUT"];n=Xe.prototype,n.Fa=function(l){this.H=l},n.ea=function(l,p,y,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Cs.g(),this.g.onreadystatechange=I(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(F){Ms(this,F);return}if(l=y||"",y=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var N in A)y.set(N,A[N]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(let F of A.keys())y.set(F,A.get(F));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(y.keys()).find(F=>F.toLowerCase()=="content-type"),N=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(xp,p,void 0)>=0)||A||N||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[F,K]of y)this.g.setRequestHeader(F,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(F){Ms(this,F)}};function Ms(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.o=5,ks(l),Os(l)}function ks(l){l.A||(l.A=!0,Mt(l,"complete"),Mt(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,Mt(this,"complete"),Mt(this,"abort"),Os(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Os(this,!0)),Xe.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?hd(this):this.Xa())},n.Xa=function(){hd(this)};function hd(l){if(l.h&&typeof s<"u"){if(l.v&&$e(l)==4)setTimeout(l.Ca.bind(l),0);else if(Mt(l,"readystatechange"),$e(l)==4){l.h=!1;try{let F=l.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var A;if(A=F===0){let K=String(l.D).match(ad)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),A=!Sc.test(K?K.toLowerCase():"")}y=A}if(y)Mt(l,"complete"),Mt(l,"success");else{l.o=6;try{var N=$e(l)>2?l.g.statusText:""}catch{N=""}l.l=N+" ["+l.ca()+"]",ks(l)}}finally{Os(l)}}}}function Os(l,p){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);let y=l.g;l.g=null,p||Mt(l,"ready");try{y.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function $e(l){return l.g?l.g.readyState:0}n.ca=function(){try{return $e(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),pp(p)}};function Mp(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Wv(l){let p={};l=(l.g&&$e(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<l.length;A++){if(v(l[A]))continue;var y=Ds(l[A]);let N=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let F=p[N]||[];p[N]=F,F.push(y)}lp(p,function(A){return A.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fs(l,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||p}function fd(l){this.za=0,this.i=[],this.j=new Ts,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Fs("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Fs("baseRetryDelayMs",5e3,l),this.Za=Fs("retryDelaySeedMs",1e4,l),this.Ta=Fs("forwardChannelMaxRetries",2,l),this.va=Fs("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new Tc(l&&l.concurrentRequestLimit),this.Ba=new Rp,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=fd.prototype,n.ka=8,n.I=1,n.connect=function(l,p,y,A){Ot(0),this.W=l,this.H=p||{},y&&A!==void 0&&(this.H.OSID=y,this.H.OAID=A),this.F=this.X,this.J=xc(this,null,this.W),Cn(this)};function Ac(l){if(pd(l),l.I==3){var p=l.V++,y=On(l.J);if(Je(y,"SID",l.M),Je(y,"RID",p),Je(y,"TYPE","terminate"),wr(l,y),p=new qr(l,l.j,p),p.M=2,p.A=Ho(On(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!y&&o.Image&&(new Image().src=p.A,y=!0),y||(p.g=Mc(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Ss(p)}yd(l)}function Di(l){l.g&&(Pc(l),l.g.cancel(),l.g=null)}function pd(l){Di(l),l.v&&(o.clearTimeout(l.v),l.v=null),Nc(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function Cn(l){if(!Ps(l.h)&&!l.m){l.m=!0;var p=l.Ea;rt||_(),Ce||(rt(),Ce=!0),b.add(p,l),l.D=0}}function kp(l,p){return Gr(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=p.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=kn(d(l.Ea,l,p),Vs(l,l.D)),l.D++,!0)}n.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;let N=new qr(this,this.j,l),F=this.o;if(this.U&&(F?(F=dp(F),Nt(F,this.U)):F=this.U),this.u!==null||this.R||(N.J=F,F=null),this.S)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var A=this.i[y];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(p+=A,p>4096){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=gd(this,N,p),y=On(this.J),Je(y,"RID",l),Je(y,"CVER",22),this.G&&Je(y,"X-HTTP-Session-Id",this.G),wr(this,y),F&&(this.R?p="headers="+Lo(Np(F))+"&"+p:this.u&&dd(y,this.u,F)),id(this.h,N),this.Ra&&Je(y,"TYPE","init"),this.S?(Je(y,"$req",p),Je(y,"SID","null"),N.U=!0,Uo(N,y,null)):Uo(N,y,p),this.I=2}}else this.I==3&&(l?Op(this,l):this.i.length==0||Ps(this.h)||Op(this))};function Op(l,p){var y;p?y=p.l:y=l.V++;let A=On(l.J);Je(A,"SID",l.M),Je(A,"RID",y),Je(A,"AID",l.K),wr(l,A),l.u&&l.o&&dd(A,l.u,l.o),y=new qr(l,l.j,y,l.D+1),l.u===null&&(y.J=l.o),p&&(l.i=p.G.concat(l.i)),p=gd(l,y,1e3),y.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),id(l.h,y),Uo(y,A,p)}function wr(l,p){l.H&&ms(l.H,function(y,A){Je(p,A,y)}),l.l&&ms({},function(y,A){Je(p,A,y)})}function gd(l,p,y){y=Math.min(l.i.length,y);let A=l.l?d(l.l.Ka,l.l,l):null;e:{var N=l.i;let ue=-1;for(;;){let u=["count="+y];ue==-1?y>0?(ue=N[0].g,u.push("ofs="+ue)):ue=0:u.push("ofs="+ue);let f=!0;for(let m=0;m<y;m++){var F=N[m].g;let D=N[m].map;if(F-=ue,F<0)ue=Math.max(0,N[m].g-100),f=!1;else try{F="req"+F+"_"||"";try{var K=D instanceof Map?D:Object.entries(D);for(let[x,L]of K){let W=L;a(L)&&(W=ys(L)),u.push(F+x+"="+encodeURIComponent(W))}}catch(x){throw u.push(F+"type="+encodeURIComponent("_badmap")),x}}catch{A&&A(D)}}if(f){K=u.join("&");break e}}K=void 0}return l=l.i.splice(0,y),p.G=l,K}function Rc(l){if(!l.g&&!l.v){l.Y=1;var p=l.Da;rt||_(),Ce||(rt(),Ce=!0),b.add(p,l),l.A=0}}function Ls(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=kn(d(l.Da,l),Vs(l,l.A)),l.A++,!0)}n.Da=function(){if(this.v=null,Ko(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=kn(d(this.Wa,this),l)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ot(10),Di(this),Ko(this))};function Pc(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Ko(l){l.g=new qr(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var p=On(l.na);Je(p,"RID","rpc"),Je(p,"SID",l.M),Je(p,"AID",l.K),Je(p,"CI",l.F?"0":"1"),!l.F&&l.ia&&Je(p,"TO",l.ia),Je(p,"TYPE","xmlhttp"),wr(l,p),l.u&&l.o&&dd(p,l.u,l.o),l.O&&(l.g.H=l.O);var y=l.g;l=l.ba,y.M=1,y.A=Ho(On(p)),y.u=null,y.R=!0,jo(y,l)}n.Va=function(){this.C!=null&&(this.C=null,Di(this),Ls(this),Ot(19))};function Nc(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function md(l,p){var y=null;if(l.g==p){Nc(l),Pc(l),l.g=null;var A=2}else if(Bo(l.h,p))y=p.G,sd(l.h,p),A=1;else return;if(l.I!=0){if(p.o)if(A==1){y=p.u?p.u.length:0,p=Date.now()-p.F;var N=l.D;A=Es(),Mt(A,new _c(A,y)),Cn(l)}else Rc(l);else if(N=p.m,N==3||N==0&&p.X>0||!(A==1&&kp(l,p)||A==2&&Ls(l)))switch(y&&y.length>0&&(p=l.h,p.i=p.i.concat(y)),N){case 1:Kr(l,5);break;case 4:Kr(l,10);break;case 3:Kr(l,6);break;default:Kr(l,2)}}}function Vs(l,p){let y=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(y*=2),y*p}function Kr(l,p){if(l.j.info("Error code "+p),p==2){var y=d(l.bb,l),A=l.Ua;let N=!A;A=new rr(A||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ns(A,"https"),Ho(A),N?Wr(A.toString(),y):Ap(A.toString(),y)}else Ot(2);l.I=0,l.l&&l.l.pa(p),yd(l),pd(l)}n.bb=function(l){l?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function yd(l){if(l.I=0,l.ja=[],l.l){let p=od(l.h);(p.length!=0||l.i.length!=0)&&(P(l.ja,p),P(l.ja,l.i),l.h.i.length=0,S(l.i),l.i.length=0),l.l.oa()}}function xc(l,p,y){var A=y instanceof rr?On(y):new rr(y);if(A.g!="")p&&(A.g=p+"."+A.g),$o(A,A.u);else{var N=o.location;A=N.protocol,p=p?p+"."+N.hostname:N.hostname,N=+N.port;let F=new rr(null);A&&Ns(F,A),p&&(F.g=p),N&&$o(F,N),y&&(F.h=y),A=F}return y=l.G,p=l.wa,y&&p&&Je(A,y,p),Je(A,"VER",l.ka),wr(l,A),A}function Mc(l,p,y){if(p&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Aa&&!l.ma?new Xe(new Ir({ab:y})):new Xe(l.ma),p.Fa(l.L),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _d(){}n=_d.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Si(){}Si.prototype.g=function(l,p){return new nn(l,p)};function nn(l,p){xt.call(this),this.g=new fd(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(l?l["X-WebChannel-Client-Profile"]=p.sa:l={"X-WebChannel-Client-Profile":p.sa}),this.g.U=l,(l=p&&p.Qb)&&!v(l)&&(this.g.u=l),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!v(p)&&(this.g.G=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new Ai(this)}g(nn,xt),nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Ac(this.g)},nn.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.v&&(y={},y.__data__=ys(l),l=y);p.i.push(new wp(p.Ya++,l)),p.I==3&&Cn(p)},nn.prototype.N=function(){this.g.l=null,delete this.j,Ac(this.g),delete this.g,nn.Z.N.call(this)};function vd(l){yc.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(let y in p){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}g(vd,yc);function Qr(){Oo.call(this),this.status=1}g(Qr,Oo);function Ai(l){this.g=l}g(Ai,_d),Ai.prototype.ra=function(){Mt(this.g,"a")},Ai.prototype.qa=function(l){Mt(this.g,new vd(l))},Ai.prototype.pa=function(l){Mt(this.g,new Qr)},Ai.prototype.oa=function(){Mt(this.g,"b")},Si.prototype.createWebChannel=Si.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,lb=rs.createWebChannelTransport=function(){return new Si},ub=rs.getStatEventTarget=function(){return Es()},cb=rs.Event=bi,zy=rs.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fo.NO_ERROR=0,Fo.TIMEOUT=8,Fo.HTTP_ERROR=6,sf=rs.ErrorCode=Fo,bs.COMPLETE="complete",ab=rs.EventType=bs,_s.EventType=vs,vs.OPEN="a",vs.CLOSE="b",vs.ERROR="c",vs.MESSAGE="d",xt.prototype.listen=xt.prototype.J,Gu=rs.WebChannel=_s,x8=rs.FetchXmlHttpFactory=Ir,Xe.prototype.listenOnce=Xe.prototype.K,Xe.prototype.getLastError=Xe.prototype.Ha,Xe.prototype.getLastErrorCode=Xe.prototype.ya,Xe.prototype.getStatus=Xe.prototype.ca,Xe.prototype.getResponseJson=Xe.prototype.La,Xe.prototype.getResponseText=Xe.prototype.la,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Fa,ob=rs.XhrIo=Xe}).apply(typeof qy<"u"?qy:typeof self<"u"?self:typeof window<"u"?window:{});var cO="@firebase/firestore",uO="4.9.2";var ln=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");var yl="12.3.0";var qa=new ho("@firebase/firestore");function Wu(){return qa.logLevel}function J(n,...e){if(qa.logLevel<=Se.DEBUG){let t=e.map(QC);qa.debug(`Firestore (${yl}): ${n}`,...t)}}function os(n,...e){if(qa.logLevel<=Se.ERROR){let t=e.map(QC);qa.error(`Firestore (${yl}): ${n}`,...t)}}function hf(n,...e){if(qa.logLevel<=Se.WARN){let t=e.map(QC);qa.warn(`Firestore (${yl}): ${n}`,...t)}}function QC(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function me(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,JO(n,r,t)}function JO(n,e,t){let r=`FIRESTORE (${yl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw os(r),new Error(r)}function ut(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||JO(e,i,r)}function ke(n,e){return n}var Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},oe=class extends hr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var vo=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var _b=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},vb=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ln.UNAUTHENTICATED))}shutdown(){}};var Eb=class{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ut(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new vo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new vo,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>C(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new vo)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ut(typeof r.accessToken=="string",31837,{l:r}),new _b(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ut(e===null||typeof e=="string",2055,{h:e}),new ln(e)}},Ib=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},wb=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Ib(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Jy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Tb=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ji(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ut(this.o===void 0,3512);let r=s=>{s.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Jy(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ut(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Jy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function M8(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Xy=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=M8(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Ne(n,e){return n<e?-1:n>e?1:0}function bb(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return db(i)===db(s)?Ne(i,s):db(i)?1:-1}return Ne(n.length,e.length)}var k8=55296,O8=57343;function db(n){let e=n.charCodeAt(0);return e>=k8&&e<=O8}function sl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var lO="__name__",Zy=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&me(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&me(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ne(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):bb(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ns.fromString(e.substring(4,e.length-2))}},jt=class n extends Zy{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new oe(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},F8=/^[_a-zA-Z][_a-zA-Z0-9]*$/,jr=class n extends Zy{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return F8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lO}static keyField(){return new n([lO])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new oe(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new oe(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new oe(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new oe(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var le=class n{constructor(e){this.path=e}static fromPath(e){return new n(jt.fromString(e))}static fromName(e){return new n(jt.fromString(e).popFirst(5))}static empty(){return new n(jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&jt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new jt(e.slice()))}};function L8(n,e,t,r){if(e===!0&&r===!0)throw new oe(Q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function V8(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function U8(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":me(12329,{type:typeof n})}function hb(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new oe(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=U8(n);throw new oe(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Dt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Df(n,e){if(!V8(n))throw new oe(Q.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new oe(Q.INVALID_ARGUMENT,t);return!0}var dO=-62135596800,hO=1e6,In=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*hO);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<dO)throw new oe(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hO}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Df(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-dO;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};In._jsonSchemaVersion="firestore/timestamp/1.0",In._jsonSchema={type:Dt("string",In._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};var _e=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new In(0,0))}static max(){return new n(new In(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ff=-1,Cb=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Cb.UNKNOWN_ID=-1;function j8(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=_e.fromTimestamp(r===1e9?new In(t+1,0):new In(t,r));return new za(i,le.empty(),e)}function B8(n){return new za(n.readTime,n.key,ff)}var za=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(_e.min(),le.empty(),ff)}static max(){return new n(_e.max(),le.empty(),ff)}};function $8(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=le.comparator(n.documentKey,e.documentKey),t!==0?t:Ne(n.largestBatchId,e.largestBatchId))}var H8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Db=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function C_(n){return C(this,null,function*(){if(n.code!==Q.FAILED_PRECONDITION||n.message!==H8)throw n;J("LocalStore","Unexpectedly lost primary lease")})}var q=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function q8(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function _l(n){return n.name==="IndexedDbTransactionError"}var YC=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),z8=-1;function D_(n){return n==null}function e_(n){return n===0&&1/n==-1/0}var XO="";function G8(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=fO(e)),e=W8(n.get(t),e);return fO(e)}function W8(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case XO:t+="";break;default:t+=s}}return t}function fO(n){return n+XO+""}var K8="remoteDocuments",ZO="owner";var eF="mutationQueues";var tF="mutations";var nF="documentMutations",Q8="remoteDocumentsV14";var rF="remoteDocumentGlobal";var iF="targets";var sF="targetDocuments";var oF="targetGlobal",aF="collectionParents";var cF="clientMetadata";var uF="bundles";var lF="namedQueries";var Y8="indexConfiguration";var J8="indexState";var X8="indexEntries";var dF="documentOverlays";var Z8="globals";var eW=[eF,tF,nF,K8,iF,ZO,oF,sF,cF,rF,aF,uF,lF],Uve=[...eW,dF],tW=[eF,tF,nF,Q8,iF,ZO,oF,sF,cF,rF,aF,uF,lF,dF],nW=tW,rW=[...nW,Y8,J8,X8];var jve=[...rW,Z8];function pO(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Sf(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function iW(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var It=class n{constructor(e,t){this.comparator=e,this.root=t||pi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ju(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ju(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ju(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ju(this.root,e,this.comparator,!0)}},Ju=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},pi=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}};pi.EMPTY=null,pi.RED=!0,pi.BLACK=!1;pi.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new pi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Kt=class n{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new t_(this.data.getIterator())}getIteratorFrom(e){return new t_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},t_=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ua=class n{constructor(e){this.fields=e,e.sort(jr.comparator)}static empty(){return new n([])}unionWith(e){let t=new Kt(jr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sl(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var n_=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var dn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new n_("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};dn.EMPTY_BYTE_STRING=new dn("");var sW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function as(n){if(ut(!!n,39018),typeof n=="string"){let e=0,t=sW.exec(n);if(ut(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ct(n.seconds),nanos:ct(n.nanos)}}function ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function cs(n){return typeof n=="string"?dn.fromBase64String(n):dn.fromUint8Array(n)}var hF="server_timestamp",fF="__type__",pF="__previous_value__",gF="__local_write_time__";function JC(n){return(n?.mapValue?.fields||{})[fF]?.stringValue===hF}function S_(n){let e=n.mapValue.fields[pF];return JC(e)?S_(e):e}function pf(n){let e=as(n.mapValue.fields[gF].timestampValue);return new In(e.seconds,e.nanos)}var Sb=class{constructor(e,t,r,i,s,o,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}},Ab="(default)",r_=class n{constructor(e,t){this.projectId=e,this.database=t||Ab}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Ab}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var mF="__type__",yF="__max__",Gy={mapValue:{fields:{__type__:{stringValue:yF}}}},_F="__vector__",gf="value";function Eo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?JC(n)?4:EF(n)?9007199254740991:vF(n)?10:11:me(28295,{value:n})}function mi(n,e){if(n===e)return!0;let t=Eo(n);if(t!==Eo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pf(n).isEqual(pf(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=as(i.timestampValue),a=as(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return cs(i.bytesValue).isEqual(cs(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return ct(i.geoPointValue.latitude)===ct(s.geoPointValue.latitude)&&ct(i.geoPointValue.longitude)===ct(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return ct(i.integerValue)===ct(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=ct(i.doubleValue),a=ct(s.doubleValue);return o===a?e_(o)===e_(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return sl(n.arrayValue.values||[],e.arrayValue.values||[],mi);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(pO(o)!==pO(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!mi(o[c],a[c])))return!1;return!0})(n,e);default:return me(52216,{left:n})}}function mf(n,e){return(n.values||[]).find(t=>mi(t,e))!==void 0}function ol(n,e){if(n===e)return 0;let t=Eo(n),r=Eo(e);if(t!==r)return Ne(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=ct(s.integerValue||s.doubleValue),c=ct(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return gO(n.timestampValue,e.timestampValue);case 4:return gO(pf(n),pf(e));case 5:return bb(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=cs(s),c=cs(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=Ne(a[d],c[d]);if(h!==0)return h}return Ne(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Ne(ct(s.latitude),ct(o.latitude));return a!==0?a:Ne(ct(s.longitude),ct(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return mO(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let a=s.fields||{},c=o.fields||{},d=a[gf]?.arrayValue,h=c[gf]?.arrayValue,g=Ne(d?.values?.length||0,h?.values?.length||0);return g!==0?g:mO(d,h)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===Gy.mapValue&&o===Gy.mapValue)return 0;if(s===Gy.mapValue)return 1;if(o===Gy.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let I=bb(c[g],h[g]);if(I!==0)return I;let S=ol(a[c[g]],d[h[g]]);if(S!==0)return S}return Ne(c.length,h.length)})(n.mapValue,e.mapValue);default:throw me(23264,{he:t})}}function gO(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ne(n,e);let t=as(n),r=as(e),i=Ne(t.seconds,r.seconds);return i!==0?i:Ne(t.nanos,r.nanos)}function mO(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=ol(t[i],r[i]);if(s)return s}return Ne(t.length,r.length)}function al(n){return Rb(n)}function Rb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=as(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return cs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return le.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=Rb(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Rb(t.fields[o])}`;return i+"}"})(n.mapValue):me(61005,{value:n})}function Qy(n){switch(Eo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=S_(n);return e?16+Qy(e):16;case 5:return 2*n.stringValue.length;case 6:return cs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+Qy(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Sf(r.fields,(s,o)=>{i+=s.length+Qy(o)}),i})(n.mapValue);default:throw me(13486,{value:n})}}function Pb(n){return!!n&&"integerValue"in n}function XC(n){return!!n&&"arrayValue"in n}function yO(n){return!!n&&"nullValue"in n}function _O(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fb(n){return!!n&&"mapValue"in n}function vF(n){return(n?.mapValue?.fields||{})[mF]?.stringValue===_F}function af(n){if(n.geoPointValue)return{geoPointValue:H({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:H({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Sf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=af(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=af(n.arrayValue.values[t]);return e}return H({},n)}function EF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===yF}var $ve={mapValue:{fields:{[mF]:{stringValue:_F},[gf]:{arrayValue:{}}}}};var is=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!fb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=af(t)}setAll(e){let t=jr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=af(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());fb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];fb(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Sf(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(af(this.value))}};var Br=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,_e.min(),_e.min(),_e.min(),is.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,_e.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,_e.min(),_e.min(),is.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,_e.min(),_e.min(),is.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=is.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=is.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var cl=class{constructor(e,t){this.position=e,this.inclusive=t}};function vO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=le.comparator(le.fromName(o.referenceValue),t.key):r=ol(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function EO(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mi(n.position[t],e.position[t]))return!1;return!0}var ul=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function oW(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var i_=class{},Bt=class n extends i_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new xb(e,t,r):t==="array-contains"?new Ob(e,r):t==="in"?new Fb(e,r):t==="not-in"?new Lb(e,r):t==="array-contains-any"?new Vb(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Mb(e,r):new kb(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ol(t,this.value)):t!==null&&Eo(this.value)===Eo(t)&&this.matchesComparison(ol(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},yi=class n extends i_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return IF(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function IF(n){return n.op==="and"}function wF(n){return aW(n)&&IF(n)}function aW(n){for(let e of n.filters)if(e instanceof yi)return!1;return!0}function Nb(n){if(n instanceof Bt)return n.field.canonicalString()+n.op.toString()+al(n.value);if(wF(n))return n.filters.map(e=>Nb(e)).join(",");{let e=n.filters.map(t=>Nb(t)).join(",");return`${n.op}(${e})`}}function TF(n,e){return n instanceof Bt?(function(r,i){return i instanceof Bt&&r.op===i.op&&r.field.isEqual(i.field)&&mi(r.value,i.value)})(n,e):n instanceof yi?(function(r,i){return i instanceof yi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&TF(o,i.filters[a]),!0):!1})(n,e):void me(19439)}function bF(n){return n instanceof Bt?(function(t){return`${t.field.canonicalString()} ${t.op} ${al(t.value)}`})(n):n instanceof yi?(function(t){return t.op.toString()+" {"+t.getFilters().map(bF).join(" ,")+"}"})(n):"Filter"}var xb=class extends Bt{constructor(e,t,r){super(e,t,r),this.key=le.fromName(r.referenceValue)}matches(e){let t=le.comparator(e.key,this.key);return this.matchesComparison(t)}},Mb=class extends Bt{constructor(e,t){super(e,"in",t),this.keys=CF("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},kb=class extends Bt{constructor(e,t){super(e,"not-in",t),this.keys=CF("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function CF(n,e){return(e.arrayValue?.values||[]).map(t=>le.fromName(t.referenceValue))}var Ob=class extends Bt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return XC(t)&&mf(t.arrayValue,this.value)}},Fb=class extends Bt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&mf(this.value.arrayValue,t)}},Lb=class extends Bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(mf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!mf(this.value.arrayValue,t)}},Vb=class extends Bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!XC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>mf(this.value.arrayValue,r))}};var Ub=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function IO(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Ub(n,e,t,r,i,s,o)}function ZC(n){let e=ke(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Nb(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),D_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>al(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>al(r)).join(",")),e.Te=t}return e.Te}function eD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!oW(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!TF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!EO(n.startAt,e.startAt)&&EO(n.endAt,e.endAt)}function jb(n){return le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ll=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function cW(n,e,t,r,i,s,o,a){return new ll(n,e,t,r,i,s,o,a)}function tD(n){return new ll(n)}function wO(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function uW(n){return n.collectionGroup!==null}function cf(n){let e=ke(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Kt(jr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new ul(s,r))}),t.has(jr.keyField().canonicalString())||e.Ie.push(new ul(jr.keyField(),r))}return e.Ie}function gi(n){let e=ke(n);return e.Ee||(e.Ee=lW(e,cf(n))),e.Ee}function lW(n,e){if(n.limitType==="F")return IO(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ul(i.field,s)});let t=n.endAt?new cl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new cl(n.startAt.position,n.startAt.inclusive):null;return IO(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Bb(n,e,t){return new ll(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function A_(n,e){return eD(gi(n),gi(e))&&n.limitType===e.limitType}function DF(n){return`${ZC(gi(n))}|lt:${n.limitType}`}function Ku(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>bF(i)).join(", ")}]`),D_(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>al(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>al(i)).join(",")),`Target(${r})`})(gi(n))}; limitType=${n.limitType})`}function R_(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):le.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of cf(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let d=vO(o,a,c);return o.inclusive?d<=0:d<0})(r.startAt,cf(r),i)||r.endAt&&!(function(o,a,c){let d=vO(o,a,c);return o.inclusive?d>=0:d>0})(r.endAt,cf(r),i))})(n,e)}function dW(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function SF(n){return(e,t)=>{let r=!1;for(let i of cf(n)){let s=hW(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function hW(n,e,t){let r=n.field.isKeyField()?le.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?ol(c,d):me(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return me(19790,{direction:n.dir})}}var us=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Sf(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return iW(this.inner)}size(){return this.innerSize}};var fW=new It(le.comparator);function Io(){return fW}var AF=new It(le.comparator);function of(...n){let e=AF;for(let t of n)e=e.insert(t.key,t);return e}function pW(n){let e=AF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ja(){return uf()}function RF(){return uf()}function uf(){return new us(n=>n.toString(),(n,e)=>n.isEqual(e))}var Hve=new It(le.comparator),gW=new Kt(le.comparator);function Fe(...n){let e=gW;for(let t of n)e=e.add(t);return e}var mW=new Kt(Ne);function yW(){return mW}function _W(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e_(e)?"-0":e}}function vW(n){return{integerValue:""+n}}var dl=class{constructor(){this._=void 0}};function EW(n,e,t){return n instanceof yf?(function(i,s){let o={fields:{[fF]:{stringValue:hF},[gF]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&JC(s)&&(s=S_(s)),s&&(o.fields[pF]=s),{mapValue:o}})(t,e):n instanceof hl?PF(n,e):n instanceof fl?NF(n,e):(function(i,s){let o=wW(i,s),a=TO(o)+TO(i.Ae);return Pb(o)&&Pb(i.Ae)?vW(a):_W(i.serializer,a)})(n,e)}function IW(n,e,t){return n instanceof hl?PF(n,e):n instanceof fl?NF(n,e):t}function wW(n,e){return n instanceof _f?(function(r){return Pb(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var yf=class extends dl{},hl=class extends dl{constructor(e){super(),this.elements=e}};function PF(n,e){let t=xF(e);for(let r of n.elements)t.some(i=>mi(i,r))||t.push(r);return{arrayValue:{values:t}}}var fl=class extends dl{constructor(e){super(),this.elements=e}};function NF(n,e){let t=xF(e);for(let r of n.elements)t=t.filter(i=>!mi(i,r));return{arrayValue:{values:t}}}var _f=class extends dl{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function TO(n){return ct(n.integerValue||n.doubleValue)}function xF(n){return XC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function TW(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof hl&&i instanceof hl||r instanceof fl&&i instanceof fl?sl(r.elements,i.elements,mi):r instanceof _f&&i instanceof _f?mi(r.Ae,i.Ae):r instanceof yf&&i instanceof yf})(n.transform,e.transform)}var lf=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Yy(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var vf=class{};function MF(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new $b(n.key,lf.none()):new Ef(n.key,n.data,lf.none());{let t=n.data,r=is.empty(),i=new Kt(jr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new pl(n.key,r,new Ua(i.toArray()),lf.none())}}function bW(n,e,t){n instanceof Ef?(function(i,s,o){let a=i.value.clone(),c=CO(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof pl?(function(i,s,o){if(!Yy(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=CO(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(kF(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function df(n,e,t,r){return n instanceof Ef?(function(s,o,a,c){if(!Yy(s.precondition,o))return a;let d=s.value.clone(),h=DO(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof pl?(function(s,o,a,c){if(!Yy(s.precondition,o))return a;let d=DO(s.fieldTransforms,c,o),h=o.data;return h.setAll(kF(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))})(n,e,t,r):(function(s,o,a){return Yy(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function bO(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&sl(r,i,(s,o)=>TW(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ef=class extends vf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},pl=class extends vf{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function kF(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function CO(n,e,t){let r=new Map;ut(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,IW(o,a,t[i]))}return r}function DO(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,EW(s,o,e))}return r}var $b=class extends vf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var Hb=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&bW(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=df(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=df(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=RF();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=MF(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(_e.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Fe())}isEqual(e){return this.batchId===e.batchId&&sl(this.mutations,e.mutations,(t,r)=>bO(t,r))&&sl(this.baseMutations,e.baseMutations,(t,r)=>bO(t,r))}};var qb=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var zb=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var bt,Me;function OF(n){if(n===void 0)return os("GRPC error has no .code"),Q.UNKNOWN;switch(n){case bt.OK:return Q.OK;case bt.CANCELLED:return Q.CANCELLED;case bt.UNKNOWN:return Q.UNKNOWN;case bt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case bt.INTERNAL:return Q.INTERNAL;case bt.UNAVAILABLE:return Q.UNAVAILABLE;case bt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case bt.NOT_FOUND:return Q.NOT_FOUND;case bt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case bt.ABORTED:return Q.ABORTED;case bt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case bt.DATA_LOSS:return Q.DATA_LOSS;default:return me(39323,{code:n})}}(Me=bt||(bt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";var CW=null;function DW(){return new TextEncoder}var SW=new ns([4294967295,4294967295],0);function SO(n){let e=DW().encode(n),t=new sb;return t.update(e),new Uint8Array(t.digest())}function AO(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ns([t,r],0),new ns([i,s],0)]}var Gb=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ba(`Invalid padding: ${t}`);if(r<0)throw new Ba(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ba(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ba(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ns.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(ns.fromNumber(r)));return i.compare(SW)===1&&(i=new ns([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=SO(e),[r,i]=AO(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=SO(e),[r,i]=AO(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ba=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var s_=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,If.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(_e.min(),i,new It(Ne),Io(),Fe())}},If=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Fe(),Fe(),Fe())}};var Xu=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},o_=class{constructor(e,t){this.targetId=e,this.Ce=t}},a_=class{constructor(e,t,r=dn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},c_=class{constructor(){this.ve=0,this.Fe=RO(),this.Me=dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),t=Fe(),r=Fe();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:me(38017,{changeType:s})}}),new If(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=RO()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ut(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},Wb=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Io(),this.Je=Wy(),this.He=Wy(),this.Ye=new It(Ne)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(jb(s))if(r===0){let o=new le(s.path);this.et(t,o,Br.newNoDocument(o,_e.min()))}else ut(r===1,20013,{expectedCount:r});else{let o=this._t(t);if(o!==r){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}CW?.lt((function(h,g,I,S,P){let U={localCacheCount:h,existenceFilterCount:g.count,databaseId:I.database,projectId:I.projectId},O=g.unchangedNames;return O&&(U.bloomFilter={applied:P===0,hashCount:O?.hashCount??0,bitmapLength:O?.bits?.bitmap?.length??0,padding:O?.bits?.padding??0,mightContain:G=>S?.mightContain(G)??!1}),U})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=cs(r).toUint8Array()}catch(c){if(c instanceof n_)return hf("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Gb(o,i,s)}catch(c){return hf(c instanceof Ba?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&jb(a.target)){let c=new le(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Br.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let r=Fe();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let i=new s_(e,t,this.Ye,this.je,r);return this.je=Io(),this.Je=Wy(),this.He=Wy(),this.Ye=new It(Ne),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new c_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Kt(Ne),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Kt(Ne),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||J("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new c_),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Wy(){return new It(le.comparator)}function RO(){return new It(le.comparator)}var AW={asc:"ASCENDING",desc:"DESCENDING"},RW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PW={and:"AND",or:"OR"},Kb=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Qb(n,e){return n.useProto3Json||D_(e)?e:{value:e}}function NW(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xW(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Zu(n){return ut(!!n,49232),_e.fromTimestamp((function(t){let r=as(t);return new In(r.seconds,r.nanos)})(n))}function MW(n,e){return Yb(n,e).canonicalString()}function Yb(n,e){let t=(function(i){return new jt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function FF(n){let e=jt.fromString(n);return ut(BF(e),10190,{key:e.toString()}),e}function pb(n,e){let t=FF(e);if(t.get(1)!==n.databaseId.projectId)throw new oe(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new oe(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new le(VF(t))}function LF(n,e){return MW(n.databaseId,e)}function kW(n){let e=FF(n);return e.length===4?jt.emptyPath():VF(e)}function PO(n){return new jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function VF(n){return ut(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function OW(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:me(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(ut(h===void 0||typeof h=="string",58123),dn.fromBase64String(h||"")):(ut(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),dn.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(d){let h=d.code===void 0?Q.UNKNOWN:OF(d.code);return new oe(h,d.message||"")})(o);t=new a_(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=pb(n,r.document.name),s=Zu(r.document.updateTime),o=r.document.createTime?Zu(r.document.createTime):_e.min(),a=new is({mapValue:{fields:r.document.fields}}),c=Br.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new Xu(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=pb(n,r.document),s=r.readTime?Zu(r.readTime):_e.min(),o=Br.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Xu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=pb(n,r.document),s=r.removedTargetIds||[];t=new Xu([],s,i,null)}else{if(!("filter"in e))return me(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new zb(i,s),a=r.targetId;t=new o_(a,o)}}return t}function FW(n,e){return{documents:[LF(n,e.path)]}}function LW(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=LF(n,i);let s=(function(d){if(d.length!==0)return jF(yi.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(d){if(d.length!==0)return d.map(h=>(function(I){return{field:Qu(I.field),direction:jW(I.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=Qb(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function VW(n){let e=kW(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ut(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(g){let I=UF(g);return I instanceof yi&&wF(I)?I.getFilters():[I]})(t.where));let o=[];t.orderBy&&(o=(function(g){return g.map(I=>(function(P){return new ul(Yu(P.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(I))})(t.orderBy));let a=null;t.limit&&(a=(function(g){let I;return I=typeof g=="object"?g.value:g,D_(I)?null:I})(t.limit));let c=null;t.startAt&&(c=(function(g){let I=!!g.before,S=g.values||[];return new cl(S,I)})(t.startAt));let d=null;return t.endAt&&(d=(function(g){let I=!g.before,S=g.values||[];return new cl(S,I)})(t.endAt)),cW(e,i,o,s,a,"F",c,d)}function UW(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function UF(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Yu(t.unaryFilter.field);return Bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Yu(t.unaryFilter.field);return Bt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Yu(t.unaryFilter.field);return Bt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Yu(t.unaryFilter.field);return Bt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Bt.create(Yu(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return yi.create(t.compositeFilter.filters.map(r=>UF(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return me(1026)}})(t.compositeFilter.op))})(n):me(30097,{filter:n})}function jW(n){return AW[n]}function BW(n){return RW[n]}function $W(n){return PW[n]}function Qu(n){return{fieldPath:n.canonicalString()}}function Yu(n){return jr.fromServerFormat(n.fieldPath)}function jF(n){return n instanceof Bt?(function(t){if(t.op==="=="){if(_O(t.value))return{unaryFilter:{field:Qu(t.field),op:"IS_NAN"}};if(yO(t.value))return{unaryFilter:{field:Qu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(_O(t.value))return{unaryFilter:{field:Qu(t.field),op:"IS_NOT_NAN"}};if(yO(t.value))return{unaryFilter:{field:Qu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qu(t.field),op:BW(t.op),value:t.value}}})(n):n instanceof yi?(function(t){let r=t.getFilters().map(i=>jF(i));return r.length===1?r[0]:{compositeFilter:{op:$W(t.op),filters:r}}})(n):me(54877,{filter:n})}function BF(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var wf=class n{constructor(e,t,r,i,s=_e.min(),o=_e.min(),a=dn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Jb=class{constructor(e){this.yt=e}};function HW(n){let e=VW({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Bb(e,e.limit,"L"):e}var u_=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ct(e.integerValue));else if("doubleValue"in e){let r=ct(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),e_(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=as(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(cs(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?EF(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):vF(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):me(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=gf,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ct(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),le.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};u_.Kt=new u_;var Xb=class{constructor(){this.Cn=new Zb}addToCollectionParentIndex(e,t){return this.Cn.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(za.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(za.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}},Zb=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Kt(jt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Kt(jt.comparator)).toArray()}};var qve=new Uint8Array(0);var NO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$F=41943040,fr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};fr.DEFAULT_COLLECTION_PERCENTILE=10,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fr.DEFAULT=new fr($F,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fr.DISABLED=new fr(-1,0,0);var Tf=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var xO="LruGarbageCollector",qW=1048576;function MO([n,e],[t,r]){let i=Ne(n,t);return i===0?Ne(e,r):i}var eC=class{constructor(e){this.Ir=e,this.buffer=new Kt(MO),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();MO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},tC=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){J(xO,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>C(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){_l(t)?J(xO,"Ignoring IndexedDB error during garbage collection: ",t):yield C_(t)}yield this.Vr(3e5)}))}},nC=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return q.resolve(YC.ce);let r=new eC(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(NO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),NO):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Wu()<=Se.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}};function zW(n,e){return new nC(n,e)}var rC=class{constructor(){this.changes=new us(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Br.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var iC=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var sC=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&df(r.mutation,i,Ua.empty(),In.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Fe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Fe()){let i=ja();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=of();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=ja();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Fe()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Io(),o=uf(),a=(function(){return uf()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof pl)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),df(h.mutation,d,h.mutation.getFieldMask(),In.now())):o.set(d.key,Ua.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>a.set(d,new iC(h,o.get(d)??null))),a))}recalculateAndSaveOverlays(e,t){let r=uf(),i=new It((o,a)=>o-a),s=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||Ua.empty();h=a.applyToLocalView(d,h),r.set(c,h);let g=(i.get(a.batchId)||Fe()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,g=RF();h.forEach(I=>{if(!s.has(I)){let S=MF(t.get(I),r.get(I));S!==null&&g.set(I,S),s=s.add(I)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):uW(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):q.resolve(ja()),a=ff,c=s;return o.next(d=>q.forEach(d,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(I=>{c=c.insert(h,I)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,Fe())).next(h=>({batchId:a,changes:pW(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new le(t)).next(r=>{let i=of();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=of();return this.indexManager.getCollectionParents(e,s).next(a=>q.forEach(a,c=>{let d=(function(g,I){return new ll(I,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,I)=>{o=o.insert(g,I)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,Br.newInvalidDocument(h)))});let a=of();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&df(h.mutation,d,Ua.empty(),In.now()),R_(t,d)&&(a=a.insert(c,d))}),a})}};var oC=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Zu(i.createTime)}})(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:HW(i.bundledQuery),readTime:Zu(i.readTime)}})(t)),q.resolve()}};var aC=class{constructor(){this.overlays=new It(le.comparator),this.qr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ja();return q.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),q.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){let i=ja(),s=t.length+1,o=new le(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new It((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=ja(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=ja(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return q.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new qb(t,r));let s=this.qr.get(t);s===void 0&&(s=Fe(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}};var cC=class{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}};var bf=class{constructor(){this.Qr=new Kt(Ct.$r),this.Ur=new Kt(Ct.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Ct(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Ct(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new le(new jt([])),r=new Ct(t,e),i=new Ct(t,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new le(new jt([])),r=new Ct(t,e),i=new Ct(t,e+1),s=Fe();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ct(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ct=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return le.comparator(e.key,t.key)||Ne(e.Yr,t.Yr)}static Kr(e,t){return Ne(e.Yr,t.Yr)||le.comparator(e.key,t.key)}};var uC=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Kt(Ct.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Hb(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Zr=this.Zr.add(new Ct(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,t){return q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?z8:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ct(t,0),i=new Ct(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{let a=this.Xr(o.Yr);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kt(Ne);return t.forEach(i=>{let s=new Ct(i,0),o=new Ct(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;le.isDocumentKey(s)||(s=s.child(""));let o=new Ct(new le(s),0),a=new Kt(Ne);return this.Zr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Yr)),!0)},o),q.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ut(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return q.forEach(t.mutations,i=>{let s=new Ct(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Ct(t,0),i=this.Zr.firstAfterOrEqual(r);return q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var lC=class{constructor(e){this.ri=e,this.docs=(function(){return new It(le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():Br.newInvalidDocument(t))}getEntries(e,t){let r=Io();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Br.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Io(),o=t.path,a=new le(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||$8(B8(h),r)<=0||(i.has(h.key)||R_(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,t,r,i){me(9500)}ii(e,t){return q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new dC(this)}getSize(e){return q.resolve(this.size)}},dC=class extends rC{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var hC=class{constructor(e){this.persistence=e,this.si=new us(t=>ZC(t),eD),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.oi=0,this._i=new bf,this.targetCount=0,this.ai=Tf.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),q.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new Tf(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Pr(t),q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),q.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),q.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this._i.containsKey(t))}};var l_=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new YC(0),this.li=!1,this.li=!0,this.hi=new cC,this.referenceDelegate=e(this),this.Pi=new hC(this),this.indexManager=new Xb,this.remoteDocumentCache=(function(i){return new lC(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new Jb(t),this.Ii=new oC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new uC(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){J("MemoryPersistence","Starting transaction:",e);let i=new fC(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return q.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},fC=class extends Db{constructor(e){super(),this.currentSequenceNumber=e}},pC=class n{constructor(e){this.persistence=e,this.Ri=new bf,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw me(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,r=>{let i=le.fromPath(r);return this.gi(e,i).next(s=>{s||t.removeEntry(i,_e.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return q.or([()=>q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},d_=class n{constructor(e,t){this.persistence=e,this.pi=new us(r=>G8(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=zW(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return q.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?q.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,t).next(a=>{a||(r++,s.removeEntry(o,_e.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Qy(e.data.value)),t}br(e,t,r){return q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var gC=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Fe(),i=Fe();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var mC=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var yC=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return S1()?8:q8(Xn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new mC;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Wu()<=Se.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Ku(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(Wu()<=Se.DEBUG&&J("QueryEngine","Query:",Ku(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Wu()<=Se.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Ku(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gi(t))):q.resolve())}ys(e,t){if(wO(t))return q.resolve(null);let r=gi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Bb(t,null,"F"),r=gi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Fe(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.Ds(t,a);return this.Cs(t,d,o,c.readTime)?this.ys(e,Bb(t,null,"F")):this.vs(e,d,t,c)}))})))}ws(e,t,r,i){return wO(t)||i.isEqual(_e.min())?q.resolve(null):this.ps.getDocuments(e,r).next(s=>{let o=this.Ds(t,s);return this.Cs(t,o,r,i)?q.resolve(null):(Wu()<=Se.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ku(t)),this.vs(e,o,t,j8(i,ff)).next(a=>a))})}Ds(e,t){let r=new Kt(SF(e));return t.forEach((i,s)=>{R_(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return Wu()<=Se.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Ku(t)),this.ps.getDocumentsMatchingQuery(e,t,za.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var nD="LocalStore",GW=3e8,_C=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new It(Ne),this.xs=new us(s=>ZC(s),eD),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function WW(n,e,t,r){return new _C(n,e,t,r)}function HF(n,e){return C(this,null,function*(){let t=ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Fe();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:a}))})})})}function qF(n){let e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function KW(n,e){let t=ke(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,g)=>{let I=i.get(g);if(!I)return;a.push(t.Pi.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.Pi.addMatchingKeys(s,h.addedDocuments,g)));let S=I.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?S=S.withResumeToken(dn.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):h.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(h.resumeToken,r)),i=i.insert(g,S),(function(U,O,G){return U.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=GW?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(I,S,h)&&a.push(t.Pi.updateTargetData(s,S))});let c=Io(),d=Fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(QW(s,o,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(_e.min())){let h=t.Pi.getLastRemoteSnapshotVersion(s).next(g=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.Ms=i,s))}function QW(n,e,t){let r=Fe(),i=Fe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Io();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(_e.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):J(nD,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:i}})}function YW(n,e){let t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):t.Pi.allocateTargetId(r).next(o=>(i=new wf(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function vC(n,e,t){return C(this,null,function*(){let r=ke(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!_l(o))throw o;J(nD,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function kO(n,e,t){let r=ke(n),i=_e.min(),s=Fe();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,d,h){let g=ke(c),I=g.xs.get(h);return I!==void 0?q.resolve(g.Ms.get(I)):g.Pi.getTargetData(d,h)})(r,o,gi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:_e.min(),t?s:Fe())).next(a=>(JW(r,dW(e),a),{documents:a,Qs:s})))}function JW(n,e,t){let r=n.Os.get(e)||_e.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(e,r)}var h_=class{constructor(){this.activeTargetIds=yW()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var EC=class{constructor(){this.Mo=new h_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new h_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var IC=class{Oo(e){}shutdown(){}};var OO="ConnectivityMonitor",f_=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){J(OO,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){J(OO,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ky=null;function wC(){return Ky===null?Ky=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ky++,"0x"+Ky.toString(16)}var gb="RestConnection",XW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},TC=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Ab?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){let o=wC(),a=this.zo(e,t.toUriEncodedString());J(gb,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);let{host:d}=new URL(a),h=Hh(d);return this.Jo(e,a,c,r,h).then(g=>(J(gb,`Received RPC '${e}' ${o}: `,g),g),g=>{throw hf(gb,`RPC '${e}' ${o} failed with error: `,g,"url: ",a,"request:",r),g})}Ho(e,t,r,i,s,o){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+yl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,t){let r=XW[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var bC=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var un="WebChannelConnection",CC=class extends TC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let o=wC();return new Promise((a,c)=>{let d=new ob;d.setWithCredentials(!0),d.listenOnce(ab.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case sf.NO_ERROR:let g=d.getResponseJson();J(un,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),a(g);break;case sf.TIMEOUT:J(un,`RPC '${e}' ${o} timed out`),c(new oe(Q.DEADLINE_EXCEEDED,"Request time out"));break;case sf.HTTP_ERROR:let I=d.getStatus();if(J(un,`RPC '${e}' ${o} failed with status:`,I,"response text:",d.getResponseText()),I>0){let S=d.getResponseJson();Array.isArray(S)&&(S=S[0]);let P=S?.error;if(P&&P.status&&P.message){let U=(function(G){let ne=G.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(ne)>=0?ne:Q.UNKNOWN})(P.status);c(new oe(U,P.message))}else c(new oe(Q.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new oe(Q.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{J(un,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);J(un,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}T_(e,t,r){let i=wC(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=lb(),a=ub(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");J(un,`Creating RPC '${e}' stream ${i}: ${h}`,c);let g=o.createWebChannel(h,c);this.I_(g);let I=!1,S=!1,P=new bC({Yo:O=>{S?J(un,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(I||(J(un,`Opening RPC '${e}' stream ${i} transport.`),g.open(),I=!0),J(un,`RPC '${e}' stream ${i} sending:`,O),g.send(O))},Zo:()=>g.close()}),U=(O,G,ne)=>{O.listen(G,re=>{try{ne(re)}catch(Re){setTimeout(()=>{throw Re},0)}})};return U(g,Gu.EventType.OPEN,()=>{S||(J(un,`RPC '${e}' stream ${i} transport opened.`),P.o_())}),U(g,Gu.EventType.CLOSE,()=>{S||(S=!0,J(un,`RPC '${e}' stream ${i} transport closed`),P.a_(),this.E_(g))}),U(g,Gu.EventType.ERROR,O=>{S||(S=!0,hf(un,`RPC '${e}' stream ${i} transport errored. Name:`,O.name,"Message:",O.message),P.a_(new oe(Q.UNAVAILABLE,"The operation could not be completed")))}),U(g,Gu.EventType.MESSAGE,O=>{if(!S){let G=O.data[0];ut(!!G,16349);let ne=G,re=ne?.error||ne[0]?.error;if(re){J(un,`RPC '${e}' stream ${i} received error:`,re);let Re=re.status,rt=(function(_){let E=bt[_];if(E!==void 0)return OF(E)})(Re),Ce=re.message;rt===void 0&&(rt=Q.INTERNAL,Ce="Unknown error status: "+Re+" with message "+re.message),S=!0,P.a_(new oe(rt,Ce)),g.close()}else J(un,`RPC '${e}' stream ${i} received:`,G),P.u_(G)}}),U(a,cb.STAT_EVENT,O=>{O.stat===zy.PROXY?J(un,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===zy.NOPROXY&&J(un,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.__()},0),P}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function mb(){return typeof document<"u"?document:null}function zF(n){return new Kb(n,!0)}var p_=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var FO="PersistentStream",DC=class{constructor(e,t,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new p_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return C(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return C(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return C(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(os(t.toString()),os("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new oe(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>C(this,null,function*(){this.state=0,this.start()}))}z_(e){return J(FO,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(J(FO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},SC=class extends DC{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=OW(this.serializer,e),r=(function(s){if(!("targetChange"in s))return _e.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?_e.min():o.readTime?Zu(o.readTime):_e.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=PO(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=jb(c)?{documents:FW(s,c)}:{query:LW(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=xW(s,o.resumeToken);let d=Qb(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(_e.min())>0){a.readTime=NW(s,o.snapshotVersion.toTimestamp());let d=Qb(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a})(this.serializer,e);let r=UW(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=PO(this.serializer),t.removeTarget=e,this.q_(t)}};var AC=class{},RC=class extends AC{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new oe(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,Yb(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new oe(Q.UNKNOWN,s.toString())})}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,Yb(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(Q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},PC=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(os(t),this.aa=!1):J("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var gl="RemoteStore",NC=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(()=>C(this,null,function*(){Rf(this)&&(J(gl,"Restarting streams for network reachability change."),yield(function(c){return C(this,null,function*(){let d=ke(c);d.Ea.add(4),yield Af(d),d.Ra.set("Unknown"),d.Ea.delete(4),yield P_(d)})})(this))}))}),this.Ra=new PC(r,i)}};function P_(n){return C(this,null,function*(){if(Rf(n))for(let e of n.da)yield e(!0)})}function Af(n){return C(this,null,function*(){for(let e of n.da)yield e(!1)})}function GF(n,e){let t=ke(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),oD(t)?sD(t):vl(t).O_()&&iD(t,e))}function rD(n,e){let t=ke(n),r=vl(t);t.Ia.delete(e),r.O_()&&WF(t,e),t.Ia.size===0&&(r.O_()?r.L_():Rf(t)&&t.Ra.set("Unknown"))}function iD(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vl(n).Y_(e)}function WF(n,e){n.Va.Ue(e),vl(n).Z_(e)}function sD(n){n.Va=new Wb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),vl(n).start(),n.Ra.ua()}function oD(n){return Rf(n)&&!vl(n).x_()&&n.Ia.size>0}function Rf(n){return ke(n).Ea.size===0}function KF(n){n.Va=void 0}function ZW(n){return C(this,null,function*(){n.Ra.set("Online")})}function e7(n){return C(this,null,function*(){n.Ia.forEach((e,t)=>{iD(n,e)})})}function t7(n,e){return C(this,null,function*(){KF(n),oD(n)?(n.Ra.ha(e),sD(n)):n.Ra.set("Unknown")})}function n7(n,e,t){return C(this,null,function*(){if(n.Ra.set("Online"),e instanceof a_&&e.state===2&&e.cause)try{yield(function(i,s){return C(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.Ia.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})})(n,e)}catch(r){J(gl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield LO(n,r)}else if(e instanceof Xu?n.Va.Ze(e):e instanceof o_?n.Va.st(e):n.Va.tt(e),!t.isEqual(_e.min()))try{let r=yield qF(n.localStore);t.compareTo(r)>=0&&(yield(function(s,o){let a=s.Va.Tt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.Ia.get(c);if(!h)return;s.Ia.set(c,h.withResumeToken(dn.EMPTY_BYTE_STRING,h.snapshotVersion)),WF(s,c);let g=new wf(h.target,c,d,h.sequenceNumber);iD(s,g)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){J(gl,"Failed to raise snapshot:",r),yield LO(n,r)}})}function LO(n,e,t){return C(this,null,function*(){if(!_l(e))throw e;n.Ea.add(1),yield Af(n),n.Ra.set("Offline"),t||(t=()=>qF(n.localStore)),n.asyncQueue.enqueueRetryable(()=>C(null,null,function*(){J(gl,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield P_(n)}))})}function VO(n,e){return C(this,null,function*(){let t=ke(n);t.asyncQueue.verifyOperationInProgress(),J(gl,"RemoteStore received new credentials");let r=Rf(t);t.Ea.add(3),yield Af(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield P_(t)})}function r7(n,e){return C(this,null,function*(){let t=ke(n);e?(t.Ea.delete(2),yield P_(t)):e||(t.Ea.add(2),yield Af(t),t.Ra.set("Unknown"))})}function vl(n){return n.ma||(n.ma=(function(t,r,i){let s=ke(t);return s.sa(),new SC(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:ZW.bind(null,n),t_:e7.bind(null,n),r_:t7.bind(null,n),H_:n7.bind(null,n)}),n.da.push(e=>C(null,null,function*(){e?(n.ma.B_(),oD(n)?sD(n):n.Ra.set("Unknown")):(yield n.ma.stop(),KF(n))}))),n.ma}var xC=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new vo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function QF(n,e){if(os("AsyncQueue",`${e}: ${n}`),_l(n))return new oe(Q.UNAVAILABLE,`${e}: ${n}`);throw n}var g_=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||le.comparator(t.key,r.key):(t,r)=>le.comparator(t.key,r.key),this.keyedMap=of(),this.sortedSet=new It(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var m_=class{constructor(){this.ga=new It(le.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):me(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},ml=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,g_.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&A_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var MC=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},kC=class{constructor(){this.queries=UO(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=ke(t),s=i.queries;i.queries=UO(),s.forEach((o,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new oe(Q.ABORTED,"Firestore shutting down"))}};function UO(){return new us(n=>DF(n),A_)}function i7(n,e){return C(this,null,function*(){let t=ke(n),r=3,i=e.query,s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new MC,r=e.Da()?0:1);try{switch(r){case 0:s.wa=yield t.onListen(i,!0);break;case 1:s.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=QF(o,`Initialization of query '${Ku(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&aD(t)})}function s7(n,e){return C(this,null,function*(){let t=ke(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function o7(n,e){let t=ke(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&aD(t)}function a7(n,e,t){let r=ke(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function aD(n){n.Ca.forEach(e=>{e.next()})}var OC,jO;(jO=OC||(OC={})).Ma="default",jO.Cache="cache";var FC=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ml(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==OC.Cache}};var y_=class{constructor(e){this.key=e}},__=class{constructor(e){this.key=e}},LC=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=SF(e),this.tu=new g_(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new m_,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let I=i.get(h),S=R_(this.query,g)?g:null,P=!!I&&this.mutatedKeys.has(I.key),U=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations),O=!1;I&&S?I.data.isEqual(S.data)?P!==U&&(r.track({type:3,doc:S}),O=!0):this.su(I,S)||(r.track({type:2,doc:S}),O=!0,(c&&this.eu(S,c)>0||d&&this.eu(S,d)<0)&&(a=!0)):!I&&S?(r.track({type:0,doc:S}),O=!0):I&&!S&&(r.track({type:1,doc:I}),O=!0,(c||d)&&(a=!0)),O&&(S?(o=o.add(S),s=U?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((h,g)=>(function(S,P){let U=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Rt:O})}};return U(S)-U(P)})(h.type,g.type)||this.eu(h.doc,g.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new ml(this.query,e.tu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new m_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=Fe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new __(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new y_(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Fe();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ml.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},cD="SyncEngine",VC=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},UC=class{constructor(e){this.key=e,this.hu=!1}},jC=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new us(a=>DF(a),A_),this.Iu=new Map,this.Eu=new Set,this.du=new It(le.comparator),this.Au=new Map,this.Ru=new bf,this.Vu={},this.mu=new Map,this.fu=Tf.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function c7(n,e,t=!0){return C(this,null,function*(){let r=eL(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=yield YF(r,e,t,!0),i})}function u7(n,e){return C(this,null,function*(){let t=eL(n);yield YF(t,e,!0,!1)})}function YF(n,e,t,r){return C(this,null,function*(){let i=yield YW(n.localStore,gi(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield l7(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&GF(n.remoteStore,i),a})}function l7(n,e,t,r,i){return C(this,null,function*(){n.pu=(g,I,S)=>(function(U,O,G,ne){return C(this,null,function*(){let re=O.view.ru(G);re.Cs&&(re=yield kO(U.localStore,O.query,!1).then(({documents:b})=>O.view.ru(b,re)));let Re=ne&&ne.targetChanges.get(O.targetId),rt=ne&&ne.targetMismatches.get(O.targetId)!=null,Ce=O.view.applyChanges(re,U.isPrimaryClient,Re,rt);return $O(U,O.targetId,Ce.au),Ce.snapshot})})(n,g,I,S);let s=yield kO(n.localStore,e,!0),o=new LC(e,s.Qs),a=o.ru(s.documents),c=If.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);$O(n,t,d.au);let h=new VC(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot})}function d7(n,e,t){return C(this,null,function*(){let r=ke(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!A_(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield vC(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&rD(r.remoteStore,i.targetId),BC(r,i.targetId)}).catch(C_))):(BC(r,i.targetId),yield vC(r.localStore,i.targetId,!0))})}function h7(n,e){return C(this,null,function*(){let t=ke(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),rD(t.remoteStore,r.targetId))})}function JF(n,e){return C(this,null,function*(){let t=ke(n);try{let r=yield KW(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Au.get(s);o&&(ut(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ut(o.hu,14607):i.removedDocuments.size>0&&(ut(o.hu,42227),o.hu=!1))}),yield ZF(t,r,e)}catch(r){yield C_(r)}})}function BO(n,e,t){let r=ke(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=ke(o);c.onlineState=a;let d=!1;c.queries.forEach((h,g)=>{for(let I of g.Sa)I.va(a)&&(d=!0)}),d&&aD(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function f7(n,e,t){return C(this,null,function*(){let r=ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let o=new It(le.comparator);o=o.insert(s,Br.newNoDocument(s,_e.min()));let a=Fe().add(s),c=new s_(_e.min(),new Map,new It(Ne),o,a);yield JF(r,c),r.du=r.du.remove(s),r.Au.delete(e),uD(r)}else yield vC(r.localStore,e,!1).then(()=>BC(r,e,t)).catch(C_)})}function BC(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||XF(n,r)})}function XF(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(rD(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),uD(n))}function $O(n,e,t){for(let r of t)r instanceof y_?(n.Ru.addReference(r.key,e),p7(n,r)):r instanceof __?(J(cD,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||XF(n,r.key)):me(19791,{wu:r})}function p7(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(J(cD,"New document in limbo: "+t),n.Eu.add(r),uD(n))}function uD(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new le(jt.fromString(e)),r=n.fu.next();n.Au.set(r,new UC(t)),n.du=n.du.insert(t,r),GF(n.remoteStore,new wf(gi(tD(t.path)),r,"TargetPurposeLimboResolution",YC.ce))}}function ZF(n,e,t){return C(this,null,function*(){let r=ke(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let h=d?!d.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(d){i.push(d);let h=gC.As(c.targetId,d);s.push(h)}}))}),yield Promise.all(o),r.Pu.H_(i),yield(function(c,d){return C(this,null,function*(){let h=ke(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>q.forEach(d,I=>q.forEach(I.Es,S=>h.persistence.referenceDelegate.addReference(g,I.targetId,S)).next(()=>q.forEach(I.ds,S=>h.persistence.referenceDelegate.removeReference(g,I.targetId,S)))))}catch(g){if(!_l(g))throw g;J(nD,"Failed to update sequence numbers: "+g)}for(let g of d){let I=g.targetId;if(!g.fromCache){let S=h.Ms.get(I),P=S.snapshotVersion,U=S.withLastLimboFreeSnapshotVersion(P);h.Ms=h.Ms.insert(I,U)}}})})(r.localStore,s))})}function g7(n,e){return C(this,null,function*(){let t=ke(n);if(!t.currentUser.isEqual(e)){J(cD,"User change. New user:",e.toKey());let r=yield HF(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new oe(Q.CANCELLED,o))})}),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ZF(t,r.Ls)}})}function m7(n,e){let t=ke(n),r=t.Au.get(e);if(r&&r.hu)return Fe().add(r.key);{let i=Fe(),s=t.Iu.get(e);if(!s)return i;for(let o of s){let a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function eL(n){let e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=JF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=m7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=f7.bind(null,e),e.Pu.H_=o7.bind(null,e.eventManager),e.Pu.yu=a7.bind(null,e.eventManager),e}var tL=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return C(this,null,function*(){this.serializer=zF(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return WW(this.persistence,new yC,t.initialUser,this.serializer)}Cu(t){return new l_(pC.mi,this.serializer)}Du(t){return new EC}terminate(){return C(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),$C=class extends tL{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ut(this.persistence.referenceDelegate instanceof d_,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new tC(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?fr.withCacheSize(this.cacheSizeBytes):fr.DEFAULT;return new l_(r=>d_.mi(r,t),this.serializer)}};var y7=(()=>{class n{initialize(t,r){return C(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>BO(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=g7.bind(null,this.syncEngine),yield r7(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new kC})()}createDatastore(t){let r=zF(t.databaseInfo.databaseId),i=(function(o){return new CC(o)})(t.databaseInfo);return(function(o,a,c,d){return new RC(o,a,c,d)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new NC(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>BO(this.syncEngine,r,0),(function(){return f_.v()?new f_:new IC})())}createSyncEngine(t,r){return(function(s,o,a,c,d,h,g){let I=new jC(s,o,a,c,d,h);return g&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return C(this,null,function*(){yield(function(r){return C(this,null,function*(){let i=ke(r);J(gl,"RemoteStore shutting down."),i.Ea.add(5),yield Af(i),i.Aa.shutdown(),i.Ra.set("Unknown")})})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var HC=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):os("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var wo="FirestoreClient",qC=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ln.UNAUTHENTICATED,this.clientId=Xy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>C(this,null,function*(){J(wo,"Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(J(wo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new vo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>C(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=QF(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function yb(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),J(wo,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>C(null,null,function*(){r.isEqual(i)||(yield HF(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function HO(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield _7(n);J(wo,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>VO(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>VO(e.remoteStore,i)),n._onlineComponents=e})}function _7(n){return C(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){J(wo,"Using user provided OfflineComponentProvider");try{yield yb(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Q.FAILED_PRECONDITION||i.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;hf("Error using user provided cache. Falling back to memory cache: "+t),yield yb(n,new tL)}}else J(wo,"Using default OfflineComponentProvider"),yield yb(n,new $C(void 0));return n._offlineComponents})}function v7(n){return C(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(J(wo,"Using user provided OnlineComponentProvider"),yield HO(n,n._uninitializedComponentsProvider._online)):(J(wo,"Using default OnlineComponentProvider"),yield HO(n,new y7))),n._onlineComponents})}function qO(n){return C(this,null,function*(){let e=yield v7(n),t=e.eventManager;return t.onListen=c7.bind(null,e.syncEngine),t.onUnlisten=d7.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=u7.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=h7.bind(null,e.syncEngine),t})}function nL(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var zO=new Map;var E7="firestore.googleapis.com",GO=!0,v_=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=E7,this.ssl=GO}else this.host=e.host,this.ssl=e.ssl??GO;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$F;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qW)throw new oe(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}L8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nL(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new oe(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new oe(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new oe(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},zC=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new v_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new v_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new vb;switch(r.type){case"firstParty":return new wb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return C(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=zO.get(t);r&&(J("ComponentProvider","Removing Datastore"),zO.delete(t),r.terminate())})(this),Promise.resolve()}};var E_=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ss=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new GC(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Df(t,n._jsonSchema))return new n(e,r||null,new le(jt.fromString(t.referencePath)))}};ss._jsonSchemaVersion="firestore/documentReference/1.0",ss._jsonSchema={type:Dt("string",ss._jsonSchemaVersion),referencePath:Dt("string")};var GC=class n extends E_{constructor(e,t,r){super(e,t,tD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ss(this.firestore,null,new le(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var WO="AsyncQueue",I_=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new p_(this,"async_queue_retry"),this._c=()=>{let r=mb();r&&J(WO,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=mb();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=mb();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new vo;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return C(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!_l(e))throw e;J(WO,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,os("INTERNAL UNHANDLED ERROR: ",KO(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=xC.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&me(47125,{Pc:KO(this.nc)})}verifyOperationInProgress(){}Tc(){return C(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function KO(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function QO(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var Cf=class extends zC{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new I_,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return C(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new I_(e),this._firestoreClient=void 0,yield e}})}};function I7(n){if(n._terminated)throw new oe(Q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||w7(n),n._firestoreClient}function w7(n){let e=n._freezeSettings(),t=(function(i,s,o,a){return new Sb(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,nL(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new qC(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}var el=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(dn.fromBase64String(e))}catch(t){throw new oe(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Df(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};el._jsonSchemaVersion="firestore/bytes/1.0",el._jsonSchema={type:Dt("string",el._jsonSchemaVersion),bytes:Dt("string")};var w_=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var tl=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Df(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};tl._jsonSchemaVersion="firestore/geoPoint/1.0",tl._jsonSchema={type:Dt("string",tl._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};var nl=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Df(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new oe(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};nl._jsonSchemaVersion="firestore/vectorValue/1.0",nl._jsonSchema={type:Dt("string",nl._jsonSchemaVersion),vectorValues:Dt("object")};var T7=new RegExp("[~\\*/\\[\\]]");function b7(n,e,t){if(e.search(T7)>=0)throw YO(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new w_(...e.split("."))._internalPath}catch{throw YO(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function YO(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new oe(Q.INVALID_ARGUMENT,a+n+c)}var T_=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ss(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new WC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(rL("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},WC=class extends T_{data(){return super.data()}};function rL(n,e){return typeof e=="string"?b7(n,e):e instanceof w_?e._internalPath:e._delegate._internalPath}function C7(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new oe(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var KC=class{convertValue(e,t="none"){switch(Eo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Sf(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){let t=e.fields?.[gf].arrayValue?.values?.map(r=>ct(r.doubleValue));return new nl(t)}convertGeoPoint(e){return new tl(ct(e.latitude),ct(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=S_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(pf(e));default:return null}}convertTimestamp(e){let t=as(e);return new In(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=jt.fromString(e);ut(BF(r),9688,{name:e});let i=new r_(r.get(1),r.get(3)),s=new le(r.popFirst(5));return i.isEqual(t)||os(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var $a=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ha=class n extends T_{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new rl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(rL("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Ha._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ha._jsonSchema={type:Dt("string",Ha._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};var rl=class extends Ha{data(e={}){return super.data(e)}},il=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new $a(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new rl(this._firestore,this._userDataWriter,r.key,r,new $a(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new rl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $a(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new rl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $a(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:D7(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function D7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:n})}}il._jsonSchemaVersion="firestore/querySnapshot/1.0",il._jsonSchema={type:Dt("string",il._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};var b_=class extends KC{constructor(e){super(),this.firestore=e}convertBytes(e){return new el(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ss(this.firestore,null,t)}};function iL(n,...e){n=lo(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||QO(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(QO(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let s,o,a;if(n instanceof ss)o=hb(n.firestore,Cf),a=tD(n._key.path),s={next:c=>{e[r]&&e[r](S7(o,n,c))},error:e[r+1],complete:e[r+2]};else{let c=hb(n,E_);o=hb(c.firestore,Cf),a=c._query;let d=new b_(o);s={next:h=>{e[r]&&e[r](new il(o,d,c,h))},error:e[r+1],complete:e[r+2]},C7(n._query)}return(function(d,h,g,I){let S=new HC(I),P=new FC(h,S,g);return d.asyncQueue.enqueueAndForget(()=>C(null,null,function*(){return i7(yield qO(d),P)})),()=>{S.Nu(),d.asyncQueue.enqueueAndForget(()=>C(null,null,function*(){return s7(yield qO(d),P)}))}})(I7(o),a,i,s)}function S7(n,e,t){let r=t.docs.get(e._key),i=new b_(n);return new Ha(n,i,e._key,r,new $a(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){yl=i})(Hu),fo(new Ur("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Cf(new Eb(r.getProvider("auth-internal")),new Tb(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new oe(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new r_(d.options.projectId,h)})(o,i),o);return s=H({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Qi(cO,uO,e),Qi(cO,uO,"esm2020")})();var N_=function(){return N_=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},N_.apply(this,arguments)};var A7={includeMetadataChanges:!1};function lD(n,e){return e===void 0&&(e=A7),new fe(function(t){var r=iL(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function sL(n){return lD(n,{includeMetadataChanges:!0})}function oL(n,e){return e===void 0&&(e={}),sL(n).pipe(ae(function(t){return dD(t,e)}))}function dD(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:N_(N_({},r),(t={},t[e.idField]=n.id,t))}function aL(n){return lD(n,{includeMetadataChanges:!0}).pipe(ae(function(e){return e.docs}))}function cL(n,e){return e===void 0&&(e={}),aL(n).pipe(ae(function(t){return t.map(function(r){return dD(r,e)})}))}var uL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lL={};var x_,dL;(function(){var n;function e(b,_){function E(){}E.prototype=_.prototype,b.D=_.prototype,b.prototype=new E,b.prototype.constructor=b,b.C=function(T,w,R){for(var v=Array(arguments.length-2),st=2;st<arguments.length;st++)v[st-2]=arguments[st];return _.prototype[w].apply(T,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,_,E){E||(E=0);var T=Array(16);if(typeof _=="string")for(var w=0;16>w;++w)T[w]=_.charCodeAt(E++)|_.charCodeAt(E++)<<8|_.charCodeAt(E++)<<16|_.charCodeAt(E++)<<24;else for(w=0;16>w;++w)T[w]=_[E++]|_[E++]<<8|_[E++]<<16|_[E++]<<24;_=b.g[0],E=b.g[1],w=b.g[2];var R=b.g[3],v=_+(R^E&(w^R))+T[0]+3614090360&4294967295;_=E+(v<<7&4294967295|v>>>25),v=R+(w^_&(E^w))+T[1]+3905402710&4294967295,R=_+(v<<12&4294967295|v>>>20),v=w+(E^R&(_^E))+T[2]+606105819&4294967295,w=R+(v<<17&4294967295|v>>>15),v=E+(_^w&(R^_))+T[3]+3250441966&4294967295,E=w+(v<<22&4294967295|v>>>10),v=_+(R^E&(w^R))+T[4]+4118548399&4294967295,_=E+(v<<7&4294967295|v>>>25),v=R+(w^_&(E^w))+T[5]+1200080426&4294967295,R=_+(v<<12&4294967295|v>>>20),v=w+(E^R&(_^E))+T[6]+2821735955&4294967295,w=R+(v<<17&4294967295|v>>>15),v=E+(_^w&(R^_))+T[7]+4249261313&4294967295,E=w+(v<<22&4294967295|v>>>10),v=_+(R^E&(w^R))+T[8]+1770035416&4294967295,_=E+(v<<7&4294967295|v>>>25),v=R+(w^_&(E^w))+T[9]+2336552879&4294967295,R=_+(v<<12&4294967295|v>>>20),v=w+(E^R&(_^E))+T[10]+4294925233&4294967295,w=R+(v<<17&4294967295|v>>>15),v=E+(_^w&(R^_))+T[11]+2304563134&4294967295,E=w+(v<<22&4294967295|v>>>10),v=_+(R^E&(w^R))+T[12]+1804603682&4294967295,_=E+(v<<7&4294967295|v>>>25),v=R+(w^_&(E^w))+T[13]+4254626195&4294967295,R=_+(v<<12&4294967295|v>>>20),v=w+(E^R&(_^E))+T[14]+2792965006&4294967295,w=R+(v<<17&4294967295|v>>>15),v=E+(_^w&(R^_))+T[15]+1236535329&4294967295,E=w+(v<<22&4294967295|v>>>10),v=_+(w^R&(E^w))+T[1]+4129170786&4294967295,_=E+(v<<5&4294967295|v>>>27),v=R+(E^w&(_^E))+T[6]+3225465664&4294967295,R=_+(v<<9&4294967295|v>>>23),v=w+(_^E&(R^_))+T[11]+643717713&4294967295,w=R+(v<<14&4294967295|v>>>18),v=E+(R^_&(w^R))+T[0]+3921069994&4294967295,E=w+(v<<20&4294967295|v>>>12),v=_+(w^R&(E^w))+T[5]+3593408605&4294967295,_=E+(v<<5&4294967295|v>>>27),v=R+(E^w&(_^E))+T[10]+38016083&4294967295,R=_+(v<<9&4294967295|v>>>23),v=w+(_^E&(R^_))+T[15]+3634488961&4294967295,w=R+(v<<14&4294967295|v>>>18),v=E+(R^_&(w^R))+T[4]+3889429448&4294967295,E=w+(v<<20&4294967295|v>>>12),v=_+(w^R&(E^w))+T[9]+568446438&4294967295,_=E+(v<<5&4294967295|v>>>27),v=R+(E^w&(_^E))+T[14]+3275163606&4294967295,R=_+(v<<9&4294967295|v>>>23),v=w+(_^E&(R^_))+T[3]+4107603335&4294967295,w=R+(v<<14&4294967295|v>>>18),v=E+(R^_&(w^R))+T[8]+1163531501&4294967295,E=w+(v<<20&4294967295|v>>>12),v=_+(w^R&(E^w))+T[13]+2850285829&4294967295,_=E+(v<<5&4294967295|v>>>27),v=R+(E^w&(_^E))+T[2]+4243563512&4294967295,R=_+(v<<9&4294967295|v>>>23),v=w+(_^E&(R^_))+T[7]+1735328473&4294967295,w=R+(v<<14&4294967295|v>>>18),v=E+(R^_&(w^R))+T[12]+2368359562&4294967295,E=w+(v<<20&4294967295|v>>>12),v=_+(E^w^R)+T[5]+4294588738&4294967295,_=E+(v<<4&4294967295|v>>>28),v=R+(_^E^w)+T[8]+2272392833&4294967295,R=_+(v<<11&4294967295|v>>>21),v=w+(R^_^E)+T[11]+1839030562&4294967295,w=R+(v<<16&4294967295|v>>>16),v=E+(w^R^_)+T[14]+4259657740&4294967295,E=w+(v<<23&4294967295|v>>>9),v=_+(E^w^R)+T[1]+2763975236&4294967295,_=E+(v<<4&4294967295|v>>>28),v=R+(_^E^w)+T[4]+1272893353&4294967295,R=_+(v<<11&4294967295|v>>>21),v=w+(R^_^E)+T[7]+4139469664&4294967295,w=R+(v<<16&4294967295|v>>>16),v=E+(w^R^_)+T[10]+3200236656&4294967295,E=w+(v<<23&4294967295|v>>>9),v=_+(E^w^R)+T[13]+681279174&4294967295,_=E+(v<<4&4294967295|v>>>28),v=R+(_^E^w)+T[0]+3936430074&4294967295,R=_+(v<<11&4294967295|v>>>21),v=w+(R^_^E)+T[3]+3572445317&4294967295,w=R+(v<<16&4294967295|v>>>16),v=E+(w^R^_)+T[6]+76029189&4294967295,E=w+(v<<23&4294967295|v>>>9),v=_+(E^w^R)+T[9]+3654602809&4294967295,_=E+(v<<4&4294967295|v>>>28),v=R+(_^E^w)+T[12]+3873151461&4294967295,R=_+(v<<11&4294967295|v>>>21),v=w+(R^_^E)+T[15]+530742520&4294967295,w=R+(v<<16&4294967295|v>>>16),v=E+(w^R^_)+T[2]+3299628645&4294967295,E=w+(v<<23&4294967295|v>>>9),v=_+(w^(E|~R))+T[0]+4096336452&4294967295,_=E+(v<<6&4294967295|v>>>26),v=R+(E^(_|~w))+T[7]+1126891415&4294967295,R=_+(v<<10&4294967295|v>>>22),v=w+(_^(R|~E))+T[14]+2878612391&4294967295,w=R+(v<<15&4294967295|v>>>17),v=E+(R^(w|~_))+T[5]+4237533241&4294967295,E=w+(v<<21&4294967295|v>>>11),v=_+(w^(E|~R))+T[12]+1700485571&4294967295,_=E+(v<<6&4294967295|v>>>26),v=R+(E^(_|~w))+T[3]+2399980690&4294967295,R=_+(v<<10&4294967295|v>>>22),v=w+(_^(R|~E))+T[10]+4293915773&4294967295,w=R+(v<<15&4294967295|v>>>17),v=E+(R^(w|~_))+T[1]+2240044497&4294967295,E=w+(v<<21&4294967295|v>>>11),v=_+(w^(E|~R))+T[8]+1873313359&4294967295,_=E+(v<<6&4294967295|v>>>26),v=R+(E^(_|~w))+T[15]+4264355552&4294967295,R=_+(v<<10&4294967295|v>>>22),v=w+(_^(R|~E))+T[6]+2734768916&4294967295,w=R+(v<<15&4294967295|v>>>17),v=E+(R^(w|~_))+T[13]+1309151649&4294967295,E=w+(v<<21&4294967295|v>>>11),v=_+(w^(E|~R))+T[4]+4149444226&4294967295,_=E+(v<<6&4294967295|v>>>26),v=R+(E^(_|~w))+T[11]+3174756917&4294967295,R=_+(v<<10&4294967295|v>>>22),v=w+(_^(R|~E))+T[2]+718787259&4294967295,w=R+(v<<15&4294967295|v>>>17),v=E+(R^(w|~_))+T[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(w+(v<<21&4294967295|v>>>11))&4294967295,b.g[2]=b.g[2]+w&4294967295,b.g[3]=b.g[3]+R&4294967295}r.prototype.u=function(b,_){_===void 0&&(_=b.length);for(var E=_-this.blockSize,T=this.B,w=this.h,R=0;R<_;){if(w==0)for(;R<=E;)i(this,b,R),R+=this.blockSize;if(typeof b=="string"){for(;R<_;)if(T[w++]=b.charCodeAt(R++),w==this.blockSize){i(this,T),w=0;break}}else for(;R<_;)if(T[w++]=b[R++],w==this.blockSize){i(this,T),w=0;break}}this.h=w,this.o+=_},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;var E=8*this.o;for(_=b.length-8;_<b.length;++_)b[_]=E&255,E/=256;for(this.u(b),b=Array(16),_=E=0;4>_;++_)for(var T=0;32>T;T+=8)b[E++]=this.g[_]>>>T&255;return b};function s(b,_){var E=a;return Object.prototype.hasOwnProperty.call(E,b)?E[b]:E[b]=_(b)}function o(b,_){this.h=_;for(var E=[],T=!0,w=b.length-1;0<=w;w--){var R=b[w]|0;T&&R==_||(E[w]=R,T=!1)}this.g=E}var a={};function c(b){return-128<=b&&128>b?s(b,function(_){return new o([_|0],0>_?-1:0)}):new o([b|0],0>b?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return g;if(0>b)return O(d(-b));for(var _=[],E=1,T=0;b>=E;T++)_[T]=b/E|0,E*=4294967296;return new o(_,0)}function h(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return O(h(b.substring(1),_));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(_,8)),T=g,w=0;w<b.length;w+=8){var R=Math.min(8,b.length-w),v=parseInt(b.substring(w,w+R),_);8>R?(R=d(Math.pow(_,R)),T=T.j(R).add(d(v))):(T=T.j(E),T=T.add(d(v)))}return T}var g=c(0),I=c(1),S=c(16777216);n=o.prototype,n.m=function(){if(U(this))return-O(this).m();for(var b=0,_=1,E=0;E<this.g.length;E++){var T=this.i(E);b+=(0<=T?T:4294967296+T)*_,_*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(P(this))return"0";if(U(this))return"-"+O(this).toString(b);for(var _=d(Math.pow(b,6)),E=this,T="";;){var w=Re(E,_).g;E=G(E,w.j(_));var R=((0<E.g.length?E.g[0]:E.h)>>>0).toString(b);if(E=w,P(E))return R+T;for(;6>R.length;)R="0"+R;T=R+T}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function P(b){if(b.h!=0)return!1;for(var _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function U(b){return b.h==-1}n.l=function(b){return b=G(this,b),U(b)?-1:P(b)?0:1};function O(b){for(var _=b.g.length,E=[],T=0;T<_;T++)E[T]=~b.g[T];return new o(E,~b.h).add(I)}n.abs=function(){return U(this)?O(this):this},n.add=function(b){for(var _=Math.max(this.g.length,b.g.length),E=[],T=0,w=0;w<=_;w++){var R=T+(this.i(w)&65535)+(b.i(w)&65535),v=(R>>>16)+(this.i(w)>>>16)+(b.i(w)>>>16);T=v>>>16,R&=65535,v&=65535,E[w]=v<<16|R}return new o(E,E[E.length-1]&-2147483648?-1:0)};function G(b,_){return b.add(O(_))}n.j=function(b){if(P(this)||P(b))return g;if(U(this))return U(b)?O(this).j(O(b)):O(O(this).j(b));if(U(b))return O(this.j(O(b)));if(0>this.l(S)&&0>b.l(S))return d(this.m()*b.m());for(var _=this.g.length+b.g.length,E=[],T=0;T<2*_;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(var w=0;w<b.g.length;w++){var R=this.i(T)>>>16,v=this.i(T)&65535,st=b.i(w)>>>16,Tn=b.i(w)&65535;E[2*T+2*w]+=v*Tn,ne(E,2*T+2*w),E[2*T+2*w+1]+=R*Tn,ne(E,2*T+2*w+1),E[2*T+2*w+1]+=v*st,ne(E,2*T+2*w+1),E[2*T+2*w+2]+=R*st,ne(E,2*T+2*w+2)}for(T=0;T<_;T++)E[T]=E[2*T+1]<<16|E[2*T];for(T=_;T<2*_;T++)E[T]=0;return new o(E,0)};function ne(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function re(b,_){this.g=b,this.h=_}function Re(b,_){if(P(_))throw Error("division by zero");if(P(b))return new re(g,g);if(U(b))return _=Re(O(b),_),new re(O(_.g),O(_.h));if(U(_))return _=Re(b,O(_)),new re(O(_.g),_.h);if(30<b.g.length){if(U(b)||U(_))throw Error("slowDivide_ only works with positive integers.");for(var E=I,T=_;0>=T.l(b);)E=rt(E),T=rt(T);var w=Ce(E,1),R=Ce(T,1);for(T=Ce(T,2),E=Ce(E,2);!P(T);){var v=R.add(T);0>=v.l(b)&&(w=w.add(E),R=v),T=Ce(T,1),E=Ce(E,1)}return _=G(b,w.j(_)),new re(w,_)}for(w=g;0<=b.l(_);){for(E=Math.max(1,Math.floor(b.m()/_.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),R=d(E),v=R.j(_);U(v)||0<v.l(b);)E-=T,R=d(E),v=R.j(_);P(R)&&(R=I),w=w.add(R),b=G(b,v)}return new re(w,b)}n.A=function(b){return Re(this,b).h},n.and=function(b){for(var _=Math.max(this.g.length,b.g.length),E=[],T=0;T<_;T++)E[T]=this.i(T)&b.i(T);return new o(E,this.h&b.h)},n.or=function(b){for(var _=Math.max(this.g.length,b.g.length),E=[],T=0;T<_;T++)E[T]=this.i(T)|b.i(T);return new o(E,this.h|b.h)},n.xor=function(b){for(var _=Math.max(this.g.length,b.g.length),E=[],T=0;T<_;T++)E[T]=this.i(T)^b.i(T);return new o(E,this.h^b.h)};function rt(b){for(var _=b.g.length+1,E=[],T=0;T<_;T++)E[T]=b.i(T)<<1|b.i(T-1)>>>31;return new o(E,b.h)}function Ce(b,_){var E=_>>5;_%=32;for(var T=b.g.length-E,w=[],R=0;R<T;R++)w[R]=0<_?b.i(R+E)>>>_|b.i(R+E+1)<<32-_:b.i(R+E);return new o(w,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,dL=lL.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,x_=lL.Integer=o}).apply(typeof uL<"u"?uL:typeof self<"u"?self:typeof window<"u"?window:{});var M_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ls={};var hD,R7,El,fD,Pf,k_,pD,gD,mD;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof M_=="object"&&M_];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var D=0;D<u.length-1;D++){var x=u[D];if(!(x in m))break e;m=m[x]}u=u[u.length-1],D=m[u],f=f(D),f!=D&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,D=!1,x={next:function(){if(!D&&m<u.length){var L=m++;return{value:f(L,u[L]),done:!1}}return D=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});var o=o||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function d(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function g(u,f,m){if(!u)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,D),u.apply(f,x)}}return function(){return u.apply(f,arguments)}}function I(u,f,m){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,I.apply(null,arguments)}function S(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var D=m.slice();return D.push.apply(D,arguments),u.apply(this,D)}}function P(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(D,x,L){for(var W=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)W[Ve-2]=arguments[Ve];return f.prototype[x].apply(D,W)}}function U(u){let f=u.length;if(0<f){let m=Array(f);for(let D=0;D<f;D++)m[D]=u[D];return m}return[]}function O(u,f){for(let m=1;m<arguments.length;m++){let D=arguments[m];if(c(D)){let x=u.length||0,L=D.length||0;u.length=x+L;for(let W=0;W<L;W++)u[x+W]=D[W]}else u.push(D)}}class G{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function ne(u){return/^[\s\xa0]*$/.test(u)}function re(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Re(u){return Re[" "](u),u}Re[" "]=function(){};var rt=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function Ce(u,f,m){for(let D in u)f.call(m,u[D],D,u)}function b(u,f){for(let m in u)f.call(void 0,u[m],m,u)}function _(u){let f={};for(let m in u)f[m]=u[m];return f}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,f){let m,D;for(let x=1;x<arguments.length;x++){D=arguments[x];for(m in D)u[m]=D[m];for(let L=0;L<E.length;L++)m=E[L],Object.prototype.hasOwnProperty.call(D,m)&&(u[m]=D[m])}}function w(u){var f=1;u=u.split(":");let m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function R(u){a.setTimeout(()=>{throw u},0)}function v(){var u=ms;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class st{constructor(){this.h=this.g=null}add(f,m){let D=Tn.get();D.set(f,m),this.h?this.h.next=D:this.g=D,this.h=D}}var Tn=new G(()=>new zv,u=>u.reset());class zv{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let No,Hr=!1,ms=new st,lp=()=>{let u=a.Promise.resolve(void 0);No=()=>{u.then(dp)}};var dp=()=>{for(var u;u=v();){try{u.h.call(u.g)}catch(m){R(m)}var f=Tn;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}Hr=!1};function yr(){this.s=this.s,this.C=this.C}yr.prototype.s=!1,yr.prototype.ma=function(){this.s||(this.s=!0,this.N())},yr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Nt(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}Nt.prototype.h=function(){this.defaultPrevented=!0};var uc=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u})();function Ii(u,f){if(Nt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,D=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(rt){e:{try{Re(f.nodeName);var x=!0;break e}catch{}x=!1}x||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Jl[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ii.aa.h.call(this)}}P(Ii,Nt);var Jl={2:"touch",3:"pen",4:"mouse"};Ii.prototype.h=function(){Ii.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var wi="closure_listenable_"+(1e6*Math.random()|0),Xl=0;function hp(u,f,m,D,x){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!D,this.ha=x,this.key=++Xl,this.da=this.fa=!1}function xo(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function lc(u){this.src=u,this.g={},this.h=0}lc.prototype.add=function(u,f,m,D,x){var L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);var W=hc(u,f,D,x);return-1<W?(f=u[W],m||(f.fa=!1)):(f=new hp(f,this.src,L,!!D,x),f.fa=m,u.push(f)),f};function dc(u,f){var m=f.type;if(m in u.g){var D=u.g[m],x=Array.prototype.indexOf.call(D,f,void 0),L;(L=0<=x)&&Array.prototype.splice.call(D,x,1),L&&(xo(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function hc(u,f,m,D){for(var x=0;x<u.length;++x){var L=u[x];if(!L.da&&L.listener==f&&L.capture==!!m&&L.ha==D)return x}return-1}var Mo="closure_lm_"+(1e6*Math.random()|0),fc={};function fp(u,f,m,D,x){if(D&&D.once)return gc(u,f,m,D,x);if(Array.isArray(f)){for(var L=0;L<f.length;L++)fp(u,f[L],m,D,x);return null}return m=Ti(m),u&&u[wi]?u.K(f,m,d(D)?!!D.capture:!!D,x):pc(u,f,m,!1,D,x)}function pc(u,f,m,D,x,L){if(!f)throw Error("Invalid event type");var W=d(x)?!!x.capture:!!x,Ve=mc(u);if(Ve||(u[Mo]=Ve=new lc(u)),m=Ve.add(f,m,D,W,L),m.proxy)return m;if(D=Zl(),m.proxy=D,D.src=u,D.listener=m,u.addEventListener)uc||(x=W),x===void 0&&(x=!1),u.addEventListener(f.toString(),D,x);else if(u.attachEvent)u.attachEvent(ko(f.toString()),D);else if(u.addListener&&u.removeListener)u.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Zl(){function u(m){return f.call(u.src,u.listener,m)}let f=Gv;return u}function gc(u,f,m,D,x){if(Array.isArray(f)){for(var L=0;L<f.length;L++)gc(u,f[L],m,D,x);return null}return m=Ti(m),u&&u[wi]?u.L(f,m,d(D)?!!D.capture:!!D,x):pc(u,f,m,!0,D,x)}function xt(u,f,m,D,x){if(Array.isArray(f))for(var L=0;L<f.length;L++)xt(u,f[L],m,D,x);else D=d(D)?!!D.capture:!!D,m=Ti(m),u&&u[wi]?(u=u.i,f=String(f).toString(),f in u.g&&(L=u.g[f],m=hc(L,m,D,x),-1<m&&(xo(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete u.g[f],u.h--)))):u&&(u=mc(u))&&(f=u.g[f.toString()],u=-1,f&&(u=hc(f,m,D,x)),(m=-1<u?f[u]:null)&&Mt(m))}function Mt(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[wi])dc(f.i,u);else{var m=u.type,D=u.proxy;f.removeEventListener?f.removeEventListener(m,D,u.capture):f.detachEvent?f.detachEvent(ko(m),D):f.addListener&&f.removeListener&&f.removeListener(D),(m=mc(f))?(dc(m,u),m.h==0&&(m.src=null,f[Mo]=null)):xo(u)}}}function ko(u){return u in fc?fc[u]:fc[u]="on"+u}function Gv(u,f){if(u.da)u=!0;else{f=new Ii(f,this);var m=u.listener,D=u.ha||u.src;u.fa&&Mt(u),u=m.call(D,f)}return u}function mc(u){return u=u[Mo],u instanceof lc?u:null}var ed="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ti(u){return typeof u=="function"?u:(u[ed]||(u[ed]=function(f){return u.handleEvent(f)}),u[ed])}function kt(){yr.call(this),this.i=new lc(this),this.M=this,this.F=null}P(kt,yr),kt.prototype[wi]=!0,kt.prototype.removeEventListener=function(u,f,m,D){xt(this,u,f,m,D)};function Ht(u,f){var m,D=u.F;if(D)for(m=[];D;D=D.F)m.push(D);if(u=u.M,D=f.type||f,typeof f=="string")f=new Nt(f,u);else if(f instanceof Nt)f.target=f.target||u;else{var x=f;f=new Nt(D,u),T(f,x)}if(x=!0,m)for(var L=m.length-1;0<=L;L--){var W=f.g=m[L];x=ys(W,D,!0,f)&&x}if(W=f.g=u,x=ys(W,D,!0,f)&&x,x=ys(W,D,!1,f)&&x,m)for(L=0;L<m.length;L++)W=f.g=m[L],x=ys(W,D,!1,f)&&x}kt.prototype.N=function(){if(kt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],D=0;D<m.length;D++)xo(m[D]);delete u.g[f],u.h--}}this.F=null},kt.prototype.K=function(u,f,m,D){return this.i.add(String(u),f,!1,m,D)},kt.prototype.L=function(u,f,m,D){return this.i.add(String(u),f,!0,m,D)};function ys(u,f,m,D){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var x=!0,L=0;L<f.length;++L){var W=f[L];if(W&&!W.da&&W.capture==m){var Ve=W.listener,yt=W.ha||W.src;W.fa&&dc(u.i,W),x=Ve.call(yt,D)!==!1&&x}}return x&&!D.defaultPrevented}function pp(u,f,m){if(typeof u=="function")m&&(u=I(u,m));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function gp(u){u.g=pp(()=>{u.g=null,u.i&&(u.i=!1,gp(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class mp extends yr{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:gp(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _s(u){yr.call(this),this.h=u,this.g={}}P(_s,yr);var vs=[];function yc(u){Ce(u.g,function(f,m){this.g.hasOwnProperty(m)&&Mt(f)},u),u.g={}}_s.prototype.N=function(){_s.aa.N.call(this),yc(this)},_s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oo=a.JSON.stringify,bi=a.JSON.parse,yp=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Es(){}Es.prototype.h=null;function td(u){return u.h||(u.h=u.i())}function Is(){}var ws={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ot(){Nt.call(this,"d")}P(Ot,Nt);function _c(){Nt.call(this,"c")}P(_c,Nt);var kn={},Ts=null;function vc(){return Ts=Ts||new kt}kn.La="serverreachability";function _p(u){Nt.call(this,kn.La,u)}P(_p,Nt);function nr(u){let f=vc();Ht(f,new _p(f))}kn.STAT_EVENT="statevent";function vp(u,f){Nt.call(this,kn.STAT_EVENT,u),this.stat=f}P(vp,Nt);function Yt(u){let f=vc();Ht(f,new vp(f,u))}kn.Ma="timingevent";function Fo(u,f){Nt.call(this,kn.Ma,u),this.size=f}P(Fo,Nt);function bs(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Cs(){this.g=!0}Cs.prototype.xa=function(){this.g=!1};function nd(u,f,m,D,x,L){u.info(function(){if(u.g)if(L)for(var W="",Ve=L.split("&"),yt=0;yt<Ve.length;yt++){var Ue=Ve[yt].split("=");if(1<Ue.length){var rn=Ue[0];Ue=Ue[1];var sn=rn.split("_");W=2<=sn.length&&sn[1]=="type"?W+(rn+"="+Ue+"&"):W+(rn+"=redacted&")}}else W=null;else W=L;return"XMLHTTP REQ ("+D+") [attempt "+x+"]: "+f+`
`+m+`
`+W})}function Lo(u,f,m,D,x,L,W){u.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+x+"]: "+f+`
`+m+`
`+L+" "+W})}function Ds(u,f,m,D){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Ep(u,m)+(D?" "+D:"")})}function qr(u,f){u.info(function(){return"TIMEOUT: "+f})}Cs.prototype.info=function(){};function Ep(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var D=m[u];if(!(2>D.length)){var x=D[1];if(Array.isArray(x)&&!(1>x.length)){var L=x[0];if(L!="noop"&&L!="stop"&&L!="close")for(var W=1;W<x.length;W++)x[W]=""}}}}return Oo(m)}catch{return f}}var Vo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ec={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Uo;function jo(){}P(jo,Es),jo.prototype.g=function(){return new XMLHttpRequest},jo.prototype.i=function(){return{}},Uo=new jo;function zr(u,f,m,D){this.j=u,this.i=f,this.l=m,this.R=D||1,this.U=new _s(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rd}function rd(){this.i=null,this.g="",this.h=!1}var Ip={},Ss={};function Ic(u,f,m){u.L=1,u.v=Cc(_r(f)),u.m=m,u.P=!0,wc(u,null)}function wc(u,f){u.F=Date.now(),Rs(u),u.A=_r(u.v);var m=u.A,D=u.R;Array.isArray(D)||(D=[String(D)]),Rp(m.i,"t",D),u.C=0,m=u.j.J,u.h=new rd,u.g=p(u.j,m?f:null,!u.m),0<u.O&&(u.M=new mp(I(u.Y,u,u.g),u.O)),f=u.U,m=u.g,D=u.ca;var x="readystatechange";Array.isArray(x)||(x&&(vs[0]=x.toString()),x=vs);for(var L=0;L<x.length;L++){var W=fp(m,x[L],D||f.handleEvent,!1,f.h||f);if(!W)break;f.g[W.key]=W}f=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),nr(),nd(u.i,u.u,u.A,u.l,u.R,u.m)}zr.prototype.ca=function(u){u=u.target;let f=this.M;f&&Cn(u)==3?f.j():this.Y(u)},zr.prototype.Y=function(u){try{if(u==this.g)e:{let sn=Cn(this.g);var f=this.g.Ba();let kc=this.g.Z();if(!(3>sn)&&(sn!=3||this.g&&(this.h.h||this.g.oa()||kp(this.g)))){this.J||sn!=4||f==7||(f==8||0>=kc?nr(3):nr(2)),Tc(this);var m=this.g.Z();this.X=m;t:if(As(this)){var D=kp(this.g);u="";var x=D.length,L=Cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gr(this),Ps(this);var W="";break t}this.h.i=new a.TextDecoder}for(f=0;f<x;f++)this.h.h=!0,u+=this.h.i.decode(D[f],{stream:!(L&&f==x-1)});D.length=0,this.h.g+=u,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=m==200,Lo(this.i,this.u,this.A,this.l,this.R,sn,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,yt=this.g;if((Ve=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(Ve)){var Ue=Ve;break t}}Ue=null}if(m=Ue)Ds(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bo(this,m);else{this.o=!1,this.s=3,Yt(12),Gr(this),Ps(this);break e}}if(this.P){m=!0;let Tr;for(;!this.J&&this.C<W.length;)if(Tr=Ci(this,W),Tr==Ss){sn==4&&(this.s=4,Yt(14),m=!1),Ds(this.i,this.l,null,"[Incomplete Response]");break}else if(Tr==Ip){this.s=4,Yt(15),Ds(this.i,this.l,W,"[Invalid Chunk]"),m=!1;break}else Ds(this.i,this.l,Tr,null),Bo(this,Tr);if(As(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),sn!=4||W.length!=0||this.h.h||(this.s=1,Yt(16),m=!1),this.o=this.o&&m,!m)Ds(this.i,this.l,W,"[Invalid Chunked Response]"),Gr(this),Ps(this);else if(0<W.length&&!this.W){this.W=!0;var rn=this.j;rn.g==this&&rn.ba&&!rn.M&&(rn.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Mc(rn),rn.M=!0,Yt(11))}}else Ds(this.i,this.l,W,null),Bo(this,W);sn==4&&Gr(this),this.o&&!this.J&&(sn==4?nn(this.j,this):(this.o=!1,Rs(this)))}else Op(this.g),m==400&&0<W.indexOf("Unknown SID")?(this.s=3,Yt(12)):(this.s=0,Yt(13)),Gr(this),Ps(this)}}}catch{}finally{}};function As(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ci(u,f){var m=u.C,D=f.indexOf(`
`,m);return D==-1?Ss:(m=Number(f.substring(m,D)),isNaN(m)?Ip:(D+=1,D+m>f.length?Ss:(f=f.slice(D,D+m),u.C=D+m,f)))}zr.prototype.cancel=function(){this.J=!0,Gr(this)};function Rs(u){u.S=Date.now()+u.I,wp(u,u.I)}function wp(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=bs(I(u.ba,u),f)}function Tc(u){u.B&&(a.clearTimeout(u.B),u.B=null)}zr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(qr(this.i,this.A),this.L!=2&&(nr(),Yt(17)),Gr(this),this.s=2,Ps(this)):wp(this,this.S-u)};function Ps(u){u.j.G==0||u.J||nn(u.j,u)}function Gr(u){Tc(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,yc(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Bo(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||cd(m.h,u))){if(!u.K&&cd(m.h,u)&&m.G==3){try{var D=m.Da.g.parse(f)}catch{D=null}if(Array.isArray(D)&&D.length==3){var x=D;if(x[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Si(m),Ls(m);else break e;xc(m),Yt(18)}}else m.za=x[1],0<m.za-m.T&&37500>x[2]&&m.F&&m.v==0&&!m.C&&(m.C=bs(I(m.Za,m),6e3));if(1>=ad(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Qr(m,11)}else if((u.K||m.g==u)&&Si(m),!ne(f))for(x=m.Da.g.parse(f),f=0;f<x.length;f++){let Ue=x[f];if(m.T=Ue[0],Ue=Ue[1],m.G==2)if(Ue[0]=="c"){m.K=Ue[1],m.ia=Ue[2];let rn=Ue[3];rn!=null&&(m.la=rn,m.j.info("VER="+m.la));let sn=Ue[4];sn!=null&&(m.Aa=sn,m.j.info("SVER="+m.Aa));let kc=Ue[5];kc!=null&&typeof kc=="number"&&0<kc&&(D=1.5*kc,m.L=D,m.j.info("backChannelRequestTimeoutMs_="+D)),D=m;let Tr=u.g;if(Tr){let Fp=Tr.g?Tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fp){var L=D.h;L.g||Fp.indexOf("spdy")==-1&&Fp.indexOf("quic")==-1&&Fp.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(rr(L,L.h),L.h=null))}if(D.D){let Kv=Tr.g?Tr.g.getResponseHeader("X-HTTP-Session-Id"):null;Kv&&(D.ya=Kv,Ze(D.I,D.D,Kv))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),D=m;var W=u;if(D.qa=l(D,D.J?D.ia:null,D.W),W.K){On(D.h,W);var Ve=W,yt=D.L;yt&&(Ve.I=yt),Ve.B&&(Tc(Ve),Rs(Ve)),D.g=W}else yd(D);0<m.i.length&&Ko(m)}else Ue[0]!="stop"&&Ue[0]!="close"||Qr(m,7);else m.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Qr(m,7):Rc(m):Ue[0]!="noop"&&m.l&&m.l.ta(Ue),m.v=0)}}nr(4)}catch{}}var id=class{constructor(u,f){this.g=u,this.map=f}};function sd(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function od(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ad(u){return u.h?1:u.g?u.g.size:0}function cd(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function rr(u,f){u.g?u.g.add(f):u.h=f}function On(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}sd.prototype.cancel=function(){if(this.i=Ns(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Ns(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let m of u.g.values())f=f.concat(m.D);return f}return U(u.i)}function $o(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],m=u.length,D=0;D<m;D++)f.push(u[D]);return f}f=[],m=0;for(D in u)f[m++]=u[D];return f}function ud(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(let D in u)f[m++]=D;return f}}}function Je(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=ud(u),D=$o(u),x=D.length,L=0;L<x;L++)f.call(void 0,D[L],m&&m[L],u)}var Ho=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qo(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var D=u[m].indexOf("="),x=null;if(0<=D){var L=u[m].substring(0,D);x=u[m].substring(D+1)}else L=u[m];f(L,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Fn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Fn){this.h=u.h,zo(this,u.j),this.o=u.o,this.g=u.g,bc(this,u.s),this.l=u.l;var f=u.i,m=new Go;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Tp(this,m),this.m=u.m}else u&&(f=String(u).match(Ho))?(this.h=!1,zo(this,f[1]||"",!0),this.o=vr(f[2]||""),this.g=vr(f[3]||"",!0),bc(this,f[4]),this.l=vr(f[5]||"",!0),Tp(this,f[6]||"",!0),this.m=vr(f[7]||"")):(this.h=!1,this.i=new Go(null,this.h))}Fn.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Ln(f,ld,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Ln(f,ld,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Ln(m,m.charAt(0)=="/"?Dp:Cp,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Ln(m,xs)),u.join("")};function _r(u){return new Fn(u)}function zo(u,f,m){u.j=m?vr(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function bc(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Tp(u,f,m){f instanceof Go?(u.i=f,Dc(u.i,u.h)):(m||(f=Ln(f,Sp)),u.i=new Go(f,u.h))}function Ze(u,f,m){u.i.set(f,m)}function Cc(u){return Ze(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function vr(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ln(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,bp),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function bp(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ld=/[#\/\?@]/g,Cp=/[#\?:]/g,Dp=/[#\?]/g,Sp=/[#\?@]/g,xs=/#/g;function Go(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Wr(u){u.g||(u.g=new Map,u.h=0,u.i&&qo(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=Go.prototype,n.add=function(u,f){Wr(this),this.i=null,u=Ir(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function Ap(u,f){Wr(u),f=Ir(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Er(u,f){return Wr(u),f=Ir(u,f),u.g.has(f)}n.forEach=function(u,f){Wr(this),this.g.forEach(function(m,D){m.forEach(function(x){u.call(f,x,D,this)},this)},this)},n.na=function(){Wr(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let D=0;D<f.length;D++){let x=u[D];for(let L=0;L<x.length;L++)m.push(f[D])}return m},n.V=function(u){Wr(this);let f=[];if(typeof u=="string")Er(this,u)&&(f=f.concat(this.g.get(Ir(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},n.set=function(u,f){return Wr(this),this.i=null,u=Ir(this,u),Er(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Rp(u,f,m){Ap(u,f),0<m.length&&(u.i=null,u.g.set(Ir(u,f),U(m)),u.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var D=f[m];let L=encodeURIComponent(String(D)),W=this.V(D);for(D=0;D<W.length;D++){var x=L;W[D]!==""&&(x+="="+encodeURIComponent(String(W[D]))),u.push(x)}}return this.i=u.join("&")};function Ir(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function Dc(u,f){f&&!u.j&&(Wr(u),u.i=null,u.g.forEach(function(m,D){var x=D.toLowerCase();D!=x&&(Ap(this,D),Rp(this,x,m))},u)),u.j=f}function Pp(u,f){let m=new Cs;if(a.Image){let D=new Image;D.onload=S(bn,m,"TestLoadImage: loaded",!0,f,D),D.onerror=S(bn,m,"TestLoadImage: error",!1,f,D),D.onabort=S(bn,m,"TestLoadImage: abort",!1,f,D),D.ontimeout=S(bn,m,"TestLoadImage: timeout",!1,f,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=u}else f(!1)}function Wo(u,f){let m=new Cs,D=new AbortController,x=setTimeout(()=>{D.abort(),bn(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:D.signal}).then(L=>{clearTimeout(x),L.ok?bn(m,"TestPingServer: ok",!0,f):bn(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(x),bn(m,"TestPingServer: error",!1,f)})}function bn(u,f,m,D,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),D(m)}catch{}}function Np(){this.g=new yp}function dd(u,f,m){let D=m||"";try{Je(u,function(x,L){let W=x;d(x)&&(W=Oo(x)),f.push(D+L+"="+encodeURIComponent(W))})}catch(x){throw f.push(D+"type="+encodeURIComponent("_badmap")),x}}function Xe(u){this.l=u.Ub||null,this.j=u.eb||!1}P(Xe,Es),Xe.prototype.g=function(){return new Sc(this.l,this.j)},Xe.prototype.i=(function(u){return function(){return u}})({});function Sc(u,f){kt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Sc,kt),n=Sc.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,ks(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ms(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ks(this)),this.g&&(this.readyState=3,ks(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xp(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function xp(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Ms(this):ks(this),this.readyState==3&&xp(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Ms(this))},n.Qa=function(u){this.g&&(this.response=u,Ms(this))},n.ga=function(){this.g&&Ms(this)};function Ms(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ks(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function ks(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Sc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function hd(u){let f="";return Ce(u,function(m,D){f+=D,f+=":",f+=m,f+=`\r
`}),f}function Os(u,f,m){e:{for(D in m){var D=!1;break e}D=!0}D||(m=hd(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Ze(u,f,m))}function $e(u){kt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P($e,kt);var Mp=/^https?$/i,Wv=["POST","PUT"];n=$e.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,m,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Uo.g(),this.v=this.o?td(this.o):td(Uo),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(L){Fs(this,L);return}if(u=m||"",m=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var x in D)m.set(x,D[x]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(let L of D.keys())m.set(L,D.get(L));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),x=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Wv,f,void 0))||D||x||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,W]of m)this.g.setRequestHeader(L,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pd(this),this.u=!0,this.g.send(u),this.u=!1}catch(L){Fs(this,L)}};function Fs(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,fd(u),Di(u)}function fd(u){u.A||(u.A=!0,Ht(u,"complete"),Ht(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ht(this,"complete"),Ht(this,"abort"),Di(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Di(this,!0)),$e.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ac(this):this.bb())},n.bb=function(){Ac(this)};function Ac(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Cn(u)!=4||u.Z()!=2)){if(u.u&&Cn(u)==4)pp(u.Ea,0,u);else if(Ht(u,"readystatechange"),Cn(u)==4){u.h=!1;try{let W=u.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var D;if(D=W===0){var x=String(u.D).match(Ho)[1]||null;!x&&a.self&&a.self.location&&(x=a.self.location.protocol.slice(0,-1)),D=!Mp.test(x?x.toLowerCase():"")}m=D}if(m)Ht(u,"complete"),Ht(u,"success");else{u.m=6;try{var L=2<Cn(u)?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.Z()+"]",fd(u)}}finally{Di(u)}}}}function Di(u,f){if(u.g){pd(u);let m=u.g,D=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Ht(u,"ready");try{m.onreadystatechange=D}catch{}}}function pd(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Cn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Cn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),bi(f)}};function kp(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Op(u){let f={};u=(u.g&&2<=Cn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<u.length;D++){if(ne(u[D]))continue;var m=w(u[D]);let x=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let L=f[x]||[];f[x]=L,L.push(m)}b(f,function(D){return D.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wr(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function gd(u){this.Aa=0,this.i=[],this.j=new Cs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wr("baseRetryDelayMs",5e3,u),this.cb=wr("retryDelaySeedMs",1e4,u),this.Wa=wr("forwardChannelMaxRetries",2,u),this.wa=wr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new sd(u&&u.concurrentRequestLimit),this.Da=new Np,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=gd.prototype,n.la=8,n.G=1,n.connect=function(u,f,m,D){Yt(0),this.W=u,this.H=f||{},m&&D!==void 0&&(this.H.OSID=m,this.H.OAID=D),this.F=this.X,this.I=l(this,null,this.W),Ko(this)};function Rc(u){if(Pc(u),u.G==3){var f=u.U++,m=_r(u.I);if(Ze(m,"SID",u.K),Ze(m,"RID",f),Ze(m,"TYPE","terminate"),Vs(u,m),f=new zr(u,u.j,f),f.L=2,f.v=Cc(_r(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=p(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Rs(f)}Ai(u)}function Ls(u){u.g&&(Mc(u),u.g.cancel(),u.g=null)}function Pc(u){Ls(u),u.u&&(a.clearTimeout(u.u),u.u=null),Si(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Ko(u){if(!od(u.h)&&!u.s){u.s=!0;var f=u.Ga;No||lp(),Hr||(No(),Hr=!0),ms.add(f,u),u.B=0}}function Nc(u,f){return ad(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=bs(I(u.Ga,u,f),vd(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let x=new zr(this,this.j,u),L=this.o;if(this.S&&(L?(L=_(L),T(L,this.S)):L=this.S),this.m!==null||this.O||(x.H=L,L=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var D=this.i[m];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(f+=D,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Kr(this,x,f),m=_r(this.I),Ze(m,"RID",u),Ze(m,"CVER",22),this.D&&Ze(m,"X-HTTP-Session-Id",this.D),Vs(this,m),L&&(this.O?f="headers="+encodeURIComponent(String(hd(L)))+"&"+f:this.m&&Os(m,this.m,L)),rr(this.h,x),this.Ua&&Ze(m,"TYPE","init"),this.P?(Ze(m,"$req",f),Ze(m,"SID","null"),x.T=!0,Ic(x,m,null)):Ic(x,m,f),this.G=2}}else this.G==3&&(u?md(this,u):this.i.length==0||od(this.h)||md(this))};function md(u,f){var m;f?m=f.l:m=u.U++;let D=_r(u.I);Ze(D,"SID",u.K),Ze(D,"RID",m),Ze(D,"AID",u.T),Vs(u,D),u.m&&u.o&&Os(D,u.m,u.o),m=new zr(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Kr(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),rr(u.h,m),Ic(m,D,f)}function Vs(u,f){u.H&&Ce(u.H,function(m,D){Ze(f,D,m)}),u.l&&Je({},function(m,D){Ze(f,D,m)})}function Kr(u,f,m){m=Math.min(u.i.length,m);var D=u.l?I(u.l.Na,u.l,u):null;e:{var x=u.i;let L=-1;for(;;){let W=["count="+m];L==-1?0<m?(L=x[0].g,W.push("ofs="+L)):L=0:W.push("ofs="+L);let Ve=!0;for(let yt=0;yt<m;yt++){let Ue=x[yt].g,rn=x[yt].map;if(Ue-=L,0>Ue)L=Math.max(0,x[yt].g-100),Ve=!1;else try{dd(rn,W,"req"+Ue+"_")}catch{D&&D(rn)}}if(Ve){D=W.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,D}function yd(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;No||lp(),Hr||(No(),Hr=!0),ms.add(f,u),u.v=0}}function xc(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=bs(I(u.Fa,u),vd(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,_d(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=bs(I(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yt(10),Ls(this),_d(this))};function Mc(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function _d(u){u.g=new zr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=_r(u.qa);Ze(f,"RID","rpc"),Ze(f,"SID",u.K),Ze(f,"AID",u.T),Ze(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ze(f,"TO",u.ja),Ze(f,"TYPE","xmlhttp"),Vs(u,f),u.m&&u.o&&Os(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Cc(_r(f)),m.m=null,m.P=!0,wc(m,u)}n.Za=function(){this.C!=null&&(this.C=null,Ls(this),xc(this),Yt(19))};function Si(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function nn(u,f){var m=null;if(u.g==f){Si(u),Mc(u),u.g=null;var D=2}else if(cd(u.h,f))m=f.D,On(u.h,f),D=1;else return;if(u.G!=0){if(f.o)if(D==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var x=u.B;D=vc(),Ht(D,new Fo(D,m)),Ko(u)}else yd(u);else if(x=f.s,x==3||x==0&&0<f.X||!(D==1&&Nc(u,f)||D==2&&xc(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),x){case 1:Qr(u,5);break;case 4:Qr(u,10);break;case 3:Qr(u,6);break;default:Qr(u,2)}}}function vd(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function Qr(u,f){if(u.j.info("Error code "+f),f==2){var m=I(u.fb,u),D=u.Xa;let x=!D;D=new Fn(D||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||zo(D,"https"),Cc(D),x?Pp(D.toString(),m):Wo(D.toString(),m)}else Yt(2);u.G=0,u.l&&u.l.sa(f),Ai(u),Pc(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function Ai(u){if(u.G=0,u.ka=[],u.l){let f=Ns(u.h);(f.length!=0||u.i.length!=0)&&(O(u.ka,f),O(u.ka,u.i),u.h.i.length=0,U(u.i),u.i.length=0),u.l.ra()}}function l(u,f,m){var D=m instanceof Fn?_r(m):new Fn(m);if(D.g!="")f&&(D.g=f+"."+D.g),bc(D,D.s);else{var x=a.location;D=x.protocol,f=f?f+"."+x.hostname:x.hostname,x=+x.port;var L=new Fn(null);D&&zo(L,D),f&&(L.g=f),x&&bc(L,x),m&&(L.l=m),D=L}return m=u.D,f=u.ya,m&&f&&Ze(D,m,f),Ze(D,"VER",u.la),Vs(u,D),D}function p(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new $e(new Xe({eb:m})):new $e(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function y(){}n=y.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function A(){}A.prototype.g=function(u,f){return new N(u,f)};function N(u,f){kt.call(this),this.g=new gd(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!ne(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!ne(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new ue(this)}P(N,kt),N.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},N.prototype.close=function(){Rc(this.g)},N.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Oo(u),u=m);f.i.push(new id(f.Ya++,u)),f.G==3&&Ko(f)},N.prototype.N=function(){this.g.l=null,delete this.j,Rc(this.g),delete this.g,N.aa.N.call(this)};function F(u){Ot.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}P(F,Ot);function K(){_c.call(this),this.status=1}P(K,_c);function ue(u){this.g=u}P(ue,y),ue.prototype.ua=function(){Ht(this.g,"a")},ue.prototype.ta=function(u){Ht(this.g,new F(u))},ue.prototype.sa=function(u){Ht(this.g,new K)},ue.prototype.ra=function(){Ht(this.g,"b")},A.prototype.createWebChannel=A.prototype.g,N.prototype.send=N.prototype.o,N.prototype.open=N.prototype.m,N.prototype.close=N.prototype.close,mD=ls.createWebChannelTransport=function(){return new A},gD=ls.getStatEventTarget=function(){return vc()},pD=ls.Event=kn,k_=ls.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vo.NO_ERROR=0,Vo.TIMEOUT=8,Vo.HTTP_ERROR=6,Pf=ls.ErrorCode=Vo,Ec.COMPLETE="complete",fD=ls.EventType=Ec,Is.EventType=ws,ws.OPEN="a",ws.CLOSE="b",ws.ERROR="c",ws.MESSAGE="d",kt.prototype.listen=kt.prototype.K,El=ls.WebChannel=Is,R7=ls.FetchXmlHttpFactory=Xe,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,hD=ls.XhrIo=$e}).apply(typeof M_<"u"?M_:typeof self<"u"?self:typeof window<"u"?window:{});var hL="@firebase/firestore",fL="4.8.0";var Qt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");var $l="11.10.0";var Ja=new li("@firebase/firestore");function Il(){return Ja.logLevel}function te(n,...e){if(Ja.logLevel<=De.DEBUG){let t=e.map(GS);Ja.debug(`Firestore (${$l}): ${n}`,...t)}}function Xa(n,...e){if(Ja.logLevel<=De.ERROR){let t=e.map(GS);Ja.error(`Firestore (${$l}): ${n}`,...t)}}function Al(n,...e){if(Ja.logLevel<=De.WARN){let t=e.map(GS);Ja.warn(`Firestore (${$l}): ${n}`,...t)}}function GS(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Te(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,JL(n,r,t)}function JL(n,e,t){let r=`FIRESTORE (${$l}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Xa(r),new Error(r)}function mt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||JL(e,i,r)}function nt(n,e){return n}var $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Y=class extends Jn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ds=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var B_=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ED=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qt.UNAUTHENTICATED))}shutdown(){}},ID=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},wD=class{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){mt(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new ds;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ds,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>C(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ds)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt(typeof r.accessToken=="string",31837,{l:r}),new B_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return mt(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}},TD=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},bD=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new TD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},$_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},CD=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){mt(this.o===void 0,3512);let r=s=>{s.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $_(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(mt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function P7(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function N7(){return new TextEncoder}var Lf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=P7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Le(n,e){return n<e?-1:n>e?1:0}function DD(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Le(r,i);{let s=N7(),o=x7(s.encode(pL(n,t)),s.encode(pL(e,t)));return o!==0?o:Le(r,i)}}t+=r>65535?2:1}return Le(n.length,e.length)}function pL(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function x7(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Le(n[t],e[t]);return Le(n.length,e.length)}function Rl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var gL="__name__",H_=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Te(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Le(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):DD(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return x_.fromString(e.substring(4,e.length-2))}},gt=class n extends H_{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Y($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},M7=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Zn=class n extends H_{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return M7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gL}static keyField(){return new n([gL])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new Y($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Y($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Y($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Ie=class n{constructor(e){this.path=e}static fromPath(e){return new n(gt.fromString(e))}static fromName(e){return new n(gt.fromString(e).popFirst(5))}static empty(){return new n(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new gt(e.slice()))}};function XL(n,e,t){if(!t)throw new Y($.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function k7(n,e,t,r){if(e===!0&&r===!0)throw new Y($.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mL(n){if(!Ie.isDocumentKey(n))throw new Y($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yL(n){if(Ie.isDocumentKey(n))throw new Y($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ZL(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function uv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te(12329,{type:typeof n})}function Vf(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Y($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=uv(n);throw new Y($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Pt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Kf(n,e){if(!ZL(n))throw new Y($.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new Y($.INVALID_ARGUMENT,t);return!0}var _L=-62135596800,vL=1e6,it=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*vL);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Y($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Y($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_L)throw new Y($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vL}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Kf(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-_L;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:Pt("string",it._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};var pt=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new it(0,0))}static max(){return new n(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Uf=-1,SD=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};SD.UNKNOWN_ID=-1;function O7(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=pt.fromTimestamp(r===1e9?new it(t+1,0):new it(t,r));return new Za(i,Ie.empty(),e)}function F7(n){return new Za(n.readTime,n.key,Uf)}var Za=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(pt.min(),Ie.empty(),Uf)}static max(){return new n(pt.max(),Ie.empty(),Uf)}};function L7(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ie.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}var V7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",AD=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function WS(n){return C(this,null,function*(){if(n.code!==$.FAILED_PRECONDITION||n.message!==V7)throw n;te("LocalStore","Unexpectedly lost primary lease")})}var z=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function U7(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qf(n){return n.name==="IndexedDbTransactionError"}var eV=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),KS=-1;function QS(n){return n==null}function jf(n){return n===0&&1/n==-1/0}function j7(n){return typeof n=="number"&&Number.isInteger(n)&&!jf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var tV="";function B7(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=EL(e)),e=$7(n.get(t),e);return EL(e)}function $7(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case tV:t+="";break;default:t+=s}}return t}function EL(n){return n+tV+""}var H7="remoteDocuments",nV="owner";var rV="mutationQueues";var iV="mutations";var sV="documentMutations",q7="remoteDocumentsV14";var oV="remoteDocumentGlobal";var aV="targets";var cV="targetDocuments";var uV="targetGlobal",lV="collectionParents";var dV="clientMetadata";var hV="bundles";var fV="namedQueries";var z7="indexConfiguration";var G7="indexState";var W7="indexEntries";var pV="documentOverlays";var K7="globals";var Q7=[rV,iV,sV,H7,aV,nV,uV,cV,dV,oV,lV,hV,fV],gEe=[...Q7,pV],Y7=[rV,iV,sV,q7,aV,nV,uV,cV,dV,oV,lV,hV,fV,pV],J7=Y7,X7=[...J7,z7,G7,W7];var mEe=[...X7,K7];function IL(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function oc(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function gV(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var er=class n{constructor(e,t){this.comparator=e,this.root=t||_i.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_i.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_i.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tl(this.root,e,this.comparator,!0)}},Tl=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},_i=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}};_i.EMPTY=null,_i.RED=!0,_i.BLACK=!1;_i.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new _i(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var pn=class n{constructor(e){this.comparator=e,this.data=new er(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new q_(this.data.getIterator())}getIteratorFrom(e){return new q_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},q_=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var mr=class n{constructor(e){this.fields=e,e.sort(Zn.comparator)}static empty(){return new n([])}unionWith(e){let t=new pn(Zn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rl(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var RD=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var fs=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new RD("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};fs.EMPTY_BYTE_STRING=new fs("");var Z7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bo(n){if(mt(!!n,39018),typeof n=="string"){let e=0,t=Z7.exec(n);if(mt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rt(n.seconds),nanos:Rt(n.nanos)}}function Rt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ec(n){return typeof n=="string"?fs.fromBase64String(n):fs.fromUint8Array(n)}var mV="server_timestamp",yV="__type__",_V="__previous_value__",vV="__local_write_time__";function YS(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[yV])===null||t===void 0?void 0:t.stringValue)===mV}function JS(n){let e=n.mapValue.fields[_V];return YS(e)?JS(e):e}function z_(n){let e=bo(n.mapValue.fields[vV].timestampValue);return new it(e.seconds,e.nanos)}var PD=class{constructor(e,t,r,i,s,o,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}},G_="(default)",ND=class n{constructor(e,t){this.projectId=e,this.database=t||G_}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===G_}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var XS="__type__",EV="__max__",O_={mapValue:{fields:{__type__:{stringValue:EV}}}},ZS="__vector__",Bf="value";function tc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?YS(n)?4:wV(n)?9007199254740991:IV(n)?10:11:Te(28295,{value:n})}function vi(n,e){if(n===e)return!0;let t=tc(n);if(t!==tc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return z_(n).isEqual(z_(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=bo(i.timestampValue),a=bo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return ec(i.bytesValue).isEqual(ec(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Rt(i.geoPointValue.latitude)===Rt(s.geoPointValue.latitude)&&Rt(i.geoPointValue.longitude)===Rt(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Rt(i.integerValue)===Rt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Rt(i.doubleValue),a=Rt(s.doubleValue);return o===a?jf(o)===jf(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Rl(n.arrayValue.values||[],e.arrayValue.values||[],vi);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(IL(o)!==IL(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!vi(o[c],a[c])))return!1;return!0})(n,e);default:return Te(52216,{left:n})}}function $f(n,e){return(n.values||[]).find(t=>vi(t,e))!==void 0}function Pl(n,e){if(n===e)return 0;let t=tc(n),r=tc(e);if(t!==r)return Le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=Rt(s.integerValue||s.doubleValue),c=Rt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return wL(n.timestampValue,e.timestampValue);case 4:return wL(z_(n),z_(e));case 5:return DD(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=ec(s),c=ec(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=Le(a[d],c[d]);if(h!==0)return h}return Le(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Le(Rt(s.latitude),Rt(o.latitude));return a!==0?a:Le(Rt(s.longitude),Rt(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return TL(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,d,h;let g=s.fields||{},I=o.fields||{},S=(a=g[Bf])===null||a===void 0?void 0:a.arrayValue,P=(c=I[Bf])===null||c===void 0?void 0:c.arrayValue,U=Le(((d=S?.values)===null||d===void 0?void 0:d.length)||0,((h=P?.values)===null||h===void 0?void 0:h.length)||0);return U!==0?U:TL(S,P)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===O_.mapValue&&o===O_.mapValue)return 0;if(s===O_.mapValue)return 1;if(o===O_.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let I=DD(c[g],h[g]);if(I!==0)return I;let S=Pl(a[c[g]],d[h[g]]);if(S!==0)return S}return Le(c.length,h.length)})(n.mapValue,e.mapValue);default:throw Te(23264,{le:t})}}function wL(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);let t=bo(n),r=bo(e),i=Le(t.seconds,r.seconds);return i!==0?i:Le(t.nanos,r.nanos)}function TL(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Pl(t[i],r[i]);if(s)return s}return Le(t.length,r.length)}function Nl(n){return xD(n)}function xD(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=bo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ec(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ie.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=xD(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${xD(t.fields[o])}`;return i+"}"})(n.mapValue):Te(61005,{value:n})}function V_(n){switch(tc(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=JS(n);return e?16+V_(e):16;case 5:return 2*n.stringValue.length;case 6:return ec(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+V_(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return oc(r.fields,(s,o)=>{i+=s.length+V_(o)}),i})(n.mapValue);default:throw Te(13486,{value:n})}}function bL(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function MD(n){return!!n&&"integerValue"in n}function eA(n){return!!n&&"arrayValue"in n}function U_(n){return!!n&&"mapValue"in n}function IV(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[XS])===null||t===void 0?void 0:t.stringValue)===ZS}function xf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return oc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=xf(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=xf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function wV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===EV}var _Ee={mapValue:{fields:{[XS]:{stringValue:ZS},[Bf]:{arrayValue:{}}}}};var gr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!U_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xf(t)}setAll(e){let t=Zn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=xf(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());U_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];U_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){oc(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(xf(this.value))}};function TV(n){let e=[];return oc(n.fields,(t,r)=>{let i=new Zn([t]);if(U_(r)){let s=TV(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new mr(e)}var xl=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,pt.min(),pt.min(),pt.min(),gr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,pt.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,pt.min(),pt.min(),gr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,pt.min(),pt.min(),gr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ml=class{constructor(e,t){this.position=e,this.inclusive=t}};function CL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Ie.comparator(Ie.fromName(o.referenceValue),t.key):r=Pl(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function DL(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vi(n.position[t],e.position[t]))return!1;return!0}var nc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function eK(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var W_=class{},$t=class n extends W_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new OD(e,t,r):t==="array-contains"?new VD(e,r):t==="in"?new UD(e,r):t==="not-in"?new jD(e,r):t==="array-contains-any"?new BD(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new FD(e,r):new LD(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Pl(t,this.value)):t!==null&&tc(this.value)===tc(t)&&this.matchesComparison(Pl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ps=class n extends W_{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return bV(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function bV(n){return n.op==="and"}function CV(n){return tK(n)&&bV(n)}function tK(n){for(let e of n.filters)if(e instanceof ps)return!1;return!0}function kD(n){if(n instanceof $t)return n.field.canonicalString()+n.op.toString()+Nl(n.value);if(CV(n))return n.filters.map(e=>kD(e)).join(",");{let e=n.filters.map(t=>kD(t)).join(",");return`${n.op}(${e})`}}function DV(n,e){return n instanceof $t?(function(r,i){return i instanceof $t&&r.op===i.op&&r.field.isEqual(i.field)&&vi(r.value,i.value)})(n,e):n instanceof ps?(function(r,i){return i instanceof ps&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&DV(o,i.filters[a]),!0):!1})(n,e):void Te(19439)}function SV(n){return n instanceof $t?(function(t){return`${t.field.canonicalString()} ${t.op} ${Nl(t.value)}`})(n):n instanceof ps?(function(t){return t.op.toString()+" {"+t.getFilters().map(SV).join(" ,")+"}"})(n):"Filter"}var OD=class extends $t{constructor(e,t,r){super(e,t,r),this.key=Ie.fromName(r.referenceValue)}matches(e){let t=Ie.comparator(e.key,this.key);return this.matchesComparison(t)}},FD=class extends $t{constructor(e,t){super(e,"in",t),this.keys=AV("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},LD=class extends $t{constructor(e,t){super(e,"not-in",t),this.keys=AV("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function AV(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ie.fromName(r.referenceValue))}var VD=class extends $t{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return eA(t)&&$f(t.arrayValue,this.value)}},UD=class extends $t{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&$f(this.value.arrayValue,t)}},jD=class extends $t{constructor(e,t){super(e,"not-in",t)}matches(e){if($f(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!$f(this.value.arrayValue,t)}},BD=class extends $t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!eA(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>$f(this.value.arrayValue,r))}};var $D=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function SL(n,e=null,t=[],r=[],i=null,s=null,o=null){return new $D(n,e,t,r,i,s,o)}function tA(n){let e=nt(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>kD(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),QS(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Nl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Nl(r)).join(",")),e.Pe=t}return e.Pe}function nA(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!eK(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!DV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!DL(n.startAt,e.startAt)&&DL(n.endAt,e.endAt)}var Co=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function nK(n,e,t,r,i,s,o,a){return new Co(n,e,t,r,i,s,o,a)}function rK(n){return new Co(n)}function AL(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function RV(n){return n.collectionGroup!==null}function Mf(n){let e=nt(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new pn(Zn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new nc(s,r))}),t.has(Zn.keyField().canonicalString())||e.Te.push(new nc(Zn.keyField(),r))}return e.Te}function Wa(n){let e=nt(n);return e.Ie||(e.Ie=iK(e,Mf(n))),e.Ie}function iK(n,e){if(n.limitType==="F")return SL(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new nc(i.field,s)});let t=n.endAt?new Ml(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ml(n.startAt.position,n.startAt.inclusive):null;return SL(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function HD(n,e){let t=n.filters.concat([e]);return new Co(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function qD(n,e,t){return new Co(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function PV(n,e){return nA(Wa(n),Wa(e))&&n.limitType===e.limitType}function NV(n){return`${tA(Wa(n))}|lt:${n.limitType}`}function Nf(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>SV(i)).join(", ")}]`),QS(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Nl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Nl(i)).join(",")),`Target(${r})`})(Wa(n))}; limitType=${n.limitType})`}function rA(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ie.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of Mf(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let d=CL(o,a,c);return o.inclusive?d<=0:d<0})(r.startAt,Mf(r),i)||r.endAt&&!(function(o,a,c){let d=CL(o,a,c);return o.inclusive?d>=0:d>0})(r.endAt,Mf(r),i))})(n,e)}function sK(n){return(e,t)=>{let r=!1;for(let i of Mf(n)){let s=oK(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function oK(n,e,t){let r=n.field.isKeyField()?Ie.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?Pl(c,d):Te(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:n.dir})}}var gs=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){oc(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return gV(this.inner)}size(){return this.innerSize}};var aK=new er(Ie.comparator);function K_(){return aK}var xV=new er(Ie.comparator);function F_(...n){let e=xV;for(let t of n)e=e.insert(t.key,t);return e}function MV(n){let e=xV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ga(){return kf()}function kV(){return kf()}function kf(){return new gs(n=>n.toString(),(n,e)=>n.isEqual(e))}var cK=new er(Ie.comparator),uK=new pn(Ie.comparator);function fn(...n){let e=uK;for(let t of n)e=e.add(t);return e}var lK=new pn(Le);function dK(){return lK}function iA(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jf(e)?"-0":e}}function OV(n){return{integerValue:""+n}}function hK(n,e){return j7(e)?OV(e):iA(n,e)}var kl=class{constructor(){this._=void 0}};function fK(n,e,t){return n instanceof Ol?(function(i,s){let o={fields:{[yV]:{stringValue:mV},[vV]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&YS(s)&&(s=JS(s)),s&&(o.fields[_V]=s),{mapValue:o}})(t,e):n instanceof rc?LV(n,e):n instanceof ic?VV(n,e):(function(i,s){let o=FV(i,s),a=RL(o)+RL(i.Ee);return MD(o)&&MD(i.Ee)?OV(a):iA(i.serializer,a)})(n,e)}function pK(n,e,t){return n instanceof rc?LV(n,e):n instanceof ic?VV(n,e):t}function FV(n,e){return n instanceof Fl?(function(r){return MD(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var Ol=class extends kl{},rc=class extends kl{constructor(e){super(),this.elements=e}};function LV(n,e){let t=UV(e);for(let r of n.elements)t.some(i=>vi(i,r))||t.push(r);return{arrayValue:{values:t}}}var ic=class extends kl{constructor(e){super(),this.elements=e}};function VV(n,e){let t=UV(e);for(let r of n.elements)t=t.filter(i=>!vi(i,r));return{arrayValue:{values:t}}}var Fl=class extends kl{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function RL(n){return Rt(n.integerValue||n.doubleValue)}function UV(n){return eA(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function gK(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof rc&&i instanceof rc||r instanceof ic&&i instanceof ic?Rl(r.elements,i.elements,vi):r instanceof Fl&&i instanceof Fl?vi(r.Ee,i.Ee):r instanceof Ol&&i instanceof Ol})(n.transform,e.transform)}var zD=class{constructor(e,t){this.version=e,this.transformResults=t}},hs=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function j_(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ll=class{};function jV(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Hf(n.key,hs.none()):new sc(n.key,n.data,hs.none());{let t=n.data,r=gr.empty(),i=new pn(Zn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ei(n.key,r,new mr(i.toArray()),hs.none())}}function mK(n,e,t){n instanceof sc?(function(i,s,o){let a=i.value.clone(),c=NL(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Ei?(function(i,s,o){if(!j_(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=NL(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(BV(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Of(n,e,t,r){return n instanceof sc?(function(s,o,a,c){if(!j_(s.precondition,o))return a;let d=s.value.clone(),h=xL(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ei?(function(s,o,a,c){if(!j_(s.precondition,o))return a;let d=xL(s.fieldTransforms,c,o),h=o.data;return h.setAll(BV(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))})(n,e,t,r):(function(s,o,a){return j_(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function yK(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=FV(r.transform,i||null);s!=null&&(t===null&&(t=gr.empty()),t.set(r.field,s))}return t||null}function PL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Rl(r,i,(s,o)=>gK(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var sc=class extends Ll{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ei=class extends Ll{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function BV(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function NL(n,e,t){let r=new Map;mt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,pK(o,a,t[i]))}return r}function xL(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,fK(s,o,e))}return r}var Hf=class extends Ll{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},GD=class extends Ll{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var WD=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&mK(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Of(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Of(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=kV();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=jV(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(pt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fn())}isEqual(e){return this.batchId===e.batchId&&Rl(this.mutations,e.mutations,(t,r)=>PL(t,r))&&Rl(this.baseMutations,e.baseMutations,(t,r)=>PL(t,r))}},KD=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){mt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return cK})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var QD=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var St,Oe;function _K(n){switch(n){case $.OK:return Te(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return Te(15467,{code:n})}}function vK(n){if(n===void 0)return Xa("GRPC error has no .code"),$.UNKNOWN;switch(n){case St.OK:return $.OK;case St.CANCELLED:return $.CANCELLED;case St.UNKNOWN:return $.UNKNOWN;case St.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case St.INTERNAL:return $.INTERNAL;case St.UNAVAILABLE:return $.UNAVAILABLE;case St.UNAUTHENTICATED:return $.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case St.NOT_FOUND:return $.NOT_FOUND;case St.ALREADY_EXISTS:return $.ALREADY_EXISTS;case St.PERMISSION_DENIED:return $.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case St.ABORTED:return $.ABORTED;case St.OUT_OF_RANGE:return $.OUT_OF_RANGE;case St.UNIMPLEMENTED:return $.UNIMPLEMENTED;case St.DATA_LOSS:return $.DATA_LOSS;default:return Te(39323,{code:n})}}(Oe=St||(St={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";var vEe=new x_([4294967295,4294967295],0);var YD=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function JD(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EK(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function IK(n,e){return JD(n,e.toTimestamp())}function Cl(n){return mt(!!n,49232),pt.fromTimestamp((function(t){let r=bo(t);return new it(r.seconds,r.nanos)})(n))}function $V(n,e){return XD(n,e).canonicalString()}function XD(n,e){let t=(function(i){return new gt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function wK(n){let e=gt.fromString(n);return mt(PK(e),10190,{key:e.toString()}),e}function ZD(n,e){return $V(n.databaseId,e.path)}function TK(n){let e=wK(n);return e.length===4?gt.emptyPath():CK(e)}function bK(n){return new gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function CK(n){return mt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ML(n,e,t){return{name:ZD(n,e),fields:t.value.mapValue.fields}}function DK(n,e){let t;if(e instanceof sc)t={update:ML(n,e.key,e.value)};else if(e instanceof Hf)t={delete:ZD(n,e.key)};else if(e instanceof Ei)t={update:ML(n,e.key,e.data),updateMask:RK(e.fieldMask)};else{if(!(e instanceof GD))return Te(16599,{Rt:e.type});t={verify:ZD(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof Ol)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof rc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ic)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Fl)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw Te(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:IK(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Te(27497)})(n,e.precondition)),t}function SK(n,e){return n&&n.length>0?(mt(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?Cl(i.updateTime):Cl(s);return o.isEqual(pt.min())&&(o=Cl(s)),new zD(o,i.transformResults||[])})(t,e))):[]}function AK(n){let e=TK(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){mt(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(g){let I=HV(g);return I instanceof ps&&CV(I)?I.getFilters():[I]})(t.where));let o=[];t.orderBy&&(o=(function(g){return g.map(I=>(function(P){return new nc(wl(P.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(I))})(t.orderBy));let a=null;t.limit&&(a=(function(g){let I;return I=typeof g=="object"?g.value:g,QS(I)?null:I})(t.limit));let c=null;t.startAt&&(c=(function(g){let I=!!g.before,S=g.values||[];return new Ml(S,I)})(t.startAt));let d=null;return t.endAt&&(d=(function(g){let I=!g.before,S=g.values||[];return new Ml(S,I)})(t.endAt)),nK(e,i,o,s,a,"F",c,d)}function HV(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=wl(t.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=wl(t.unaryFilter.field);return $t.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=wl(t.unaryFilter.field);return $t.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=wl(t.unaryFilter.field);return $t.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(n):n.fieldFilter!==void 0?(function(t){return $t.create(wl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ps.create(t.compositeFilter.filters.map(r=>HV(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(n):Te(30097,{filter:n})}function wl(n){return Zn.fromServerFormat(n.fieldPath)}function RK(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function PK(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var eS=class{constructor(e){this.gt=e}};function NK(n){let e=AK({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?qD(e,e.limit,"L"):e}var Q_=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Rt(e.integerValue));else if("doubleValue"in e){let r=Rt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),jf(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=bo(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(ec(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?wV(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):IV(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Te(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=Bf,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Rt(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),Ie.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Q_.Ut=new Q_;var tS=class{constructor(){this.Dn=new nS}addToCollectionParentIndex(e,t){return this.Dn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(Za.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(Za.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}},nS=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new pn(gt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pn(gt.comparator)).toArray()}};var EEe=new Uint8Array(0);var kL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qV=41943040,pr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};pr.DEFAULT_COLLECTION_PERCENTILE=10,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pr.DEFAULT=new pr(qV,pr.DEFAULT_COLLECTION_PERCENTILE,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pr.DISABLED=new pr(-1,0,0);var qf=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var OL="LruGarbageCollector",xK=1048576;function FL([n,e],[t,r]){let i=Le(n,t);return i===0?Le(e,r):i}var rS=class{constructor(e){this.Tr=e,this.buffer=new pn(FL),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();FL(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},iS=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){te(OL,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>C(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qf(t)?te(OL,"Ignoring IndexedDB error during garbage collection: ",t):yield WS(t)}yield this.Rr(3e5)}))}},sS=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return z.resolve(eV.ue);let r=new rS(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(kL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kL):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Il()<=De.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}};function MK(n,e){return new sS(n,e)}var oS=class{constructor(){this.changes=new gs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var aS=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var cS=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Of(r.mutation,i,mr.empty(),it.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,fn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=fn()){let i=Ga();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=F_();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Ga();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,fn()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=K_(),o=kf(),a=(function(){return kf()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Ei)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Of(h.mutation,d,h.mutation.getFieldMask(),it.now())):o.set(d.key,mr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>{var g;return a.set(d,new aS(h,(g=o.get(d))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,t){let r=kf(),i=new er((o,a)=>o-a),s=fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||mr.empty();h=a.applyToLocalView(d,h),r.set(c,h);let g=(i.get(a.batchId)||fn()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,g=kV();h.forEach(I=>{if(!s.has(I)){let S=jV(t.get(I),r.get(I));S!==null&&g.set(I,S),s=s.add(I)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return Ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):RV(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):z.resolve(Ga()),a=Uf,c=s;return o.next(d=>z.forEach(d,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?z.resolve():this.remoteDocumentCache.getEntry(e,h).next(I=>{c=c.insert(h,I)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,fn())).next(h=>({batchId:a,changes:MV(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ie(t)).next(r=>{let i=F_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=F_();return this.indexManager.getCollectionParents(e,s).next(a=>z.forEach(a,c=>{let d=(function(g,I){return new Co(I,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,I)=>{o=o.insert(g,I)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,xl.newInvalidDocument(h)))});let a=F_();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&Of(h.mutation,d,mr.empty(),it.now()),rA(t,d)&&(a=a.insert(c,d))}),a})}};var uS=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return z.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Cl(i.createTime)}})(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:NK(i.bundledQuery),readTime:Cl(i.readTime)}})(t)),z.resolve()}};var lS=class{constructor(){this.overlays=new er(Ie.comparator),this.kr=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ga();return z.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),z.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){let i=Ga(),s=t.length+1,o=new Ie(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return z.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new er((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=Ga(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=Ga(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return z.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new QD(t,r));let s=this.kr.get(t);s===void 0&&(s=fn(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}};var dS=class{constructor(){this.sessionToken=fs.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}};var zf=class{constructor(){this.qr=new pn(At.Qr),this.$r=new pn(At.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new At(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new At(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new Ie(new gt([])),r=new At(t,e),i=new At(t,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new Ie(new gt([])),r=new At(t,e),i=new At(t,e+1),s=fn();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new At(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},At=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ie.comparator(e.key,t.key)||Le(e.Hr,t.Hr)}static Ur(e,t){return Le(e.Hr,t.Hr)||Ie.comparator(e.key,t.key)}};var hS=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new pn(At.Qr)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new WD(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new At(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,t){return z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?KS:this.er-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new At(t,0),i=new At(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pn(Le);return t.forEach(i=>{let s=new At(i,0),o=new At(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),z.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;Ie.isDocumentKey(s)||(s=s.child(""));let o=new At(new Ie(s),0),a=new pn(Le);return this.Yr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Hr)),!0)},o),z.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){mt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return z.forEach(t.mutations,i=>{let s=new At(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new At(t,0),i=this.Yr.firstAfterOrEqual(r);return z.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var fS=class{constructor(e){this.ni=e,this.docs=(function(){return new er(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():xl.newInvalidDocument(t))}getEntries(e,t){let r=K_();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():xl.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=K_(),o=t.path,a=new Ie(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||L7(F7(h),r)<=0||(i.has(h.key)||rA(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Te(9500)}ri(e,t){return z.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new pS(this)}getSize(e){return z.resolve(this.size)}},pS=class extends oS{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),z.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var gS=class{constructor(e){this.persistence=e,this.ii=new gs(t=>tA(t),nA),this.lastRemoteSnapshotVersion=pt.min(),this.highestTargetId=0,this.si=0,this.oi=new zf,this.targetCount=0,this._i=qf.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),z.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new qf(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.hr(t),z.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),z.waitFor(s).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),z.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),z.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this.oi.containsKey(t))}};var Y_=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new eV(0),this.ci=!1,this.ci=!0,this.li=new dS,this.referenceDelegate=e(this),this.hi=new gS(this),this.indexManager=new tS,this.remoteDocumentCache=(function(i){return new fS(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new eS(t),this.Ti=new uS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new hS(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){te("MemoryPersistence","Starting transaction:",e);let i=new mS(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return z.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},mS=class extends AD{constructor(e){super(),this.currentSequenceNumber=e}},yS=class n{constructor(e){this.persistence=e,this.Ai=new zf,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw Te(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),z.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.mi,r=>{let i=Ie.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,pt.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return z.or([()=>z.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},J_=class n{constructor(e,t){this.persistence=e,this.gi=new gs(r=>B7(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=MK(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return z.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?z.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,pt.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),z.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=V_(e.data.value)),t}Sr(e,t,r){return z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var _S=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=fn(),i=fn();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var vS=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ES=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return UM()?8:U7(Wt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new vS;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Il()<=De.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Nf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),z.resolve()):(Il()<=De.DEBUG&&te("QueryEngine","Query:",Nf(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Il()<=De.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Nf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wa(t))):z.resolve())}ps(e,t){if(AL(t))return z.resolve(null);let r=Wa(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=qD(t,null,"F"),r=Wa(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=fn(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.bs(t,a);return this.Ds(t,d,o,c.readTime)?this.ps(e,qD(t,null,"F")):this.vs(e,d,t,c)}))})))}ys(e,t,r,i){return AL(t)||i.isEqual(pt.min())?z.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,r,i)?z.resolve(null):(Il()<=De.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Nf(t)),this.vs(e,o,t,O7(i,Uf)).next(a=>a))})}bs(e,t){let r=new pn(sK(e));return t.forEach((i,s)=>{rA(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return Il()<=De.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Nf(t)),this.gs.getDocumentsMatchingQuery(e,t,Za.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var kK="LocalStore";var IS=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new er(Le),this.Ms=new gs(s=>tA(s),nA),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cS(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function OK(n,e,t,r){return new IS(n,e,t,r)}function zV(n,e){return C(this,null,function*(){let t=nt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=fn();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Bs:d,removedBatchIds:o,addedBatchIds:a}))})})})}function FK(n,e){let t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,d,h){let g=d.batch,I=g.keys(),S=z.resolve();return I.forEach(P=>{S=S.next(()=>h.getEntry(c,P)).next(U=>{let O=d.docVersions.get(P);mt(O!==null,48541),U.version.compareTo(O)<0&&(g.applyToRemoteDocument(U,d),U.isValidDocument()&&(U.setReadTime(d.commitVersion),h.addEntry(U)))})}),S.next(()=>a.mutationQueue.removeMutationBatch(c,g))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=fn();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function LK(n){let e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function VK(n,e){let t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=KS),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}var X_=class{constructor(){this.activeTargetIds=dK()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var wS=class{constructor(){this.Fo=new X_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new X_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var TS=class{xo(e){}shutdown(){}};var LL="ConnectivityMonitor",Z_=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){te(LL,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){te(LL,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var L_=null;function bS(){return L_===null?L_=(function(){return 268435456+Math.round(2147483648*Math.random())})():L_++,"0x"+L_.toString(16)}var yD="RestConnection",UK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},CS=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===G_?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=bS(),a=this.Go(e,t.toUriEncodedString());te(yD,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);let{host:d}=new URL(a),h=io(d);return this.jo(e,a,c,r,h).then(g=>(te(yD,`Received RPC '${e}' ${o}: `,g),g),g=>{throw Al(yD,`RPC '${e}' ${o} failed with error: `,g,"url: ",a,"request:",r),g})}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$l})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){let r=UK[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var DS=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var hn="WebChannelConnection",SS=class extends CS{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){let o=bS();return new Promise((a,c)=>{let d=new hD;d.setWithCredentials(!0),d.listenOnce(fD.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Pf.NO_ERROR:let g=d.getResponseJson();te(hn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),a(g);break;case Pf.TIMEOUT:te(hn,`RPC '${e}' ${o} timed out`),c(new Y($.DEADLINE_EXCEEDED,"Request time out"));break;case Pf.HTTP_ERROR:let I=d.getStatus();if(te(hn,`RPC '${e}' ${o} failed with status:`,I,"response text:",d.getResponseText()),I>0){let S=d.getResponseJson();Array.isArray(S)&&(S=S[0]);let P=S?.error;if(P&&P.status&&P.message){let U=(function(G){let ne=G.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(ne)>=0?ne:$.UNKNOWN})(P.status);c(new Y(U,P.message))}else c(new Y($.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Y($.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{c_:e,streamId:o,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{te(hn,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);te(hn,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}P_(e,t,r){let i=bS(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=mD(),a=gD(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");te(hn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let g=o.createWebChannel(h,c);this.T_(g);let I=!1,S=!1,P=new DS({Ho:O=>{S?te(hn,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(I||(te(hn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),I=!0),te(hn,`RPC '${e}' stream ${i} sending:`,O),g.send(O))},Yo:()=>g.close()}),U=(O,G,ne)=>{O.listen(G,re=>{try{ne(re)}catch(Re){setTimeout(()=>{throw Re},0)}})};return U(g,El.EventType.OPEN,()=>{S||(te(hn,`RPC '${e}' stream ${i} transport opened.`),P.s_())}),U(g,El.EventType.CLOSE,()=>{S||(S=!0,te(hn,`RPC '${e}' stream ${i} transport closed`),P.__(),this.I_(g))}),U(g,El.EventType.ERROR,O=>{S||(S=!0,Al(hn,`RPC '${e}' stream ${i} transport errored. Name:`,O.name,"Message:",O.message),P.__(new Y($.UNAVAILABLE,"The operation could not be completed")))}),U(g,El.EventType.MESSAGE,O=>{var G;if(!S){let ne=O.data[0];mt(!!ne,16349);let re=ne,Re=re?.error||((G=re[0])===null||G===void 0?void 0:G.error);if(Re){te(hn,`RPC '${e}' stream ${i} received error:`,Re);let rt=Re.status,Ce=(function(E){let T=St[E];if(T!==void 0)return vK(T)})(rt),b=Re.message;Ce===void 0&&(Ce=$.INTERNAL,b="Unknown error status: "+rt+" with message "+Re.message),S=!0,P.__(new Y(Ce,b)),g.close()}else te(hn,`RPC '${e}' stream ${i} received:`,ne),P.a_(ne)}}),U(a,pD.STAT_EVENT,O=>{O.stat===k_.PROXY?te(hn,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===k_.NOPROXY&&te(hn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.o_()},0),P}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function _D(){return typeof document<"u"?document:null}function lv(n){return new YD(n,!0)}var ev=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var VL="PersistentStream",AS=class{constructor(e,t,r,i,s,o,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new ev(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return C(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return C(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return C(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(Xa(t.toString()),Xa("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new Y($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>C(this,null,function*(){this.state=0,this.start()}))}G_(e){return te(VL,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(te(VL,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}};var RS=class extends AS{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=SK(e.writeResults,e.commitTime),r=Cl(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=bK(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>DK(this.serializer,r))};this.k_(t)}};var PS=class{},NS=class extends PS{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Y($.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,XD(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y($.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,XD(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y($.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},xS=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Xa(t),this._a=!1):te("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Yf="RemoteStore",MS=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(()=>C(this,null,function*(){Xf(this)&&(te(Yf,"Restarting streams for network reachability change."),yield(function(c){return C(this,null,function*(){let d=nt(c);d.Ia.add(4),yield Jf(d),d.Aa.set("Unknown"),d.Ia.delete(4),yield dv(d)})})(this))}))}),this.Aa=new xS(r,i)}};function dv(n){return C(this,null,function*(){if(Xf(n))for(let e of n.da)yield e(!0)})}function Jf(n){return C(this,null,function*(){for(let e of n.da)yield e(!1)})}function Xf(n){return nt(n).Ia.size===0}function GV(n,e,t){return C(this,null,function*(){if(!Qf(e))throw e;n.Ia.add(1),yield Jf(n),n.Aa.set("Offline"),t||(t=()=>LK(n.localStore)),n.asyncQueue.enqueueRetryable(()=>C(null,null,function*(){te(Yf,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield dv(n)}))})}function WV(n,e){return e().catch(t=>GV(n,t,e))}function hv(n){return C(this,null,function*(){let e=nt(n),t=Do(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:KS;for(;jK(e);)try{let i=yield VK(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,BK(e,i)}catch(i){yield GV(e,i)}KV(e)&&QV(e)})}function jK(n){return Xf(n)&&n.Pa.length<10}function BK(n,e){n.Pa.push(e);let t=Do(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function KV(n){return Xf(n)&&!Do(n).M_()&&n.Pa.length>0}function QV(n){Do(n).start()}function $K(n){return C(this,null,function*(){Do(n).na()})}function HK(n){return C(this,null,function*(){let e=Do(n);for(let t of n.Pa)e.X_(t.mutations)})}function qK(n,e,t){return C(this,null,function*(){let r=n.Pa.shift(),i=KD.from(r,e,t);yield WV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield hv(n)})}function zK(n,e){return C(this,null,function*(){e&&Do(n).Z_&&(yield(function(r,i){return C(this,null,function*(){if((function(o){return _K(o)&&o!==$.ABORTED})(i.code)){let s=r.Pa.shift();Do(r).N_(),yield WV(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield hv(r)}})})(n,e)),KV(n)&&QV(n)})}function UL(n,e){return C(this,null,function*(){let t=nt(n);t.asyncQueue.verifyOperationInProgress(),te(Yf,"RemoteStore received new credentials");let r=Xf(t);t.Ia.add(3),yield Jf(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield dv(t)})}function GK(n,e){return C(this,null,function*(){let t=nt(n);e?(t.Ia.delete(2),yield dv(t)):e||(t.Ia.add(2),yield Jf(t),t.Aa.set("Unknown"))})}function Do(n){return n.ma||(n.ma=(function(t,r,i){let s=nt(t);return s.ia(),new RS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:$K.bind(null,n),n_:zK.bind(null,n),ea:HK.bind(null,n),ta:qK.bind(null,n)}),n.da.push(e=>C(null,null,function*(){e?(n.ma.N_(),yield hv(n)):(yield n.ma.stop(),n.Pa.length>0&&(te(Yf,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var kS=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function YV(n,e){if(Xa("AsyncQueue",`${e}: ${n}`),Qf(n))return new Y($.UNAVAILABLE,`${e}: ${n}`);throw n}var OS=class{constructor(){this.queries=jL(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=nt(t),s=i.queries;i.queries=jL(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(r)})})(this,new Y($.ABORTED,"Firestore shutting down"))}};function jL(){return new gs(n=>NV(n),PV)}function WK(n){n.Da.forEach(e=>{e.next()})}var BL,$L;($L=BL||(BL={})).Fa="default",$L.Cache="cache";var KK="SyncEngine";var FS=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new gs(a=>NV(a),PV),this.Tu=new Map,this.Iu=new Set,this.du=new er(Ie.comparator),this.Eu=new Map,this.Au=new zf,this.Ru={},this.Vu=new Map,this.mu=qf.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function QK(n,e,t){return C(this,null,function*(){let r=ZK(n);try{let i=yield(function(o,a){let c=nt(o),d=it.now(),h=a.reduce((S,P)=>S.add(P.key),fn()),g,I;return c.persistence.runTransaction("Locally write mutations","readwrite",S=>{let P=K_(),U=fn();return c.Os.getEntries(S,h).next(O=>{P=O,P.forEach((G,ne)=>{ne.isValidDocument()||(U=U.add(G))})}).next(()=>c.localDocuments.getOverlayedDocuments(S,P)).next(O=>{g=O;let G=[];for(let ne of a){let re=yK(ne,g.get(ne.key).overlayedDocument);re!=null&&G.push(new Ei(ne.key,re,TV(re.value.mapValue),hs.exists(!0)))}return c.mutationQueue.addMutationBatch(S,d,G,a)}).next(O=>{I=O;let G=O.applyToLocalDocumentSet(g,U);return c.documentOverlayCache.saveOverlays(S,O.batchId,G)})}).then(()=>({batchId:I.batchId,changes:MV(g)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let d=o.Ru[o.currentUser.toKey()];d||(d=new er(Le)),d=d.insert(a,c),o.Ru[o.currentUser.toKey()]=d})(r,i.batchId,t),yield fv(r,i.changes),yield hv(r.remoteStore)}catch(i){let s=YV(i,"Failed to persist write");t.reject(s)}})}function HL(n,e,t){let r=nt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=nt(o);c.onlineState=a;let d=!1;c.queries.forEach((h,g)=>{for(let I of g.wa)I.va(a)&&(d=!0)}),d&&WK(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function YK(n,e){return C(this,null,function*(){let t=nt(n),r=e.batch.batchId;try{let i=yield FK(t.localStore,e);XV(t,r,null),JV(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield fv(t,i)}catch(i){yield WS(i)}})}function JK(n,e,t){return C(this,null,function*(){let r=nt(n);try{let i=yield(function(o,a){let c=nt(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(g=>(mt(g!==null,37113),h=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})})(r.localStore,e);XV(r,e,t),JV(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield fv(r,i)}catch(i){yield WS(i)}})}function JV(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function XV(n,e,t){let r=nt(n),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function fv(n,e,t){return C(this,null,function*(){let r=nt(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,t).then(d=>{var h;if((d||t)&&r.isPrimaryClient){let g=d?!d.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){i.push(d);let g=_S.Es(c.targetId,d);s.push(g)}}))}),yield Promise.all(o),r.hu.J_(i),yield(function(c,d){return C(this,null,function*(){let h=nt(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>z.forEach(d,I=>z.forEach(I.Is,S=>h.persistence.referenceDelegate.addReference(g,I.targetId,S)).next(()=>z.forEach(I.ds,S=>h.persistence.referenceDelegate.removeReference(g,I.targetId,S)))))}catch(g){if(!Qf(g))throw g;te(kK,"Failed to update sequence numbers: "+g)}for(let g of d){let I=g.targetId;if(!g.fromCache){let S=h.Fs.get(I),P=S.snapshotVersion,U=S.withLastLimboFreeSnapshotVersion(P);h.Fs=h.Fs.insert(I,U)}}})})(r.localStore,s))})}function XK(n,e){return C(this,null,function*(){let t=nt(n);if(!t.currentUser.isEqual(e)){te(KK,"User change. New user:",e.toKey());let r=yield zV(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new Y($.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield fv(t,r.Bs)}})}function ZK(n){let e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JK.bind(null,e),e}var ZV=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return C(this,null,function*(){this.serializer=lv(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return OK(this.persistence,new ES,t.initialUser,this.serializer)}Du(t){return new Y_(yS.Vi,this.serializer)}bu(t){return new wS}terminate(){return C(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),LS=class extends ZV{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){mt(this.persistence.referenceDelegate instanceof J_,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new iS(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?pr.withCacheSize(this.cacheSizeBytes):pr.DEFAULT;return new Y_(r=>J_.Vi(r,t),this.serializer)}};var eQ=(()=>{class n{initialize(t,r){return C(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>HL(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=XK.bind(null,this.syncEngine),yield GK(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new OS})()}createDatastore(t){let r=lv(t.databaseInfo.databaseId),i=(function(o){return new SS(o)})(t.databaseInfo);return(function(o,a,c,d){return new NS(o,a,c,d)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new MS(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>HL(this.syncEngine,r,0),(function(){return Z_.C()?new Z_:new TS})())}createSyncEngine(t,r){return(function(s,o,a,c,d,h,g){let I=new FS(s,o,a,c,d,h);return g&&(I.fu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return C(this,null,function*(){var t,r;yield(function(s){return C(this,null,function*(){let o=nt(s);te(Yf,"RemoteStore shutting down."),o.Ia.add(5),yield Jf(o),o.Ea.shutdown(),o.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var So="FirestoreClient",VS=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Qt.UNAUTHENTICATED,this.clientId=Lf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>C(this,null,function*(){te(So,"Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(te(So,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>C(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=YV(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function vD(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),te(So,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>C(null,null,function*(){r.isEqual(i)||(yield zV(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Al("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{te("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Al("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function qL(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield tQ(n);te(So,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>UL(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>UL(e.remoteStore,i)),n._onlineComponents=e})}function tQ(n){return C(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){te(So,"Using user provided OfflineComponentProvider");try{yield vD(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Al("Error using user provided cache. Falling back to memory cache: "+t),yield vD(n,new ZV)}}else te(So,"Using default OfflineComponentProvider"),yield vD(n,new LS(void 0));return n._offlineComponents})}function nQ(n){return C(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(te(So,"Using user provided OnlineComponentProvider"),yield qL(n,n._uninitializedComponentsProvider._online)):(te(So,"Using default OnlineComponentProvider"),yield qL(n,new eQ))),n._onlineComponents})}function rQ(n){return nQ(n).then(e=>e.syncEngine)}function e2(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var zL=new Map;var t2="firestore.googleapis.com",GL=!0,tv=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=t2,this.ssl=GL}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:GL;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qV;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xK)throw new Y($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}k7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=e2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Vl=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new ED;switch(r.type){case"firstParty":return new bD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return C(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=zL.get(t);r&&(te("ComponentProvider","Removing Datastore"),zL.delete(t),r.terminate())})(this),Promise.resolve()}};function n2(n,e,t,r={}){var i;n=Vf(n,Vl);let s=io(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(sy(`https://${c}`),oy("Firestore",!0)),o.host!==t2&&o.host!==c&&Al("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let d=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!ui(d,a)&&(n._setSettings(d),r.mockUserToken)){let h,g;if(typeof r.mockUserToken=="string")h=r.mockUserToken,g=Qt.MOCK_USER;else{h=MM(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new Y($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Qt(I)}n._authCredentials=new ID(new B_(h,g))}}var Ul=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},wn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new To(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Kf(t,n._jsonSchema))return new n(e,r||null,new Ie(gt.fromString(t.referencePath)))}};wn._jsonSchemaVersion="firestore/documentReference/1.0",wn._jsonSchema={type:Pt("string",wn._jsonSchemaVersion),referencePath:Pt("string")};var To=class n extends Ul{constructor(e,t,r){super(e,t,rK(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new Ie(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function r2(n,e,...t){if(n=Et(n),XL("collection","path",e),n instanceof Vl){let r=gt.fromString(e,...t);return yL(r),new To(n,null,r)}{if(!(n instanceof wn||n instanceof To))throw new Y($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(gt.fromString(e,...t));return yL(r),new To(n.firestore,null,r)}}function sA(n,e,...t){if(n=Et(n),arguments.length===1&&(e=Lf.newId()),XL("doc","path",e),n instanceof Vl){let r=gt.fromString(e,...t);return mL(r),new wn(n,null,new Ie(r))}{if(!(n instanceof wn||n instanceof To))throw new Y($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(gt.fromString(e,...t));return mL(r),new wn(n.firestore,n instanceof To?n.converter:null,new Ie(r))}}var WL="AsyncQueue",nv=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new ev(this,"async_queue_retry"),this.oc=()=>{let r=_D();r&&te(WL,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=_D();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=_D();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new ds;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return C(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Qf(e))throw e;te(WL,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Xa("INTERNAL UNHANDLED ERROR: ",KL(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=kS.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&Te(47125,{hc:KL(this.tc)})}verifyOperationInProgress(){}Pc(){return C(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function KL(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var jl=class extends Vl{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new nv,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return C(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new nv(e),this._firestoreClient=void 0,yield e}})}};function i2(n,e){let t=typeof n=="object"?n:Aa(),r=typeof n=="string"?n:e||G_,i=Uu(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=xM("firestore");s&&n2(i,...s)}return i}function iQ(n){if(n._terminated)throw new Y($.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||sQ(n),n._firestoreClient}function sQ(n){var e,t,r;let i=n._freezeSettings(),s=(function(a,c,d,h){return new PD(a,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,e2(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new VS(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var Ka=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(fs.fromBase64String(e))}catch(t){throw new Y($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(fs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Kf(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ka._jsonSchemaVersion="firestore/bytes/1.0",Ka._jsonSchema={type:Pt("string",Ka._jsonSchemaVersion),bytes:Pt("string")};var Bl=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Y($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Gf=class{constructor(e){this._methodName=e}};var Qa=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Y($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Y($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Kf(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Qa._jsonSchemaVersion="firestore/geoPoint/1.0",Qa._jsonSchema={type:Pt("string",Qa._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};var Ya=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Kf(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new Y($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ya._jsonSchemaVersion="firestore/vectorValue/1.0",Ya._jsonSchema={type:Pt("string",Ya._jsonSchemaVersion),vectorValues:Pt("object")};var oQ=/^__.*__$/,US=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ei(e,this.data,this.fieldMask,t,this.fieldTransforms):new sc(e,this.data,t,this.fieldTransforms)}},rv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ei(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function s2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ec:n})}}var jS=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return sv(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(s2(this.Ec)&&oQ.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},BS=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||lv(e)}Dc(e,t,r,i=!1){return new jS({Ec:e,methodName:t,bc:r,path:Zn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function oA(n){let e=n._freezeSettings(),t=lv(n._databaseId);return new BS(n._databaseId,!!e.ignoreUndefinedProperties,t)}function aQ(n,e,t,r,i,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);aA("Data must be an object, but it was:",o,r);let a=o2(r,o),c,d;if(s.merge)c=new mr(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let g of s.mergeFields){let I=$S(e,g,t);if(!o.contains(I))throw new Y($.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);c2(h,I)||h.push(I)}c=new mr(h),d=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=o.fieldTransforms;return new US(new gr(a),c,d)}var iv=class n extends Gf{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function cQ(n,e,t,r){let i=n.Dc(1,e,t);aA("Data must be an object, but it was:",i,r);let s=[],o=gr.empty();oc(r,(c,d)=>{let h=cA(e,c,t);d=Et(d);let g=i.gc(h);if(d instanceof iv)s.push(h);else{let I=Zf(d,g);I!=null&&(s.push(h),o.set(h,I))}});let a=new mr(s);return new rv(o,a,i.fieldTransforms)}function uQ(n,e,t,r,i,s){let o=n.Dc(1,e,t),a=[$S(e,r,t)],c=[i];if(s.length%2!=0)throw new Y($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<s.length;I+=2)a.push($S(e,s[I])),c.push(s[I+1]);let d=[],h=gr.empty();for(let I=a.length-1;I>=0;--I)if(!c2(d,a[I])){let S=a[I],P=c[I];P=Et(P);let U=o.gc(S);if(P instanceof iv)d.push(S);else{let O=Zf(P,U);O!=null&&(d.push(S),h.set(S,O))}}let g=new mr(d);return new rv(h,g,o.fieldTransforms)}function lQ(n,e,t,r=!1){return Zf(t,n.Dc(r?4:3,e))}function Zf(n,e){if(a2(n=Et(n)))return aA("Unsupported field value:",e,n),o2(n,e);if(n instanceof Gf)return(function(r,i){if(!s2(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=Zf(a,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=Et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hK(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=it.fromDate(r);return{timestampValue:JD(i.serializer,s)}}if(r instanceof it){let s=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:JD(i.serializer,s)}}if(r instanceof Qa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ka)return{bytesValue:EK(i.serializer,r._byteString)};if(r instanceof wn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:$V(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ya)return(function(o,a){return{mapValue:{fields:{[XS]:{stringValue:ZS},[Bf]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.wc("VectorValues must only contain numeric values.");return iA(a.serializer,d)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${uv(r)}`)})(n,e)}function o2(n,e){let t={};return gV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oc(n,(r,i)=>{let s=Zf(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function a2(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof it||n instanceof Qa||n instanceof Ka||n instanceof wn||n instanceof Gf||n instanceof Ya)}function aA(n,e,t){if(!a2(t)||!ZL(t)){let r=uv(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function $S(n,e,t){if((e=Et(e))instanceof Bl)return e._internalPath;if(typeof e=="string")return cA(n,e);throw sv("Field path arguments must be of type string or ",n,!1,void 0,t)}var dQ=new RegExp("[~\\*/\\[\\]]");function cA(n,e,t){if(e.search(dQ)>=0)throw sv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Bl(...e.split("."))._internalPath}catch{throw sv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sv(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Y($.INVALID_ARGUMENT,a+n+c)}function c2(n,e){return n.some(t=>t.isEqual(e))}var ov=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new HS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(pv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},HS=class extends ov{data(){return super.data()}};function pv(n,e){return typeof e=="string"?cA(n,e):e instanceof Bl?e._internalPath:e._delegate._internalPath}var Wf=class{},av=class extends Wf{};function u2(n,e,...t){let r=[];e instanceof Wf&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof qS).length,a=s.filter(c=>c instanceof cv).length;if(o>1||o>0&&a>0)throw new Y($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var cv=class n extends av{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return h2(e._query,t),new Ul(e.firestore,e.converter,HD(e._query,t))}_parse(e){let t=oA(e.firestore);return(function(s,o,a,c,d,h,g){let I;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Y($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){YL(g,h);let P=[];for(let U of g)P.push(QL(c,s,U));I={arrayValue:{values:P}}}else I=QL(c,s,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||YL(g,h),I=lQ(a,o,g,h==="in"||h==="not-in");return $t.create(d,h,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function l2(n,e,t){let r=e,i=pv("where",n);return cv._create(i,r,t)}var qS=class n extends Wf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ps.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)h2(o,c),o=HD(o,c)})(e._query,t),new Ul(e.firestore,e.converter,HD(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var zS=class n extends av{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,s,o){if(i.startAt!==null)throw new Y($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Y($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nc(s,o)})(e._query,this._field,this._direction);return new Ul(e.firestore,e.converter,(function(i,s){let o=i.explicitOrderBy.concat([s]);return new Co(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function d2(n,e="asc"){let t=e,r=pv("orderBy",n);return zS._create(r,t)}function QL(n,e,t){if(typeof(t=Et(t))=="string"){if(t==="")throw new Y($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RV(e)&&t.indexOf("/")!==-1)throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(gt.fromString(t));if(!Ie.isDocumentKey(r))throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bL(n,new Ie(r))}if(t instanceof wn)return bL(n,t._key);throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uv(t)}.`)}function YL(n,e){if(!Array.isArray(n)||n.length===0)throw new Y($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function h2(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Y($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function hQ(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var bl=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Dl=class n extends ov{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Sl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(pv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Dl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Dl._jsonSchema={type:Pt("string",Dl._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};var Sl=class extends Dl{data(e={}){return super.data(e)}},Ff=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new bl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Sl(this._firestore,this._userDataWriter,r.key,r,new bl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Y($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Sl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Sl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:fQ(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Lf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function fQ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:n})}}Ff._jsonSchemaVersion="firestore/querySnapshot/1.0",Ff._jsonSchema={type:Pt("string",Ff._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};function f2(n,e,t,...r){n=Vf(n,wn);let i=Vf(n.firestore,jl),s=oA(i),o;return o=typeof(e=Et(e))=="string"||e instanceof Bl?uQ(s,"updateDoc",n._key,e,t,r):cQ(s,"updateDoc",n._key,e),uA(i,[o.toMutation(n._key,hs.exists(!0))])}function p2(n){return uA(Vf(n.firestore,jl),[new Hf(n._key,hs.none())])}function g2(n,e){let t=Vf(n.firestore,jl),r=sA(n),i=hQ(n.converter,e);return uA(t,[aQ(oA(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,hs.exists(!1))]).then(()=>r)}function uA(n,e){return(function(r,i){let s=new ds;return r.asyncQueue.enqueueAndForget(()=>C(null,null,function*(){return QK(yield rQ(r),i,s)})),s.promise})(iQ(n),e)}(function(e,t=!0){(function(i){$l=i})(oo),Lr(new En("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new jl(new wD(r.getProvider("auth-internal")),new CD(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Y($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ND(d.options.projectId,h)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ht(hL,fL,e),ht(hL,fL,"esm2017")})();var ac=class{constructor(e){return e}},m2="firestore",lA=class{constructor(){return Bu(m2)}};var dA=new ee("angularfire2.firestore-instances");function pQ(n,e){let t=jh(m2,n,e);return t&&new ac(t)}function gQ(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ac(r)}}var mQ={provide:lA,deps:[[new Wn,dA]]},yQ={provide:ac,useFactory:pQ,deps:[[new Wn,dA],Wi]};function y2(n,...e){return ht("angularfire",ao.full,"fst"),$n([yQ,mQ,{provide:dA,useFactory:gQ(n),multi:!0,deps:[Ke,Tt,co,Pa,[new Wn,rf],[new Wn,$u],...e]}])}var gv=ft(cL,!0);var _2=ft(oL,!0);var hA=ft(g2,!0,2);var fA=ft(r2,!0,2);var v2=ft(p2,!0,2);var mv=ft(sA,!0,2);var E2=ft(i2,!0);var yv=ft(d2,!0,2),_v=ft(u2,!0,2);var I2=ft(f2,!0,2);var pA=ft(l2,!0,2);var w2={production:!1,firebase:{apiKey:"AIzaSyBhfFnuSwiVvRPOmqVxC0BUU8ZvMUGiye0",authDomain:"sistema-evaluacion-5b6eb.firebaseapp.com",projectId:"sistema-evaluacion-5b6eb",storageBucket:"sistema-evaluacion-5b6eb.firebasestorage.app",messagingSenderId:"858778646472",appId:"1:858778646472:web:2aaf997dac54ce3732b2fd"}};var x2=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(he(Zs),he(Ui))};static \u0275dir=tt({type:n})}return n})(),Av=(()=>{class n extends x2{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Mr(n)))(i||n)}})();static \u0275dir=tt({type:n,features:[en]})}return n})(),Gl=new ee("");var _Q={provide:Gl,useExisting:gn(()=>Ro),multi:!0};function vQ(){let n=lr()?lr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var EQ=new ee(""),Ro=(()=>{class n extends x2{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!vQ())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(he(Zs),he(Ui),he(EQ,8))};static \u0275dir=tt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Be("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[ur([_Q]),en]})}return n})();function EA(n){return n==null||IA(n)===0}function IA(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Wl=new ee(""),op=new ee(""),IQ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ge=class{static min(e){return M2(e)}static max(e){return wQ(e)}static required(e){return TQ(e)}static requiredTrue(e){return bQ(e)}static email(e){return CQ(e)}static minLength(e){return DQ(e)}static maxLength(e){return SQ(e)}static pattern(e){return AQ(e)}static nullValidator(e){return Ev()}static compose(e){return U2(e)}static composeAsync(e){return B2(e)}};function M2(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function wQ(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function TQ(n){return EA(n.value)?{required:!0}:null}function bQ(n){return n.value===!0?null:{required:!0}}function CQ(n){return EA(n.value)||IQ.test(n.value)?null:{email:!0}}function DQ(n){return e=>{let t=e.value?.length??IA(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function SQ(n){return e=>{let t=e.value?.length??IA(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function AQ(n){if(!n)return Ev;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(EA(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Ev(n){return null}function k2(n){return n!=null}function O2(n){return eo(n)?ot(n):n}function F2(n){let e={};return n.forEach(t=>{e=t!=null?H(H({},e),t):e}),Object.keys(e).length===0?null:e}function L2(n,e){return e.map(t=>t(n))}function RQ(n){return!n.validate}function V2(n){return n.map(e=>RQ(e)?e:t=>e.validate(t))}function U2(n){if(!n)return null;let e=n.filter(k2);return e.length==0?null:function(t){return F2(L2(t,e))}}function j2(n){return n!=null?U2(V2(n)):null}function B2(n){if(!n)return null;let e=n.filter(k2);return e.length==0?null:function(t){let r=L2(t,e).map(O2);return yE(r).pipe(ae(F2))}}function $2(n){return n!=null?B2(V2(n)):null}function T2(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function H2(n){return n._rawValidators}function q2(n){return n._rawAsyncValidators}function gA(n){return n?Array.isArray(n)?n:[n]:[]}function Iv(n,e){return Array.isArray(n)?n.includes(e):n===e}function b2(n,e){let t=gA(e);return gA(n).forEach(i=>{Iv(t,i)||t.push(i)}),t}function C2(n,e){return gA(e).filter(t=>!Iv(n,t))}var wv=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=j2(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=$2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},tr=class extends wv{name;get formDirective(){return null}get path(){return null}},cc=class extends wv{_parent=null;name=null;valueAccessor=null},Tv=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},PQ={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},JIe=se(H({},PQ),{"[class.ng-submitted]":"isSubmitted"}),Kl=(()=>{class n extends Tv{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(he(cc,2))};static \u0275dir=tt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&vt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[en]})}return n})(),Rv=(()=>{class n extends Tv{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(he(tr,10))};static \u0275dir=tt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&vt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[en]})}return n})();var ep="VALID",vv="INVALID",Hl="PENDING",tp="DISABLED",Ao=class{},bv=class extends Ao{value;source;constructor(e,t){super(),this.value=e,this.source=t}},np=class extends Ao{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},rp=class extends Ao{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},ql=class extends Ao{status;source;constructor(e,t){super(),this.status=e,this.source=t}},mA=class extends Ao{source;constructor(e){super(),this.source=e}},sp=class extends Ao{source;constructor(e){super(),this.source=e}};function wA(n){return(Pv(n)?n.validators:n)||null}function NQ(n){return Array.isArray(n)?j2(n):n||null}function TA(n,e){return(Pv(e)?e.asyncValidators:n)||null}function xQ(n){return Array.isArray(n)?$2(n):n||null}function Pv(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function z2(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Z(1e3,"");if(!r[t])throw new Z(1001,"")}function G2(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Z(1002,"")})}var zl=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return tn(this.statusReactive)}set status(e){tn(()=>this.statusReactive.set(e))}_status=wu(()=>this.statusReactive());statusReactive=Gn(void 0);get valid(){return this.status===ep}get invalid(){return this.status===vv}get pending(){return this.status==Hl}get disabled(){return this.status===tp}get enabled(){return this.status!==tp}errors;get pristine(){return tn(this.pristineReactive)}set pristine(e){tn(()=>this.pristineReactive.set(e))}_pristine=wu(()=>this.pristineReactive());pristineReactive=Gn(!0);get dirty(){return!this.pristine}get touched(){return tn(this.touchedReactive)}set touched(e){tn(()=>this.touchedReactive.set(e))}_touched=wu(()=>this.touchedReactive());touchedReactive=Gn(!1);get untouched(){return!this.touched}_events=new Ft;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(b2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(b2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(C2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(C2(e,this._rawAsyncValidators))}hasValidator(e){return Iv(this._rawValidators,e)}hasAsyncValidator(e){return Iv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(se(H({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new rp(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new rp(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(se(H({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new np(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new np(!0,r))}markAsPending(e={}){this.status=Hl;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ql(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(se(H({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=tp,this.errors=null,this._forEachChild(i=>{i.disable(se(H({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bv(this.value,r)),this._events.next(new ql(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(se(H({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ep,this._forEachChild(r=>{r.enable(se(H({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(se(H({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ep||this.status===Hl)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bv(this.value,t)),this._events.next(new ql(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(se(H({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?tp:ep}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Hl,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=O2(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ql(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new _t,this.statusChanges=new _t}_calculateStatus(){return this._allControlsDisabled()?tp:this.errors?vv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hl)?Hl:this._anyControlsHaveStatus(vv)?vv:ep}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new np(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new rp(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Pv(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=NQ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=xQ(this._rawAsyncValidators)}},Cv=class extends zl{constructor(e,t,r){super(wA(t),TA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){G2(this,!0,e),Object.keys(e).forEach(r=>{z2(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new sp(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var yA=class extends Cv{};var Nv=new ee("",{providedIn:"root",factory:()=>xv}),xv="always";function Mv(n,e){return[...e.path,n]}function _A(n,e,t=xv){bA(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),kQ(n,e),FQ(n,e),OQ(n,e),MQ(n,e)}function D2(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Sv(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Dv(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function MQ(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function bA(n,e){let t=H2(n);e.validator!==null?n.setValidators(T2(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=q2(n);e.asyncValidator!==null?n.setAsyncValidators(T2(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Dv(e._rawValidators,i),Dv(e._rawAsyncValidators,i)}function Sv(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=H2(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=q2(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return Dv(e._rawValidators,r),Dv(e._rawAsyncValidators,r),t}function kQ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&W2(n,e)})}function OQ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&W2(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function W2(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function FQ(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function LQ(n,e){n==null,bA(n,e)}function VQ(n,e){return Sv(n,e)}function K2(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function UQ(n){return Object.getPrototypeOf(n.constructor)===Av}function jQ(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Q2(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Ro?t=s:UQ(s)?r=s:i=s}),i||r||t||null}function BQ(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function S2(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function A2(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ip=class extends zl{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(wA(t),TA(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Pv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(A2(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new sp(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){S2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){S2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){A2(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var $Q=n=>n instanceof ip,HQ=(()=>{class n extends tr{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Mv(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Mr(n)))(i||n)}})();static \u0275dir=tt({type:n,standalone:!1,features:[en]})}return n})();var qQ={provide:cc,useExisting:gn(()=>CA)},R2=Promise.resolve(),CA=(()=>{class n extends cc{_changeDetectorRef;callSetDisabledState;control=new ip;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new _t;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Q2(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),K2(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){_A(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){R2.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Mw(r);R2.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Mv(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(he(tr,9),he(Wl,10),he(op,10),he(Gl,10),he(Tu,8),he(Nv,8))};static \u0275dir=tt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ur([qQ]),en,Vi]})}return n})();var kv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=tt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),zQ={provide:Gl,useExisting:gn(()=>DA),multi:!0},DA=(()=>{class n extends Av{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Mr(n)))(i||n)}})();static \u0275dir=tt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Be("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[ur([zQ]),en]})}return n})();var Y2=new ee("");var GQ={provide:tr,useExisting:gn(()=>Ql)},Ql=(()=>{class n extends tr{callSetDisabledState;get submitted(){return tn(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=wu(()=>this._submittedReactive());_submittedReactive=Gn(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new _t;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Sv(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return _A(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){D2(t.control||null,t,!1),BQ(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),jQ(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new mA(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(D2(r||null,t),$Q(i)&&(_A(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);LQ(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&VQ(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){bA(this.form,this),this._oldForm&&Sv(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(he(Wl,10),he(op,10),he(Nv,8))};static \u0275dir=tt({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&Be("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ur([GQ]),en,Vi]})}return n})(),WQ={provide:tr,useExisting:gn(()=>Ov)},Ov=(()=>{class n extends HQ{name=null;constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){J2(this._parent)}static \u0275fac=function(r){return new(r||n)(he(tr,13),he(Wl,10),he(op,10))};static \u0275dir=tt({type:n,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[ur([WQ]),en]})}return n})(),KQ={provide:tr,useExisting:gn(()=>Fv)},Fv=(()=>{class n extends tr{_parent;name=null;constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){J2(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Mv(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(r){return new(r||n)(he(tr,13),he(Wl,10),he(op,10))};static \u0275dir=tt({type:n,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[ur([KQ]),en]})}return n})();function J2(n){return!(n instanceof Ov)&&!(n instanceof Ql)&&!(n instanceof Fv)}var QQ={provide:cc,useExisting:gn(()=>ap)},ap=(()=>{class n extends cc{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new _t;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Q2(this,s)}ngOnChanges(t){this._added||this._setUpControl(),K2(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Mv(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(he(tr,13),he(Wl,10),he(op,10),he(Gl,10),he(Y2,8))};static \u0275dir=tt({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[ur([QQ]),en,Vi]})}return n})();var YQ={provide:Gl,useExisting:gn(()=>Yl),multi:!0};function X2(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function JQ(n){return n.split(":")[0]}var Yl=(()=>{class n extends Av{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=j(Bi).injector;destroyRef=j(Nr);cdr=j(Tu);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,fm({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=X2(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=JQ(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Mr(n)))(i||n)}})();static \u0275dir=tt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Be("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ur([YQ]),en]})}return n})(),Lv=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(X2(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(he(Ui),he(Zs),he(Yl,9))};static \u0275dir=tt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),XQ={provide:Gl,useExisting:gn(()=>Z2),multi:!0};function P2(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function ZQ(n){return n.split(":")[0]}var Z2=(()=>{class n extends Av{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],d=this._getOptionValue(c.value);i.push(d)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let d=this._getOptionValue(c.value);i.push(d)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=ZQ(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Mr(n)))(i||n)}})();static \u0275dir=tt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Be("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ur([XQ]),en]})}return n})(),Vv=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(P2(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(P2(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(he(Ui),he(Zs),he(Z2,9))};static \u0275dir=tt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function eY(n){return typeof n=="number"?n:parseFloat(n)}var tY=(()=>{class n{_validator=Ev;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Ev,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=tt({type:n,features:[Vi]})}return n})();var nY={provide:Wl,useExisting:gn(()=>SA),multi:!0},SA=(()=>{class n extends tY{min;inputName="min";normalizeInput=t=>eY(t);createValidator=t=>M2(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Mr(n)))(i||n)}})();static \u0275dir=tt({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&_m("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[ur([nY]),en]})}return n})();var eU=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ji({type:n});static \u0275inj=Xr({})}return n})(),vA=class extends zl{constructor(e,t,r){super(wA(t),TA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){G2(this,!1,e),e.forEach((r,i)=>{z2(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new sp(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function N2(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Uv=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),s={};return N2(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Cv(i,s)}record(t,r=null){let i=this._reduceControls(t);return new yA(i,r)}control(t,r,i){let s={};return this.useNonNullable?(N2(r)?s=r:(s.validators=r,s.asyncValidators=i),new ip(t,se(H({},s),{nonNullable:!0}))):new ip(t,r,i)}array(t,r,i){let s=t.map(o=>this._createControl(o));return new vA(s,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof ip)return t;if(t instanceof zl)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,i,s)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var tU=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Nv,useValue:t.callSetDisabledState??xv}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ji({type:n});static \u0275inj=Xr({imports:[eU]})}return n})(),jv=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Y2,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Nv,useValue:t.callSetDisabledState??xv}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ji({type:n});static \u0275inj=Xr({imports:[eU]})}return n})();var $r=class n{auth=j(Va);user$=eO(this.auth);currentUser=null;constructor(){this.user$.subscribe(e=>{this.currentUser=e})}register(e,t,r){return C(this,null,function*(){try{let i=yield tO(this.auth,e,t);i.user&&(yield sO(i.user,{displayName:r}))}catch(i){throw console.error("Error al registrar:",i),i}})}login(e,t){return C(this,null,function*(){try{yield rO(this.auth,e,t)}catch(r){throw console.error("Error al iniciar sesi\xF3n:",r),r}})}logout(){return C(this,null,function*(){try{yield iO(this.auth)}catch(e){throw console.error("Error al cerrar sesi\xF3n:",e),e}})}getCurrentUser(){return this.currentUser}getUser(){return this.user$}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};function rY(n,e){n&1&&(k(0,"span",27),V(1," Ingresa un correo v\xE1lido "),M())}function iY(n,e){n&1&&(k(0,"span",27),V(1," La contrase\xF1a debe tener al menos 6 caracteres "),M())}function sY(n,e){if(n&1&&(k(0,"div",27),V(1),M()),n&2){let t=Ye(2);B(),at(" ",t.errorMessage," ")}}function oY(n,e){if(n&1){let t=kr();k(0,"form",19),Be("ngSubmit",function(){Pn(t);let i=Ye();return Nn(i.onLogin())}),k(1,"div",20)(2,"label",21),V(3,"Correo Electr\xF3nico"),M(),je(4,"input",22),Pe(5,rY,2,0,"span",23),M(),k(6,"div",20)(7,"label",24),V(8,"Contrase\xF1a"),M(),je(9,"input",25),Pe(10,iY,2,0,"span",23),M(),Pe(11,sY,2,1,"div",23),k(12,"button",26),V(13),M()()}if(n&2){let t,r,i,s,o=Ye();X("formGroup",o.loginForm),B(4),vt("error",((t=o.loginForm.get("email"))==null?null:t.invalid)&&((t=o.loginForm.get("email"))==null?null:t.touched)),B(),X("ngIf",((r=o.loginForm.get("email"))==null?null:r.invalid)&&((r=o.loginForm.get("email"))==null?null:r.touched)),B(4),vt("error",((i=o.loginForm.get("password"))==null?null:i.invalid)&&((i=o.loginForm.get("password"))==null?null:i.touched)),B(),X("ngIf",((s=o.loginForm.get("password"))==null?null:s.invalid)&&((s=o.loginForm.get("password"))==null?null:s.touched)),B(),X("ngIf",o.errorMessage),B(),X("disabled",o.loading||o.loginForm.invalid),B(),at(" ",o.loading?"Iniciando sesi\xF3n...":"Iniciar Sesi\xF3n"," ")}}function aY(n,e){n&1&&(k(0,"span",27),V(1," El nombre debe tener al menos 3 caracteres "),M())}function cY(n,e){n&1&&(k(0,"span",27),V(1," Ingresa un correo v\xE1lido "),M())}function uY(n,e){n&1&&(k(0,"span",27),V(1," La contrase\xF1a debe tener al menos 6 caracteres "),M())}function lY(n,e){n&1&&(k(0,"span",27),V(1," Confirma tu contrase\xF1a "),M())}function dY(n,e){if(n&1&&(k(0,"div",27),V(1),M()),n&2){let t=Ye(2);B(),at(" ",t.errorMessage," ")}}function hY(n,e){if(n&1){let t=kr();k(0,"form",19),Be("ngSubmit",function(){Pn(t);let i=Ye();return Nn(i.onRegister())}),k(1,"div",20)(2,"label",28),V(3,"Nombre Completo"),M(),je(4,"input",29),Pe(5,aY,2,0,"span",23),M(),k(6,"div",20)(7,"label",30),V(8,"Correo Electr\xF3nico"),M(),je(9,"input",31),Pe(10,cY,2,0,"span",23),M(),k(11,"div",20)(12,"label",32),V(13,"Contrase\xF1a"),M(),je(14,"input",33),Pe(15,uY,2,0,"span",23),M(),k(16,"div",20)(17,"label",34),V(18,"Confirmar Contrase\xF1a"),M(),je(19,"input",35),Pe(20,lY,2,0,"span",23),M(),Pe(21,dY,2,1,"div",23),k(22,"button",26),V(23),M()()}if(n&2){let t,r,i,s,o,a,c,d,h=Ye();X("formGroup",h.registerForm),B(4),vt("error",((t=h.registerForm.get("displayName"))==null?null:t.invalid)&&((t=h.registerForm.get("displayName"))==null?null:t.touched)),B(),X("ngIf",((r=h.registerForm.get("displayName"))==null?null:r.invalid)&&((r=h.registerForm.get("displayName"))==null?null:r.touched)),B(4),vt("error",((i=h.registerForm.get("email"))==null?null:i.invalid)&&((i=h.registerForm.get("email"))==null?null:i.touched)),B(),X("ngIf",((s=h.registerForm.get("email"))==null?null:s.invalid)&&((s=h.registerForm.get("email"))==null?null:s.touched)),B(4),vt("error",((o=h.registerForm.get("password"))==null?null:o.invalid)&&((o=h.registerForm.get("password"))==null?null:o.touched)),B(),X("ngIf",((a=h.registerForm.get("password"))==null?null:a.invalid)&&((a=h.registerForm.get("password"))==null?null:a.touched)),B(4),vt("error",((c=h.registerForm.get("confirmPassword"))==null?null:c.invalid)&&((c=h.registerForm.get("confirmPassword"))==null?null:c.touched)),B(),X("ngIf",((d=h.registerForm.get("confirmPassword"))==null?null:d.invalid)&&((d=h.registerForm.get("confirmPassword"))==null?null:d.touched)),B(),X("ngIf",h.errorMessage),B(),X("disabled",h.loading||h.registerForm.invalid),B(),at(" ",h.loading?"Creando cuenta...":"Registrarse"," ")}}var Bv=class n{fb=j(Uv);authService=j($r);router=j(vn);loginForm;registerForm;isLoginMode=!0;errorMessage="";loading=!1;constructor(){this.loginForm=this.fb.group({email:["",[Ge.required,Ge.email]],password:["",[Ge.required,Ge.minLength(6)]]}),this.registerForm=this.fb.group({displayName:["",[Ge.required,Ge.minLength(3)]],email:["",[Ge.required,Ge.email]],password:["",[Ge.required,Ge.minLength(6)]],confirmPassword:["",[Ge.required]]})}toggleMode(){this.isLoginMode=!this.isLoginMode,this.errorMessage=""}onLogin(){return C(this,null,function*(){if(this.loginForm.invalid){this.errorMessage="Por favor, completa todos los campos correctamente.";return}this.loading=!0,this.errorMessage="";try{let{email:e,password:t}=this.loginForm.value;yield this.authService.login(e,t),this.router.navigate(["/evaluaciones"])}catch(e){this.errorMessage=this.getErrorMessage(e.code)}finally{this.loading=!1}})}onRegister(){return C(this,null,function*(){if(this.registerForm.invalid){this.errorMessage="Por favor, completa todos los campos correctamente.";return}let{password:e,confirmPassword:t}=this.registerForm.value;if(e!==t){this.errorMessage="Las contrase\xF1as no coinciden.";return}this.loading=!0,this.errorMessage="";try{let{displayName:r,email:i,password:s}=this.registerForm.value;yield this.authService.register(i,s,r),this.router.navigate(["/evaluaciones"])}catch(r){this.errorMessage=this.getErrorMessage(r.code)}finally{this.loading=!1}})}getErrorMessage(e){return{"auth/email-already-in-use":"Este correo electr\xF3nico ya est\xE1 registrado.","auth/invalid-email":"El correo electr\xF3nico no es v\xE1lido.","auth/operation-not-allowed":"Operaci\xF3n no permitida.","auth/weak-password":"La contrase\xF1a es demasiado d\xE9bil.","auth/user-disabled":"Esta cuenta ha sido deshabilitada.","auth/user-not-found":"No existe una cuenta con este correo.","auth/wrong-password":"Contrase\xF1a incorrecta.","auth/invalid-credential":"Credenciales inv\xE1lidas. Verifica tu correo y contrase\xF1a."}[e]||"Ocurri\xF3 un error. Int\xE9ntalo de nuevo."}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Kn({type:n,selectors:[["app-login"]],decls:26,vars:5,consts:[[1,"login-container"],[1,"login-card"],[1,"login-header"],[1,"logo-container"],["viewBox","0 0 100 100","xmlns","http://www.w3.org/2000/svg",1,"logo-icon"],["id","logoGrad","x1","0%","y1","0%","x2","100%","y2","100%"],["offset","0%",2,"stop-color","#667eea","stop-opacity","1"],["offset","100%",2,"stop-color","#764ba2","stop-opacity","1"],["x","20","y","10","width","60","height","80","rx","5","fill","url(#logoGrad)"],["x","30","y","25","width","40","height","3","rx","1.5","fill","white","opacity","0.8"],["x","30","y","35","width","40","height","3","rx","1.5","fill","white","opacity","0.8"],["x","30","y","45","width","30","height","3","rx","1.5","fill","white","opacity","0.8"],["cx","50","cy","65","r","18","fill","white"],["d","M 42 65 L 48 71 L 58 59","stroke","#667eea","stroke-width","4","stroke-linecap","round","stroke-linejoin","round","fill","none"],[1,"animate-fade-in"],[1,"animate-slide-up"],["class","login-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"toggle-mode"],[3,"click"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","login-email"],["type","email","id","login-email","formControlName","email","placeholder","ejemplo@correo.com"],["class","error-message",4,"ngIf"],["for","login-password"],["type","password","id","login-password","formControlName","password","placeholder","M\xEDnimo 6 caracteres"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error-message"],["for","register-name"],["type","text","id","register-name","formControlName","displayName","placeholder","Tu nombre"],["for","register-email"],["type","email","id","register-email","formControlName","email","placeholder","ejemplo@correo.com"],["for","register-password"],["type","password","id","register-password","formControlName","password","placeholder","M\xEDnimo 6 caracteres"],["for","register-confirm"],["type","password","id","register-confirm","formControlName","confirmPassword","placeholder","Repite tu contrase\xF1a"]],template:function(t,r){t&1&&(k(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Rr(),k(4,"svg",4)(5,"defs")(6,"linearGradient",5),je(7,"stop",6)(8,"stop",7),M()(),je(9,"rect",8)(10,"rect",9)(11,"rect",10)(12,"rect",11)(13,"circle",12)(14,"path",13),M()(),Pr(),k(15,"h1",14),V(16,"Sistema de Evaluaci\xF3n Online"),M(),k(17,"p",15),V(18),M()(),Pe(19,oY,14,10,"form",16)(20,hY,24,16,"form",16),k(21,"div",17)(22,"p"),V(23),k(24,"a",18),Be("click",function(){return r.toggleMode()}),V(25),M()()()()()),t&2&&(B(18),He(r.isLoginMode?"Inicia sesi\xF3n para continuar":"Crea tu cuenta para empezar"),B(),X("ngIf",r.isLoginMode),B(),X("ngIf",!r.isLoginMode),B(3),at(" ",r.isLoginMode?"\xBFNo tienes cuenta?":"\xBFYa tienes cuenta?"," "),B(2),at(" ",r.isLoginMode?"Reg\xEDstrate":"Inicia sesi\xF3n"," "))},dependencies:[si,$i,jv,kv,Ro,Kl,Rv,Ql,ap],styles:['.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px;position:relative;overflow:hidden}.login-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 1px,transparent 1px);background-size:50px 50px;animation:_ngcontent-%COMP%_moveBackground 20s linear infinite}@keyframes _ngcontent-%COMP%_moveBackground{0%{transform:translate(0)}to{transform:translate(50px,50px)}}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 20px 60px #0000004d;padding:40px;width:100%;max-width:450px;position:relative;z-index:1;animation:_ngcontent-%COMP%_slideIn .5s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.logo-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.logo-icon[_ngcontent-%COMP%]{width:80px;height:80px;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;font-size:28px;margin-bottom:10px;font-weight:600}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .8s ease-out .2s both}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:16px}.animate-slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .8s ease-out .4s both}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;animation:_ngcontent-%COMP%_fadeInUp .6s ease-out both}.form-group[_ngcontent-%COMP%]:nth-child(1){animation-delay:.5s}.form-group[_ngcontent-%COMP%]:nth-child(2){animation-delay:.6s}.form-group[_ngcontent-%COMP%]:nth-child(3){animation-delay:.7s}.form-group[_ngcontent-%COMP%]:nth-child(4){animation-delay:.8s}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#333;font-weight:500;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a;transform:translateY(-2px)}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%]{border-color:#e74c3c;animation:_ngcontent-%COMP%_shake .5s}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}10%,30%,50%,70%,90%{transform:translate(-5px)}20%,40%,60%,80%{transform:translate(5px)}}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:12px;margin-top:4px;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.btn[_ngcontent-%COMP%]{padding:14px 24px;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;margin-top:10px;position:relative;overflow:hidden}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#ffffff4d;transform:translate(-50%,-50%);transition:width .6s,height .6s}.btn[_ngcontent-%COMP%]:hover:before{width:300px;height:300px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 15px #667eea4d}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 6px 20px #667eea80}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.toggle-mode[_ngcontent-%COMP%]{text-align:center;margin-top:20px;padding-top:20px;border-top:1px solid #e0e0e0;animation:_ngcontent-%COMP%_fadeIn 1s ease-out .9s both}.toggle-mode[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}.toggle-mode[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;font-weight:600;cursor:pointer;text-decoration:none;margin-left:5px;transition:all .3s ease;position:relative}.toggle-mode[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{content:"";position:absolute;width:0;height:2px;bottom:-2px;left:0;background-color:#667eea;transition:width .3s ease}.toggle-mode[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:after{width:100%}']})};var Po=class n{firestore=j(ac);evaluacionesCollection=fA(this.firestore,"evaluaciones");respuestasCollection=fA(this.firestore,"respuestas");crearEvaluacion(e){return C(this,null,function*(){try{let t=se(H({},e),{fechaCreacion:it.fromDate(new Date(e.fechaCreacion)),fechaLimite:it.fromDate(new Date(e.fechaLimite))});return(yield hA(this.evaluacionesCollection,t)).id}catch(t){throw console.error("Error al crear evaluaci\xF3n:",t),t}})}getEvaluacionesByUser(e){let t=_v(this.evaluacionesCollection,pA("userId","==",e),yv("fechaCreacion","desc"));return gv(t,{idField:"id"}).pipe(ae(r=>r.map(i=>se(H({},i),{fechaCreacion:i.fechaCreacion?.toDate(),fechaLimite:i.fechaLimite?.toDate()}))))}getTodasEvaluaciones(){let e=_v(this.evaluacionesCollection,yv("fechaCreacion","desc"));return gv(e,{idField:"id"}).pipe(ae(t=>t.map(r=>se(H({},r),{fechaCreacion:r.fechaCreacion?.toDate(),fechaLimite:r.fechaLimite?.toDate()}))))}getEvaluacionById(e){let t=mv(this.firestore,`evaluaciones/${e}`);return _2(t,{idField:"id"}).pipe(ae(r=>{if(r)return se(H({},r),{fechaCreacion:r.fechaCreacion?.toDate(),fechaLimite:r.fechaLimite?.toDate()})}))}actualizarEvaluacion(e,t){return C(this,null,function*(){try{let r=mv(this.firestore,`evaluaciones/${e}`),i=H({},t);t.fechaCreacion&&(i.fechaCreacion=it.fromDate(new Date(t.fechaCreacion))),t.fechaLimite&&(i.fechaLimite=it.fromDate(new Date(t.fechaLimite))),yield I2(r,i)}catch(r){throw console.error("Error al actualizar evaluaci\xF3n:",r),r}})}eliminarEvaluacion(e){return C(this,null,function*(){try{let t=mv(this.firestore,`evaluaciones/${e}`);yield v2(t)}catch(t){throw console.error("Error al eliminar evaluaci\xF3n:",t),t}})}buscarEvaluaciones(e,t){return this.getEvaluacionesByUser(t).pipe(ae(r=>r.filter(i=>i.titulo.toLowerCase().includes(e.toLowerCase())||i.categoria.toLowerCase().includes(e.toLowerCase())||i.descripcion.toLowerCase().includes(e.toLowerCase()))))}filtrarPorEstado(e,t){return this.getEvaluacionesByUser(t).pipe(ae(r=>r.filter(i=>i.estado===e)))}filtrarPorCategoria(e,t){return this.getEvaluacionesByUser(t).pipe(ae(r=>r.filter(i=>i.categoria===e)))}guardarRespuesta(e){return C(this,null,function*(){try{let t=se(H({},e),{fechaEntrega:it.fromDate(new Date(e.fechaEntrega))});return(yield hA(this.respuestasCollection,t)).id}catch(t){throw console.error("Error al guardar respuesta:",t),t}})}getRespuestasByEvaluacion(e){let t=_v(this.respuestasCollection,pA("evaluacionId","==",e),yv("fechaEntrega","desc"));return gv(t,{idField:"id"}).pipe(ae(r=>r.map(i=>se(H({},i),{fechaEntrega:i.fechaEntrega?.toDate()}))))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};function fY(n,e){if(n&1&&(k(0,"option",35),V(1),M()),n&2){let t=e.$implicit;X("value",t),B(),He(t)}}function pY(n,e){if(n&1){let t=kr();k(0,"button",36),Be("click",function(){Pn(t);let i=Ye();return Nn(i.limpiarFiltros())}),V(1," Limpiar filtros "),M()}}function gY(n,e){n&1&&(k(0,"div",37)(1,"p"),V(2,"Cargando evaluaciones..."),M()())}function mY(n,e){if(n&1){let t=kr();k(0,"button",31),Be("click",function(){Pn(t);let i=Ye(2);return Nn(i.crearNuevaEvaluacion())}),V(1," Crear Primera Evaluaci\xF3n "),M()}}function yY(n,e){if(n&1&&(k(0,"div",38)(1,"div",39),V(2,"\u{1F4CB}"),M(),k(3,"h2"),V(4),M(),k(5,"p"),V(6),M(),Pe(7,mY,2,0,"button",40),M()),n&2){let t=Ye();B(4),He(t.searchTerm||t.filtroEstado||t.filtroCategoria?"No se encontraron evaluaciones":"No tienes evaluaciones a\xFAn"),B(2),He(t.searchTerm||t.filtroEstado||t.filtroCategoria?"Intenta con otros criterios de b\xFAsqueda":"Comienza creando tu primera evaluaci\xF3n"),B(),X("ngIf",!t.searchTerm&&!t.filtroEstado&&!t.filtroCategoria)}}function _Y(n,e){if(n&1){let t=kr();k(0,"div",43)(1,"div",44)(2,"h3"),V(3),M(),k(4,"span",45),V(5),M()(),k(6,"div",46)(7,"p",47),V(8),M(),k(9,"div",48)(10,"div",49)(11,"span",50),V(12,"Categor\xEDa:"),M(),k(13,"span",51),V(14),M()(),k(15,"div",49)(16,"span",50),V(17,"Puntaje m\xE1ximo:"),M(),k(18,"span",51),V(19),M()(),k(20,"div",49)(21,"span",50),V(22,"Fecha creaci\xF3n:"),M(),k(23,"span",51),V(24),M()(),k(25,"div",49)(26,"span",50),V(27,"Fecha l\xEDmite:"),M(),k(28,"span",51),V(29),M()(),k(30,"div",49)(31,"span",50),V(32,"Preguntas:"),M(),k(33,"span",51),V(34),M()()()(),k(35,"div",52)(36,"button",53),Be("click",function(){let i=Pn(t).$implicit,s=Ye(2);return Nn(s.verEstadisticas(i.id))}),V(37," \u{1F4CA} Estad\xEDsticas "),M(),k(38,"button",54),Be("click",function(){let i=Pn(t).$implicit,s=Ye(2);return Nn(s.editarEvaluacion(i.id))}),V(39," \u270F\uFE0F Editar "),M(),k(40,"button",55),Be("click",function(){let i=Pn(t).$implicit,s=Ye(2);return Nn(s.eliminarEvaluacion(i))}),V(41," \u{1F5D1}\uFE0F Eliminar "),M()()()}if(n&2){let t=e.$implicit,r=Ye(2);B(3),He(t.titulo),B(),X("ngClass",r.getEstadoClass(t.estado)),B(),at(" ",t.estado," "),B(3),He(t.descripcion),B(6),He(t.categoria),B(5),at("",t.puntajeMaximo," pts"),B(5),He(r.formatearFecha(t.fechaCreacion)),B(5),He(r.formatearFecha(t.fechaLimite)),B(5),He((t.preguntas==null?null:t.preguntas.length)||0)}}function vY(n,e){if(n&1&&(k(0,"div",41),Pe(1,_Y,42,9,"div",42),M()),n&2){let t=Ye();B(),X("ngForOf",t.evaluacionesFiltradas)}}var $v=class n{evaluacionService=j(Po);authService=j($r);router=j(vn);evaluaciones=[];evaluacionesFiltradas=[];loading=!0;searchTerm="";filtroEstado="";filtroCategoria="";categorias=[];ngOnInit(){this.cargarEvaluaciones()}cargarEvaluaciones(){let e=this.authService.getCurrentUser();if(!e){this.router.navigate(["/login"]);return}this.loading=!0,this.evaluacionService.getEvaluacionesByUser(e.uid).subscribe({next:t=>{this.evaluaciones=t,this.evaluacionesFiltradas=t,this.loading=!1,this.categorias=[...new Set(t.map(r=>r.categoria))]},error:t=>{console.error("Error al cargar evaluaciones:",t),this.loading=!1}})}aplicarFiltros(){let e=[...this.evaluaciones];if(this.searchTerm.trim()){let t=this.searchTerm.toLowerCase();e=e.filter(r=>r.titulo.toLowerCase().includes(t)||r.descripcion.toLowerCase().includes(t)||r.categoria.toLowerCase().includes(t))}this.filtroEstado&&(e=e.filter(t=>t.estado===this.filtroEstado)),this.filtroCategoria&&(e=e.filter(t=>t.categoria===this.filtroCategoria)),this.evaluacionesFiltradas=e}onSearchChange(){this.aplicarFiltros()}onEstadoChange(){this.aplicarFiltros()}onCategoriaChange(){this.aplicarFiltros()}limpiarFiltros(){this.searchTerm="",this.filtroEstado="",this.filtroCategoria="",this.evaluacionesFiltradas=[...this.evaluaciones]}crearNuevaEvaluacion(){this.router.navigate(["/evaluaciones/nueva"])}editarEvaluacion(e){e&&this.router.navigate(["/evaluaciones/editar",e])}eliminarEvaluacion(e){return C(this,null,function*(){if(!(!e.id||!confirm(`\xBFEst\xE1s seguro de eliminar la evaluaci\xF3n "${e.titulo}"?`)))try{yield this.evaluacionService.eliminarEvaluacion(e.id)}catch(r){console.error("Error al eliminar:",r),alert("Error al eliminar la evaluaci\xF3n")}})}verEstadisticas(e){e&&this.router.navigate(["/evaluaciones/estadisticas",e])}getEstadoClass(e){return{activa:"estado-activa",cerrada:"estado-cerrada",borrador:"estado-borrador"}[e]||""}formatearFecha(e){return new Date(e).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})}logout(){return C(this,null,function*(){try{yield this.authService.logout(),this.router.navigate(["/login"])}catch(e){console.error("Error al cerrar sesi\xF3n:",e)}})}get userName(){return this.authService.getCurrentUser()?.displayName||"Usuario"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Kn({type:n,selectors:[["app-evaluaciones-list"]],decls:49,vars:10,consts:[[1,"evaluaciones-container"],[1,"header"],[1,"header-content"],[1,"header-left"],["viewBox","0 0 50 50","xmlns","http://www.w3.org/2000/svg",1,"header-icon"],["x","10","y","5","width","30","height","40","rx","2","fill","white","opacity","0.9"],["x","15","y","12","width","20","height","1.5","rx","0.75","fill","white"],["x","15","y","17","width","20","height","1.5","rx","0.75","fill","white"],["x","15","y","22","width","15","height","1.5","rx","0.75","fill","white"],["cx","25","cy","32","r","7","fill","white"],["d","M 21 32 L 24 35 L 29 29","stroke","#667eea","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","fill","none"],[1,"animate-slide-in"],[1,"user-info"],[1,"user-avatar"],[1,"btn","btn-secondary",3,"click"],["width","16","height","16","viewBox","0 0 16 16","fill","none"],["d","M6 14H3C2.44772 14 2 13.5523 2 13V3C2 2.44772 2.44772 2 3 2H6","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["d","M11 11L14 8M14 8L11 5M14 8H6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"content"],[1,"toolbar"],[1,"search-box"],["type","text","placeholder","Buscar por t\xEDtulo, descripci\xF3n o categor\xEDa...",1,"search-input",3,"ngModelChange","ngModel"],[1,"search-icon"],[1,"filters"],[1,"filter-select",3,"ngModelChange","ngModel"],["value",""],["value","activa"],["value","borrador"],["value","cerrada"],[3,"value",4,"ngFor","ngForOf"],["class","btn btn-link",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],["class","loading",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","evaluaciones-grid",4,"ngIf"],[3,"value"],[1,"btn","btn-link",3,"click"],[1,"loading"],[1,"empty-state"],[1,"empty-icon"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"evaluaciones-grid"],["class","evaluacion-card",4,"ngFor","ngForOf"],[1,"evaluacion-card"],[1,"card-header"],[1,"estado-badge",3,"ngClass"],[1,"card-body"],[1,"descripcion"],[1,"info-grid"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"card-actions"],[1,"btn","btn-small","btn-info",3,"click"],[1,"btn","btn-small","btn-secondary",3,"click"],[1,"btn","btn-small","btn-danger",3,"click"]],template:function(t,r){t&1&&(k(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3),Rr(),k(4,"svg",4),je(5,"rect",5)(6,"rect",6)(7,"rect",7)(8,"rect",8)(9,"circle",9)(10,"path",10),M(),Pr(),k(11,"h1",11),V(12,"Mis Evaluaciones"),M()(),k(13,"div",12)(14,"div",13),V(15),M(),k(16,"span"),V(17),M(),k(18,"button",14),Be("click",function(){return r.logout()}),Rr(),k(19,"svg",15),je(20,"path",16)(21,"path",17),M(),V(22," Cerrar Sesi\xF3n "),M()()()(),Pr(),k(23,"div",18)(24,"div",19)(25,"div",20)(26,"input",21),Iu("ngModelChange",function(s){return ih(r.searchTerm,s)||(r.searchTerm=s),s}),Be("ngModelChange",function(){return r.onSearchChange()}),M(),k(27,"span",22),V(28,"\u{1F50D}"),M()(),k(29,"div",23)(30,"select",24),Iu("ngModelChange",function(s){return ih(r.filtroEstado,s)||(r.filtroEstado=s),s}),Be("ngModelChange",function(){return r.onEstadoChange()}),k(31,"option",25),V(32,"Todos los estados"),M(),k(33,"option",26),V(34,"Activa"),M(),k(35,"option",27),V(36,"Borrador"),M(),k(37,"option",28),V(38,"Cerrada"),M()(),k(39,"select",24),Iu("ngModelChange",function(s){return ih(r.filtroCategoria,s)||(r.filtroCategoria=s),s}),Be("ngModelChange",function(){return r.onCategoriaChange()}),k(40,"option",25),V(41,"Todas las categor\xEDas"),M(),Pe(42,fY,2,2,"option",29),M(),Pe(43,pY,2,0,"button",30),M(),k(44,"button",31),Be("click",function(){return r.crearNuevaEvaluacion()}),V(45," \u2795 Nueva Evaluaci\xF3n "),M()(),Pe(46,gY,3,0,"div",32)(47,yY,8,3,"div",33)(48,vY,2,1,"div",34),M()()),t&2&&(B(15),He(r.userName.charAt(0).toUpperCase()),B(2),He(r.userName),B(9),Eu("ngModel",r.searchTerm),B(4),Eu("ngModel",r.filtroEstado),B(9),Eu("ngModel",r.filtroCategoria),B(3),X("ngForOf",r.categorias),B(),X("ngIf",r.searchTerm||r.filtroEstado||r.filtroCategoria),B(3),X("ngIf",r.loading),B(),X("ngIf",!r.loading&&r.evaluacionesFiltradas.length===0),B(),X("ngIf",!r.loading&&r.evaluacionesFiltradas.length>0))},dependencies:[si,ch,no,$i,tU,Lv,Vv,Ro,Yl,Kl,CA],styles:['.evaluaciones-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#f5f7fa;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:20px 0;box-shadow:0 4px 12px #00000026;position:relative;overflow:hidden}.header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;right:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 1px,transparent 1px);background-size:40px 40px;animation:_ngcontent-%COMP%_movePattern 15s linear infinite}@keyframes _ngcontent-%COMP%_movePattern{0%{transform:translate(0) rotate(0)}to{transform:translate(40px,40px) rotate(360deg)}}.header-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;justify-content:space-between;align-items:center;position:relative;z-index:1}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.header-icon[_ngcontent-%COMP%]{width:40px;height:40px;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px}.animate-slide-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInFromLeft .6s ease-out}@keyframes _ngcontent-%COMP%_slideInFromLeft{0%{opacity:0;transform:translate(-30px)}to{opacity:1;transform:translate(0)}}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;animation:_ngcontent-%COMP%_slideInFromRight .6s ease-out}@keyframes _ngcontent-%COMP%_slideInFromRight{0%{opacity:0;transform:translate(30px)}to{opacity:1;transform:translate(0)}}.user-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:#ffffff4d;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px;border:2px solid white;animation:_ngcontent-%COMP%_bounceIn .8s ease-out}@keyframes _ngcontent-%COMP%_bounceIn{0%{opacity:0;transform:scale(.3)}50%{transform:scale(1.05)}70%{transform:scale(.9)}to{opacity:1;transform:scale(1)}}.content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:30px 20px}.toolbar[_ngcontent-%COMP%]{display:flex;gap:15px;margin-bottom:30px;flex-wrap:wrap;align-items:center;animation:_ngcontent-%COMP%_slideUp .6s ease-out .2s both}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.search-box[_ngcontent-%COMP%]{position:relative;flex:1;min-width:250px}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 40px 12px 16px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px;transition:all .3s ease;background:#fff}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a;transform:translateY(-1px)}.search-icon[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);color:#999;transition:color .3s}.search-input[_ngcontent-%COMP%]:focus ~ .search-icon[_ngcontent-%COMP%]{color:#667eea}.filters[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}.filter-select[_ngcontent-%COMP%]{padding:10px 14px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px;background:#fff;cursor:pointer;transition:all .3s ease}.filter-select[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 2px 8px #667eea26}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#ffffff4d;transform:translate(-50%,-50%);transition:width .6s,height .6s}.btn[_ngcontent-%COMP%]:active:before{width:300px;height:300px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 6px #667eea33}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #667eea66}.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#667eea;border:2px solid #667eea}.btn-secondary[_ngcontent-%COMP%]:hover{background:#667eea;color:#fff;box-shadow:0 4px 12px #667eea4d}.btn-link[_ngcontent-%COMP%]{background:transparent;color:#667eea;text-decoration:underline}.btn-small[_ngcontent-%COMP%]{padding:8px 12px;font-size:12px}.btn-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9);color:#fff;box-shadow:0 4px 6px #3498db33}.btn-info[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #3498db66}.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c,#c0392b);color:#fff;box-shadow:0 4px 6px #e74c3c33}.btn-danger[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #e74c3c66}.loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.loading[_ngcontent-%COMP%]:after{content:"";display:block;width:50px;height:50px;margin:20px auto;border:4px solid #f3f3f3;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 20px;animation:_ngcontent-%COMP%_fadeIn .8s ease-out}.empty-icon[_ngcontent-%COMP%]{font-size:80px;margin-bottom:20px;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-20px)}}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:10px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:30px}.evaluaciones-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px}.evaluacion-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden;transition:all .3s ease;animation:_ngcontent-%COMP%_cardSlideUp .5s ease-out backwards}.evaluacion-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.evaluacion-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.evaluacion-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.evaluacion-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.evaluacion-card[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}.evaluacion-card[_ngcontent-%COMP%]:nth-child(6){animation-delay:.6s}@keyframes _ngcontent-%COMP%_cardSlideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.evaluacion-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px) scale(1.02);box-shadow:0 8px 24px #667eea33}.card-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #f0f0f0;display:flex;justify-content:space-between;align-items:start;gap:10px;background:linear-gradient(to right,rgba(102,126,234,.02),transparent)}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333;font-size:18px;flex:1;transition:color .3s ease}.evaluacion-card[_ngcontent-%COMP%]:hover   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#667eea}.estado-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;transition:all .3s ease;box-shadow:0 2px 4px #0000001a}.estado-badge[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 4px 8px #00000026}.estado-activa[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4edda,#c3e6cb);color:#155724}.estado-cerrada[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8d7da,#f5c6cb);color:#721c24}.estado-borrador[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3cd,#ffeaa7);color:#856404}.card-body[_ngcontent-%COMP%]{padding:20px}.descripcion[_ngcontent-%COMP%]{color:#666;margin-bottom:20px;line-height:1.5;transition:color .3s ease}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;padding:8px;border-radius:6px;background:#667eea08;transition:all .3s ease}.info-item[_ngcontent-%COMP%]:hover{background:#667eea14;transform:translate(3px)}.info-label[_ngcontent-%COMP%]{font-size:12px;color:#999;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.info-value[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:600}.card-actions[_ngcontent-%COMP%]{padding:15px 20px;border-top:1px solid #f0f0f0;display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap;background:#f8f9fa80}.card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:80px}@media (max-width: 768px){.toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-box[_ngcontent-%COMP%]{width:100%}.filters[_ngcontent-%COMP%]{flex-direction:column}.filter-select[_ngcontent-%COMP%]{width:100%}.evaluaciones-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:15px;text-align:center}}']})};function EY(n,e){n&1&&(k(0,"span",38),V(1," El t\xEDtulo debe tener al menos 3 caracteres "),M())}function IY(n,e){n&1&&(k(0,"span",38),V(1," La categor\xEDa es obligatoria "),M())}function wY(n,e){n&1&&(k(0,"span",38),V(1," La descripci\xF3n debe tener al menos 10 caracteres "),M())}function TY(n,e){n&1&&(k(0,"span",38),V(1," La fecha l\xEDmite es obligatoria "),M())}function bY(n,e){if(n&1){let t=kr();k(0,"button",51),Be("click",function(){Pn(t);let i=Ye().index,s=Ye();return Nn(s.eliminarPregunta(i))}),V(1," \u{1F5D1}\uFE0F Eliminar "),M()}}function CY(n,e){n&1&&(k(0,"span",38),V(1," La pregunta debe tener al menos 5 caracteres "),M())}function DY(n,e){n&1&&(k(0,"span",38),V(1," Debes agregar las opciones "),M())}function SY(n,e){if(n&1&&(k(0,"div",13)(1,"label",42),V(2,"Opciones (una por l\xEDnea) *"),M(),je(3,"textarea",52),Pe(4,DY,2,0,"span",16),M()),n&2){let t,r,i=Ye(),s=i.$implicit,o=i.index;B(),X("for","opciones-"+o),B(2),vt("error",((t=s.get("opciones"))==null?null:t.invalid)&&((t=s.get("opciones"))==null?null:t.touched)),X("id","opciones-"+o),B(),X("ngIf",((r=s.get("opciones"))==null?null:r.invalid)&&((r=s.get("opciones"))==null?null:r.touched))}}function AY(n,e){n&1&&(k(0,"span",38),V(1," La respuesta correcta es obligatoria "),M())}function RY(n,e){if(n&1){let t=kr();k(0,"div",39)(1,"div",40)(2,"h3"),V(3),M(),Pe(4,bY,2,0,"button",41),M(),k(5,"div",13)(6,"label",42),V(7,"Texto de la Pregunta *"),M(),je(8,"textarea",43),Pe(9,CY,2,0,"span",16),M(),k(10,"div",12)(11,"div",13)(12,"label",42),V(13,"Tipo de Pregunta *"),M(),k(14,"select",44)(15,"option",45),V(16,"Opci\xF3n M\xFAltiple"),M(),k(17,"option",46),V(18,"Verdadero/Falso"),M(),k(19,"option",47),V(20,"Respuesta Corta"),M()()(),k(21,"div",13)(22,"label",42),V(23,"Puntaje *"),M(),k(24,"input",48),Be("change",function(){Pn(t);let i=Ye();return Nn(i.onPuntajeChange())}),M()()(),Pe(25,SY,5,5,"div",49),k(26,"div",13)(27,"label",42),V(28,"Respuesta Correcta *"),M(),je(29,"input",50),Pe(30,AY,2,0,"span",16),M()()}if(n&2){let t,r,i,s,o,a,c,d=e.$implicit,h=e.index,g=Ye();X("formGroupName",h),B(3),at("Pregunta ",h+1),B(),X("ngIf",g.preguntas.length>1),B(2),X("for","texto-"+h),B(2),vt("error",((t=d.get("texto"))==null?null:t.invalid)&&((t=d.get("texto"))==null?null:t.touched)),X("id","texto-"+h),B(),X("ngIf",((r=d.get("texto"))==null?null:r.invalid)&&((r=d.get("texto"))==null?null:r.touched)),B(3),X("for","tipo-"+h),B(2),X("id","tipo-"+h),B(8),X("for","puntaje-"+h),B(2),vt("error",((i=d.get("puntaje"))==null?null:i.invalid)&&((i=d.get("puntaje"))==null?null:i.touched)),X("id","puntaje-"+h),B(),X("ngIf",((s=d.get("tipo"))==null?null:s.value)==="opcion-multiple"),B(2),X("for","respuesta-"+h),B(2),vt("error",((o=d.get("respuestaCorrecta"))==null?null:o.invalid)&&((o=d.get("respuestaCorrecta"))==null?null:o.touched)),X("id","respuesta-"+h)("placeholder",((a=d.get("tipo"))==null?null:a.value)==="opcion-multiple"?"Escribe la opci\xF3n correcta exactamente como aparece arriba":"Escribe la respuesta correcta"),B(),X("ngIf",((c=d.get("respuestaCorrecta"))==null?null:c.invalid)&&((c=d.get("respuestaCorrecta"))==null?null:c.touched))}}function PY(n,e){n&1&&(k(0,"div",53)(1,"p"),V(2,"No hay preguntas. Agrega al menos una pregunta."),M()())}function NY(n,e){if(n&1&&(k(0,"div",38),V(1),M()),n&2){let t=Ye();B(),at(" ",t.errorMessage," ")}}var cp=class n{fb=j(Uv);evaluacionService=j(Po);authService=j($r);router=j(vn);route=j(dr);evaluacionForm;isEditMode=!1;evaluacionId=null;loading=!1;errorMessage="";constructor(){this.evaluacionForm=this.fb.group({titulo:["",[Ge.required,Ge.minLength(3)]],descripcion:["",[Ge.required,Ge.minLength(10)]],categoria:["",Ge.required],fechaLimite:["",Ge.required],puntajeMaximo:[0,[Ge.required,Ge.min(1)]],estado:["borrador",Ge.required],preguntas:this.fb.array([])})}ngOnInit(){this.evaluacionId=this.route.snapshot.paramMap.get("id"),this.evaluacionId?(this.isEditMode=!0,this.cargarEvaluacion()):this.agregarPregunta()}get preguntas(){return this.evaluacionForm.get("preguntas")}crearPreguntaForm(e){return this.fb.group({id:[e?.id||this.generarId()],texto:[e?.texto||"",[Ge.required,Ge.minLength(5)]],tipo:[e?.tipo||"opcion-multiple",Ge.required],opciones:[e?.opciones?.join(`
`)||"",Ge.required],respuestaCorrecta:[e?.respuestaCorrecta||"",Ge.required],puntaje:[e?.puntaje||1,[Ge.required,Ge.min(.5)]]})}agregarPregunta(){this.preguntas.push(this.crearPreguntaForm()),this.calcularPuntajeMaximo()}eliminarPregunta(e){this.preguntas.length>1?(this.preguntas.removeAt(e),this.calcularPuntajeMaximo()):alert("Debe haber al menos una pregunta")}calcularPuntajeMaximo(){let e=0;this.preguntas.controls.forEach(t=>{e+=Number(t.get("puntaje")?.value||0)}),this.evaluacionForm.patchValue({puntajeMaximo:e})}onPuntajeChange(){this.calcularPuntajeMaximo()}cargarEvaluacion(){this.evaluacionId&&(this.loading=!0,this.evaluacionService.getEvaluacionById(this.evaluacionId).subscribe({next:e=>{if(e){for(;this.preguntas.length;)this.preguntas.removeAt(0);e.preguntas?.forEach(i=>{this.preguntas.push(this.crearPreguntaForm(i))});let t=new Date(e.fechaLimite),r=this.formatearFechaParaInput(t);this.evaluacionForm.patchValue({titulo:e.titulo,descripcion:e.descripcion,categoria:e.categoria,fechaLimite:r,puntajeMaximo:e.puntajeMaximo,estado:e.estado})}this.loading=!1},error:e=>{console.error("Error al cargar evaluaci\xF3n:",e),this.errorMessage="Error al cargar la evaluaci\xF3n",this.loading=!1}}))}onSubmit(){return C(this,null,function*(){if(this.evaluacionForm.invalid){this.errorMessage="Por favor, completa todos los campos correctamente.",this.marcarCamposComoTocados();return}let e=this.authService.getCurrentUser();if(!e){this.router.navigate(["/login"]);return}this.loading=!0,this.errorMessage="";try{let t=this.evaluacionForm.value,r=t.preguntas.map(s=>({id:s.id,texto:s.texto,tipo:s.tipo,opciones:s.tipo==="opcion-multiple"?s.opciones.split(`
`).filter(o=>o.trim()):void 0,respuestaCorrecta:s.respuestaCorrecta,puntaje:Number(s.puntaje)})),i={titulo:t.titulo,descripcion:t.descripcion,categoria:t.categoria,fechaCreacion:this.isEditMode?new Date:new Date,fechaLimite:new Date(t.fechaLimite),puntajeMaximo:Number(t.puntajeMaximo),estado:t.estado,userId:e.uid,preguntas:r};this.isEditMode&&this.evaluacionId?yield this.evaluacionService.actualizarEvaluacion(this.evaluacionId,i):yield this.evaluacionService.crearEvaluacion(i),this.router.navigate(["/evaluaciones"])}catch(t){console.error("Error al guardar:",t),this.errorMessage="Error al guardar la evaluaci\xF3n. Int\xE9ntalo de nuevo."}finally{this.loading=!1}})}cancelar(){this.router.navigate(["/evaluaciones"])}marcarCamposComoTocados(){Object.keys(this.evaluacionForm.controls).forEach(e=>{this.evaluacionForm.get(e)?.markAsTouched()}),this.preguntas.controls.forEach(e=>{Object.keys(e.controls).forEach(t=>{e.get(t)?.markAsTouched()})})}generarId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}formatearFechaParaInput(e){let t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),s=String(e.getHours()).padStart(2,"0"),o=String(e.getMinutes()).padStart(2,"0");return`${t}-${r}-${i}T${s}:${o}`}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Kn({type:n,selectors:[["app-evaluacion-form"]],decls:70,vars:19,consts:[[1,"form-container"],[1,"form-header","animate-slide-down"],[1,"header-title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"form-icon"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["points","10 9 9 9 8 9"],[1,"btn","btn-secondary",3,"click"],[1,"evaluacion-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-row"],[1,"form-group"],["for","titulo"],["type","text","id","titulo","formControlName","titulo","placeholder","Ej: Examen de Matem\xE1ticas - Unidad 1"],["class","error-message",4,"ngIf"],["for","categoria"],["type","text","id","categoria","formControlName","categoria","placeholder","Ej: Matem\xE1ticas, Historia, Ciencias"],["for","descripcion"],["id","descripcion","formControlName","descripcion","rows","3","placeholder","Describe el contenido y objetivos de esta evaluaci\xF3n..."],["for","fechaLimite"],["type","datetime-local","id","fechaLimite","formControlName","fechaLimite"],["for","estado"],["id","estado","formControlName","estado"],["value","borrador"],["value","activa"],["value","cerrada"],["for","puntajeMaximo"],["type","number","id","puntajeMaximo","formControlName","puntajeMaximo","readonly","",1,"readonly-input"],[1,"section-header"],["type","button",1,"btn","btn-success",3,"click"],["formArrayName","preguntas",1,"preguntas-list"],["class","pregunta-card",3,"formGroupName",4,"ngFor","ngForOf"],["class","empty-preguntas",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error-message"],[1,"pregunta-card",3,"formGroupName"],[1,"pregunta-header"],["type","button","class","btn btn-danger btn-small",3,"click",4,"ngIf"],[3,"for"],["formControlName","texto","rows","2","placeholder","Escribe la pregunta...",3,"id"],["formControlName","tipo",3,"id"],["value","opcion-multiple"],["value","verdadero-falso"],["value","respuesta-corta"],["type","number","formControlName","puntaje","step","0.5","min","0.5",3,"change","id"],["class","form-group",4,"ngIf"],["type","text","formControlName","respuestaCorrecta",3,"id","placeholder"],["type","button",1,"btn","btn-danger","btn-small",3,"click"],["formControlName","opciones","rows","4","placeholder",`Opci\xF3n 1
Opci\xF3n 2
Opci\xF3n 3
Opci\xF3n 4`,3,"id"],[1,"empty-preguntas"]],template:function(t,r){if(t&1&&(k(0,"div",0)(1,"div",1)(2,"div",2),Rr(),k(3,"svg",3),je(4,"path",4)(5,"polyline",5)(6,"line",6)(7,"line",7)(8,"polyline",8),M(),Pr(),k(9,"h1"),V(10),M()(),k(11,"button",9),Be("click",function(){return r.cancelar()}),V(12,"\u2190 Volver"),M()(),k(13,"form",10),Be("ngSubmit",function(){return r.onSubmit()}),k(14,"div",11)(15,"h2"),V(16,"Informaci\xF3n General"),M(),k(17,"div",12)(18,"div",13)(19,"label",14),V(20,"T\xEDtulo de la Evaluaci\xF3n *"),M(),je(21,"input",15),Pe(22,EY,2,0,"span",16),M(),k(23,"div",13)(24,"label",17),V(25,"Categor\xEDa *"),M(),je(26,"input",18),Pe(27,IY,2,0,"span",16),M()(),k(28,"div",13)(29,"label",19),V(30,"Descripci\xF3n *"),M(),je(31,"textarea",20),Pe(32,wY,2,0,"span",16),M(),k(33,"div",12)(34,"div",13)(35,"label",21),V(36,"Fecha y Hora L\xEDmite *"),M(),je(37,"input",22),Pe(38,TY,2,0,"span",16),M(),k(39,"div",13)(40,"label",23),V(41,"Estado *"),M(),k(42,"select",24)(43,"option",25),V(44,"Borrador"),M(),k(45,"option",26),V(46,"Activa"),M(),k(47,"option",27),V(48,"Cerrada"),M()()(),k(49,"div",13)(50,"label",28),V(51,"Puntaje M\xE1ximo"),M(),je(52,"input",29),k(53,"small"),V(54,"Se calcula autom\xE1ticamente seg\xFAn las preguntas"),M()()()(),k(55,"div",11)(56,"div",30)(57,"h2"),V(58,"Preguntas"),M(),k(59,"button",31),Be("click",function(){return r.agregarPregunta()}),V(60," \u2795 Agregar Pregunta "),M()(),k(61,"div",32),Pe(62,RY,31,21,"div",33)(63,PY,3,0,"div",34),M()(),Pe(64,NY,2,1,"div",16),k(65,"div",35)(66,"button",36),Be("click",function(){return r.cancelar()}),V(67,"Cancelar"),M(),k(68,"button",37),V(69),M()()()()),t&2){let i,s,o,a,c,d,h,g;B(10),He(r.isEditMode?"Editar Evaluaci\xF3n":"Nueva Evaluaci\xF3n"),B(3),X("formGroup",r.evaluacionForm),B(8),vt("error",((i=r.evaluacionForm.get("titulo"))==null?null:i.invalid)&&((i=r.evaluacionForm.get("titulo"))==null?null:i.touched)),B(),X("ngIf",((s=r.evaluacionForm.get("titulo"))==null?null:s.invalid)&&((s=r.evaluacionForm.get("titulo"))==null?null:s.touched)),B(4),vt("error",((o=r.evaluacionForm.get("categoria"))==null?null:o.invalid)&&((o=r.evaluacionForm.get("categoria"))==null?null:o.touched)),B(),X("ngIf",((a=r.evaluacionForm.get("categoria"))==null?null:a.invalid)&&((a=r.evaluacionForm.get("categoria"))==null?null:a.touched)),B(4),vt("error",((c=r.evaluacionForm.get("descripcion"))==null?null:c.invalid)&&((c=r.evaluacionForm.get("descripcion"))==null?null:c.touched)),B(),X("ngIf",((d=r.evaluacionForm.get("descripcion"))==null?null:d.invalid)&&((d=r.evaluacionForm.get("descripcion"))==null?null:d.touched)),B(5),vt("error",((h=r.evaluacionForm.get("fechaLimite"))==null?null:h.invalid)&&((h=r.evaluacionForm.get("fechaLimite"))==null?null:h.touched)),B(),X("ngIf",((g=r.evaluacionForm.get("fechaLimite"))==null?null:g.invalid)&&((g=r.evaluacionForm.get("fechaLimite"))==null?null:g.touched)),B(24),X("ngForOf",r.preguntas.controls),B(),X("ngIf",r.preguntas.length===0),B(),X("ngIf",r.errorMessage),B(4),X("disabled",r.loading||r.evaluacionForm.invalid),B(),at(" ",r.loading?"Guardando...":r.isEditMode?"Actualizar Evaluaci\xF3n":"Crear Evaluaci\xF3n"," ")}},dependencies:[si,no,$i,jv,kv,Lv,Vv,Ro,DA,Yl,Kl,Rv,SA,Ql,ap,Ov,Fv],styles:['.form-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f5f7fa,#e9ecef);padding:30px 20px;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.form-header[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto 30px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}.animate-slide-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .6s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}.header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.form-icon[_ngcontent-%COMP%]{width:40px;height:40px;color:#667eea;animation:_ngcontent-%COMP%_bounce 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-8px)}}.form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;font-size:32px;margin:0}.evaluacion-form[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.form-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:30px;margin-bottom:20px;box-shadow:0 2px 8px #0000001a;animation:_ngcontent-%COMP%_slideUp .6s ease-out backwards;transition:all .3s ease}.form-section[_ngcontent-%COMP%]:hover{box-shadow:0 4px 20px #667eea26}.form-section[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.form-section[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.form-section[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;font-size:22px;margin:0 0 25px;padding-bottom:15px;border-bottom:2px solid #f0f0f0;position:relative}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-2px;left:0;width:60px;height:2px;background:linear-gradient(to right,#667eea,#764ba2);animation:_ngcontent-%COMP%_expandWidth .6s ease-out}@keyframes _ngcontent-%COMP%_expandWidth{0%{width:0}to{width:60px}}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;padding-bottom:15px;border-bottom:2px solid #f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;padding:0;border:none}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:20px;animation:_ngcontent-%COMP%_fadeInUp .5s ease-out backwards}.form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#333;font-weight:600;font-size:14px;transition:color .3s ease}.form-group[_ngcontent-%COMP%]:focus-within   label[_ngcontent-%COMP%]{color:#667eea}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px;font-family:inherit;transition:all .3s ease;background:#fff}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a;transform:translateY(-2px)}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.error[_ngcontent-%COMP%]{border-color:#e74c3c;animation:_ngcontent-%COMP%_shake .4s ease-in-out}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-8px)}75%{transform:translate(8px)}}.form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#999;font-size:12px;opacity:0;animation:_ngcontent-%COMP%_fadeIn .5s ease-out .3s forwards}.readonly-input[_ngcontent-%COMP%]{background-color:#f5f5f5;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:12px;margin-top:4px;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.preguntas-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.pregunta-card[_ngcontent-%COMP%]{background:#f8f9fa;border:2px solid #e9ecef;border-radius:12px;padding:20px;transition:all .3s ease;animation:_ngcontent-%COMP%_scaleIn .4s ease-out backwards}.pregunta-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.pregunta-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.pregunta-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.pregunta-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.pregunta-card[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 4px 16px #667eea26;transform:translate(5px)}.pregunta-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:2px solid #dee2e6}.pregunta-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#495057;font-size:18px;transition:color .3s ease}.pregunta-card[_ngcontent-%COMP%]:hover   .pregunta-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#667eea}.empty-preguntas[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#999}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;max-width:1000px;margin:30px auto 0}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#ffffff4d;transform:translate(-50%,-50%);transition:width .6s,height .6s}.btn[_ngcontent-%COMP%]:active:before{width:300px;height:300px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 6px #667eea33}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 16px #667eea66}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#667eea;border:2px solid #667eea}.btn-secondary[_ngcontent-%COMP%]:hover{background:#667eea;color:#fff;box-shadow:0 4px 12px #667eea4d}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);color:#fff;box-shadow:0 4px 6px #28a74533}.btn-success[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1aa179);transform:translateY(-2px);box-shadow:0 6px 16px #28a74566}.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c,#c0392b);color:#fff;box-shadow:0 4px 6px #e74c3c33}.btn-danger[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#c0392b,#a93226);transform:translateY(-2px);box-shadow:0 6px 16px #e74c3c66}.btn-small[_ngcontent-%COMP%]{padding:8px 16px;font-size:14px}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}@media (max-width: 768px){.form-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.btn[_ngcontent-%COMP%]{width:100%}.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:15px}.section-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}.pregunta-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}}']})};function xY(n,e){n&1&&(k(0,"div",12)(1,"p"),V(2,"Cargando estad\xEDsticas..."),M()())}function MY(n,e){n&1&&(k(0,"div",22)(1,"div",23),V(2,"\u{1F4CA}"),M(),k(3,"h2"),V(4,"No hay respuestas registradas"),M(),k(5,"p"),V(6,"A\xFAn no hay estudiantes que hayan completado esta evaluaci\xF3n."),M()())}function kY(n,e){if(n&1&&(k(0,"div",40)(1,"div",41)(2,"span",42),V(3),M(),k(4,"span",43),V(5),M()(),k(6,"div",44),je(7,"div",45),M()()),n&2){let t=e.$implicit,r=Ye(3);B(3),at("",t.rango," pts"),B(2),at("",t.cantidad," estudiantes"),B(2),_u("width",r.getBarWidth(t.cantidad))}}function OY(n,e){if(n&1&&(k(0,"tr")(1,"td"),V(2),M(),k(3,"td"),V(4),M(),k(5,"td")(6,"strong"),V(7),M(),V(8),M(),k(9,"td")(10,"span",46),V(11),M()(),k(12,"td")(13,"span",47),V(14),M()()()),n&2){let t=e.$implicit,r=Ye(3);B(2),He(t.userName),B(2),He(r.formatearFecha(t.fechaEntrega)),B(3),He(r.redondear(t.puntajeObtenido)),B(),at(" / ",r.evaluacion.puntajeMaximo),B(2),X("ngClass",t.estado==="completada"?"estado-activa":"estado-borrador"),B(),at(" ",t.estado," "),B(2),X("ngClass",t.puntajeObtenido>=r.evaluacion.puntajeMaximo*.6?"success":"danger"),B(),at(" ",r.redondear(t.puntajeObtenido/r.evaluacion.puntajeMaximo*100),"% ")}}function FY(n,e){if(n&1&&(k(0,"div",24)(1,"div",25)(2,"h3"),V(3,"\u{1F4C8} Resumen General"),M(),k(4,"div",26)(5,"div",27)(6,"span",28),V(7,"Total de respuestas:"),M(),k(8,"span",29),V(9),M()(),k(10,"div",27)(11,"span",28),V(12,"Promedio general:"),M(),k(13,"span",29),V(14),M()(),k(15,"div",27)(16,"span",28),V(17,"Puntaje m\xE1s alto:"),M(),k(18,"span",30),V(19),M()(),k(20,"div",27)(21,"span",28),V(22,"Puntaje m\xE1s bajo:"),M(),k(23,"span",31),V(24),M()()()(),k(25,"div",25)(26,"h3"),V(27,"\u2713 Aprobaci\xF3n"),M(),k(28,"div",26)(29,"div",27)(30,"span",28),V(31,"Aprobados:"),M(),k(32,"span",30),V(33),M()(),k(34,"div",27)(35,"span",28),V(36,"Reprobados:"),M(),k(37,"span",31),V(38),M()()(),k(39,"div",32),je(40,"div",33)(41,"div",34),M()(),k(42,"div",35)(43,"h3"),V(44,"\u{1F4CA} Distribuci\xF3n de Puntajes"),M(),k(45,"div",36),Pe(46,kY,8,4,"div",37),M()(),k(47,"div",35)(48,"h3"),V(49,"\u{1F4DD} Respuestas Individuales"),M(),k(50,"div",38)(51,"table")(52,"thead")(53,"tr")(54,"th"),V(55,"Estudiante"),M(),k(56,"th"),V(57,"Fecha de Entrega"),M(),k(58,"th"),V(59,"Puntaje"),M(),k(60,"th"),V(61,"Estado"),M(),k(62,"th"),V(63,"Porcentaje"),M()()(),k(64,"tbody"),Pe(65,OY,15,8,"tr",39),M()()()()()),n&2){let t=Ye(2);B(9),He(t.estadisticas.totalRespuestas),B(5),vu("",t.redondear(t.estadisticas.promedioGeneral)," / ",t.evaluacion.puntajeMaximo),B(5),He(t.redondear(t.estadisticas.puntajeMaximo)),B(5),He(t.redondear(t.estadisticas.puntajeMinimo)),B(9),vu("",t.estadisticas.aprobados," (",t.redondear(t.estadisticas.porcentajeAprobacion),"%)"),B(5),vu("",t.estadisticas.reprobados," (",t.redondear(100-t.estadisticas.porcentajeAprobacion),"%)"),B(2),_u("width",t.estadisticas.porcentajeAprobacion+"%"),B(),_u("width",100-t.estadisticas.porcentajeAprobacion+"%"),B(5),X("ngForOf",t.estadisticas.distribucionPuntajes),B(19),X("ngForOf",t.respuestas)}}function LY(n,e){if(n&1&&(k(0,"div")(1,"div",13)(2,"h2"),V(3),M(),k(4,"p",14),V(5),M(),k(6,"div",15)(7,"div",16)(8,"span",17),V(9,"Categor\xEDa:"),M(),k(10,"span",18),V(11),M()(),k(12,"div",16)(13,"span",17),V(14,"Estado:"),M(),k(15,"span",19),V(16),M()(),k(17,"div",16)(18,"span",17),V(19,"Fecha l\xEDmite:"),M(),k(20,"span",18),V(21),M()(),k(22,"div",16)(23,"span",17),V(24,"Puntaje m\xE1ximo:"),M(),k(25,"span",18),V(26),M()(),k(27,"div",16)(28,"span",17),V(29,"Total preguntas:"),M(),k(30,"span",18),V(31),M()()()(),Pe(32,MY,7,0,"div",20)(33,FY,66,15,"div",21),M()),n&2){let t=Ye();B(3),He(t.evaluacion.titulo),B(2),He(t.evaluacion.descripcion),B(6),He(t.evaluacion.categoria),B(4),X("ngClass","estado-"+t.evaluacion.estado),B(),He(t.evaluacion.estado),B(5),He(t.formatearFecha(t.evaluacion.fechaLimite)),B(5),at("",t.evaluacion.puntajeMaximo," puntos"),B(5),He((t.evaluacion.preguntas==null?null:t.evaluacion.preguntas.length)||0),B(),X("ngIf",!t.estadisticas),B(),X("ngIf",t.estadisticas)}}var Hv=class n{evaluacionService=j(Po);router=j(vn);route=j(dr);evaluacion=null;respuestas=[];estadisticas=null;loading=!0;ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&this.cargarDatos(e)}cargarDatos(e){this.loading=!0,this.evaluacionService.getEvaluacionById(e).subscribe({next:t=>{this.evaluacion=t||null,this.evaluacionService.getRespuestasByEvaluacion(e).subscribe({next:r=>{this.respuestas=r,this.calcularEstadisticas(),this.loading=!1},error:r=>{console.error("Error al cargar respuestas:",r),this.loading=!1}})},error:t=>{console.error("Error al cargar evaluaci\xF3n:",t),this.loading=!1}})}calcularEstadisticas(){if(!this.evaluacion||this.respuestas.length===0){this.estadisticas=null;return}let e=this.respuestas.filter(S=>S.estado==="completada").map(S=>S.puntajeObtenido);if(e.length===0){this.estadisticas=null;return}let t=e.length,i=e.reduce((S,P)=>S+P,0)/t,s=Math.max(...e),o=Math.min(...e),a=this.evaluacion.puntajeMaximo*.6,c=e.filter(S=>S>=a).length,d=t-c,h=c/t*100,g=this.evaluacion.puntajeMaximo,I=[{rango:`0-${Math.floor(g*.25)}`,cantidad:e.filter(S=>S<g*.25).length},{rango:`${Math.floor(g*.25)}-${Math.floor(g*.5)}`,cantidad:e.filter(S=>S>=g*.25&&S<g*.5).length},{rango:`${Math.floor(g*.5)}-${Math.floor(g*.75)}`,cantidad:e.filter(S=>S>=g*.5&&S<g*.75).length},{rango:`${Math.floor(g*.75)}-${g}`,cantidad:e.filter(S=>S>=g*.75).length}];this.estadisticas={totalRespuestas:t,promedioGeneral:i,puntajeMaximo:s,puntajeMinimo:o,aprobados:c,reprobados:d,porcentajeAprobacion:h,distribucionPuntajes:I}}volver(){this.router.navigate(["/evaluaciones"])}formatearFecha(e){return new Date(e).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}redondear(e){return Math.round(e*100)/100}getBarWidth(e){return!this.estadisticas||this.estadisticas.totalRespuestas===0?"0%":`${e/this.estadisticas.totalRespuestas*100}%`}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Kn({type:n,selectors:[["app-estadisticas"]],decls:15,vars:2,consts:[[1,"estadisticas-container"],[1,"header"],[1,"header-content","animate-slide-down"],[1,"header-title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"stats-icon"],["x1","18","y1","20","x2","18","y2","10"],["x1","12","y1","20","x2","12","y2","4"],["x1","6","y1","20","x2","6","y2","14"],[1,"btn","btn-secondary",3,"click"],[1,"content"],["class","loading",4,"ngIf"],[4,"ngIf"],[1,"loading"],[1,"info-card"],[1,"descripcion"],[1,"info-grid"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"info-value","badge",3,"ngClass"],["class","empty-state",4,"ngIf"],["class","estadisticas-grid",4,"ngIf"],[1,"empty-state"],[1,"empty-icon"],[1,"estadisticas-grid"],[1,"stats-card"],[1,"stats-list"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value","highlight"],[1,"stat-value","success"],[1,"stat-value","danger"],[1,"progress-bar"],[1,"progress-fill","success"],[1,"progress-fill","danger"],[1,"stats-card","full-width"],[1,"distribution-chart"],["class","distribution-item",4,"ngFor","ngForOf"],[1,"respuestas-table"],[4,"ngFor","ngForOf"],[1,"distribution-item"],[1,"distribution-header"],[1,"range-label"],[1,"range-count"],[1,"distribution-bar"],[1,"bar-fill"],[1,"badge",3,"ngClass"],[3,"ngClass"]],template:function(t,r){t&1&&(k(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Rr(),k(4,"svg",4),je(5,"line",5)(6,"line",6)(7,"line",7),M(),Pr(),k(8,"h1"),V(9,"Estad\xEDsticas de Evaluaci\xF3n"),M()(),k(10,"button",8),Be("click",function(){return r.volver()}),V(11,"\u2190 Volver a Evaluaciones"),M()()(),k(12,"div",9),Pe(13,xY,3,0,"div",10)(14,LY,34,10,"div",11),M()()),t&2&&(B(13),X("ngIf",r.loading),B(),X("ngIf",!r.loading&&r.evaluacion))},dependencies:[si,ch,no,$i],styles:['.estadisticas-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f5f7fa,#e9ecef);animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:20px 0;box-shadow:0 4px 12px #00000026;position:relative;overflow:hidden}.header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;right:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 1px,transparent 1px);background-size:30px 30px;animation:_ngcontent-%COMP%_movePattern 20s linear infinite}@keyframes _ngcontent-%COMP%_movePattern{0%{transform:translate(0) rotate(0)}to{transform:translate(30px,30px) rotate(360deg)}}.header-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px;position:relative;z-index:1}.animate-slide-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .6s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}.header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.stats-icon[_ngcontent-%COMP%]{width:36px;height:36px;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px}.content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:30px 20px}.loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.loading[_ngcontent-%COMP%]:after{content:"";display:block;width:50px;height:50px;margin:20px auto;border:4px solid #f3f3f3;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.info-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:30px;margin-bottom:30px;box-shadow:0 2px 8px #0000001a;animation:_ngcontent-%COMP%_slideUp .6s ease-out;transition:all .3s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.info-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 24px #667eea26}.info-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin:0 0 15px;font-size:24px;position:relative;padding-bottom:10px}.info-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:60px;height:3px;background:linear-gradient(to right,#667eea,#764ba2);animation:_ngcontent-%COMP%_expandWidth .8s ease-out}@keyframes _ngcontent-%COMP%_expandWidth{0%{width:0}to{width:60px}}.descripcion[_ngcontent-%COMP%]{color:#666;margin-bottom:25px;line-height:1.6}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;padding:12px;border-radius:8px;background:#667eea08;transition:all .3s ease;animation:_ngcontent-%COMP%_fadeInUp .5s ease-out backwards}.info-item[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.info-item[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.info-item[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.info-item[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.info-item[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.info-item[_ngcontent-%COMP%]:hover{background:#667eea14;transform:translateY(-3px);box-shadow:0 4px 12px #667eea1a}.info-label[_ngcontent-%COMP%]{font-size:13px;color:#999;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.info-value[_ngcontent-%COMP%]{font-size:15px;color:#333;font-weight:600}.badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;transition:all .3s ease;box-shadow:0 2px 4px #0000001a}.badge[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 4px 8px #00000026}.estado-activa[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4edda,#c3e6cb);color:#155724}.estado-cerrada[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8d7da,#f5c6cb);color:#721c24}.estado-borrador[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3cd,#ffeaa7);color:#856404}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 20px;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;animation:_ngcontent-%COMP%_fadeIn .8s ease-out}.empty-icon[_ngcontent-%COMP%]{font-size:80px;margin-bottom:20px;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-20px)}}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:10px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.estadisticas-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.stats-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:25px;box-shadow:0 2px 8px #0000001a;transition:all .3s ease;animation:_ngcontent-%COMP%_slideUp .5s ease-out backwards}.stats-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.stats-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.stats-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.stats-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.stats-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 24px #667eea26;transform:translateY(-5px)}.stats-card.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.stats-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#333;font-size:18px;padding-bottom:15px;border-bottom:2px solid #f0f0f0;position:relative}.stats-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-2px;left:0;width:40px;height:2px;background:linear-gradient(to right,#667eea,#764ba2)}.stats-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.stat-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px;background:#f8f9fa;border-radius:8px;transition:all .3s ease;animation:_ngcontent-%COMP%_fadeInLeft .5s ease-out backwards}.stat-item[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.stat-item[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.stat-item[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.stat-item[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.stat-item[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}.stat-item[_ngcontent-%COMP%]:hover{background:#667eea14;transform:translate(5px)}.stat-label[_ngcontent-%COMP%]{color:#666;font-size:14px}.stat-value[_ngcontent-%COMP%]{color:#333;font-size:16px;font-weight:700;transition:transform .3s ease}.stat-item[_ngcontent-%COMP%]:hover   .stat-value[_ngcontent-%COMP%]{transform:scale(1.1)}.stat-value.highlight[_ngcontent-%COMP%]{color:#667eea}.stat-value.success[_ngcontent-%COMP%]{color:#28a745}.stat-value.danger[_ngcontent-%COMP%]{color:#e74c3c}.progress-bar[_ngcontent-%COMP%]{display:flex;height:30px;border-radius:8px;overflow:hidden;margin-top:20px;box-shadow:0 2px 4px #0000001a}.progress-fill[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;transition:width 1s ease-out;animation:_ngcontent-%COMP%_fillProgress 1.5s ease-out}@keyframes _ngcontent-%COMP%_fillProgress{0%{width:0!important}}.progress-fill[_ngcontent-%COMP%]{color:#fff;font-size:12px;font-weight:600;transition:width 1s ease-out}.progress-fill.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997)}.progress-fill.danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c,#c0392b)}.distribution-chart[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.distribution-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.distribution-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.range-label[_ngcontent-%COMP%]{font-weight:600;color:#333}.range-count[_ngcontent-%COMP%]{color:#666;font-size:14px}.distribution-bar[_ngcontent-%COMP%]{height:30px;background:#f0f0f0;border-radius:8px;overflow:hidden;box-shadow:inset 0 2px 4px #0000001a}.bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(135deg,#667eea,#764ba2);transition:width 1s ease-out;display:flex;align-items:center;padding:0 10px;animation:_ngcontent-%COMP%_fillProgress 1.5s ease-out}.respuestas-table[_ngcontent-%COMP%]{overflow-x:auto;animation:_ngcontent-%COMP%_slideUp .6s ease-out .5s backwards}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}thead[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef)}th[_ngcontent-%COMP%]{text-align:left;padding:12px;font-weight:600;color:#333;border-bottom:2px solid #667eea;text-transform:uppercase;font-size:12px;letter-spacing:.5px}td[_ngcontent-%COMP%]{padding:12px;border-bottom:1px solid #f0f0f0;color:#666;transition:all .3s ease}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#667eea0d;transform:scale(1.01)}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{color:#333}.success[_ngcontent-%COMP%]{color:#28a745;font-weight:600}.danger[_ngcontent-%COMP%]{color:#e74c3c;font-weight:600}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#667eea4d;transform:translate(-50%,-50%);transition:width .6s,height .6s}.btn[_ngcontent-%COMP%]:active:before{width:300px;height:300px}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#667eea;border:2px solid white;box-shadow:0 2px 8px #0000001a}.btn-secondary[_ngcontent-%COMP%]:hover{background:#fffffff2;transform:translateY(-2px);box-shadow:0 4px 12px #00000026}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.estadisticas-grid[_ngcontent-%COMP%], .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}table[_ngcontent-%COMP%]{font-size:12px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px}}']})};var up=()=>{let n=j($r),e=j(vn);return n.getUser().pipe(ae(t=>t?!0:(e.navigate(["/login"]),!1)))},nU=()=>{let n=j($r),e=j(vn);return n.getUser().pipe(ae(t=>t?(e.navigate(["/evaluaciones"]),!1):!0))};var rU=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:Bv,canActivate:[nU]},{path:"evaluaciones",component:$v,canActivate:[up]},{path:"evaluaciones/nueva",component:cp,canActivate:[up]},{path:"evaluaciones/editar/:id",component:cp,canActivate:[up]},{path:"evaluaciones/estadisticas/:id",component:Hv,canActivate:[up]},{path:"**",redirectTo:"/login"}];var iU={providers:[gI(),bw({eventCoalescing:!0}),mT(rU),s1(()=>o1(w2.firebase)),Zk(()=>nO()),y2(()=>E2())]};var qv=class n{title=Gn("Sistema_de_evaluacion_online");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Kn({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&je(0,"router-outlet")},dependencies:[Ph],encapsulation:2})};Gw(qv,iU).catch(n=>console.error(n));
