<div class="disponibles-container">
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="header-left">
        <h1>ğŸ“š Evaluaciones Disponibles</h1>
        <p class="subtitle">Bienvenido, {{ currentUser?.email }}</p>
      </div>
      <div class="header-right">
        <button class="btn btn-logout" (click)="cerrarSesion()">
          ğŸšª Cerrar SesiÃ³n
        </button>
      </div>
    </div>
  </header>

  <div class="content">
    <!-- Filtros -->
    <div class="filtros-section animate-slide-down">
      <div class="filtro-group">
        <label for="busqueda">ğŸ” Buscar:</label>
        <input 
          type="text" 
          id="busqueda"
          [(ngModel)]="busqueda"
          (input)="onBusquedaChange()"
          placeholder="Buscar por tÃ­tulo o descripciÃ³n..."
          class="input-busqueda">
      </div>

      <div class="filtro-group">
        <label for="categoria">ğŸ“‚ CategorÃ­a:</label>
        <select 
          id="categoria"
          [(ngModel)]="categoriaSeleccionada"
          (change)="onCategoriaChange()"
          class="select-categoria">
          <option *ngFor="let cat of categorias" [value]="cat">{{ cat }}</option>
        </select>
      </div>
    </div>

    <!-- Loading -->
    <div *ngIf="loading" class="loading">
      <p>Cargando evaluaciones disponibles...</p>
    </div>

    <!-- Error -->
    <div *ngIf="!loading && errorMessage" class="alert alert-error animate-shake">
      {{ errorMessage }}
    </div>

    <!-- Sin Evaluaciones -->
    <div *ngIf="!loading && evaluacionesFiltradas.length === 0" class="empty-state">
      <div class="empty-icon">ğŸ“­</div>
      <h2>No hay evaluaciones disponibles</h2>
      <p>No se encontraron evaluaciones activas en este momento.</p>
    </div>

    <!-- Lista de Evaluaciones -->
    <div *ngIf="!loading && evaluacionesFiltradas.length > 0" class="evaluaciones-grid">
      <div *ngFor="let evaluacion of evaluacionesFiltradas; let i = index" 
           class="evaluacion-card animate-fade-in"
           [style.animation-delay]="(i * 0.1) + 's'">
        
        <div class="card-header">
          <h3>{{ evaluacion.titulo }}</h3>
          <span class="badge badge-categoria">{{ evaluacion.categoria }}</span>
        </div>

        <div class="card-body">
          <p class="descripcion">{{ evaluacion.descripcion }}</p>

          <div class="info-grid">
            <div class="info-item">
              <span class="info-label">ğŸ“ Preguntas:</span>
              <span class="info-value">{{ evaluacion.preguntas.length }}</span>
            </div>

            <div class="info-item">
              <span class="info-label">â­ Puntaje MÃ¡ximo:</span>
              <span class="info-value">{{ evaluacion.puntajeMaximo }}</span>
            </div>

            <div class="info-item">
              <span class="info-label">â° Tiempo Restante:</span>
              <span class="info-value" 
                    [class.tiempo-critico]="calcularTiempoRestante(evaluacion.fechaLimite).includes('m') && !calcularTiempoRestante(evaluacion.fechaLimite).includes('h')">
                {{ calcularTiempoRestante(evaluacion.fechaLimite) }}
              </span>
            </div>

            <div class="info-item">
              <span class="info-label">ğŸ“… Fecha LÃ­mite:</span>
              <span class="info-value">{{ evaluacion.fechaLimite.toLocaleString() }}</span>
            </div>
          </div>
        </div>

        <div class="card-footer">
          <button class="btn btn-comenzar" (click)="comenzarEvaluacion(evaluacion.id!)">
            â–¶ï¸ Comenzar EvaluaciÃ³n
          </button>
        </div>
      </div>
    </div>

    <!-- Contador de Resultados -->
    <div *ngIf="!loading && evaluaciones.length > 0" class="resultados-info">
      Mostrando {{ evaluacionesFiltradas.length }} de {{ evaluaciones.length }} evaluaciones
    </div>
  </div>
</div>
