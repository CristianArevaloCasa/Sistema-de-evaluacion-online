var rU=Object.defineProperty,iU=Object.defineProperties;var sU=Object.getOwnPropertyDescriptors;var Op=Object.getOwnPropertySymbols,oU=Object.getPrototypeOf,SA=Object.prototype.hasOwnProperty,AA=Object.prototype.propertyIsEnumerable,aU=Reflect.get;var DA=(n,e,t)=>e in n?rU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,H=(n,e)=>{for(var t in e||={})SA.call(e,t)&&DA(n,t,e[t]);if(Op)for(var t of Op(e))AA.call(e,t)&&DA(n,t,e[t]);return n},se=(n,e)=>iU(n,sU(e));var Wv=(n,e)=>{var t={};for(var r in n)SA.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Op)for(var r of Op(n))e.indexOf(r)<0&&AA.call(n,r)&&(t[r]=n[r]);return t};var Kr=(n,e,t)=>aU(oU(n),t,e);var C=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(d){i(d)}},o=c=>{try{a(t.throw(c))}catch(d){i(d)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});var Kv;function Fp(){return Kv}function Qr(n){let e=Kv;return Kv=n,e}var RA=Symbol("NotFound");function Mc(n){return n===RA||n?.name==="\u0275NotFound"}var on=null,Lp=!1,Qv=1,cU=null,an=Symbol("SIGNAL");function ve(n){let e=on;return on=n,e}function Bp(){return on}var kc={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Oc(n){if(Lp)throw new Error("");if(on===null)return;on.consumerOnSignalRead(n);let e=on.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=on.recomputing;if(r&&(t=e!==void 0?e.nextProducer:on.producers,t!==void 0&&t.producer===n)){on.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===on&&(!r||lU(i,on)))return;let s=Lc(on),o={producer:n,consumer:on,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};on.producersTail=o,e!==void 0?e.nextProducer=o:on.producers=o,s&&MA(n,o)}function PA(){Qv++}function $p(n){if(!(Lc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Qv)){if(!n.producerMustRecompute(n)&&!Ed(n)){jp(n);return}n.producerRecomputeValue(n),jp(n)}}function Yv(n){if(n.consumers===void 0)return;let e=Lp;Lp=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||uU(r)}}finally{Lp=e}}function Jv(){return on?.consumerAllowSignalWrites!==!1}function uU(n){n.dirty=!0,Yv(n),n.consumerMarkedDirty?.(n)}function jp(n){n.dirty=!1,n.lastCleanEpoch=Qv}function Fc(n){return n&&NA(n),ve(n)}function NA(n){n.producersTail=void 0,n.recomputing=!0}function vd(n,e){ve(e),n&&xA(n)}function xA(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Lc(n))do t=Xv(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Ed(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||($p(t),r!==t.version))return!0}return!1}function Id(n){if(Lc(n)){let e=n.producers;for(;e!==void 0;)e=Xv(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function MA(n,e){let t=n.consumersTail,r=Lc(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)MA(i.producer,i)}function Xv(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Lc(e)){let s=e.producers;for(;s!==void 0;)s=Xv(s)}return t}function Lc(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Hp(n){cU?.(n)}function lU(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function qp(n,e){return Object.is(n,e)}function zp(n,e){let t=Object.create(dU);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if($p(t),Oc(t),t.value===_d)throw t.error;return t.value};return r[an]=t,Hp(t),r}var Vp=Symbol("UNSET"),Up=Symbol("COMPUTING"),_d=Symbol("ERRORED"),dU=se(H({},kc),{value:Vp,dirty:!0,error:null,equal:qp,kind:"computed",producerMustRecompute(n){return n.value===Vp||n.value===Up},producerRecomputeValue(n){if(n.value===Up)throw new Error("");let e=n.value;n.value=Up;let t=Fc(n),r,i=!1;try{r=n.computation(),ve(null),i=e!==Vp&&e!==_d&&r!==_d&&n.equal(e,r)}catch(s){r=_d,n.error=s}finally{vd(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function hU(){throw new Error}var kA=hU;function OA(n){kA(n)}function Zv(n){kA=n}var fU=null;function eE(n,e){let t=Object.create(Gp);t.value=n,e!==void 0&&(t.equal=e);let r=()=>FA(t);return r[an]=t,Hp(t),[r,o=>Vc(t,o),o=>tE(t,o)]}function FA(n){return Oc(n),n.value}function Vc(n,e){Jv()||OA(n),n.equal(n.value,e)||(n.value=e,pU(n))}function tE(n,e){Jv()||OA(n),Vc(n,e(n.value))}var Gp=se(H({},kc),{equal:qp,value:void 0,kind:"signal"});function pU(n){n.version++,PA(),Yv(n),fU?.(n)}function ye(n){return typeof n=="function"}function Uc(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Wp=Uc(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Wo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var lt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ye(r))try{r()}catch(s){e=s instanceof Wp?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{LA(s)}catch(o){e=e??[],o instanceof Wp?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Wp(e)}}add(e){var t;if(e&&e!==this)if(this.closed)LA(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Wo(t,e)}remove(e){let{_finalizers:t}=this;t&&Wo(t,e),e instanceof n&&e._removeParent(this)}};lt.EMPTY=(()=>{let n=new lt;return n.closed=!0,n})();var nE=lt.EMPTY;function Kp(n){return n instanceof lt||n&&"closed"in n&&ye(n.remove)&&ye(n.add)&&ye(n.unsubscribe)}function LA(n){ye(n)?n():n.unsubscribe()}var br={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var jc={setTimeout(n,e,...t){let{delegate:r}=jc;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=jc;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Qp(n){jc.setTimeout(()=>{let{onUnhandledError:e}=br;if(e)e(n);else throw n})}function wd(){}var VA=rE("C",void 0,void 0);function UA(n){return rE("E",void 0,n)}function jA(n){return rE("N",n,void 0)}function rE(n,e,t){return{kind:n,value:e,error:t}}var Ko=null;function Bc(n){if(br.useDeprecatedSynchronousErrorHandling){let e=!Ko;if(e&&(Ko={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ko;if(Ko=null,t)throw r}}else n()}function BA(n){br.useDeprecatedSynchronousErrorHandling&&Ko&&(Ko.errorThrown=!0,Ko.error=n)}var Qo=class extends lt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Kp(e)&&e.add(this)):this.destination=yU}static create(e,t,r){return new $c(e,t,r)}next(e){this.isStopped?sE(jA(e),this):this._next(e)}error(e){this.isStopped?sE(UA(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?sE(VA,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},gU=Function.prototype.bind;function iE(n,e){return gU.call(n,e)}var oE=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Yp(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Yp(r)}else Yp(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Yp(t)}}},$c=class extends Qo{constructor(e,t,r){super();let i;if(ye(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&br.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&iE(e.next,s),error:e.error&&iE(e.error,s),complete:e.complete&&iE(e.complete,s)}):i=e}this.destination=new oE(i)}};function Yp(n){br.useDeprecatedSynchronousErrorHandling?BA(n):Qp(n)}function mU(n){throw n}function sE(n,e){let{onStoppedNotification:t}=br;t&&jc.setTimeout(()=>t(n,e))}var yU={closed:!0,next:wd,error:mU,complete:wd};var Hc=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Vn(n){return n}function Jp(...n){return aE(n)}function aE(n){return n.length===0?Vn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var fe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=vU(t)?t:new $c(t,r,i);return Bc(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=$A(r),new r((i,s)=>{let o=new $c({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Hc](){return this}pipe(...t){return aE(t)(this)}toPromise(t){return t=$A(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function $A(n){var e;return(e=n??br.Promise)!==null&&e!==void 0?e:Promise}function _U(n){return n&&ye(n.next)&&ye(n.error)&&ye(n.complete)}function vU(n){return n&&n instanceof Qo||_U(n)&&Kp(n)}function cE(n){return ye(n?.lift)}function xe(n){return e=>{if(cE(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ae(n,e,t,r,i){return new uE(n,e,t,r,i)}var uE=class extends Qo{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function qc(){return xe((n,e)=>{let t=null;n._refCount++;let r=Ae(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var zc=class extends fe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,cE(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new lt;let t=this.getSubject();e.add(this.source.subscribe(Ae(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=lt.EMPTY)}return e}refCount(){return qc()(this)}};var HA=Uc(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ft=(()=>{class n extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Xp(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new HA}next(t){Bc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Bc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Bc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?nE:(this.currentObservers=null,s.push(t),new lt(()=>{this.currentObservers=null,Wo(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new fe;return t.source=this,t}}return n.create=(e,t)=>new Xp(e,t),n})(),Xp=class extends Ft{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:nE}};var Jt=class extends Ft{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var lE={now(){return(lE.delegate||Date).now()},delegate:void 0};var Zp=class extends lt{constructor(e,t){super()}schedule(e,t=0){return this}};var Td={setInterval(n,e,...t){let{delegate:r}=Td;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Td;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Gc=class extends Zp{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Td.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Td.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Wo(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Wc=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Wc.now=lE.now;var Kc=class extends Wc{constructor(e,t=Wc.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var dE=new Kc(Gc);var eg=class extends Gc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var tg=class extends Kc{};var hE=new tg(eg);var Dn=new fe(n=>n.complete());function qA(n){return n&&ye(n.schedule)}function zA(n){return n[n.length-1]}function ng(n){return ye(zA(n))?n.pop():void 0}function Ls(n){return qA(zA(n))?n.pop():void 0}function fE(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function WA(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{d(r.next(h))}catch(g){o(g)}}function c(h){try{d(r.throw(h))}catch(g){o(g)}}function d(h){h.done?s(h.value):i(h.value).then(a,c)}d((r=r.apply(n,e||[])).next())})}function GA(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yo(n){return this instanceof Yo?(this.v=n,this):new Yo(n)}function KA(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(S){return function(P){return Promise.resolve(P).then(S,g)}}function a(S,P){r[S]&&(i[S]=function(U){return new Promise(function(O,G){s.push([S,U,O,G])>1||c(S,U)})},P&&(i[S]=P(i[S])))}function c(S,P){try{d(r[S](P))}catch(U){I(s[0][3],U)}}function d(S){S.value instanceof Yo?Promise.resolve(S.value.v).then(h,g):I(s[0][2],S)}function h(S){c("next",S)}function g(S){c("throw",S)}function I(S,P){S(P),s.shift(),s.length&&c(s[0][0],s[0][1])}}function QA(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof GA=="function"?GA(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},o)}}var rg=n=>n&&typeof n.length=="number"&&typeof n!="function";function ig(n){return ye(n?.then)}function sg(n){return ye(n[Hc])}function og(n){return Symbol.asyncIterator&&ye(n?.[Symbol.asyncIterator])}function ag(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function EU(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var cg=EU();function ug(n){return ye(n?.[cg])}function lg(n){return KA(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Yo(t.read());if(i)return yield Yo(void 0);yield yield Yo(r)}}finally{t.releaseLock()}})}function dg(n){return ye(n?.getReader)}function wt(n){if(n instanceof fe)return n;if(n!=null){if(sg(n))return IU(n);if(rg(n))return wU(n);if(ig(n))return TU(n);if(og(n))return YA(n);if(ug(n))return bU(n);if(dg(n))return CU(n)}throw ag(n)}function IU(n){return new fe(e=>{let t=n[Hc]();if(ye(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function wU(n){return new fe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function TU(n){return new fe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Qp)})}function bU(n){return new fe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function YA(n){return new fe(e=>{DU(n,e).catch(t=>e.error(t))})}function CU(n){return YA(lg(n))}function DU(n,e){var t,r,i,s;return WA(this,void 0,void 0,function*(){try{for(t=QA(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Sn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Vs(n,e=0){return xe((t,r)=>{t.subscribe(Ae(r,i=>Sn(r,n,()=>r.next(i),e),()=>Sn(r,n,()=>r.complete(),e),i=>Sn(r,n,()=>r.error(i),e)))})}function Us(n,e=0){return xe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function JA(n,e){return wt(n).pipe(Us(e),Vs(e))}function XA(n,e){return wt(n).pipe(Us(e),Vs(e))}function ZA(n,e){return new fe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function eR(n,e){return new fe(t=>{let r;return Sn(t,e,()=>{r=n[cg](),Sn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>ye(r?.return)&&r.return()})}function hg(n,e){if(!n)throw new Error("Iterable cannot be null");return new fe(t=>{Sn(t,e,()=>{let r=n[Symbol.asyncIterator]();Sn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function tR(n,e){return hg(lg(n),e)}function nR(n,e){if(n!=null){if(sg(n))return JA(n,e);if(rg(n))return ZA(n,e);if(ig(n))return XA(n,e);if(og(n))return hg(n,e);if(ug(n))return eR(n,e);if(dg(n))return tR(n,e)}throw ag(n)}function at(n,e){return e?nR(n,e):wt(n)}function de(...n){let e=Ls(n);return at(n,e)}function Qc(n,e){let t=ye(n)?n:()=>n,r=i=>i.error(t());return new fe(e?i=>e.schedule(r,0,i):r)}function pE(n){return!!n&&(n instanceof fe||ye(n.lift)&&ye(n.subscribe))}var Si=Uc(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ae(n,e){return xe((t,r)=>{let i=0;t.subscribe(Ae(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:SU}=Array;function AU(n,e){return SU(e)?n(...e):n(e)}function fg(n){return ae(e=>AU(n,e))}var{isArray:RU}=Array,{getPrototypeOf:PU,prototype:NU,keys:xU}=Object;function pg(n){if(n.length===1){let e=n[0];if(RU(e))return{args:e,keys:null};if(MU(e)){let t=xU(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function MU(n){return n&&typeof n=="object"&&PU(n)===NU}function gg(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function mg(...n){let e=Ls(n),t=ng(n),{args:r,keys:i}=pg(n);if(r.length===0)return at([],e);let s=new fe(kU(r,e,i?o=>gg(i,o):Vn));return t?s.pipe(fg(t)):s}function kU(n,e,t=Vn){return r=>{rR(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)rR(e,()=>{let d=at(n[c],e),h=!1;d.subscribe(Ae(r,g=>{s[c]=g,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function rR(n,e,t){n?Sn(t,n,e):e()}function iR(n,e,t,r,i,s,o,a){let c=[],d=0,h=0,g=!1,I=()=>{g&&!c.length&&!d&&e.complete()},S=U=>d<r?P(U):c.push(U),P=U=>{s&&e.next(U),d++;let O=!1;wt(t(U,h++)).subscribe(Ae(e,G=>{i?.(G),s?S(G):e.next(G)},()=>{O=!0},void 0,()=>{if(O)try{for(d--;c.length&&d<r;){let G=c.shift();o?Sn(e,o,()=>P(G)):P(G)}I()}catch(G){e.error(G)}}))};return n.subscribe(Ae(e,S,()=>{g=!0,I()})),()=>{a?.()}}function Lt(n,e,t=1/0){return ye(e)?Lt((r,i)=>ae((s,o)=>e(r,s,i,o))(wt(n(r,i))),t):(typeof e=="number"&&(t=e),xe((r,i)=>iR(r,i,n,t)))}function sR(n=1/0){return Lt(Vn,n)}function oR(){return sR(1)}function Yc(...n){return oR()(at(n,Ls(n)))}function bd(n){return new fe(e=>{wt(n()).subscribe(e)})}function gE(...n){let e=ng(n),{args:t,keys:r}=pg(n),i=new fe(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,d=o;for(let h=0;h<o;h++){let g=!1;wt(t[h]).subscribe(Ae(s,I=>{g||(g=!0,d--),a[h]=I},()=>c--,void 0,()=>{(!c||!g)&&(d||s.next(r?gg(r,a):a),s.complete())}))}});return e?i.pipe(fg(e)):i}function Un(n,e){return xe((t,r)=>{let i=0;t.subscribe(Ae(r,s=>n.call(e,s,i++)&&r.next(s)))})}function js(n){return xe((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Ae(t,void 0,void 0,o=>{s=wt(n(o,js(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function aR(n,e,t,r,i){return(s,o)=>{let a=t,c=e,d=0;s.subscribe(Ae(o,h=>{let g=d++;c=a?n(c,h,g):(a=!0,h),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Jc(n,e){return ye(e)?Lt(n,e,1):Lt(n,1)}function Bs(n){return xe((e,t)=>{let r=!1;e.subscribe(Ae(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ai(n){return n<=0?()=>Dn:xe((e,t)=>{let r=0;e.subscribe(Ae(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function yg(n=OU){return xe((e,t)=>{let r=!1;e.subscribe(Ae(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function OU(){return new Si}function Cd(n){return xe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ri(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Un((i,s)=>n(i,s,r)):Vn,Ai(1),t?Bs(e):yg(()=>new Si))}function Xc(n){return n<=0?()=>Dn:xe((e,t)=>{let r=[];e.subscribe(Ae(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function mE(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Un((i,s)=>n(i,s,r)):Vn,Xc(1),t?Bs(e):yg(()=>new Si))}function _g(n,e){return xe(aR(n,e,arguments.length>=2,!0))}function vg(...n){let e=Ls(n);return xe((t,r)=>{(e?Yc(n,t,e):Yc(n,t)).subscribe(r)})}function An(n,e){return xe((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Ae(r,c=>{i?.unsubscribe();let d=0,h=s++;wt(n(c,h)).subscribe(i=Ae(r,g=>r.next(e?e(c,g,h,d++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Eg(n){return xe((e,t)=>{wt(n).subscribe(Ae(t,()=>t.complete(),wd)),!t.closed&&e.subscribe(t)})}function qt(n,e,t){let r=ye(n)||e||t?{next:n,error:e,complete:t}:n;return r?xe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Ae(s,c=>{var d;(d=r.next)===null||d===void 0||d.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,c),s.error(c)},()=>{var c,d;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):Vn}function cR(n){let e=ve(null);try{return n()}finally{ve(e)}}var Xo=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},RE=new Xo("20.3.13");var PE="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Z=class extends Error{code;constructor(e,t){super(eu(e,t)),this.code=e}};function FU(n){return`NG0${Math.abs(n)}`}function eu(n,e){return`${FU(n)}${e?": "+e:""}`}function ze(n){for(let e in n)if(n[e]===ze)return e;throw Error("")}function dR(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ni(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Ni).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function NE(n,e){return n?e?`${n} ${e}`:n:e||""}var LU=ze({__forward_ref__:ze});function gn(n){return n.__forward_ref__=gn,n.toString=function(){return Ni(this())},n}function Xt(n){return xE(n)?n():n}function xE(n){return typeof n=="function"&&n.hasOwnProperty(LU)&&n.__forward_ref__===gn}function ie(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Yr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Rd(n){return VU(n,bg)}function ME(n){return Rd(n)!==null}function VU(n,e){return n.hasOwnProperty(e)&&n[e]||null}function UU(n){let e=n?.[bg]??null;return e||null}function _E(n){return n&&n.hasOwnProperty(wg)?n[wg]:null}var bg=ze({\u0275prov:ze}),wg=ze({\u0275inj:ze}),ee=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ie({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function kE(n){return n&&!!n.\u0275providers}var OE=ze({\u0275cmp:ze}),FE=ze({\u0275dir:ze}),LE=ze({\u0275pipe:ze}),VE=ze({\u0275mod:ze}),Sd=ze({\u0275fac:ze}),ra=ze({__NG_ELEMENT_ID__:ze}),uR=ze({__NG_ENV_ID__:ze});function tu(n){return typeof n=="string"?n:n==null?"":String(n)}function hR(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():tu(n)}var fR=ze({ngErrorCode:ze}),jU=ze({ngErrorMessage:ze}),BU=ze({ngTokenPath:ze});function UE(n,e){return pR("",-200,e)}function Cg(n,e){throw new Z(-201,!1)}function pR(n,e,t){let r=new Z(e,n);return r[fR]=e,r[jU]=n,t&&(r[BU]=t),r}function $U(n){return n[fR]}var vE;function gR(){return vE}function jn(n){let e=vE;return vE=n,e}function jE(n,e,t){let r=Rd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Cg(n,"Injector")}var HU={},Jo=HU,EE="__NG_DI_FLAG__",IE=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Zo(t)||0;try{return this.injector.get(e,r&8?null:Jo,r)}catch(i){if(Mc(i))return i;throw i}}};function qU(n,e=0){let t=Fp();if(t===void 0)throw new Z(-203,!1);if(t===null)return jE(n,void 0,e);{let r=zU(e),i=t.retrieve(n,r);if(Mc(i)){if(r.optional)return null;throw i}return i}}function we(n,e=0){return(gR()||qU)(Xt(n),e)}function j(n,e){return we(n,Zo(e))}function Zo(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function zU(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function wE(n){let e=[];for(let t=0;t<n.length;t++){let r=Xt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Z(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],c=GU(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(we(i,s))}else e.push(we(r))}return e}function mR(n,e){return n[EE]=e,n.prototype[EE]=e,n}function GU(n){return n[EE]}function ea(n,e){let t=n.hasOwnProperty(Sd);return t?n[Sd]:null}function Dg(n,e){n.forEach(t=>Array.isArray(t)?Dg(t,e):e(t))}function BE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Pd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function yR(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function _R(n,e,t){let r=nu(n,e);return r>=0?n[r|1]=t:(r=~r,yR(n,r,e,t)),r}function Sg(n,e){let t=nu(n,e);if(t>=0)return n[t|1]}function nu(n,e){return WU(n,e,1)}function WU(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Hs={},Bn=[],Mi=new ee(""),$E=new ee("",-1),HE=new ee(""),Ad=class{get(e,t=Jo){if(t===Jo){let i=pR("",-201);throw i.name="\u0275NotFound",i}return t}};function qE(n){return n[VE]||null}function qs(n){return n[OE]||null}function zE(n){return n[FE]||null}function vR(n){return n[LE]||null}function $n(n){return{\u0275providers:n}}function ER(n){return $n([{provide:Mi,multi:!0,useValue:n}])}function IR(...n){return{\u0275providers:GE(!0,n),\u0275fromNgModule:!0}}function GE(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Dg(e,o=>{let a=o;Tg(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&wR(i,s),t}function wR(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];WE(i,s=>{e(s,r)})}}function Tg(n,e,t,r){if(n=Xt(n),!n)return!1;let i=null,s=_E(n),o=!s&&qs(n);if(!s&&!o){let c=n.ngModule;if(s=_E(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let d of c)Tg(d,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let d;try{Dg(s.imports,h=>{Tg(h,e,t,r)&&(d||=[],d.push(h))})}finally{}d!==void 0&&wR(d,e)}if(!a){let d=ea(i)||(()=>new i);e({provide:i,useFactory:d,deps:Bn},i),e({provide:HE,useValue:i,multi:!0},i),e({provide:Mi,useValue:()=>we(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let d=n;WE(c,h=>{e(h,d)})}}else return!1;return i!==n&&n.providers!==void 0}function WE(n,e){for(let t of n)kE(t)&&(t=t.\u0275providers),Array.isArray(t)?WE(t,e):e(t)}var KU=ze({provide:String,useValue:ze});function TR(n){return n!==null&&typeof n=="object"&&KU in n}function QU(n){return!!(n&&n.useExisting)}function YU(n){return!!(n&&n.useFactory)}function ta(n){return typeof n=="function"}function bR(n){return!!n.useClass}var Nd=new ee(""),Ig={},lR={},yE;function xd(){return yE===void 0&&(yE=new Ad),yE}var Vt=class{},na=class extends Vt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,bE(e,o=>this.processProvider(o)),this.records.set($E,Zc(void 0,this)),i.has("environment")&&this.records.set(Vt,Zc(void 0,this));let s=this.records.get(Nd);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(HE,Bn,{self:!0}))}retrieve(e,t){let r=Zo(t)||0;try{return this.get(e,Jo,r)}catch(i){if(Mc(i))return i;throw i}}destroy(){Dd(this),this._destroyed=!0;let e=ve(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ve(e)}}onDestroy(e){return Dd(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Dd(this);let t=Qr(this),r=jn(void 0),i;try{return e()}finally{Qr(t),jn(r)}}get(e,t=Jo,r){if(Dd(this),e.hasOwnProperty(uR))return e[uR](this);let i=Zo(r),s,o=Qr(this),a=jn(void 0);try{if(!(i&4)){let d=this.records.get(e);if(d===void 0){let h=tj(e)&&Rd(e);h&&this.injectableDefInScope(h)?d=Zc(TE(e),Ig):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,i)}let c=i&2?xd():this.parent;return t=i&8&&t===Jo?null:t,c.get(e,t)}catch(c){let d=$U(c);throw d===-200||d===-201?new Z(d,null):c}finally{jn(a),Qr(o)}}resolveInjectorInitializers(){let e=ve(null),t=Qr(this),r=jn(void 0),i;try{let s=this.get(Mi,Bn,{self:!0});for(let o of s)o()}finally{Qr(t),jn(r),ve(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ni(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Xt(e);let t=ta(e)?e:Xt(e&&e.provide),r=XU(e);if(!ta(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Zc(void 0,Ig,!0),i.factory=()=>wE(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ve(null);try{if(t.value===lR)throw UE(Ni(e));return t.value===Ig&&(t.value=lR,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&ej(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ve(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Xt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function TE(n){let e=Rd(n),t=e!==null?e.factory:ea(n);if(t!==null)return t;if(n instanceof ee)throw new Z(204,!1);if(n instanceof Function)return JU(n);throw new Z(204,!1)}function JU(n){if(n.length>0)throw new Z(204,!1);let t=UU(n);return t!==null?()=>t.factory(n):()=>new n}function XU(n){if(TR(n))return Zc(void 0,n.useValue);{let e=KE(n);return Zc(e,Ig)}}function KE(n,e,t){let r;if(ta(n)){let i=Xt(n);return ea(i)||TE(i)}else if(TR(n))r=()=>Xt(n.useValue);else if(YU(n))r=()=>n.useFactory(...wE(n.deps||[]));else if(QU(n))r=(i,s)=>we(Xt(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Xt(n&&(n.useClass||n.provide));if(ZU(n))r=()=>new i(...wE(n.deps));else return ea(i)||TE(i)}return r}function Dd(n){if(n.destroyed)throw new Z(205,!1)}function Zc(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function ZU(n){return!!n.deps}function ej(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function tj(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function bE(n,e){for(let t of n)Array.isArray(t)?bE(t,e):t&&kE(t)?bE(t.\u0275providers,e):e(t)}function Ut(n,e){let t;n instanceof na?(Dd(n),t=n):t=new IE(n);let r,i=Qr(t),s=jn(void 0);try{return e()}finally{Qr(i),jn(s)}}function CR(){return gR()!==void 0||Fp()!=null}var Dr=0,Ee=1,pe=2,Zt=3,ir=4,sr=5,Md=6,ru=7,cn=8,zs=9,ki=10,dt=11,iu=12,QE=13,ia=14,or=15,sa=16,oa=17,aa=18,kd=19,YE=20,Pi=21,Ag=22,Od=23,Hn=24,ca=25,Fd=26,qn=27,DR=1;var Gs=7,Ld=8,Vd=9,Rn=10;function Jr(n){return Array.isArray(n)&&typeof n[DR]=="object"}function Sr(n){return Array.isArray(n)&&n[DR]===!0}function JE(n){return(n.flags&4)!==0}function Ws(n){return n.componentOffset>-1}function Ud(n){return(n.flags&1)===1}function Xr(n){return!!n.template}function su(n){return(n[pe]&512)!==0}function ua(n){return(n[pe]&256)===256}var SR="svg",AR="math";function ar(n){for(;Array.isArray(n);)n=n[Dr];return n}function XE(n,e){return ar(e[n])}function Ar(n,e){return ar(e[n.index])}function Rg(n,e){return n.data[e]}function cr(n,e){let t=e[n];return Jr(t)?t:t[Dr]}function Pg(n){return(n[pe]&128)===128}function RR(n){return Sr(n[Zt])}function jd(n,e){return e==null?null:n[e]}function ZE(n){n[oa]=0}function eI(n){n[pe]&1024||(n[pe]|=1024,Pg(n)&&ou(n))}function PR(n,e){for(;n>0;)e=e[ia],n--;return e}function Bd(n){return!!(n[pe]&9216||n[Hn]?.dirty)}function Ng(n){n[ki].changeDetectionScheduler?.notify(8),n[pe]&64&&(n[pe]|=1024),Bd(n)&&ou(n)}function ou(n){n[ki].changeDetectionScheduler?.notify(0);let e=$s(n);for(;e!==null&&!(e[pe]&8192||(e[pe]|=8192,!Pg(e)));)e=$s(e)}function tI(n,e){if(ua(n))throw new Z(911,!1);n[Pi]===null&&(n[Pi]=[]),n[Pi].push(e)}function NR(n,e){if(n[Pi]===null)return;let t=n[Pi].indexOf(e);t!==-1&&n[Pi].splice(t,1)}function $s(n){let e=n[Zt];return Sr(e)?e[Zt]:e}function xR(n){return n[ru]??=[]}function MR(n){return n.cleanup??=[]}var Ce={lFrame:QR(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var CE=!1;function kR(){return Ce.lFrame.elementDepthCount}function OR(){Ce.lFrame.elementDepthCount++}function FR(){Ce.lFrame.elementDepthCount--}function nI(){return Ce.bindingsEnabled}function LR(){return Ce.skipHydrationRootTNode!==null}function VR(n){return Ce.skipHydrationRootTNode===n}function UR(){Ce.skipHydrationRootTNode=null}function Ze(){return Ce.lFrame.lView}function zn(){return Ce.lFrame.tView}function Pn(n){return Ce.lFrame.contextLView=n,n[cn]}function Nn(n){return Ce.lFrame.contextLView=null,n}function mn(){let n=rI();for(;n!==null&&n.type===64;)n=n.parent;return n}function rI(){return Ce.lFrame.currentTNode}function jR(){let n=Ce.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function au(n,e){let t=Ce.lFrame;t.currentTNode=n,t.isParent=e}function iI(){return Ce.lFrame.isParent}function BR(){Ce.lFrame.isParent=!1}function sI(){return CE}function oI(n){let e=CE;return CE=n,e}function $R(){return Ce.lFrame.bindingIndex}function HR(n){return Ce.lFrame.bindingIndex=n}function $d(){return Ce.lFrame.bindingIndex++}function aI(n){let e=Ce.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function qR(){return Ce.lFrame.inI18n}function zR(n,e){let t=Ce.lFrame;t.bindingIndex=t.bindingRootIndex=n,xg(e)}function GR(){return Ce.lFrame.currentDirectiveIndex}function xg(n){Ce.lFrame.currentDirectiveIndex=n}function WR(n){let e=Ce.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function cI(n){Ce.lFrame.currentQueryIndex=n}function nj(n){let e=n[Ee];return e.type===2?e.declTNode:e.type===1?n[sr]:null}function uI(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=nj(s),i===null||(s=s[ia],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Ce.lFrame=KR();return r.currentTNode=e,r.lView=n,!0}function Mg(n){let e=KR(),t=n[Ee];Ce.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function KR(){let n=Ce.lFrame,e=n===null?null:n.child;return e===null?QR(n):e}function QR(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function YR(){let n=Ce.lFrame;return Ce.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var lI=YR;function kg(){let n=YR();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function JR(n){return(Ce.lFrame.contextLView=PR(n,Ce.lFrame.contextLView))[cn]}function Ks(){return Ce.lFrame.selectedIndex}function Qs(n){Ce.lFrame.selectedIndex=n}function Og(){let n=Ce.lFrame;return Rg(n.tView,n.selectedIndex)}function XR(){return Ce.lFrame.currentNamespace}var ZR=!0;function Fg(){return ZR}function Lg(n){ZR=n}function DE(n,e=null,t=null,r){let i=dI(n,e,t,r);return i.resolveInjectorInitializers(),i}function dI(n,e=null,t=null,r,i=new Set){let s=[t||Bn,IR(n)];return r=r||(typeof n=="object"?void 0:Ni(n)),new na(s,e||xd(),r||null,i)}var Tt=class n{static THROW_IF_NOT_FOUND=Jo;static NULL=new Ad;static create(e,t){if(Array.isArray(e))return DE({name:""},t,e,"");{let r=e.name??"";return DE({name:r},e.parent,e.providers,r)}}static \u0275prov=ie({token:n,providedIn:"any",factory:()=>we($E)});static __NG_ELEMENT_ID__=-1},zt=new ee(""),Rr=(()=>{class n{static __NG_ELEMENT_ID__=rj;static __NG_ENV_ID__=t=>t}return n})(),SE=class extends Rr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ua(this._lView)}onDestroy(e){let t=this._lView;return tI(t,e),()=>NR(t,e)}};function rj(){return new SE(Ze())}var Cr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},xn=new ee("",{providedIn:"root",factory:()=>{let n=j(Vt),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Cr),e.handleError(t))}}}),eP={provide:Mi,useValue:()=>void j(Cr),multi:!0},ij=new ee("",{providedIn:"root",factory:()=>{let n=j(zt).defaultView;if(!n)return;let e=j(xn),t=s=>{e(s.reason),s.preventDefault()},r=s=>{s.error?e(s.error):e(new Error(s.message,{cause:s})),s.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),j(Rr).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function hI(){return $n([ER(()=>void j(ij))])}function fI(n){return typeof n=="function"&&n[an]!==void 0}function Gn(n,e){let[t,r,i]=eE(n,e?.equal),s=t,o=s[an];return s.set=r,s.update=i,s.asReadonly=tP.bind(s),s}function tP(){let n=this[an];if(n.readonlyFn===void 0){let e=()=>this();e[an]=n,n.readonlyFn=e}return n.readonlyFn}function pI(n){return fI(n)&&typeof n.set=="function"}var Vg=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=sj}return n})();function sj(){return new Vg(Ze(),mn())}var xi=class{},Hd=new ee("",{providedIn:"root",factory:()=>!1});var gI=new ee(""),mI=new ee(""),Zr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Jt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new fe(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}return n})(),cu=(()=>{class n{internalPendingTasks=j(Zr);scheduler=j(xi);errorHandler=j(xn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}return n})();function qd(...n){}var yI=(()=>{class n{static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new AE})}return n})(),AE=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function gu(n){return{toString:n}.toString()}var Ug="__parameters__";function pj(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function gj(n,e,t){return gu(()=>{let r=pj(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,d,h){let g=c.hasOwnProperty(Ug)?c[Ug]:Object.defineProperty(c,Ug,{value:[]})[Ug];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(o),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Wn=mR(gj("Optional"),8);function mj(n){return typeof n=="function"}var qg=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function kP(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Fi=(()=>{let n=()=>OP;return n.ngInherit=!0,n})();function OP(n){return n.type.prototype.ngOnChanges&&(n.setInput=_j),yj}function yj(){let n=LP(this),e=n?.current;if(e){let t=n.previous;if(t===Hs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function _j(n,e,t,r,i){let s=this.declaredInputs[r],o=LP(n)||vj(n,{previous:Hs,current:null}),a=o.current||(o.current={}),c=o.previous,d=c[s];a[s]=new qg(d&&d.currentValue,t,c===Hs),kP(n,e,i,t)}var FP="__ngSimpleChanges__";function LP(n){return n[FP]||null}function vj(n,e){return n[FP]=e}var nP=[];var We=function(n,e=null,t){for(let r=0;r<nP.length;r++){let i=nP[r];i(n,e,t)}};function Ej(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=OP(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function VP(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Bg(n,e,t){UP(n,e,3,t)}function $g(n,e,t,r){(n[pe]&3)===t&&UP(n,e,t,r)}function _I(n,e){let t=n[pe];(t&3)===e&&(t&=16383,t+=1,n[pe]=t)}function UP(n,e,t,r){let i=r!==void 0?n[oa]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[oa]+=65536),(a<s||s==-1)&&(Ij(n,t,e,c),n[oa]=(n[oa]&4294901760)+c+2),c++}function rP(n,e){We(4,n,e);let t=ve(null);try{e.call(n)}finally{ve(t),We(5,n,e)}}function Ij(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[pe]>>14<n[oa]>>16&&(n[pe]&3)===e&&(n[pe]+=16384,rP(a,s)):rP(a,s)}var lu=-1,da=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function wj(n){return(n.flags&8)!==0}function Tj(n){return(n.flags&16)!==0}function bj(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];Dj(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Cj(n){return n===3||n===4||n===6}function Dj(n){return n.charCodeAt(0)===64}function Wd(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?iP(n,t,i,null,e[++r]):iP(n,t,i,null,null))}}return n}function iP(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function jP(n){return n!==lu}function zg(n){return n&32767}function Sj(n){return n>>16}function Gg(n,e){let t=Sj(n),r=e;for(;t>0;)r=r[ia],t--;return r}var AI=!0;function sP(n){let e=AI;return AI=n,e}var Aj=256,BP=Aj-1,$P=5,Rj=0,ei={};function Pj(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ra)&&(r=t[ra]),r==null&&(r=t[ra]=Rj++);let i=r&BP,s=1<<i;e.data[n+(i>>$P)]|=s}function Wg(n,e){let t=HP(n,e);if(t!==-1)return t;let r=e[Ee];r.firstCreatePass&&(n.injectorIndex=e.length,vI(r.data,n),vI(e,null),vI(r.blueprint,null));let i=KI(n,e),s=n.injectorIndex;if(jP(i)){let o=zg(i),a=Gg(i,e),c=a[Ee].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|c[o+d]}return e[s+8]=i,s}function vI(n,e){n.push(0,0,0,0,0,0,0,0,e)}function HP(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function KI(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=KP(i),r===null)return lu;if(t++,i=i[ia],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return lu}function RI(n,e,t){Pj(n,e,t)}function qP(n,e,t){if(t&8||n!==void 0)return n;Cg(e,"NodeInjector")}function zP(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[zs],s=jn(void 0);try{return i?i.get(e,r,t&8):jE(e,r,t&8)}finally{jn(s)}}return qP(r,e,t)}function GP(n,e,t,r=0,i){if(n!==null){if(e[pe]&2048&&!(r&2)){let o=Oj(n,e,t,r,ei);if(o!==ei)return o}let s=WP(n,e,t,r,ei);if(s!==ei)return s}return zP(e,t,r,i)}function WP(n,e,t,r,i){let s=Mj(t);if(typeof s=="function"){if(!uI(e,n,r))return r&1?qP(i,t,r):zP(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))Cg(t);else return o}finally{lI()}}else if(typeof s=="number"){let o=null,a=HP(n,e),c=lu,d=r&1?e[or][sr]:null;for((a===-1||r&4)&&(c=a===-1?KI(n,e):e[a+8],c===lu||!aP(r,!1)?a=-1:(o=e[Ee],a=zg(c),e=Gg(c,e)));a!==-1;){let h=e[Ee];if(oP(s,a,h.data)){let g=Nj(a,e,t,o,r,d);if(g!==ei)return g}c=e[a+8],c!==lu&&aP(r,e[Ee].data[a+8]===d)&&oP(s,a,e)?(o=h,a=zg(c),e=Gg(c,e)):a=-1}}return i}function Nj(n,e,t,r,i,s){let o=e[Ee],a=o.data[n+8],c=r==null?Ws(a)&&AI:r!=o&&(a.type&3)!==0,d=i&1&&s===a,h=xj(a,o,t,c,d);return h!==null?Kg(e,o,h,a,i):ei}function xj(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,d=n.directiveEnd,h=s>>20,g=r?a:a+h,I=i?a+h:d;for(let S=g;S<I;S++){let P=o[S];if(S<c&&t===P||S>=c&&P.type===t)return S}if(i){let S=o[c];if(S&&Xr(S)&&S.type===t)return c}return null}function Kg(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof da){let a=s;if(a.resolving){let S=hR(o[t]);throw UE(S)}let c=sP(a.canSeeViewProviders);a.resolving=!0;let d=o[t].type||o[t],h,g=a.injectImpl?jn(a.injectImpl):null,I=uI(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&Ej(t,o[t],e)}finally{g!==null&&jn(g),sP(c),a.resolving=!1,lI()}}return s}function Mj(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ra)?n[ra]:void 0;return typeof e=="number"?e>=0?e&BP:kj:e}function oP(n,e,t){let r=1<<n;return!!(t[e+(n>>$P)]&r)}function aP(n,e){return!(n&2)&&!(n&1&&e)}var la=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return GP(this._tNode,this._lView,e,Zo(r),t)}};function kj(){return new la(mn(),Ze())}function Nr(n){return gu(()=>{let e=n.prototype.constructor,t=e[Sd]||PI(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Sd]||PI(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function PI(n){return xE(n)?()=>{let e=PI(Xt(n));return e&&e()}:ea(n)}function Oj(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[pe]&2048&&!su(o);){let a=WP(s,o,t,r|2,ei);if(a!==ei)return a;let c=s.parent;if(!c){let d=o[YE];if(d){let h=d.get(t,ei,r);if(h!==ei)return h}c=KP(o),o=o[ia]}s=c}return i}function KP(n){let e=n[Ee],t=e.type;return t===2?e.declTNode:t===1?n[sr]:null}function Fj(){return sm(mn(),Ze())}function sm(n,e){return new Li(Ar(n,e))}var Li=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Fj}return n})();function QP(n){return(n.flags&128)===128}var QI=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(QI||{}),YP=new Map,Lj=0;function Vj(){return Lj++}function Uj(n){YP.set(n[kd],n)}function NI(n){YP.delete(n[kd])}var cP="__ngContext__";function du(n,e){Jr(e)?(n[cP]=e[kd],Uj(e)):n[cP]=e}function JP(n){return ZP(n[iu])}function XP(n){return ZP(n[ir])}function ZP(n){for(;n!==null&&!Sr(n);)n=n[ir];return n}var xI;function YI(n){xI=n}function eN(){if(xI!==void 0)return xI;if(typeof document<"u")return document;throw new Z(210,!1)}var om=new ee("",{providedIn:"root",factory:()=>jj}),jj="ng",am=new ee(""),ma=new ee("",{providedIn:"platform",factory:()=>"unknown"});var cm=new ee("",{providedIn:"root",factory:()=>eN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Bj="h",$j="b";var tN=!1,nN=new ee("",{providedIn:"root",factory:()=>tN});var Hj=(n,e,t,r)=>{};function qj(n,e,t,r){Hj(n,e,t,r)}function JI(n){return(n.flags&32)===32}var zj=()=>null;function rN(n,e,t=!1){return zj(n,e,t)}function iN(n,e){let t=n.contentQueries;if(t!==null){let r=ve(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];cI(s),a.contentQueries(2,e[o],o)}}}finally{ve(r)}}}function MI(n,e,t){cI(0);let r=ve(null);try{e(n,t)}finally{ve(r)}}function sN(n,e,t){if(JE(e)){let r=ve(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{ve(r)}}}var Oi=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Oi||{});var kI=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${PE})`}};function oN(n){return n instanceof kI?n.changingThisBreaksApplicationSecurity:n}function aN(n){return n instanceof Function?n():n}function Gj(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var cN="ng-template";function Wj(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Gj(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(XI(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function XI(n){return n.type===4&&n.value!==cN}function Kj(n,e,t){let r=n.type===4&&!t?cN:n.value;return e===r}function Qj(n,e,t){let r=4,i=n.attrs,s=i!==null?Xj(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Pr(r)&&!Pr(c))return!1;if(o&&Pr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!Kj(n,c,t)||c===""&&e.length===1){if(Pr(r))return!1;o=!0}}else if(r&8){if(i===null||!Wj(n,i,c,t)){if(Pr(r))return!1;o=!0}}else{let d=e[++a],h=Yj(c,i,XI(n),t);if(h===-1){if(Pr(r))return!1;o=!0;continue}if(d!==""){let g;if(h>s?g="":g=i[h+1].toLowerCase(),r&2&&d!==g){if(Pr(r))return!1;o=!0}}}}return Pr(r)||o}function Pr(n){return(n&1)===0}function Yj(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return Zj(e,n)}function Jj(n,e,t=!1){for(let r=0;r<e.length;r++)if(Qj(n,e[r],t))return!0;return!1}function Xj(n){for(let e=0;e<n.length;e++){let t=n[e];if(Cj(t))return e}return n.length}function Zj(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function uP(n,e){return n?":not("+e.trim()+")":e}function eB(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Pr(o)&&(e+=uP(s,i),i=""),r=o,s=s||!Pr(r);t++}return i!==""&&(e+=uP(s,i)),e}function tB(n){return n.map(eB).join(",")}function nB(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Pr(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var ni={};function rB(n,e){return n.createText(e)}function iB(n,e,t){n.setValue(e,t)}function uN(n,e,t){return n.createElement(e,t)}function Qg(n,e,t,r,i){n.insertBefore(e,t,r,i)}function lN(n,e,t){n.appendChild(e,t)}function lP(n,e,t,r,i){r!==null?Qg(n,e,t,r,i):lN(n,e,t)}function sB(n,e,t,r){n.removeChild(null,e,t,r)}function oB(n,e,t){n.setAttribute(e,"style",t)}function aB(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function dN(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&bj(n,e,r),i!==null&&aB(n,e,i),s!==null&&oB(n,e,s)}function ZI(n,e,t,r,i,s,o,a,c,d,h){let g=qn+r,I=g+i,S=cB(g,I),P=typeof d=="function"?d():d;return S[Ee]={type:n,blueprint:S,template:t,queries:null,viewQuery:a,declTNode:e,data:S.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:I,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:P,incompleteFirstPass:!1,ssrId:h}}function cB(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ni);return t}function uB(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=ZI(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function ew(n,e,t,r,i,s,o,a,c,d,h){let g=e.blueprint.slice();return g[Dr]=i,g[pe]=r|4|128|8|64|1024,(d!==null||n&&n[pe]&2048)&&(g[pe]|=2048),ZE(g),g[Zt]=g[ia]=n,g[cn]=t,g[ki]=o||n&&n[ki],g[dt]=a||n&&n[dt],g[zs]=c||n&&n[zs]||null,g[sr]=s,g[kd]=Vj(),g[Md]=h,g[YE]=d,g[or]=e.type==2?n[or]:g,g}function lB(n,e,t){let r=Ar(e,n),i=uB(t),s=n[ki].rendererFactory,o=tw(n,ew(n,i,null,hN(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function hN(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function fN(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function tw(n,e){return n[iu]?n[QE][ir]=e:n[iu]=e,n[QE]=e,e}function B(n=1){pN(zn(),Ze(),Ks()+n,!1)}function pN(n,e,t,r){if(!r)if((e[pe]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Bg(e,s,t)}else{let s=n.preOrderHooks;s!==null&&$g(e,s,0,t)}Qs(t)}var um=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(um||{});function OI(n,e,t,r){let i=ve(null);try{let[s,o,a]=n.inputs[t],c=null;(o&um.SignalBased)!==0&&(c=e[s][an]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,s):kP(e,c,s,r)}finally{ve(i)}}var ti=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(ti||{}),dB;function nw(n,e){return dB(n,e)}var hu=new Set,lm=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(lm||{}),ya=new ee(""),dP=new Set;function Jd(n){dP.has(n)||(dP.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var gN=!1,FI=class extends Ft{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,CR()&&(this.destroyRef=j(Rr,{optional:!0})??void 0,this.pendingTasks=j(Zr,{optional:!0})??void 0)}emit(e){let t=ve(null);try{super.next(e)}finally{ve(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof lt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},_t=FI;function mN(n){let e,t;function r(){n=qd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function hP(n){return queueMicrotask(()=>n()),()=>{n=qd}}var rw="isAngularZone",Yg=rw+"_ID",hB=0,Ge=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new _t(!1);onMicrotaskEmpty=new _t(!1);onStable=new _t(!1);onError=new _t(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=gN}=e;if(typeof Zone>"u")throw new Z(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,gB(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(rw)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Z(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Z(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,fB,qd,qd);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},fB={};function iw(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function pB(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){mN(()=>{n.callbackScheduled=!1,LI(n),n.isCheckStableRunning=!0,iw(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),LI(n)}function gB(n){let e=()=>{pB(n)},t=hB++;n._inner=n._inner.fork({name:"angular",properties:{[rw]:!0,[Yg]:t,[Yg+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(mB(c))return r.invokeTask(s,o,a,c);try{return fP(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),pP(n)}},onInvoke:(r,i,s,o,a,c,d)=>{try{return fP(n),r.invoke(s,o,a,c,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!yB(c)&&e(),pP(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,LI(n),iw(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function LI(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function fP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function pP(n){n._nesting--,iw(n)}var Jg=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new _t;onMicrotaskEmpty=new _t;onStable=new _t;onError=new _t;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function mB(n){return yN(n,"__ignore_ng_zone__")}function yB(n){return yN(n,"__scheduler_tick__")}function yN(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var sw=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}return n})(),_N=[0,1,2,3],vN=(()=>{class n{ngZone=j(Ge);scheduler=j(xi);errorHandler=j(Cr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){j(ya,{optional:!0})}execute(){let t=this.sequences.size>0;t&&We(16),this.executing=!0;for(let r of _N)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&We(17)}register(t){let{view:r}=t;r!==void 0?((r[ca]??=[]).push(t),ou(r),r[pe]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(lm.AFTER_NEXT_RENDER,t):t()}static \u0275prov=ie({token:n,providedIn:"root",factory:()=>new n})}return n})(),Xg=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[ca];e&&(this.view[ca]=e.filter(t=>t!==this))}};function dm(n,e){let t=e?.injector??j(Tt);return Jd("NgAfterNextRender"),vB(n,t,e,!0)}function _B(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function vB(n,e,t,r){let i=e.get(sw);i.impl??=e.get(vN);let s=e.get(ya,null,{optional:!0}),o=t?.manualCleanup!==!0?e.get(Rr):null,a=e.get(Vg,null,{optional:!0}),c=new Xg(i.impl,_B(n),a?.view,r,o,s?.snapshot(null));return i.impl.register(c),c}var EB=new ee("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function EN(n,e,t){let r=n.get(EB);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function IB(n,e){for(let[t,r]of e)EN(n,r.animateFns)}function gP(n,e,t,r){let i=n?.[Fd]?.enter;e!==null&&i&&i.has(t.index)&&IB(r,i)}function uu(n,e,t,r,i,s,o,a){if(i!=null){let c,d=!1;Sr(i)?c=i:Jr(i)&&(d=!0,i=i[Dr]);let h=ar(i);n===0&&r!==null?(gP(a,r,s,t),o==null?lN(e,r,h):Qg(e,r,h,o||null,!0)):n===1&&r!==null?(gP(a,r,s,t),Qg(e,r,h,o||null,!0)):n===2?mP(a,s,t,g=>{sB(e,h,d,g)}):n===3&&mP(a,s,t,()=>{e.destroyNode(h)}),c!=null&&kB(e,n,t,c,s,r,o)}}function wB(n,e){IN(n,e),e[Dr]=null,e[sr]=null}function TB(n,e,t,r,i,s){r[Dr]=i,r[sr]=e,hm(n,r,t,1,i,s)}function IN(n,e){e[ki].changeDetectionScheduler?.notify(9),hm(n,e,e[dt],2,null,null)}function bB(n){let e=n[iu];if(!e)return EI(n[Ee],n);for(;e;){let t=null;if(Jr(e))t=e[iu];else{let r=e[Rn];r&&(t=r)}if(!t){for(;e&&!e[ir]&&e!==n;)Jr(e)&&EI(e[Ee],e),e=e[Zt];e===null&&(e=n),Jr(e)&&EI(e[Ee],e),t=e&&e[ir]}e=t}}function ow(n,e){let t=n[Vd],r=t.indexOf(e);t.splice(r,1)}function wN(n,e){if(ua(e))return;let t=e[dt];t.destroyNode&&hm(n,e,t,3,null,null),bB(e)}function EI(n,e){if(ua(e))return;let t=ve(null);try{e[pe]&=-129,e[pe]|=256,e[Hn]&&Id(e[Hn]),SB(n,e),DB(n,e),e[Ee].type===1&&e[dt].destroy();let r=e[sa];if(r!==null&&Sr(e[Zt])){r!==e[Zt]&&ow(r,e);let i=e[aa];i!==null&&i.detachView(n)}NI(e)}finally{ve(t)}}function mP(n,e,t,r){let i=n?.[Fd];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&hu.add(n),EN(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let c=0;c<o.animateFns.length;c++){let d=o.animateFns[c],{promise:h}=d();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),CB(n,r)}else n&&hu.delete(n),r(!1)},i)}function CB(n,e){let t=n[Fd]?.running;if(t){t.then(()=>{n[Fd].running=void 0,hu.delete(n),e(!0)});return}e(!1)}function DB(n,e){let t=n.cleanup,r=e[ru];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[ru]=null);let i=e[Pi];if(i!==null){e[Pi]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Od];if(s!==null){e[Od]=null;for(let o of s)o.destroy()}}function SB(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof da)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];We(4,a,c);try{c.call(a)}finally{We(5,a,c)}}else{We(4,i,s);try{s.call(i)}finally{We(5,i,s)}}}}}function AB(n,e,t){return RB(n,e.parent,t)}function RB(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Dr];if(Ws(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Oi.None||i===Oi.Emulated)return null}return Ar(r,t)}function PB(n,e,t){return xB(n,e,t)}function NB(n,e,t){return n.type&40?Ar(n,t):null}var xB=NB,yP;function aw(n,e,t,r){let i=AB(n,r,e),s=e[dt],o=r.parent||e[sr],a=PB(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)lP(s,i,t[c],a,!1);else lP(s,i,t,a,!1);yP!==void 0&&yP(s,r,e,t,i)}function zd(n,e){if(e!==null){let t=e.type;if(t&3)return Ar(e,n);if(t&4)return VI(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return zd(n,r);{let i=n[e.index];return Sr(i)?VI(-1,i):ar(i)}}else{if(t&128)return zd(n,e.next);if(t&32)return nw(e,n)()||ar(n[e.index]);{let r=TN(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=$s(n[or]);return zd(i,r)}else return zd(n,e.next)}}}return null}function TN(n,e){if(e!==null){let r=n[or][sr],i=e.projection;return r.projection[i]}return null}function VI(n,e){let t=Rn+n+1;if(t<e.length){let r=e[t],i=r[Ee].firstChild;if(i!==null)return zd(r,i)}return e[Gs]}function cw(n,e,t,r,i,s,o){for(;t!=null;){let a=r[zs];if(t.type===128){t=t.next;continue}let c=r[t.index],d=t.type;if(o&&e===0&&(c&&du(ar(c),r),t.flags|=2),!JI(t))if(d&8)cw(n,e,t.child,r,i,s,!1),uu(e,n,a,i,c,t,s,r);else if(d&32){let h=nw(t,r),g;for(;g=h();)uu(e,n,a,i,g,t,s,r);uu(e,n,a,i,c,t,s,r)}else d&16?MB(n,e,r,t,i,s):uu(e,n,a,i,c,t,s,r);t=o?t.projectionNext:t.next}}function hm(n,e,t,r,i,s){cw(t,r,n.firstChild,e,i,s,!1)}function MB(n,e,t,r,i,s){let o=t[or],c=o[sr].projection[r.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let h=c[d];uu(e,n,t[zs],i,h,r,s,t)}else{let d=c,h=o[Zt];QP(r)&&(d.flags|=128),cw(n,e,d,h,i,s,!0)}}function kB(n,e,t,r,i,s,o){let a=r[Gs],c=ar(r);a!==c&&uu(e,n,t,s,a,i,o);for(let d=Rn;d<r.length;d++){let h=r[d];hm(h[Ee],h,n,e,s,a)}}function OB(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:ti.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ti.Important),n.setStyle(t,r,i,s))}}function bN(n,e,t,r,i){let s=Ks(),o=r&2;try{Qs(-1),o&&e.length>qn&&pN(n,e,qn,!1),We(o?2:0,i,t),t(r,i)}finally{Qs(s),We(o?3:1,i,t)}}function uw(n,e,t){$B(n,e,t),(t.flags&64)===64&&HB(n,e,t)}function CN(n,e,t=Ar){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function FB(n,e,t,r){let s=r.get(nN,tN)||t===Oi.ShadowDom,o=n.selectRootElement(e,s);return LB(o),o}function LB(n){VB(n)}var VB=()=>null;function UB(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function DN(n,e,t,r,i,s){let o=e[Ee];if(lw(n,o,e,t,r)){Ws(n)&&BB(e,n.index);return}n.type&3&&(t=UB(t)),jB(n,e,t,r,i,s)}function jB(n,e,t,r,i,s){if(n.type&3){let o=Ar(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function BB(n,e){let t=cr(e,n);t[pe]&16||(t[pe]|=64)}function $B(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Ws(t)&&lB(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Wg(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],c=Kg(e,n,o,t);if(du(c,e),s!==null&&WB(e,o-r,c,a,t,s),Xr(a)){let d=cr(t.index,e);d[cn]=Kg(e,n,o,t)}}}function HB(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=GR();try{Qs(s);for(let a=r;a<i;a++){let c=n.data[a],d=e[a];xg(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&qB(c,d)}}finally{Qs(-1),xg(o)}}function qB(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function SN(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];Jj(e,s.selectors,!1)&&(r??=[],Xr(s)?r.unshift(s):r.push(s))}return r}function zB(n,e,t,r,i,s){let o=Ar(n,e);GB(e[dt],o,s,n.value,t,r,i)}function GB(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?tu(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function WB(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let c=o[a],d=o[a+1];OI(r,t,c,d)}}function KB(n,e,t,r,i){let s=qn+t,o=e[Ee],a=i(o,e,n,r,t);e[s]=a,au(n,!0);let c=n.type===2;return c?(dN(e[dt],a,n),(kR()===0||Ud(n))&&du(a,e),OR()):du(a,e),Fg()&&(!c||!JI(n))&&aw(o,e,a,n),n}function QB(n){let e=n;return iI()?BR():(e=e.parent,au(e,!1)),e}function YB(n,e){let t=n[zs];if(!t)return;let r;try{r=t.get(xn,null)}catch{r=null}r?.(e)}function lw(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let c=0;c<o.length;c+=2){let d=o[c],h=o[c+1],g=e.data[d];OI(g,t[d],h,i),a=!0}if(s)for(let c of s){let d=t[c],h=e.data[c];OI(h,d,r,i),a=!0}return a}function JB(n,e){let t=cr(e,n),r=t[Ee];XB(r,t);let i=t[Dr];i!==null&&t[Md]===null&&(t[Md]=rN(i,t[zs])),We(18),dw(r,t,t[cn]),We(19,t[cn])}function XB(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function dw(n,e,t){Mg(e);try{let r=n.viewQuery;r!==null&&MI(1,r,t);let i=n.template;i!==null&&bN(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[aa]?.finishViewCreation(n),n.staticContentQueries&&iN(n,e),n.staticViewQueries&&MI(2,n.viewQuery,t);let s=n.components;s!==null&&ZB(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[pe]&=-5,kg()}}function ZB(n,e){for(let t=0;t<e.length;t++)JB(n,e[t])}function e4(n,e,t,r){let i=ve(null);try{let s=e.tView,a=n[pe]&4096?4096:16,c=ew(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),d=n[e.index];c[sa]=d;let h=n[aa];return h!==null&&(c[aa]=h.createEmbeddedView(s)),dw(s,c,t),c}finally{ve(i)}}function _P(n,e){return!e||e.firstChild===null||QP(n)}function Kd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(ar(s)),Sr(s)&&AN(s,r);let o=t.type;if(o&8)Kd(n,e,t.child,r);else if(o&32){let a=nw(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=TN(e,t);if(Array.isArray(a))r.push(...a);else{let c=$s(e[or]);Kd(c[Ee],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function AN(n,e){for(let t=Rn;t<n.length;t++){let r=n[t],i=r[Ee].firstChild;i!==null&&Kd(r[Ee],r,i,e)}n[Gs]!==n[Dr]&&e.push(n[Gs])}function RN(n){if(n[ca]!==null){for(let e of n[ca])e.impl.addSequence(e);n[ca].length=0}}var PN=[];function t4(n){return n[Hn]??n4(n)}function n4(n){let e=PN.pop()??Object.create(i4);return e.lView=n,e}function r4(n){n.lView[Hn]!==n&&(n.lView=null,PN.push(n))}var i4=se(H({},kc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{ou(n.lView)},consumerOnSignalRead(){this.lView[Hn]=this}});function s4(n){let e=n[Hn]??Object.create(o4);return e.lView=n,e}var o4=se(H({},kc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=$s(n.lView);for(;e&&!NN(e[Ee]);)e=$s(e);e&&eI(e)},consumerOnSignalRead(){this.lView[Hn]=this}});function NN(n){return n.type!==2}function xN(n){if(n[Od]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Od])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[pe]&8192)}}var a4=100;function MN(n,e=0){let r=n[ki].rendererFactory,i=!1;i||r.begin?.();try{c4(n,e)}finally{i||r.end?.()}}function c4(n,e){let t=sI();try{oI(!0),UI(n,e);let r=0;for(;Bd(n);){if(r===a4)throw new Z(103,!1);r++,UI(n,1)}}finally{oI(t)}}function u4(n,e,t,r){if(ua(e))return;let i=e[pe],s=!1,o=!1;Mg(e);let a=!0,c=null,d=null;s||(NN(n)?(d=t4(e),c=Fc(d)):Bp()===null?(a=!1,d=s4(e),c=Fc(d)):e[Hn]&&(Id(e[Hn]),e[Hn]=null));try{ZE(e),HR(n.bindingStartIndex),t!==null&&bN(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let S=n.preOrderCheckHooks;S!==null&&Bg(e,S,null)}else{let S=n.preOrderHooks;S!==null&&$g(e,S,0,null),_I(e,0)}if(o||l4(e),xN(e),kN(e,0),n.contentQueries!==null&&iN(n,e),!s)if(h){let S=n.contentCheckHooks;S!==null&&Bg(e,S)}else{let S=n.contentHooks;S!==null&&$g(e,S,1),_I(e,1)}h4(n,e);let g=n.components;g!==null&&FN(e,g,0);let I=n.viewQuery;if(I!==null&&MI(2,I,r),!s)if(h){let S=n.viewCheckHooks;S!==null&&Bg(e,S)}else{let S=n.viewHooks;S!==null&&$g(e,S,2),_I(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Ag]){for(let S of e[Ag])S();e[Ag]=null}s||(RN(e),e[pe]&=-73)}catch(h){throw s||ou(e),h}finally{d!==null&&(vd(d,c),a&&r4(d)),kg()}}function kN(n,e){for(let t=JP(n);t!==null;t=XP(t))for(let r=Rn;r<t.length;r++){let i=t[r];ON(i,e)}}function l4(n){for(let e=JP(n);e!==null;e=XP(e)){if(!(e[pe]&2))continue;let t=e[Vd];for(let r=0;r<t.length;r++){let i=t[r];eI(i)}}}function d4(n,e,t){We(18);let r=cr(e,n);ON(r,t),We(19,r[cn])}function ON(n,e){Pg(n)&&UI(n,e)}function UI(n,e){let r=n[Ee],i=n[pe],s=n[Hn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Ed(s)),o||=!1,s&&(s.dirty=!1),n[pe]&=-9217,o)u4(r,n,r.template,n[cn]);else if(i&8192){let a=ve(null);try{xN(n),kN(n,1);let c=r.components;c!==null&&FN(n,c,1),RN(n)}finally{ve(a)}}}function FN(n,e,t){for(let r=0;r<e.length;r++)d4(n,e[r],t)}function h4(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Qs(~i);else{let s=i,o=t[++r],a=t[++r];zR(o,s);let c=e[s];We(24,c),a(2,c),We(25,c)}}}finally{Qs(-1)}}function hw(n,e){let t=sI()?64:1088;for(n[ki].changeDetectionScheduler?.notify(e);n;){n[pe]|=t;let r=$s(n);if(su(n)&&!r)return n;n=r}return null}function LN(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function f4(n,e,t,r=!0){let i=e[Ee];if(p4(i,e,n,t),r){let o=VI(t,n),a=e[dt],c=a.parentNode(n[Gs]);c!==null&&TB(i,n[sr],a,e,c,o)}let s=e[Md];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function jI(n,e){if(n.length<=Rn)return;let t=Rn+e,r=n[t];if(r){let i=r[sa];i!==null&&i!==n&&ow(i,r),e>0&&(n[t-1][ir]=r[ir]);let s=Pd(n,Rn+e);wB(r[Ee],r);let o=s[aa];o!==null&&o.detachView(s[Ee]),r[Zt]=null,r[ir]=null,r[pe]&=-129}return r}function p4(n,e,t,r){let i=Rn+r,s=t.length;r>0&&(t[i-1][ir]=e),r<s-Rn?(e[ir]=t[i],BE(t,Rn+r,e)):(t.push(e),e[ir]=null),e[Zt]=t;let o=e[sa];o!==null&&t!==o&&VN(o,e);let a=e[aa];a!==null&&a.insertView(n),Ng(e),e[pe]|=128}function VN(n,e){let t=n[Vd],r=e[Zt];if(Jr(r))n[pe]|=2;else{let i=r[Zt][or];e[or]!==i&&(n[pe]|=2)}t===null?n[Vd]=[e]:t.push(e)}var Ys=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Ee];return Kd(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[cn]}set context(e){this._lView[cn]=e}get destroyed(){return ua(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Zt];if(Sr(e)){let t=e[Ld],r=t?t.indexOf(this):-1;r>-1&&(jI(e,r),Pd(t,r))}this._attachedToViewContainer=!1}wN(this._lView[Ee],this._lView)}onDestroy(e){tI(this._lView,e)}markForCheck(){hw(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[pe]&=-129}reattach(){Ng(this._lView),this._lView[pe]|=128}detectChanges(){this._lView[pe]|=1024,MN(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=su(this._lView),t=this._lView[sa];t!==null&&!e&&ow(t,this._lView),IN(this._lView[Ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Z(902,!1);this._appRef=e;let t=su(this._lView),r=this._lView[sa];r!==null&&!t&&VN(r,this._lView),Ng(this._lView)}};var Xd=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=g4;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=e4(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Ys(s)}}return n})();function g4(){return m4(mn(),Ze())}function m4(n,e){return n.type&4?new Xd(e,n,sm(n,e)):null}function fw(n,e,t,r,i){let s=n.data[e];if(s===null)s=y4(n,e,t,r,i),qR()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=jR();s.injectorIndex=o===null?-1:o.injectorIndex}return au(s,!0),s}function y4(n,e,t,r,i){let s=rI(),o=iI(),a=o?s:s&&s.parent,c=n.data[e]=v4(n,a,t,e,r,i);return _4(n,c,s,o),c}function _4(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function v4(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return LR()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var kie=new RegExp(`^(\\d+)*(${$j}|${Bj})*(.*)`);var E4=()=>null;function vP(n,e){return E4(n,e)}var UN=class{},fm=class{},BI=class{resolveComponentFactory(e){throw new Z(917,!1)}},Zd=class{static NULL=new BI},ha=class{},Js=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>I4()}return n})();function I4(){let n=Ze(),e=mn(),t=cr(e.index,n);return(Jr(t)?t:n)[dt]}var jN=(()=>{class n{static \u0275prov=ie({token:n,providedIn:"root",factory:()=>null})}return n})();var Hg={},$I=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Hg,r);return i!==Hg||t===Hg?i:this.parentInjector.get(e,t,r)}};function EP(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=NE(i,a);else if(s==2){let c=a,d=e[++o];r=NE(r,c+": "+d+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function he(n,e=0){let t=Ze();if(t===null)return we(n,e);let r=mn();return GP(r,t,Xt(n),e)}function BN(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,c=null,d=null;for(let h of o)if(h.resolveHostDirectives!==null){[a,c,d]=h.resolveHostDirectives(o);break}b4(n,e,t,a,s,c,d)}s!==null&&r!==null&&w4(t,r,s)}function w4(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new Z(-301,!1);r.push(e[i],s)}}function T4(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function b4(n,e,t,r,i,s,o){let a=r.length,c=!1;for(let I=0;I<a;I++){let S=r[I];!c&&Xr(S)&&(c=!0,T4(n,t,I)),RI(Wg(t,e),n,S.type)}P4(t,n.data.length,a);for(let I=0;I<a;I++){let S=r[I];S.providersResolver&&S.providersResolver(S)}let d=!1,h=!1,g=fN(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let I=0;I<a;I++){let S=r[I];if(t.mergedAttrs=Wd(t.mergedAttrs,S.hostAttrs),D4(n,t,e,g,S),R4(g,S,i),o!==null&&o.has(S)){let[U,O]=o.get(S);t.directiveToIndex.set(S.type,[g,U+t.directiveStart,O+t.directiveStart])}else(s===null||!s.has(S))&&t.directiveToIndex.set(S.type,g);S.contentQueries!==null&&(t.flags|=4),(S.hostBindings!==null||S.hostAttrs!==null||S.hostVars!==0)&&(t.flags|=64);let P=S.type.prototype;!d&&(P.ngOnChanges||P.ngOnInit||P.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!h&&(P.ngOnChanges||P.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),g++}C4(n,t,s)}function C4(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))IP(0,e,i,r),IP(1,e,i,r),TP(e,r,!1);else{let s=t.get(i);wP(0,e,s,r),wP(1,e,s,r),TP(e,r,!0)}}}function IP(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),$N(e,s)}}function wP(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),$N(e,o)}}function $N(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function TP(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||XI(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let d=i[c];for(let h of d)if(h===e){o??=[],o.push(c,r[a+1]);break}}else if(t&&s.hasOwnProperty(c)){let d=s[c];for(let h=0;h<d.length;h+=2)if(d[h]===e){o??=[],o.push(d[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function D4(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=ea(i.type,!0)),o=new da(s,Xr(i),he,null);n.blueprint[r]=o,t[r]=o,S4(n,e,r,fN(n,t,i.hostVars,ni),i)}function S4(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;A4(o)!=a&&o.push(a),o.push(t,r,s)}}function A4(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function R4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Xr(e)&&(t[""]=n)}}function P4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function HN(n,e,t,r,i,s,o,a){let c=e[Ee],d=c.consts,h=jd(d,o),g=fw(c,n,t,r,h);return s&&BN(c,e,g,jd(d,a),i),g.mergedAttrs=Wd(g.mergedAttrs,g.attrs),g.attrs!==null&&EP(g,g.attrs,!1),g.mergedAttrs!==null&&EP(g,g.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,g),g}function qN(n,e){VP(n,e),JE(e)&&n.queries.elementEnd(e)}function pw(n){return GN(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function zN(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function GN(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function fa(n,e,t){if(t===ni)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function N4(n,e,t,r){let i=fa(n,e,t);return fa(n,e+1,r)||i}function II(n,e,t){return function r(i){let s=Ws(n)?cr(n.index,e):e;hw(s,5);let o=e[cn],a=bP(e,o,t,i),c=r.__ngNextListenerFn__;for(;c;)a=bP(e,o,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function bP(n,e,t,r){let i=ve(null);try{return We(6,e,t),t(r)!==!1}catch(s){return YB(n,s),!1}finally{We(7,e,t),ve(i)}}function x4(n,e,t,r,i,s,o,a){let c=Ud(n),d=!1,h=null;if(!r&&c&&(h=k4(e,t,s,n.index)),h!==null){let g=h.__ngLastListenerFn__||h;g.__ngNextListenerFn__=o,h.__ngLastListenerFn__=o,d=!0}else{let g=Ar(n,t),I=r?r(g):g;qj(t,I,s,a);let S=i.listen(I,s,a);if(!M4(s)){let P=r?U=>r(ar(U[n.index])):n.index;WN(P,e,t,s,a,S,!1)}}return d}function M4(n){return n.startsWith("animation")||n.startsWith("transition")}function k4(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[ru],c=i[s+2];return a&&a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function WN(n,e,t,r,i,s,o){let a=e.firstCreatePass?MR(e):null,c=xR(t),d=c.length;c.push(i,s),a&&a.push(r,n,d,(d+1)*(o?-1:1))}function CP(n,e,t,r,i,s){let o=e[t],a=e[Ee],d=a.data[t].outputs[r],g=o[d].subscribe(s);WN(n.index,a,e,i,s,g,!0)}var HI=Symbol("BINDING");var Zg=class extends Zd{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=qs(e);return new fu(t,this.ngModule)}};function O4(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&um.SignalBased)!==0};return i&&(s.transform=i),s})}function F4(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function L4(n,e,t){let r=e instanceof Vt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new $I(t,r):t}function V4(n){let e=n.get(ha,null);if(e===null)throw new Z(407,!1);let t=n.get(jN,null),r=n.get(xi,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function U4(n,e){let t=KN(n);return uN(e,t,t==="svg"?SR:t==="math"?AR:null)}function KN(n){return(n.selectors[0][0]||"div").toLowerCase()}var fu=class extends fm{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=O4(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=F4(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=tB(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){We(22);let a=ve(null);try{let c=this.componentDef,d=j4(r,c,o,s),h=L4(c,i||this.ngModule,e),g=V4(h),I=g.rendererFactory.createRenderer(null,c),S=r?FB(I,r,c.encapsulation,h):U4(c,I),P=o?.some(DP)||s?.some(G=>typeof G!="function"&&G.bindings.some(DP)),U=ew(null,d,null,512|hN(c),null,null,g,I,h,null,rN(S,h,!0));U[qn]=S,Mg(U);let O=null;try{let G=HN(qn,U,2,"#host",()=>d.directiveRegistry,!0,0);dN(I,S,G),du(S,U),uw(d,U,G),sN(d,G,U),qN(d,G),t!==void 0&&$4(G,this.ngContentSelectors,t),O=cr(G.index,U),U[cn]=O[cn],dw(d,U,null)}catch(G){throw O!==null&&NI(O),NI(U),G}finally{We(23),kg()}return new em(this.componentType,U,!!P)}finally{ve(a)}}};function j4(n,e,t,r){let i=n?["ng-version","20.3.13"]:nB(e.selectors[0]),s=null,o=null,a=0;if(t)for(let h of t)a+=h[HI].requiredVars,h.create&&(h.targetIdx=0,(s??=[]).push(h)),h.update&&(h.targetIdx=0,(o??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let g=r[h];if(typeof g!="function")for(let I of g.bindings){a+=I[HI].requiredVars;let S=h+1;I.create&&(I.targetIdx=S,(s??=[]).push(I)),I.update&&(I.targetIdx=S,(o??=[]).push(I))}}let c=[e];if(r)for(let h of r){let g=typeof h=="function"?h:h.type,I=zE(g);c.push(I)}return ZI(0,null,B4(s,o),1,a,c,null,null,null,[i],null)}function B4(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function DP(n){let e=n[HI].kind;return e==="input"||e==="twoWay"}var em=class extends UN{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Rg(t[Ee],qn),this.location=sm(this._tNode,t),this.instance=cr(this._tNode.index,t)[cn],this.hostView=this.changeDetectorRef=new Ys(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=lw(r,i[Ee],i,e,t);this.previousInputValues.set(e,t);let o=cr(r.index,i);hw(o,1)}get injector(){return new la(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function $4(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var _a=(()=>{class n{static __NG_ELEMENT_ID__=H4}return n})();function H4(){let n=mn();return z4(n,Ze())}var q4=_a,QN=class extends q4{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return sm(this._hostTNode,this._hostLView)}get injector(){return new la(this._hostTNode,this._hostLView)}get parentInjector(){let e=KI(this._hostTNode,this._hostLView);if(jP(e)){let t=Gg(e,this._hostLView),r=zg(e),i=t[Ee].data[r+8];return new la(i,t)}else return new la(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=SP(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Rn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=vP(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,_P(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let c=e&&!mj(e),d;if(c)d=t;else{let O=t||{};d=O.index,r=O.injector,i=O.projectableNodes,s=O.environmentInjector||O.ngModuleRef,o=O.directives,a=O.bindings}let h=c?e:new fu(qs(e)),g=r||this.parentInjector;if(!s&&h.ngModule==null){let G=(c?g:this.parentInjector).get(Vt,null);G&&(s=G)}let I=qs(h.componentType??{}),S=vP(this._lContainer,I?.id??null),P=S?.firstChild??null,U=h.create(g,i,P,s,o,a);return this.insertImpl(U.hostView,d,_P(this._hostTNode,S)),U}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(RR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Zt],d=new QN(c,c[sr],c[Zt]);d.detach(d.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return f4(o,i,s,r),e.attachToViewContainerRef(),BE(wI(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=SP(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=jI(this._lContainer,t);r&&(Pd(wI(this._lContainer),t),wN(r[Ee],r))}detach(e){let t=this._adjustIndex(e,-1),r=jI(this._lContainer,t);return r&&Pd(wI(this._lContainer),t)!=null?new Ys(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function SP(n){return n[Ld]}function wI(n){return n[Ld]||(n[Ld]=[])}function z4(n,e){let t,r=e[n.index];return Sr(r)?t=r:(t=LN(r,e,null,n),e[n.index]=t,tw(e,t)),W4(t,e,n,r),new QN(t,n,e)}function G4(n,e){let t=n[dt],r=t.createComment(""),i=Ar(e,n),s=t.parentNode(i);return Qg(t,s,r,t.nextSibling(i),!1),r}var W4=Y4,K4=()=>!1;function Q4(n,e,t){return K4(n,e,t)}function Y4(n,e,t,r){if(n[Gs])return;let i;t.type&8?i=ar(r):i=G4(e,t),n[Gs]=i}var pa=class{},pm=class{};var tm=class extends pa{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Zg(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=qE(e);this._bootstrapComponents=aN(s.bootstrap),this._r3Injector=dI(e,t,[{provide:pa,useValue:this},{provide:Zd,useValue:this.componentFactoryResolver},...r],Ni(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},nm=class extends pm{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new tm(this.moduleType,e,[])}};var Qd=class extends pa{injector;componentFactoryResolver=new Zg(this);instance=null;constructor(e){super();let t=new na([...e.providers,{provide:pa,useValue:this},{provide:Zd,useValue:this.componentFactoryResolver}],e.parent||xd(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function eh(n,e,t=null){return new Qd({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var J4=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=GE(!1,t.type),i=r.length>0?eh([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ie({token:n,providedIn:"environment",factory:()=>new n(we(Vt))})}return n})();function Kn(n){return gu(()=>{let e=YN(n),t=se(H({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===QI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(J4).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Oi.Emulated,styles:n.styles||Bn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Jd("NgStandalone"),JN(t);let r=n.dependencies;return t.directiveDefs=AP(r,X4),t.pipeDefs=AP(r,vR),t.id=t$(t),t})}function X4(n){return qs(n)||zE(n)}function Vi(n){return gu(()=>({type:n.type,bootstrap:n.bootstrap||Bn,declarations:n.declarations||Bn,imports:n.imports||Bn,exports:n.exports||Bn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Z4(n,e){if(n==null)return Hs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,c;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,c=i[3]||null):(s=i,o=i,a=um.None,c=null),t[s]=[r,a,c],e[s]=o}return t}function e$(n){if(n==null)return Hs;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function et(n){return gu(()=>{let e=YN(n);return JN(e),e})}function YN(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Hs,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Bn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Z4(n.inputs,e),outputs:e$(n.outputs),debugInfo:null}}function JN(n){n.features?.forEach(e=>e(n))}function AP(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function t$(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function n$(n){return Object.getPrototypeOf(n.prototype).constructor}function en(n){let e=n$(n.type),t=!0,r=[n];for(;e;){let i;if(Xr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Z(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=TI(n.inputs),o.declaredInputs=TI(n.declaredInputs),o.outputs=TI(n.outputs);let a=i.hostBindings;a&&a$(n,a);let c=i.viewQuery,d=i.contentQueries;if(c&&s$(n,c),d&&o$(n,d),r$(n,i),dR(n.outputs,i.outputs),Xr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===en&&(t=!1)}}e=Object.getPrototypeOf(e)}i$(r)}function r$(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function i$(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Wd(i.hostAttrs,t=Wd(t,i.hostAttrs))}}function TI(n){return n===Hs?{}:n===Bn?[]:n}function s$(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function o$(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function a$(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function c$(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=Wd(n.mergedAttrs,n.attrs);let h=n.tView=ZI(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),au(n,!1);let c=l$(t,e,n,r);Fg()&&aw(t,e,c,n),du(c,e);let d=LN(c,e,c,n);e[r+qn]=d,tw(e,d),Q4(d,n,e)}function u$(n,e,t,r,i,s,o,a,c,d,h){let g=t+qn,I;return e.firstCreatePass?(I=fw(e,g,4,o||null,a||null),nI()&&BN(e,n,I,jd(e.consts,d),SN),VP(e,I)):I=e.data[g],c$(I,n,e,t,r,i,s,c),Ud(I)&&uw(e,n,I),d!=null&&CN(n,I,h),I}function Pe(n,e,t,r,i,s,o,a){let c=Ze(),d=zn(),h=jd(d.consts,s);return u$(c,d,n,e,t,r,i,h,void 0,o,a),Pe}var l$=d$;function d$(n,e,t,r){return Lg(!0),e[dt].createComment("")}var gw=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var mw=new ee("");function Xs(n){return!!n&&typeof n.then=="function"}function yw(n){return!!n&&typeof n.subscribe=="function"}var XN=new ee("");var _w=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=j(XN,{optional:!0})??[];injector=j(Tt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=Ut(this.injector,i);if(Xs(s))t.push(s);else if(yw(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gm=new ee("");function ZN(){Zv(()=>{let n="";throw new Z(600,n)})}function ex(n){return n.isBoundToModule}var h$=10;var Ui=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=j(xn);afterRenderManager=j(sw);zonelessEnabled=j(Hd);rootEffectScheduler=j(yI);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ft;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=j(Zr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ae(t=>!t))}constructor(){j(ya,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=j(Vt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Tt.NULL){return this._injector.get(Ge).run(()=>{We(10);let o=t instanceof fm;if(!this._injector.get(_w).done){let P="";throw new Z(405,P)}let c;o?c=t:c=this._injector.get(Zd).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let d=ex(c)?void 0:this._injector.get(pa),h=r||c.selector,g=c.create(i,[],h,d),I=g.location.nativeElement,S=g.injector.get(mw,null);return S?.registerApplication(I),g.onDestroy(()=>{this.detachView(g.hostView),Gd(this.components,g),S?.unregisterApplication(I)}),this._loadComponent(g),We(11,g),g})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){We(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(lm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Z(101,!1);let t=ve(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ve(t),this.afterTick.next(),We(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ha,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<h$;)We(14),this.synchronizeOnce(),We(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Bd(i))continue;let s=r&&!this.zonelessEnabled?0:1;MN(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Bd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Gd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(gm,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Gd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Z(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Gd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function mm(n,e,t,r){let i=Ze(),s=$d();if(fa(i,s,e)){let o=zn(),a=Og();zB(a,i,n,e,t,r)}return mm}var Bie=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function X(n,e,t){let r=Ze(),i=$d();if(fa(r,i,e)){let s=zn(),o=Og();DN(o,r,n,e,r[dt],t)}return X}function RP(n,e,t,r,i){lw(e,n,t,i?"class":"style",r)}function k(n,e,t,r){let i=Ze(),s=i[Ee],o=n+qn,a=s.firstCreatePass?HN(o,i,2,e,SN,nI(),t,r):s.data[o];if(KB(a,i,n,e,f$),Ud(a)){let c=i[Ee];uw(c,i,a),sN(c,a,i)}return r!=null&&CN(i,a),k}function M(){let n=zn(),e=mn(),t=QB(e);return n.firstCreatePass&&qN(n,t),VR(t)&&UR(),FR(),t.classesWithoutHost!=null&&wj(t)&&RP(n,t,Ze(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Tj(t)&&RP(n,t,Ze(),t.stylesWithoutHost,!1),M}function rt(n,e,t,r){return k(n,e,t,r),M(),rt}var f$=(n,e,t,r,i)=>(Lg(!0),uN(e[dt],r,XR()));function xr(){return Ze()}var th="en-US";var p$=th;function tx(n){typeof n=="string"&&(p$=n.toLowerCase().replace(/_/g,"-"))}function je(n,e,t){let r=Ze(),i=zn(),s=mn();return nx(i,r,r[dt],s,n,e,t),je}function nx(n,e,t,r,i,s,o){let a=!0,c=null;if((r.type&3||o)&&(c??=II(r,e,s),x4(r,n,e,o,t,i,s,c)&&(a=!1)),a){let d=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let g=0;g<h.length;g+=2){let I=h[g],S=h[g+1];c??=II(r,e,s),CP(r,e,I,S,i,c)}if(d&&d.length)for(let g of d)c??=II(r,e,s),CP(r,e,g,i,i,c)}}function Ke(n=1){return JR(n)}function jg(n,e){return n<<17|e<<2}function ga(n){return n>>17&32767}function g$(n){return(n&2)==2}function m$(n,e){return n&131071|e<<17}function qI(n){return n|2}function pu(n){return(n&131068)>>2}function bI(n,e){return n&-131069|e<<2}function y$(n){return(n&1)===1}function zI(n){return n|1}function _$(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ga(o),c=pu(o);n[r]=t;let d=!1,h;if(Array.isArray(t)){let g=t;h=g[1],(h===null||nu(g,h)>0)&&(d=!0)}else h=t;if(i)if(c!==0){let I=ga(n[a+1]);n[r+1]=jg(I,a),I!==0&&(n[I+1]=bI(n[I+1],r)),n[a+1]=m$(n[a+1],r)}else n[r+1]=jg(a,0),a!==0&&(n[a+1]=bI(n[a+1],r)),a=r;else n[r+1]=jg(c,0),a===0?a=r:n[c+1]=bI(n[c+1],r),c=r;d&&(n[r+1]=qI(n[r+1])),PP(n,h,r,!0),PP(n,h,r,!1),v$(e,h,n,r,s),o=jg(a,c),s?e.classBindings=o:e.styleBindings=o}function v$(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&nu(s,e)>=0&&(t[r+1]=zI(t[r+1]))}function PP(n,e,t,r){let i=n[t+1],s=e===null,o=r?ga(i):pu(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],d=n[o+1];E$(c,e)&&(a=!0,n[o+1]=r?zI(d):qI(d)),o=r?ga(d):pu(d)}a&&(n[t+1]=r?qI(i):zI(i))}function E$(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?nu(n,e)>=0:!1}function mu(n,e,t){return rx(n,e,t,!1),mu}function vt(n,e){return rx(n,e,null,!0),vt}function rx(n,e,t,r){let i=Ze(),s=zn(),o=aI(2);if(s.firstUpdatePass&&w$(s,n,o,r),e!==ni&&fa(i,o,e)){let a=s.data[Ks()];S$(s,a,i,i[dt],n,i[o+1]=A$(e,t),r,o)}}function I$(n,e){return e>=n.expandoStartIndex}function w$(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Ks()],o=I$(n,t);R$(s,r)&&e===null&&!o&&(e=!1),e=T$(i,s,e,r),_$(i,s,e,t,o,r)}}function T$(n,e,t,r){let i=WR(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=CI(null,n,e,t,r),t=Yd(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=CI(i,n,e,t,r),s===null){let c=b$(n,e,r);c!==void 0&&Array.isArray(c)&&(c=CI(null,n,e,c[1],r),c=Yd(c,e.attrs,r),C$(n,e,r,c))}else s=D$(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function b$(n,e,t){let r=t?e.classBindings:e.styleBindings;if(pu(r)!==0)return n[ga(r)]}function C$(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ga(i)]=r}function D$(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Yd(r,o,t)}return Yd(r,e.attrs,t)}function CI(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Yd(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Yd(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),_R(n,o,t?!0:e[++s]))}return n===void 0?null:n}function S$(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,d=c[a+1],h=y$(d)?NP(c,e,t,i,pu(d),o):void 0;if(!rm(h)){rm(s)||g$(d)&&(s=NP(c,null,t,i,a,o));let g=XE(Ks(),t);OB(r,o,g,i,s)}}function NP(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],d=Array.isArray(c),h=d?c[1]:c,g=h===null,I=t[i+1];I===ni&&(I=g?Bn:void 0);let S=g?Sg(I,r):h===r?I:void 0;if(d&&!rm(S)&&(S=Sg(c,r)),rm(S)&&(a=S,o))return a;let P=n[i+1];i=o?ga(P):pu(P)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Sg(c,r))}return a}function rm(n){return n!==void 0}function A$(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ni(oN(n)))),n}function R$(n,e){return(n.flags&(e?8:16))!==0}function V(n,e=""){let t=Ze(),r=zn(),i=n+qn,s=r.firstCreatePass?fw(r,i,1,e,null):r.data[i],o=P$(r,t,s,e,n);t[i]=o,Fg()&&aw(r,t,o,s),au(s,!1)}var P$=(n,e,t,r,i)=>(Lg(!0),rB(e[dt],r));function N$(n,e,t,r=""){return fa(n,$d(),t)?e+tu(t)+r:ni}function x$(n,e,t,r,i,s=""){let o=$R(),a=N4(n,o,t,i);return aI(2),a?e+tu(t)+r+tu(i)+s:ni}function Qe(n){return it("",n),Qe}function it(n,e,t){let r=Ze(),i=N$(r,n,e,t);return i!==ni&&ix(r,Ks(),i),it}function yu(n,e,t,r,i){let s=Ze(),o=x$(s,n,e,t,r,i);return o!==ni&&ix(s,Ks(),o),yu}function ix(n,e,t){let r=XE(e,n);iB(n[dt],r,t)}function _u(n,e,t){pI(e)&&(e=e());let r=Ze(),i=$d();if(fa(r,i,e)){let s=zn(),o=Og();DN(o,r,n,e,r[dt],t)}return _u}function nh(n,e){let t=pI(n);return t&&n.set(e),t}function vu(n,e){let t=Ze(),r=zn(),i=mn();return nx(r,t,t[dt],i,n,e),vu}function M$(n,e,t){let r=zn();if(r.firstCreatePass){let i=Xr(n);GI(t,r.data,r.blueprint,i,!0),GI(e,r.data,r.blueprint,i,!1)}}function GI(n,e,t,r,i){if(n=Xt(n),Array.isArray(n))for(let s=0;s<n.length;s++)GI(n[s],e,t,r,i);else{let s=zn(),o=Ze(),a=mn(),c=ta(n)?n:Xt(n.provide),d=KE(n),h=a.providerIndexes&1048575,g=a.directiveStart,I=a.providerIndexes>>20;if(ta(n)||!n.multi){let S=new da(d,i,he,null),P=SI(c,e,i?h:h+I,g);P===-1?(RI(Wg(a,o),s,c),DI(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(S),o.push(S)):(t[P]=S,o[P]=S)}else{let S=SI(c,e,h+I,g),P=SI(c,e,h,h+I),U=S>=0&&t[S],O=P>=0&&t[P];if(i&&!O||!i&&!U){RI(Wg(a,o),s,c);let G=F$(i?O$:k$,t.length,i,r,d,n);!i&&O&&(t[P].providerFactory=G),DI(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(G),o.push(G)}else{let G=sx(t[i?P:S],d,!i&&r);DI(s,n,S>-1?S:P,G)}!i&&r&&O&&t[P].componentProviders++}}}function DI(n,e,t,r){let i=ta(e),s=bR(e);if(i||s){let c=(s?Xt(e.useClass):e).prototype.ngOnDestroy;if(c){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=d.indexOf(t);h===-1?d.push(t,[r,c]):d[h+1].push(r,c)}else d.push(t,c)}}}function sx(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function SI(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function k$(n,e,t,r,i){return WI(this.multi,[])}function O$(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Kg(r,r[Ee],this.providerFactory.index,i);o=c.slice(0,a),WI(s,o);for(let d=a;d<c.length;d++)o.push(c[d])}else o=[],WI(s,o);return o}function WI(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function F$(n,e,t,r,i,s){let o=new da(n,t,he,null);return o.multi=[],o.index=e,o.componentProviders=0,sx(o,i,r&&!t),o}function ur(n,e=[]){return t=>{t.providersResolver=(r,i)=>M$(r,i?i(n):n,e)}}var im=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},vw=(()=>{class n{compileModuleSync(t){return new nm(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=qE(t),s=aN(i.declarations).reduce((o,a)=>{let c=qs(a);return c&&o.push(new fu(c)),o},[]);return new im(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var L$=(()=>{class n{zone=j(Ge);changeDetectionScheduler=j(xi);applicationRef=j(Ui);applicationErrorHandler=j(xn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ox=new ee("",{factory:()=>!1});function Ew({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ge(se(H({},ww()),{scheduleInRootZone:t})),[{provide:Ge,useFactory:n},{provide:Mi,multi:!0,useFactory:()=>{let r=j(L$,{optional:!0});return()=>r.initialize()}},{provide:Mi,multi:!0,useFactory:()=>{let r=j(V$);return()=>{r.initialize()}}},e===!0?{provide:gI,useValue:!0}:[],{provide:mI,useValue:t??gN},{provide:xn,useFactory:()=>{let r=j(Ge),i=j(Vt),s;return o=>{r.runOutsideAngular(()=>{i.destroyed&&!s?setTimeout(()=>{throw o}):(s??=i.get(Cr),s.handleError(o))})}}}]}function Iw(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=Ew({ngZoneFactory:()=>{let i=ww(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Jd("NgZone_CoalesceEvent"),new Ge(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return $n([{provide:ox,useValue:!0},{provide:Hd,useValue:!1},r])}function ww(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var V$=(()=>{class n{subscription=new lt;initialized=!1;zone=j(Ge);pendingTasks=j(Zr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ge.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ge.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ax=(()=>{class n{applicationErrorHandler=j(xn);appRef=j(Ui);taskService=j(Zr);ngZone=j(Ge);zonelessEnabled=j(Hd);tracing=j(ya,{optional:!0});disableScheduling=j(gI,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new lt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Yg):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(mI,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Jg||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?hP:mN;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Yg+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,hP(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function U$(){return typeof $localize<"u"&&$localize.locale||th}var ym=new ee("",{providedIn:"root",factory:()=>j(ym,{optional:!0,skipSelf:!0})||U$()});function tn(n){return cR(n)}function Eu(n,e){return zp(n,e?.equal)}var cx=class{[an];constructor(e){this[an]=e}destroy(){this[an].destroy()}};var hx=Symbol("InputSignalNode#UNSET"),n3=se(H({},Gp),{transformFn:void 0,applyValueToInputSignal(n,e){Vc(n,e)}});function fx(n,e){let t=Object.create(n3);t.value=n,t.transformFn=e?.transform;function r(){if(Oc(t),t.value===hx){let i=null;throw new Z(-950,i)}return t.value}return r[an]=t,r}var r3=new ee("");r3.__NG_ELEMENT_ID__=n=>{let e=mn();if(e===null)throw new Z(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new Z(204,!1)};function ux(n,e){return fx(n,e)}function i3(n){return fx(hx,n)}var px=(ux.required=i3,ux);var Tw=new ee(""),s3=new ee("");function rh(n){return!n.moduleRef}function o3(n){let e=rh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ge);return t.run(()=>{rh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(xn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),rh(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Tw);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Tw);o.add(s),n.moduleRef.onDestroy(()=>{Gd(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return c3(r,t,()=>{let s=e.get(Zr),o=s.add(),a=e.get(_w);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(ym,th);if(tx(c||th),!e.get(s3,!0))return rh(n)?e.get(Ui):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(rh(n)){let h=e.get(Ui);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return a3?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var a3;function c3(n,e,t){try{let r=t();return Xs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var _m=null;function u3(n=[],e){return Tt.create({name:e,providers:[{provide:Nd,useValue:"platform"},{provide:Tw,useValue:new Set([()=>_m=null])},...n]})}function l3(n=[]){if(_m)return _m;let e=u3(n);return _m=e,ZN(),d3(e),e}function d3(n){let e=n.get(am,null);Ut(n,()=>{e?.forEach(t=>t())})}function Aw(){return!1}var Iu=(()=>{class n{static __NG_ELEMENT_ID__=h3}return n})();function h3(n){return f3(mn(),Ze(),(n&16)===16)}function f3(n,e,t){if(Ws(n)&&!t){let r=cr(n.index,e);return new Ys(r,r)}else if(n.type&175){let r=e[or];return new Ys(r,e)}return null}var bw=class{constructor(){}supports(e){return pw(e)}create(e){return new Cw(e)}},p3=(n,e)=>e,Cw=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||p3}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<lx(r,i,s)?t:r,a=lx(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let d=a-i,h=c-i;if(d!=h){for(let I=0;I<d;I++){let S=I<s.length?s[I]:s[I]=0,P=S+I;h<=P&&P<d&&(s[I]=S+1)}let g=o.previousIndex;s[g]=h-d}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!pw(e))throw new Z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,zN(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Dw(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new vm),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new vm),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Dw=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Sw=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},vm=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Sw,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function lx(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function dx(){return new Rw([new bw])}var Rw=(()=>{class n{factories;static \u0275prov=ie({token:n,providedIn:"root",factory:dx});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=j(n,{optional:!0,skipSelf:!0});return n.create(t,r||dx())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Z(901,!1)}}return n})();function gx(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;We(8);try{let s=i?.injector??l3(r),o=[Ew({}),{provide:xi,useExisting:ax},eP,...t||[]],a=new Qd({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return o3({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{We(9)}}function Pw(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var _x=null;function lr(){return _x}function Nw(n){_x??=n}var sh=class{},xw=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>j(vx),providedIn:"platform"})}return n})();var vx=(()=>{class n extends xw{_location;_history;_doc=j(zt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return lr().getBaseHref(this._doc)}onPopState(t){let r=lr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=lr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Ex(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function mx(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Zs(n){return n&&n[0]!=="?"?`?${n}`:n}var Em=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>j(wx),providedIn:"root"})}return n})(),Ix=new ee(""),wx=(()=>{class n extends Em{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(zt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ex(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Zs(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Zs(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Zs(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(we(xw),we(Ix,8))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wu=(()=>{class n{_subject=new Ft;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=y3(mx(yx(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Zs(r))}normalize(t){return n.stripTrailingSlash(m3(this._basePath,yx(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Zs(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Zs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Zs;static joinWithSlash=Ex;static stripTrailingSlash=mx;static \u0275fac=function(r){return new(r||n)(we(Em))};static \u0275prov=ie({token:n,factory:()=>g3(),providedIn:"root"})}return n})();function g3(){return new wu(we(Em))}function m3(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function yx(n){return n.replace(/\/index.html$/,"")}function y3(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Mw=/\s+/,Tx=[],oh=(()=>{class n{_ngEl;_renderer;initialClasses=Tx;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(Mw):Tx}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Mw):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Mw).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(he(Li),he(Js))};static \u0275dir=et({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Im=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},eo=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Im(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),bx(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);bx(s,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(he(_a),he(Xd),he(Rw))};static \u0275dir=et({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function bx(n,e){n.context.$implicit=e.item}var ji=(()=>{class n{_viewContainer;_context=new wm;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Cx(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Cx(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(he(_a),he(Xd))};static \u0275dir=et({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),wm=class{$implicit=null;ngIf=null};function Cx(n,e){if(n&&!n.createEmbeddedView)throw new Z(2020,!1)}var ri=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Vi({type:n});static \u0275inj=Yr({})}return n})();function kw(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var ah=class{};var Dx="browser";var ch=class{_doc;constructor(e){this._doc=e}manager},bm=(()=>{class n extends ch{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(we(zt))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),Dm=new ee(""),Uw=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof bm));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof bm);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new Z(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(we(Dm),we(Ge))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),Ow="ng-app-id";function Sx(n){for(let e of n)e.remove()}function Ax(n,e){let t=e.createElement("style");return t.textContent=n,t}function _3(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Ow}="${e}"],link[${Ow}="${e}"]`);if(i)for(let s of i)s.removeAttribute(Ow),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function Lw(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var jw=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,_3(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Ax);r?.forEach(i=>this.addUsage(i,this.external,Lw))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Sx(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Sx(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Ax(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Lw(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(we(zt),we(om),we(cm,8),we(ma))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),Fw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Bw=/%COMP%/g;var Px="%COMP%",v3=`_nghost-${Px}`,E3=`_ngcontent-${Px}`,I3=!0,w3=new ee("",{providedIn:"root",factory:()=>I3});function T3(n){return E3.replace(Bw,n)}function b3(n){return v3.replace(Bw,n)}function Nx(n,e){return e.map(t=>t.replace(Bw,n))}var $w=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,c=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=c,this.tracingService=d,this.platformIsServer=!1,this.defaultRenderer=new uh(t,o,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Cm?i.applyToHost(t):i instanceof lh&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer,I=this.tracingService;switch(r.encapsulation){case Oi.Emulated:s=new Cm(c,d,r,this.appId,h,o,a,g,I);break;case Oi.ShadowDom:return new Vw(c,d,t,r,o,a,this.nonce,g,I);default:s=new lh(c,d,r,h,o,a,g,I);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(we(Uw),we(jw),we(om),we(w3),we(zt),we(Ge),we(cm),we(ya,8))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),uh=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Fw[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Rx(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Rx(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Z(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Fw[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Fw[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ti.DashCase|ti.Important)?e.style.setProperty(t,r,i&ti.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ti.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=lr().getGlobalEventTarget(this.doc,e),!e))throw new Z(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function Rx(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Vw=class extends uh{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,s,o,a,c,d){super(e,s,o,c,d),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=Nx(i.id,h);for(let I of h){let S=document.createElement("style");a&&S.setAttribute("nonce",a),S.textContent=I,this.shadowRoot.appendChild(S)}let g=i.getExternalStyles?.();if(g)for(let I of g){let S=Lw(I,s);a&&S.setAttribute("nonce",a),this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},lh=class extends uh{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,c,d){super(e,s,o,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=d?Nx(d,h):h,this.styleUrls=r.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&hu.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Cm=class extends lh{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,c,d){let h=i+"-"+r.id;super(e,t,r,s,o,a,c,d,h),this.contentAttr=T3(h),this.hostAttr=b3(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Sm=class n extends sh{supportsDOMEvents=!0;static makeCurrent(){Nw(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=C3();return t==null?null:D3(t)}resetBaseElement(){dh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return kw(document.cookie,e)}},dh=null;function C3(){return dh=dh||document.head.querySelector("base"),dh?dh.getAttribute("href"):null}function D3(n){return new URL(n,document.baseURI).pathname}var S3=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})(),xx=["alt","control","meta","shift"],A3={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},R3={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Mx=(()=>{class n extends ch{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>lr().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),xx.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),o+=d+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=A3[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),xx.forEach(o=>{if(o!==i){let a=R3[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(we(zt))};static \u0275prov=ie({token:n,factory:n.\u0275fac})}return n})();function Hw(n,e,t){let r=H({rootComponent:n,platformRef:t?.platformRef},P3(e));return gx(r)}function P3(n){return{appProviders:[...O3,...n?.providers??[]],platformProviders:k3}}function N3(){Sm.makeCurrent()}function x3(){return new Cr}function M3(){return YI(document),document}var k3=[{provide:ma,useValue:Dx},{provide:am,useValue:N3,multi:!0},{provide:zt,useFactory:M3}];var O3=[{provide:Nd,useValue:"root"},{provide:Cr,useFactory:x3},{provide:Dm,useClass:bm,multi:!0,deps:[zt]},{provide:Dm,useClass:Mx,multi:!0,deps:[zt]},$w,jw,Uw,{provide:ha,useExisting:$w},{provide:ah,useClass:S3},[]];var kx=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(we(zt))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ge="primary",Dh=Symbol("RouteTitle"),Kw=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ia(n){return new Kw(n)}function $x(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function L3(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ii(n[t],e[t]))return!1;return!0}function ii(n,e){let t=n?Qw(n):void 0,r=e?Qw(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Hx(n[i],e[i]))return!1;return!0}function Qw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Hx(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function qx(n){return n.length>0?n[n.length-1]:null}function Hi(n){return pE(n)?n:Xs(n)?at(Promise.resolve(n)):de(n)}var V3={exact:Gx,subset:Wx},zx={exact:U3,subset:j3,ignored:()=>!0};function Ox(n,e,t){return V3[t.paths](n.root,e.root,t.matrixParams)&&zx[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function U3(n,e){return ii(n,e)}function Gx(n,e,t){if(!va(n.segments,e.segments)||!Pm(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Gx(n.children[r],e.children[r],t))return!1;return!0}function j3(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Hx(n[t],e[t]))}function Wx(n,e,t){return Kx(n,e,e.segments,t)}function Kx(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!va(i,t)||e.hasChildren()||!Pm(i,t,r))}else if(n.segments.length===t.length){if(!va(n.segments,t)||!Pm(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Wx(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!va(n.segments,i)||!Pm(n.segments,i,r)||!n.children[ge]?!1:Kx(n.children[ge],e,s,r)}}function Pm(n,e,t){return e.every((r,i)=>zx[t](n[i].parameters,r.parameters))}var oi=class{root;queryParams;fragment;_queryParamMap;constructor(e=new $e([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ia(this.queryParams),this._queryParamMap}toString(){return H3.serialize(this)}},$e=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nm(this)}},to=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ia(this.parameters),this._parameterMap}toString(){return Yx(this)}};function B3(n,e){return va(n,e)&&n.every((t,r)=>ii(t.parameters,e[r].parameters))}function va(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function $3(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ge&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ge&&(t=t.concat(e(i,r)))}),t}var Sh=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>new wa,providedIn:"root"})}return n})(),wa=class{parse(e){let t=new Jw(e);return new oi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${hh(e.root,!0)}`,r=G3(e.queryParams),i=typeof e.fragment=="string"?`#${q3(e.fragment)}`:"";return`${t}${r}${i}`}},H3=new wa;function Nm(n){return n.segments.map(e=>Yx(e)).join("/")}function hh(n,e){if(!n.hasChildren())return Nm(n);if(e){let t=n.children[ge]?hh(n.children[ge],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==ge&&r.push(`${i}:${hh(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=$3(n,(r,i)=>i===ge?[hh(n.children[ge],!1)]:[`${i}:${hh(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ge]!=null?`${Nm(n)}/${t[0]}`:`${Nm(n)}/(${t.join("//")})`}}function Qx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Am(n){return Qx(n).replace(/%3B/gi,";")}function q3(n){return encodeURI(n)}function Yw(n){return Qx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xm(n){return decodeURIComponent(n)}function Fx(n){return xm(n.replace(/\+/g,"%20"))}function Yx(n){return`${Yw(n.path)}${z3(n.parameters)}`}function z3(n){return Object.entries(n).map(([e,t])=>`;${Yw(e)}=${Yw(t)}`).join("")}function G3(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Am(t)}=${Am(i)}`).join("&"):`${Am(t)}=${Am(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var W3=/^[^\/()?;#]+/;function qw(n){let e=n.match(W3);return e?e[0]:""}var K3=/^[^\/()?;=#]+/;function Q3(n){let e=n.match(K3);return e?e[0]:""}var Y3=/^[^=?&#]+/;function J3(n){let e=n.match(Y3);return e?e[0]:""}var X3=/^[^&#]+/;function Z3(n){let e=n.match(X3);return e?e[0]:""}var Jw=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new $e([],{}):new $e([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ge]=new $e(e,t)),r}parseSegment(){let e=qw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Z(4009,!1);return this.capture(e),new to(xm(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Q3(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=qw(this.remaining);i&&(r=i,this.capture(r))}e[xm(t)]=xm(r)}parseQueryParam(e){let t=J3(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=Z3(this.remaining);o&&(r=o,this.capture(r))}let i=Fx(t),s=Fx(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=qw(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Z(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ge);let o=this.parseChildren();t[s??ge]=Object.keys(o).length===1&&o[ge]?o[ge]:new $e([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Z(4011,!1)}};function Jx(n){return n.segments.length>0?new $e([],{[ge]:n}):n}function Xx(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=Xx(i);if(r===ge&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new $e(n.segments,e);return e6(t)}function e6(n){if(n.numberOfChildren===1&&n.children[ge]){let e=n.children[ge];return new $e(n.segments.concat(e.segments),e.children)}return n}function Su(n){return n instanceof oi}function Zx(n,e,t=null,r=null){let i=eM(n);return tM(i,e,t,r)}function eM(n){let e;function t(s){let o={};for(let c of s.children){let d=t(c);o[c.outlet]=d}let a=new $e(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=Jx(r);return e??i}function tM(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return zw(i,i,i,t,r);let s=t6(e);if(s.toRoot())return zw(i,i,new $e([],{}),t,r);let o=n6(s,i,n),a=o.processChildren?ph(o.segmentGroup,o.index,s.commands):rM(o.segmentGroup,o.index,s.commands);return zw(i,o.segmentGroup,a,t,r)}function Mm(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function yh(n){return typeof n=="object"&&n!=null&&n.outlets}function zw(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,d])=>{s[c]=Array.isArray(d)?d.map(h=>`${h}`):`${d}`});let o;n===e?o=t:o=nM(n,e,t);let a=Jx(Xx(o));return new oi(a,s,i)}function nM(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=nM(s,e,t)}),new $e(n.segments,r)}var km=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Mm(r[0]))throw new Z(4003,!1);let i=r.find(yh);if(i&&i!==qx(r))throw new Z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function t6(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new km(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new km(t,e,r)}var Cu=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function n6(n,e,t){if(n.isAbsolute)return new Cu(e,!0,0);if(!t)return new Cu(e,!1,NaN);if(t.parent===null)return new Cu(t,!0,0);let r=Mm(n.commands[0])?0:1,i=t.segments.length-1+r;return r6(t,i,n.numberOfDoubleDots)}function r6(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Z(4005,!1);i=r.segments.length}return new Cu(r,!1,i-s)}function i6(n){return yh(n[0])?n[0].outlets:{[ge]:n}}function rM(n,e,t){if(n??=new $e([],{}),n.segments.length===0&&n.hasChildren())return ph(n,e,t);let r=s6(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new $e(n.segments.slice(0,r.pathIndex),{});return s.children[ge]=new $e(n.segments.slice(r.pathIndex),n.children),ph(s,0,i)}else return r.match&&i.length===0?new $e(n.segments,{}):r.match&&!n.hasChildren()?Xw(n,e,t):r.match?ph(n,0,i):Xw(n,e,t)}function ph(n,e,t){if(t.length===0)return new $e(n.segments,{});{let r=i6(t),i={};if(Object.keys(r).some(s=>s!==ge)&&n.children[ge]&&n.numberOfChildren===1&&n.children[ge].segments.length===0){let s=ph(n.children[ge],e,t);return new $e(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=rM(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new $e(n.segments,i)}}function s6(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(yh(a))break;let c=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!Vx(c,d,o))return s;r+=2}else{if(!Vx(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Xw(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(yh(s)){let c=o6(s.outlets);return new $e(r,c)}if(i===0&&Mm(t[0])){let c=n.segments[e];r.push(new to(c.path,Lx(t[0]))),i++;continue}let o=yh(s)?s.outlets[ge]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Mm(a)?(r.push(new to(o,Lx(a))),i+=2):(r.push(new to(o,{})),i++)}return new $e(r,{})}function o6(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Xw(new $e([],{}),0,r))}),e}function Lx(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Vx(n,e,t){return n==t.path&&ii(e,t.parameters)}var gh="imperative",Gt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Gt||{}),Yn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Ta=class extends Yn{type=Gt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Bi=class extends Yn{urlAfterRedirects;type=Gt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},_n=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(_n||{}),_h=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(_h||{}),si=class extends Yn{reason;code;type=Gt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},$i=class extends Yn{reason;code;type=Gt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Au=class extends Yn{error;target;type=Gt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},vh=class extends Yn{urlAfterRedirects;state;type=Gt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Om=class extends Yn{urlAfterRedirects;state;type=Gt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fm=class extends Yn{urlAfterRedirects;state;shouldActivate;type=Gt.GuardsCheckEnd;constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Lm=class extends Yn{urlAfterRedirects;state;type=Gt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vm=class extends Yn{urlAfterRedirects;state;type=Gt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Um=class{route;type=Gt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},jm=class{route;type=Gt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Bm=class{snapshot;type=Gt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$m=class{snapshot;type=Gt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hm=class{snapshot;type=Gt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qm=class{snapshot;type=Gt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Eh=class{},Ru=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function a6(n){return!(n instanceof Eh)&&!(n instanceof Ru)}function c6(n,e){return n.providers&&!n._injector&&(n._injector=eh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Mr(n){return n.outlet||ge}function u6(n,e){let t=n.filter(r=>Mr(r)===e);return t.push(...n.filter(r=>Mr(r)!==e)),t}function xu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var zm=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return xu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Mu(this.rootInjector)}},Mu=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new zm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(we(Vt))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Gm=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Zw(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Zw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=eT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return eT(e,this._root).map(t=>t.value)}};function Zw(n,e){if(n===e.value)return e;for(let t of e.children){let r=Zw(n,t);if(r)return r}return null}function eT(n,e){if(n===e.value)return[e];for(let t of e.children){let r=eT(n,t);if(r.length)return r.unshift(e),r}return[]}var Qn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function bu(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ih=class extends Gm{snapshot;constructor(e,t){super(e),this.snapshot=t,cT(this,e)}toString(){return this.snapshot.toString()}};function iM(n){let e=l6(n),t=new Jt([new to("",{})]),r=new Jt({}),i=new Jt({}),s=new Jt({}),o=new Jt(""),a=new dr(t,r,s,o,i,ge,n,e.root);return a.snapshot=e.root,new Ih(new Qn(a,[]),e)}function l6(n){let e={},t={},r={},s=new Ea([],e,r,"",t,ge,n,null,{});return new wh("",new Qn(s,[]))}var dr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ae(d=>d[Dh]))??de(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ae(e=>Ia(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ae(e=>Ia(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Wm(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:H(H({},e.params),n.params),data:H(H({},e.data),n.data),resolve:H(H(H(H({},n.data),e.data),i?.data),n._resolvedData)}:r={params:H({},n.params),data:H({},n.data),resolve:H(H({},n.data),n._resolvedData??{})},i&&oM(i)&&(r.resolve[Dh]=i.title),r}var Ea=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Dh]}constructor(e,t,r,i,s,o,a,c,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ia(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ia(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},wh=class extends Gm{url;constructor(e,t){super(t),this.url=e,cT(this,t)}toString(){return sM(this._root)}};function cT(n,e){e.value._routerState=n,e.children.forEach(t=>cT(n,t))}function sM(n){let e=n.children.length>0?` { ${n.children.map(sM).join(", ")} } `:"";return`${n.value}${e}`}function Gw(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ii(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ii(e.params,t.params)||n.paramsSubject.next(t.params),L3(e.url,t.url)||n.urlSubject.next(t.url),ii(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function tT(n,e){let t=ii(n.params,e.params)&&B3(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||tT(n.parent,e.parent))}function oM(n){return typeof n.title=="string"||n.title===null}var aM=new ee(""),Ah=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ge;activateEvents=new _t;deactivateEvents=new _t;attachEvents=new _t;detachEvents=new _t;routerOutletData=px();parentContexts=j(Mu);location=j(_a);changeDetector=j(Iu);inputBinder=j(Jm,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Z(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Z(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new nT(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=et({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Fi]})}return n})(),nT=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===dr?this.route:e===Mu?this.childContexts:e===aM?this.outletData:this.parent.get(e,t)}},Jm=new ee("");var uT=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Kn({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&rt(0,"router-outlet")},dependencies:[Ah],encapsulation:2})}return n})();function lT(n){let e=n.children&&n.children.map(lT),t=e?se(H({},n),{children:e}):H({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ge&&(t.component=uT),t}function d6(n,e,t){let r=Th(n,e._root,t?t._root:void 0);return new Ih(r,e)}function Th(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=h6(n,e,t);return new Qn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Th(n,a)),o}}let r=f6(e.value),i=e.children.map(s=>Th(n,s));return new Qn(r,i)}}function h6(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Th(n,r,i);return Th(n,r)})}function f6(n){return new dr(new Jt(n.url),new Jt(n.params),new Jt(n.queryParams),new Jt(n.fragment),new Jt(n.data),n.outlet,n.component,n)}var Pu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},cM="ngNavigationCancelingError";function Km(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Su(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=uM(!1,_n.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function uM(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[cM]=!0,t.cancellationCode=e,t}function p6(n){return lM(n)&&Su(n.url)}function lM(n){return!!n&&n[cM]}var g6=(n,e,t,r)=>ae(i=>(new rT(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),rT=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Gw(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=bu(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=bu(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=bu(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=bu(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new qm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new $m(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Gw(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Gw(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Qm=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Du=class{component;route;constructor(e,t){this.component=e,this.route=t}};function m6(n,e,t){let r=n._root,i=e?e._root:null;return fh(r,i,t,[r.value])}function y6(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ku(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!ME(n)?n:e.get(n):r}function fh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=bu(e);return n.children.forEach(o=>{_6(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>mh(a,t.getContext(o),i)),i}function _6(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=v6(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Qm(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?fh(n,e,a?a.children:null,r,i):fh(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Du(a.outlet.component,o))}else o&&mh(e,a,i),i.canActivateChecks.push(new Qm(r)),s.component?fh(n,null,a?a.children:null,r,i):fh(n,null,t,r,i);return i}function v6(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!va(n.url,e.url);case"pathParamsOrQueryParamsChange":return!va(n.url,e.url)||!ii(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tT(n,e)||!ii(n.queryParams,e.queryParams);case"paramsChange":default:return!tT(n,e)}}function mh(n,e,t){let r=bu(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?mh(o,e.children.getContext(s),t):mh(o,null,t):mh(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Du(e.outlet.component,i)):t.canDeactivateChecks.push(new Du(null,i)):t.canDeactivateChecks.push(new Du(null,i))}function Rh(n){return typeof n=="function"}function E6(n){return typeof n=="boolean"}function I6(n){return n&&Rh(n.canLoad)}function w6(n){return n&&Rh(n.canActivate)}function T6(n){return n&&Rh(n.canActivateChild)}function b6(n){return n&&Rh(n.canDeactivate)}function C6(n){return n&&Rh(n.canMatch)}function dM(n){return n instanceof Si||n?.name==="EmptyError"}var Rm=Symbol("INITIAL_VALUE");function Nu(){return An(n=>mg(n.map(e=>e.pipe(Ai(1),vg(Rm)))).pipe(ae(e=>{for(let t of e)if(t!==!0){if(t===Rm)return Rm;if(t===!1||D6(t))return t}return!0}),Un(e=>e!==Rm),Ai(1)))}function D6(n){return Su(n)||n instanceof Pu}function S6(n,e){return Lt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?de(se(H({},t),{guardsResult:!0})):A6(o,r,i,n).pipe(Lt(a=>a&&E6(a)?R6(r,s,n,e):de(a)),ae(a=>se(H({},t),{guardsResult:a})))})}function A6(n,e,t,r){return at(n).pipe(Lt(i=>k6(i.component,i.route,t,e,r)),Ri(i=>i!==!0,!0))}function R6(n,e,t,r){return at(e).pipe(Jc(i=>Yc(N6(i.route.parent,r),P6(i.route,r),M6(n,i.path,t),x6(n,i.route,t))),Ri(i=>i!==!0,!0))}function P6(n,e){return n!==null&&e&&e(new Hm(n)),de(!0)}function N6(n,e){return n!==null&&e&&e(new Bm(n)),de(!0)}function x6(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return de(!0);let i=r.map(s=>bd(()=>{let o=xu(e)??t,a=ku(s,o),c=w6(a)?a.canActivate(e,n):Ut(o,()=>a(e,n));return Hi(c).pipe(Ri())}));return de(i).pipe(Nu())}function M6(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>y6(o)).filter(o=>o!==null).map(o=>bd(()=>{let a=o.guards.map(c=>{let d=xu(o.node)??t,h=ku(c,d),g=T6(h)?h.canActivateChild(r,n):Ut(d,()=>h(r,n));return Hi(g).pipe(Ri())});return de(a).pipe(Nu())}));return de(s).pipe(Nu())}function k6(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return de(!0);let o=s.map(a=>{let c=xu(e)??i,d=ku(a,c),h=b6(d)?d.canDeactivate(n,e,t,r):Ut(c,()=>d(n,e,t,r));return Hi(h).pipe(Ri())});return de(o).pipe(Nu())}function O6(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return de(!0);let s=i.map(o=>{let a=ku(o,n),c=I6(a)?a.canLoad(e,t):Ut(n,()=>a(e,t));return Hi(c)});return de(s).pipe(Nu(),hM(r))}function hM(n){return Jp(qt(e=>{if(typeof e!="boolean")throw Km(n,e)}),ae(e=>e===!0))}function F6(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return de(!0);let s=i.map(o=>{let a=ku(o,n),c=C6(a)?a.canMatch(e,t):Ut(n,()=>a(e,t));return Hi(c)});return de(s).pipe(Nu(),hM(r))}var bh=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Ch=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Tu(n){return Qc(new bh(n))}function L6(n){return Qc(new Z(4e3,!1))}function V6(n){return Qc(uM(!1,_n.GuardRejected))}var iT=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return de(r);if(i.numberOfChildren>1||!i.children[ge])return L6(`${e.redirectTo}`);i=i.children[ge]}}applyRedirectCommands(e,t,r,i,s){return U6(t,i,s).pipe(ae(o=>{if(o instanceof oi)throw new Ch(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),e,r);if(o[0]==="/")throw new Ch(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new oi(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new $e(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Z(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function U6(n,e,t){if(typeof n=="string")return de(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,params:d,data:h,title:g}=e;return Hi(Ut(t,()=>r({params:d,data:h,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:c,title:g})))}var sT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function j6(n,e,t,r,i){let s=fM(n,e,t);return s.matched?(r=c6(e,r),F6(r,e,t,i).pipe(ae(o=>o===!0?s:H({},sT)))):de(s)}function fM(n,e,t){if(e.path==="**")return B6(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?H({},sT):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||$x)(t,n,e);if(!i)return H({},sT);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?H(H({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function B6(n){return{matched:!0,parameters:n.length>0?qx(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Ux(n,e,t,r){return t.length>0&&q6(n,t,r)?{segmentGroup:new $e(e,H6(r,new $e(t,n.children))),slicedSegments:[]}:t.length===0&&z6(n,t,r)?{segmentGroup:new $e(n.segments,$6(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new $e(n.segments,n.children),slicedSegments:t}}function $6(n,e,t,r){let i={};for(let s of t)if(Xm(n,e,s)&&!r[Mr(s)]){let o=new $e([],{});i[Mr(s)]=o}return H(H({},r),i)}function H6(n,e){let t={};t[ge]=e;for(let r of n)if(r.path===""&&Mr(r)!==ge){let i=new $e([],{});t[Mr(r)]=i}return t}function q6(n,e,t){return t.some(r=>Xm(n,e,r)&&Mr(r)!==ge)}function z6(n,e,t){return t.some(r=>Xm(n,e,r))}function Xm(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function G6(n,e,t){return e.length===0&&!n.children[t]}var oT=class{};function W6(n,e,t,r,i,s,o="emptyOnly"){return new aT(n,e,t,r,i,o,s).recognize()}var K6=31,aT=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new iT(this.urlSerializer,this.urlTree)}noMatchError(e){return new Z(4002,`'${e.segmentGroup}'`)}recognize(){let e=Ux(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ae(({children:t,rootSnapshot:r})=>{let i=new Qn(r,t),s=new wh("",i),o=Zx(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Ea([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ge,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ge,t).pipe(ae(r=>({children:r,rootSnapshot:t})),js(r=>{if(r instanceof Ch)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof bh?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(ae(o=>o instanceof Qn?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return at(s).pipe(Jc(o=>{let a=r.children[o],c=u6(t,o);return this.processSegmentGroup(e,c,a,o,i)}),_g((o,a)=>(o.push(...a),o)),Bs(null),mE(),Lt(o=>{if(o===null)return Tu(r);let a=pM(o);return Q6(a),de(a)}))}processSegment(e,t,r,i,s,o,a){return at(t).pipe(Jc(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(js(d=>{if(d instanceof bh)return de(null);throw d}))),Ri(c=>!!c),js(c=>{if(dM(c))return G6(r,i,s)?de(new oT):Tu(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return Mr(r)!==o&&(o===ge||!Xm(i,s,r))?Tu(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):Tu(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:d,consumedSegments:h,positionalParamSegments:g,remainingSegments:I}=fM(t,i,s);if(!c)return Tu(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>K6&&(this.allowRedirects=!1));let S=new Ea(s,d,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,jx(i),Mr(i),i.component??i._loadedComponent??null,i,Bx(i)),P=Wm(S,a,this.paramsInheritanceStrategy);return S.params=Object.freeze(P.params),S.data=Object.freeze(P.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,g,S,e).pipe(An(O=>this.applyRedirects.lineralizeSegments(i,O)),Lt(O=>this.processSegment(e,r,t,O.concat(I),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=j6(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(An(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(An(({routes:d})=>{let h=r._loadedInjector??e,{parameters:g,consumedSegments:I,remainingSegments:S}=c,P=new Ea(I,g,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,jx(r),Mr(r),r.component??r._loadedComponent??null,r,Bx(r)),U=Wm(P,o,this.paramsInheritanceStrategy);P.params=Object.freeze(U.params),P.data=Object.freeze(U.data);let{segmentGroup:O,slicedSegments:G}=Ux(t,I,S,d);if(G.length===0&&O.hasChildren())return this.processChildren(h,d,O,P).pipe(ae(re=>new Qn(P,re)));if(d.length===0&&G.length===0)return de(new Qn(P,[]));let ne=Mr(r)===s;return this.processSegment(h,d,O,G,ne?ge:s,!0,P).pipe(ae(re=>new Qn(P,re instanceof Qn?[re]:[])))}))):Tu(t)))}getChildConfig(e,t,r){return t.children?de({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?de({routes:t._loadedRoutes,injector:t._loadedInjector}):O6(e,t,r,this.urlSerializer).pipe(Lt(i=>i?this.configLoader.loadChildren(e,t).pipe(qt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):V6(t))):de({routes:[],injector:e})}};function Q6(n){n.sort((e,t)=>e.value.outlet===ge?-1:t.value.outlet===ge?1:e.value.outlet.localeCompare(t.value.outlet))}function Y6(n){let e=n.value.routeConfig;return e&&e.path===""}function pM(n){let e=[],t=new Set;for(let r of n){if(!Y6(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=pM(r.children);e.push(new Qn(r.value,i))}return e.filter(r=>!t.has(r))}function jx(n){return n.data||{}}function Bx(n){return n.resolve||{}}function J6(n,e,t,r,i,s){return Lt(o=>W6(n,e,t,r,o.extractedUrl,i,s).pipe(ae(({state:a,tree:c})=>se(H({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function X6(n,e){return Lt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return de(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let d of gM(c))o.add(d);let a=0;return at(o).pipe(Jc(c=>s.has(c)?Z6(c,r,n,e):(c.data=Wm(c,c.parent,n).resolve,de(void 0))),qt(()=>a++),Xc(1),Lt(c=>a===o.size?de(t):Dn))})}function gM(n){let e=n.children.map(t=>gM(t)).flat();return[n,...e]}function Z6(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!oM(i)&&(s[Dh]=i.title),bd(()=>(n.data=Wm(n,n.parent,t).resolve,eH(s,n,e,r).pipe(ae(o=>(n._resolvedData=o,n.data=H(H({},n.data),o),null)))))}function eH(n,e,t,r){let i=Qw(n);if(i.length===0)return de({});let s={};return at(i).pipe(Lt(o=>tH(n[o],e,t,r).pipe(Ri(),qt(a=>{if(a instanceof Pu)throw Km(new wa,a);s[o]=a}))),Xc(1),ae(()=>s),js(o=>dM(o)?Dn:Qc(o)))}function tH(n,e,t,r){let i=xu(e)??r,s=ku(n,i),o=s.resolve?s.resolve(e,t):Ut(i,()=>s(e,t));return Hi(o)}function Ww(n){return An(e=>{let t=n(e);return t?at(t).pipe(ae(()=>e)):de(e)})}var dT=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ge);return r}getResolvedTitleForRoute(t){return t.data[Dh]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>j(mM),providedIn:"root"})}return n})(),mM=(()=>{class n extends dT{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(we(kx))};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ph=new ee("",{providedIn:"root",factory:()=>({})}),Nh=new ee(""),yM=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=j(vw);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return de(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Hi(Ut(t,()=>r.loadComponent())).pipe(ae(vM),An(EM),qt(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Cd(()=>{this.componentLoaders.delete(r)})),s=new zc(i,()=>new Ft).pipe(qc());return this.componentLoaders.set(r,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return de({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=_M(r,this.compiler,t,this.onLoadEndListener).pipe(Cd(()=>{this.childrenLoaders.delete(r)})),o=new zc(s,()=>new Ft).pipe(qc());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _M(n,e,t,r){return Hi(Ut(t,()=>n.loadChildren())).pipe(ae(vM),An(EM),Lt(i=>i instanceof pm||Array.isArray(i)?de(i):at(e.compileModuleAsync(i))),ae(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(Nh,[],{optional:!0,self:!0}).flat()),{routes:o.map(lT),injector:s}}))}function nH(n){return n&&typeof n=="object"&&"default"in n}function vM(n){return nH(n)?n.default:n}function EM(n){return de(n)}var Zm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>j(rH),providedIn:"root"})}return n})(),rH=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),IM=new ee("");var wM=new ee(""),TM=(()=>{class n{currentNavigation=Gn(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Ft;transitionAbortWithErrorSubject=new Ft;configLoader=j(yM);environmentInjector=j(Vt);destroyRef=j(Rr);urlSerializer=j(Sh);rootContexts=j(Mu);location=j(wu);inputBindingEnabled=j(Jm,{optional:!0})!==null;titleStrategy=j(dT);options=j(Ph,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=j(Zm);createViewTransition=j(IM,{optional:!0});navigationErrorHandler=j(wM,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>de(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Um(i)),r=i=>this.events.next(new jm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;tn(()=>{this.transitions?.next(se(H({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new Jt(null),this.transitions.pipe(Un(r=>r!==null),An(r=>{let i=!1;return de(r).pipe(An(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",_n.SupersededByNewNavigation),Dn;this.currentTransition=r,this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?se(H({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>s.abortController.abort()});let o=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!o&&a!=="reload")return this.events.next(new $i(s.id,this.urlSerializer.serialize(s.rawUrl),"",_h.IgnoredSameUrlNavigation)),s.resolve(!1),Dn;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return de(s).pipe(An(c=>(this.events.next(new Ta(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?Dn:Promise.resolve(c))),J6(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),qt(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=c.urlAfterRedirects,h));let d=new vh(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}));if(o&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:c,extractedUrl:d,source:h,restoredState:g,extras:I}=s,S=new Ta(c,this.urlSerializer.serialize(d),h,g);this.events.next(S);let P=iM(this.rootComponentType).snapshot;return this.currentTransition=r=se(H({},s),{targetSnapshot:P,urlAfterRedirects:d,extras:se(H({},I),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(U=>(U.finalUrl=d,U)),de(r)}else return this.events.next(new $i(s.id,this.urlSerializer.serialize(s.extractedUrl),"",_h.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Dn}),qt(s=>{let o=new Om(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(o)}),ae(s=>(this.currentTransition=r=se(H({},s),{guards:m6(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),S6(this.environmentInjector,s=>this.events.next(s)),qt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Km(this.urlSerializer,s.guardsResult);let o=new Fm(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(o)}),Un(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",_n.GuardRejected),!1)),Ww(s=>{if(s.guards.canActivateChecks.length!==0)return de(s).pipe(qt(o=>{let a=new Lm(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),An(o=>{let a=!1;return de(o).pipe(X6(this.paramsInheritanceStrategy,this.environmentInjector),qt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(o,"",_n.NoDataFromResolver)}}))}),qt(o=>{let a=new Vm(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}))}),Ww(s=>{let o=a=>{let c=[];if(a.routeConfig?.loadComponent){let d=xu(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(d,a.routeConfig).pipe(qt(h=>{a.component=h}),ae(()=>{})))}for(let d of a.children)c.push(...o(d));return c};return mg(o(s.targetSnapshot.root)).pipe(Bs(null),Ai(1))}),Ww(()=>this.afterPreactivation()),An(()=>{let{currentSnapshot:s,targetSnapshot:o}=r,a=this.createViewTransition?.(this.environmentInjector,s.root,o.root);return a?at(a).pipe(ae(()=>r)):de(r)}),ae(s=>{let o=d6(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=se(H({},s),{targetRouterState:o}),this.currentNavigation.update(a=>(a.targetRouterState=o,a)),r}),qt(()=>{this.events.next(new Eh)}),g6(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Ai(1),Eg(new fe(s=>{let o=r.abortController.signal,a=()=>s.next();return o.addEventListener("abort",a),()=>o.removeEventListener("abort",a)}).pipe(Un(()=>!i&&!r.targetRouterState),qt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",_n.Aborted)}))),qt({next:s=>{i=!0,this.lastSuccessfulNavigation=tn(this.currentNavigation),this.events.next(new Bi(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Eg(this.transitionAbortWithErrorSubject.pipe(qt(s=>{throw s}))),Cd(()=>{i||this.cancelNavigationTransition(r,"",_n.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),js(s=>{if(this.destroyed)return r.resolve(!1),Dn;if(i=!0,lM(s))this.events.next(new si(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),p6(s)?this.events.next(new Ru(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let o=new Au(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let a=Ut(this.environmentInjector,()=>this.navigationErrorHandler?.(o));if(a instanceof Pu){let{message:c,cancellationCode:d}=Km(this.urlSerializer,a);this.events.next(new si(r.id,this.urlSerializer.serialize(r.extractedUrl),c,d)),this.events.next(new Ru(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(o),s}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Dn}))}))}cancelNavigationTransition(t,r,i){let s=new si(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=tn(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iH(n){return n!==gh}var bM=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>j(sH),providedIn:"root"})}return n})(),Ym=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},sH=(()=>{class n extends Ym{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Nr(n)))(i||n)}})();static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),CM=(()=>{class n{urlSerializer=j(Sh);options=j(Ph,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=j(wu);urlHandlingStrategy=j(Zm);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new oi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let s=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,o=i??s;return o instanceof oi?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=iM(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:()=>j(oH),providedIn:"root"})}return n})(),oH=(()=>{class n extends CM{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Ta?this.updateStateMemento():t instanceof $i?this.commitTransition(r):t instanceof vh?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Eh?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof si&&t.code!==_n.SupersededByNewNavigation&&t.code!==_n.Redirect?this.restoreHistory(r):t instanceof Au?this.restoreHistory(r,!0):t instanceof Bi&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(t)||s){let a=this.browserPageId,c=H(H({},o),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=H(H({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===t.finalUrl&&s===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Nr(n)))(i||n)}})();static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hT(n,e){n.events.pipe(Un(t=>t instanceof Bi||t instanceof si||t instanceof Au||t instanceof $i),ae(t=>t instanceof Bi||t instanceof $i?0:(t instanceof si?t.code===_n.Redirect||t.code===_n.SupersededByNewNavigation:!1)?2:1),Un(t=>t!==2),Ai(1)).subscribe(()=>{e()})}var aH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},vn=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=j(gw);stateManager=j(CM);options=j(Ph,{optional:!0})||{};pendingTasks=j(Zr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=j(TM);urlSerializer=j(Sh);location=j(wu);urlHandlingStrategy=j(Zm);injector=j(Vt);_events=new Ft;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=j(bM);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=j(Nh,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!j(Jm,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new lt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=tn(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof si&&r.code!==_n.Redirect&&r.code!==_n.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Bi)this.navigated=!0;else if(r instanceof Ru){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=H({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||iH(i.source)},o);this.scheduleNavigation(a,gh,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}a6(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),gh,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=H({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s).catch(c=>{this.disposed||this.injector.get(xn)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return tn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(lT),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,d=c?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=H(H({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let g;try{let I=i?i.snapshot:this.routerState.snapshot.root;g=eM(I)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),g=this.currentUrlTree.root}return tM(g,t,h,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Su(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,gh,null,r)}navigate(t,r={skipLocationChange:!1}){return uH(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(eu(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=H({},aH):r===!1?i=H({},cH):i=r,Su(t))return Ox(this.currentUrlTree,t,i);let s=this.parseUrl(t);return Ox(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,d;o?(a=o.resolve,c=o.reject,d=o.promise):d=new Promise((g,I)=>{a=g,c=I});let h=this.pendingTasks.add();return hT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uH(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Z(4008,!1)}var dH=new ee("");function fT(n,...e){return $n([{provide:Nh,multi:!0,useValue:n},[],{provide:dr,useFactory:hH,deps:[vn]},{provide:gm,multi:!0,useFactory:fH},e.map(t=>t.\u0275providers)])}function hH(n){return n.routerState.root}function fH(){let n=j(Tt);return e=>{let t=n.get(Ui);if(e!==t.components[0])return;let r=n.get(vn),i=n.get(pH);n.get(gH)===1&&r.initialNavigation(),n.get(mH,null,{optional:!0})?.setUpPreloading(),n.get(dH,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var pH=new ee("",{factory:()=>new Ft}),gH=new ee("",{providedIn:"root",factory:()=>1});var mH=new ee("");var DM=()=>{};var RM=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},_H=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ey={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,g=(s&3)<<4|a>>4,I=(a&15)<<2|d>>6,S=d&63;c||(S=64,o||(I=64)),r.push(t[h],t[g],t[I],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(RM(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):_H(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||g==null)throw new gT;let I=s<<2|a>>4;if(r.push(I),d!==64){let S=a<<4&240|d>>2;if(r.push(S),g!==64){let P=d<<6&192|g;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},gT=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},vH=function(n){let e=RM(n);return ey.encodeByteArray(e,!0)},Mh=function(n){return vH(n).replace(/\./g,"")},ty=function(n){try{return ey.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function yT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var EH=()=>yT().__FIREBASE_DEFAULTS__,IH=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},wH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&ty(n[1]);return e&&JSON.parse(e)},ny=()=>{try{return DM()||EH()||IH()||wH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},_T=n=>{var e,t;return(t=(e=ny())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},PM=n=>{let e=_T(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},vT=()=>{var n;return(n=ny())===null||n===void 0?void 0:n.config},ET=n=>{var e;return(e=ny())===null||e===void 0?void 0:e[`_${n}`]};var ba=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function no(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function ry(n){return C(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function NM(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Mh(JSON.stringify(t)),Mh(JSON.stringify(o)),""].join(".")}var xh={};function TH(){let n={prod:[],emulator:[]};for(let e of Object.keys(xh))xh[e]?n.emulator.push(e):n.prod.push(e);return n}function bH(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var SM=!1;function iy(n,e){if(typeof window>"u"||typeof document>"u"||!no(window.location.host)||xh[n]===e||xh[n]||SM)return;xh[n]=e;function t(I){return`__firebase__banner__${I}`}let r="__firebase__banner",s=TH().prod.length>0;function o(){let I=document.getElementById(r);I&&I.remove()}function a(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function c(I,S){I.setAttribute("width","24"),I.setAttribute("id",S),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function d(){let I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{SM=!0,o()},I}function h(I,S){I.setAttribute("id",S),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function g(){let I=bH(r),S=t("text"),P=document.getElementById(S)||document.createElement("span"),U=t("learnmore"),O=document.getElementById(U)||document.createElement("a"),G=t("preprendIcon"),ne=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){let re=I.element;a(re),h(O,U);let Re=d();c(ne,G),re.append(ne,P,O,Re),document.body.appendChild(re)}s?(P.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function CH(){var n;let e=(n=ny())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kM(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function OM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FM(){let n=Wt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function LM(){return!CH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kh(){try{return typeof indexedDB=="object"}catch{return!1}}function VM(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var DH="FirebaseError",Jn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=DH,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kr.prototype.create)}},kr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?SH(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Jn(i,a,r)}};function SH(n,e){return n.replace(AH,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var AH=/\{\$([^}]+)}/g;function UM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ai(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(AM(s)&&AM(o)){if(!ai(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function AM(n){return n!==null&&typeof n=="object"}function Oh(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ou(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Fu(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function jM(n,e){let t=new mT(n,e);return t.subscribe.bind(t)}var mT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");RH(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=pT),i.error===void 0&&(i.error=pT),i.complete===void 0&&(i.complete=pT);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function RH(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function pT(){}var Vpe=14400*1e3;function Et(n){return n&&n._delegate?n._delegate:n}var En=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ca="[DEFAULT]";var IT=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ba;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NH(e))try{this.getOrInitializeService({instanceIdentifier:Ca})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return C(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ca){return this.instances.has(e)}getOptions(e=Ca){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PH(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ca){return this.component?this.component.multipleInstances?e:Ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function PH(n){return n===Ca?void 0:n}function NH(n){return n.instantiationMode==="EAGER"}var sy=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new IT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var xH=[],De=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(De||{}),MH={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},kH=De.INFO,OH={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},FH=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=OH[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ci=class{constructor(e){this.name=e,this._logLevel=kH,this._logHandler=FH,this._userLogHandler=null,xH.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}};var LH=(n,e)=>e.some(t=>n instanceof t),BM,$M;function VH(){return BM||(BM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UH(){return $M||($M=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var HM=new WeakMap,TT=new WeakMap,qM=new WeakMap,wT=new WeakMap,CT=new WeakMap;function jH(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(ui(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&HM.set(t,n)}).catch(()=>{}),CT.set(e,n),e}function BH(n){if(TT.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});TT.set(n,e)}var bT={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return TT.get(n);if(e==="objectStoreNames")return n.objectStoreNames||qM.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ui(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function zM(n){bT=n(bT)}function $H(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(oy(this),e,...t);return qM.set(r,e.sort?e.sort():[e]),ui(r)}:UH().includes(n)?function(...e){return n.apply(oy(this),e),ui(HM.get(this))}:function(...e){return ui(n.apply(oy(this),e))}}function HH(n){return typeof n=="function"?$H(n):(n instanceof IDBTransaction&&BH(n),LH(n,VH())?new Proxy(n,bT):n)}function ui(n){if(n instanceof IDBRequest)return jH(n);if(wT.has(n))return wT.get(n);let e=HH(n);return e!==n&&(wT.set(n,e),CT.set(e,n)),e}var oy=n=>CT.get(n);function ay(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=ui(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ui(o.result),c.oldVersion,c.newVersion,ui(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}var qH=["get","getKey","getAll","getAllKeys","count"],zH=["put","add","delete","clear"],DT=new Map;function GM(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(DT.get(e))return DT.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=zH.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||qH.includes(t)))return;let s=function(o,...a){return C(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),d=c.store;return r&&(d=d.index(a.shift())),(yield Promise.all([d[t](...a),i&&c.done]))[0]})};return DT.set(e,s),s}zM(n=>se(H({},n),{get:(e,t,r)=>GM(e,t)||n.get(e,t,r),has:(e,t)=>!!GM(e,t)||n.has(e,t)}));var AT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(GH(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function GH(n){let e=n.getComponent();return e?.type==="VERSION"}var RT="@firebase/app",WM="0.13.2";var qi=new ci("@firebase/app"),WH="@firebase/app-compat",KH="@firebase/analytics-compat",QH="@firebase/analytics",YH="@firebase/app-check-compat",JH="@firebase/app-check",XH="@firebase/auth",ZH="@firebase/auth-compat",eq="@firebase/database",tq="@firebase/data-connect",nq="@firebase/database-compat",rq="@firebase/functions",iq="@firebase/functions-compat",sq="@firebase/installations",oq="@firebase/installations-compat",aq="@firebase/messaging",cq="@firebase/messaging-compat",uq="@firebase/performance",lq="@firebase/performance-compat",dq="@firebase/remote-config",hq="@firebase/remote-config-compat",fq="@firebase/storage",pq="@firebase/storage-compat",gq="@firebase/firestore",mq="@firebase/ai",yq="@firebase/firestore-compat",_q="firebase",vq="11.10.0";var PT="[DEFAULT]",Eq={[RT]:"fire-core",[WH]:"fire-core-compat",[QH]:"fire-analytics",[KH]:"fire-analytics-compat",[JH]:"fire-app-check",[YH]:"fire-app-check-compat",[XH]:"fire-auth",[ZH]:"fire-auth-compat",[eq]:"fire-rtdb",[tq]:"fire-data-connect",[nq]:"fire-rtdb-compat",[rq]:"fire-fn",[iq]:"fire-fn-compat",[sq]:"fire-iid",[oq]:"fire-iid-compat",[aq]:"fire-fcm",[cq]:"fire-fcm-compat",[uq]:"fire-perf",[lq]:"fire-perf-compat",[dq]:"fire-rc",[hq]:"fire-rc-compat",[fq]:"fire-gcs",[pq]:"fire-gcs-compat",[gq]:"fire-fst",[yq]:"fire-fst-compat",[mq]:"fire-vertex","fire-js":"fire-js",[_q]:"fire-js-all"};var Fh=new Map,Iq=new Map,NT=new Map;function KM(n,e){try{n.container.addComponent(e)}catch(t){qi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Or(n){let e=n.name;if(NT.has(e))return qi.debug(`There were multiple attempts to register component ${e}.`),!1;NT.set(e,n);for(let t of Fh.values())KM(t,n);for(let t of Iq.values())KM(t,n);return!0}function Lu(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Mn(n){return n==null?!1:n.settings!==void 0}var wq={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ro=new kr("app","Firebase",wq);var xT=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new En("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ro.create("app-deleted",{appName:this._name})}};var io=vq;function OT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:PT,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ro.create("bad-app-name",{appName:String(i)});if(t||(t=vT()),!t)throw ro.create("no-options");let s=Fh.get(i);if(s){if(ai(t,s.options)&&ai(r,s.config))return s;throw ro.create("duplicate-app",{appName:i})}let o=new sy(i);for(let c of NT.values())o.addComponent(c);let a=new xT(t,r,o);return Fh.set(i,a),a}function Da(n=PT){let e=Fh.get(n);if(!e&&n===PT&&vT())return OT();if(!e)throw ro.create("no-app",{appName:n});return e}function cy(){return Array.from(Fh.values())}function ht(n,e,t){var r;let i=(r=Eq[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qi.warn(a.join(" "));return}Or(new En(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Tq="firebase-heartbeat-database",bq=1,Lh="firebase-heartbeat-store",ST=null;function XM(){return ST||(ST=ay(Tq,bq,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Lh)}catch(t){console.warn(t)}}}}).catch(n=>{throw ro.create("idb-open",{originalErrorMessage:n.message})})),ST}function Cq(n){return C(this,null,function*(){try{let t=(yield XM()).transaction(Lh),r=yield t.objectStore(Lh).get(ZM(n));return yield t.done,r}catch(e){if(e instanceof Jn)qi.warn(e.message);else{let t=ro.create("idb-get",{originalErrorMessage:e?.message});qi.warn(t.message)}}})}function QM(n,e){return C(this,null,function*(){try{let r=(yield XM()).transaction(Lh,"readwrite");yield r.objectStore(Lh).put(e,ZM(n)),yield r.done}catch(t){if(t instanceof Jn)qi.warn(t.message);else{let r=ro.create("idb-set",{originalErrorMessage:t?.message});qi.warn(r.message)}}})}function ZM(n){return`${n.name}!${n.options.appId}`}var Dq=1024,Sq=30,MT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new kT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return C(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=YM();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Sq){let o=Rq(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){qi.warn(r)}})}getHeartbeatsHeader(){return C(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=YM(),{heartbeatsToSend:r,unsentEntries:i}=Aq(this._heartbeatsCache.heartbeats),s=Mh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return qi.warn(t),""}})}};function YM(){return new Date().toISOString().substring(0,10)}function Aq(n,e=Dq){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),JM(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),JM(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var kT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return C(this,null,function*(){return kh()?VM().then(()=>!0).catch(()=>!1):!1})}read(){return C(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Cq(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return C(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return QM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return C(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return QM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function JM(n){return Mh(JSON.stringify({version:2,heartbeats:n})).length}function Rq(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Pq(n){Or(new En("platform-logger",e=>new AT(e),"PRIVATE")),Or(new En("heartbeat",e=>new MT(e),"PRIVATE")),ht(RT,WM,n),ht(RT,WM,"esm2017"),ht("fire-js","")}Pq("");var Nq="firebase",xq="11.10.0";ht(Nq,xq,"app");function e1(n){n===void 0&&(n=j(Tt));let e=n.get(cu);return t=>new fe(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:c=>{r.next(c),o()},complete:()=>{r.complete(),o()},error:c=>{r.error(c),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var so=new Xo("ANGULARFIRE2_VERSION");function Vh(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Uu=(n,e)=>{let t=e?[e]:cy(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Vu=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Vu||{}),t1=Aw()&&typeof Zone<"u"?Vu.WARN:Vu.SILENT;var uy=class{zone;delegate;constructor(e,t=hE){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},oo=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=j(Ge);this.outsideAngular=t.runOutsideAngular(()=>new uy(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new uy(typeof Zone>"u"?void 0:Zone.current,dE))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),n1=!1;function Mq(n,e){!n1&&(t1>Vu.SILENT||Aw())&&(n1=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),t1>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function kq(n){let e=j(Ge,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Sa(n){let e=j(Ge,{optional:!0});return e?e.run(()=>n()):n()}var Oq=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Ut(t,()=>Sa(()=>n.apply(void 0,r)))),ft=(n,e,t)=>(t||=e?Vu.WARN:Vu.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=j(oo),o=j(cu),a=j(Vt)}catch{return Mq(n,t),n.apply(this,i)}for(let d=0;d<arguments.length;d++)typeof i[d]=="function"&&(e&&(r||=Sa(()=>o.add())),i[d]=Oq(i[d],r,a));let c=kq(()=>n.apply(this,i));return e?c instanceof fe?c.pipe(Us(s.outsideAngular),Vs(s.insideAngular),e1(a)):c instanceof Promise?Sa(()=>{let d=o.add();return new Promise((h,g)=>{c.then(I=>Ut(a,()=>Sa(()=>h(I))),I=>Ut(a,()=>Sa(()=>g(I)))).finally(d)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Sa(()=>c):c instanceof fe?c.pipe(Us(s.outsideAngular),Vs(s.insideAngular)):Sa(()=>c)});var zi=class{constructor(e){return e}},Aa=class{constructor(){return cy()}};function Fq(n){return n&&n.length===1?n[0]:new zi(Da())}var FT=new ee("angularfire2._apps"),Lq={provide:zi,useFactory:Fq,deps:[[new Wn,FT]]},Vq={provide:Aa,deps:[[new Wn,FT]]};function Uq(n){return(e,t)=>{let r=t.get(ma);ht("angularfire",so.full,"core"),ht("angularfire",so.full,"app"),ht("angular",RE.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new zi(i)}}function r1(n,...e){return $n([Lq,Vq,{provide:FT,useFactory:Uq(n),multi:!0,deps:[Ge,Tt,oo,...e]}])}var i1=ft(OT,!0);var jq=new Map,Bq={activated:!1,tokenObservers:[]},$q={initialized:!1,enabled:!1};function Fr(n){return jq.get(n)||Object.assign({},Bq)}function c1(){return $q}var Hq="https://content-firebaseappcheck.googleapis.com/v1";var qq="exchangeDebugToken",s1={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Bge=1440*60*1e3;var UT=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return C(this,null,function*(){this.stop();try{this.pending=new ba,this.pending.promise.catch(t=>{}),yield zq(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ba,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function zq(n){return new Promise(e=>{setTimeout(e,n)})}var Gq={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ao=new kr("appCheck","AppCheck",Gq);function u1(n){if(!Fr(n).activated)throw ao.create("use-before-activation",{appName:n.name})}function l1(r,i){return C(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let S=yield o.getHeartbeatsHeader();S&&(s["X-Firebase-Client"]=S)}let a={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(n,a)}catch(S){throw ao.create("fetch-network-error",{originalErrorMessage:S?.message})}if(c.status!==200)throw ao.create("fetch-status-error",{httpStatus:c.status});let d;try{d=yield c.json()}catch(S){throw ao.create("fetch-parse-error",{originalErrorMessage:S?.message})}let h=d.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw ao.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});let g=Number(h[1])*1e3,I=Date.now();return{token:d.token,expireTimeMillis:I+g,issuedAtTimeMillis:I}})}function d1(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Hq}/projects/${t}/apps/${r}:${qq}?key=${i}`,body:{debug_token:e}}}var Wq="firebase-app-check-database",Kq=1,jT="firebase-app-check-store";var ly=null;function Qq(){return ly||(ly=new Promise((n,e)=>{try{let t=indexedDB.open(Wq,Kq);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ao.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(jT,{keyPath:"compositeKey"})}}}catch(t){e(ao.create("storage-open",{originalErrorMessage:t?.message}))}}),ly)}function Yq(n,e){return Jq(Xq(n),e)}function Jq(n,e){return C(this,null,function*(){let r=(yield Qq()).transaction(jT,"readwrite"),s=r.objectStore(jT).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var d;a(ao.create("storage-set",{originalErrorMessage:(d=c.target.error)===null||d===void 0?void 0:d.message}))}})})}function Xq(n){return`${n.options.appId}-${n.name}`}var Uh=new ci("@firebase/app-check");function LT(n,e){return kh()?Yq(n,e).catch(t=>{Uh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function h1(){return c1().enabled}function f1(){return C(this,null,function*(){let n=c1();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Zq={error:"UNKNOWN_ERROR"};function ez(n){return ey.encodeString(JSON.stringify(n),!1)}function BT(n,e=!1,t=!1){return C(this,null,function*(){let r=n.app;u1(r);let i=Fr(r),s=i.token,o;if(s&&!jh(s)&&(i.token=void 0,s=void 0),!s){let d=yield i.cachedTokenPromise;d&&(jh(d)?s=d:yield LT(r,void 0))}if(!e&&s&&jh(s))return{token:s.token};let a=!1;if(h1())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=l1(d1(r,yield f1()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let d=yield i.exchangeTokenPromise;return yield LT(r,d),i.token=d,{token:d.token}}catch(d){return d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Uh.warn(d.message):t&&Uh.error(d),VT(d)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=yield Fr(r).exchangeTokenPromise}catch(d){d.code==="appCheck/throttled"||d.code==="appCheck/initial-throttle"?Uh.warn(d.message):t&&Uh.error(d),o=d}let c;return s?o?jh(s)?c={token:s.token,internalError:o}:c=VT(o):(c={token:s.token},i.token=s,yield LT(r,s)):c=VT(o),a&&iz(r,c),c})}function tz(n){return C(this,null,function*(){let e=n.app;u1(e);let{provider:t}=Fr(e);if(h1()){let r=yield f1(),{token:i}=yield l1(d1(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function nz(n,e,t,r){let{app:i}=n,s=Fr(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&jh(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),o1(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>o1(n))}function p1(n,e){let t=Fr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function o1(n){let{app:e}=n,t=Fr(e),r=t.tokenRefresher;r||(r=rz(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function rz(n){let{app:e}=n;return new UT(()=>C(null,null,function*(){let t=Fr(e),r;if(t.token?r=yield BT(n,!0):r=yield BT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Fr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},s1.RETRIAL_MIN_WAIT,s1.RETRIAL_MAX_WAIT)}function iz(n,e){let t=Fr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function jh(n){return n.expireTimeMillis-Date.now()>0}function VT(n){return{token:ez(Zq),error:n}}var $T=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Fr(this.app);for(let t of e)p1(this.app,t.next);return Promise.resolve()}};function sz(n,e){return new $T(n,e)}function oz(n){return{getToken:e=>BT(n,e),getLimitedUseToken:()=>tz(n),addTokenListener:e=>nz(n,"INTERNAL",e),removeTokenListener:e=>p1(n.app,e)}}var az="@firebase/app-check",cz="0.10.1";var uz="app-check",a1="app-check-internal";function lz(){Or(new En(uz,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return sz(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(a1).initialize()})),Or(new En(a1,n=>{let e=n.getProvider("app-check").getImmediate();return oz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ht(az,cz)}lz();var dz="app-check";var ju=class{constructor(){return Uu(dz)}};var hz=["localhost","0.0.0.0","127.0.0.1"],eme=typeof window<"u"&&hz.includes(window.location.hostname);var g1=()=>{};var m1=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},fz=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},y1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,d=c?n[i+2]:0,h=s>>2,g=(s&3)<<4|a>>4,I=(a&15)<<2|d>>6,S=d&63;c||(S=64,o||(I=64)),r.push(t[h],t[g],t[I],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(m1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):fz(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let g=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||d==null||g==null)throw new qT;let I=s<<2|a>>4;if(r.push(I),d!==64){let S=a<<4&240|d>>2;if(r.push(S),g!==64){let P=d<<6&192|g;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},qT=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},pz=function(n){let e=m1(n);return y1.encodeByteArray(e,!0)},GT=function(n){return pz(n).replace(/\./g,"")},dy=function(n){try{return y1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var gz=()=>_1().__FIREBASE_DEFAULTS__,mz=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},yz=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&dy(n[1]);return e&&JSON.parse(e)},v1=()=>{try{return g1()||gz()||mz()||yz()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var E1=n=>v1()?.[`_${n}`];function Bh(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Xn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function I1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xn())}function _z(){let n=v1()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function w1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function T1(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function b1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function C1(){return!_z()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WT(){try{return typeof indexedDB=="object"}catch{return!1}}function D1(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var vz="FirebaseError",hr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=vz,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gi.prototype.create)}},Gi=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Ez(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new hr(i,a,r)}};function Ez(n,e){return n.replace(Iz,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Iz=/\{\$([^}]+)}/g;function KT(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function S1(n,e){let t=new zT(n,e);return t.subscribe.bind(t)}var zT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");wz(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=HT),i.error===void 0&&(i.error=HT),i.complete===void 0&&(i.complete=HT);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function wz(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function HT(){}var sme=14400*1e3;function co(n){return n&&n._delegate?n._delegate:n}var Lr=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Tz=[],Se=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Se||{}),bz={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},Cz=Se.INFO,Dz={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},Sz=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Dz[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},uo=class{constructor(e){this.name=e,this._logLevel=Cz,this._logHandler=Sz,this._userLogHandler=null,Tz.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}};var YT=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Az(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Az(n){return n.getComponent()?.type==="VERSION"}var JT="@firebase/app",A1="0.14.6";var Ki=new uo("@firebase/app"),Rz="@firebase/app-compat",Pz="@firebase/analytics-compat",Nz="@firebase/analytics",xz="@firebase/app-check-compat",Mz="@firebase/app-check",kz="@firebase/auth",Oz="@firebase/auth-compat",Fz="@firebase/database",Lz="@firebase/data-connect",Vz="@firebase/database-compat",Uz="@firebase/functions",jz="@firebase/functions-compat",Bz="@firebase/installations",$z="@firebase/installations-compat",Hz="@firebase/messaging",qz="@firebase/messaging-compat",zz="@firebase/performance",Gz="@firebase/performance-compat",Wz="@firebase/remote-config",Kz="@firebase/remote-config-compat",Qz="@firebase/storage",Yz="@firebase/storage-compat",Jz="@firebase/firestore",Xz="@firebase/ai",Zz="@firebase/firestore-compat",e9="firebase",t9="12.6.0";var n9={[JT]:"fire-core",[Rz]:"fire-core-compat",[Nz]:"fire-analytics",[Pz]:"fire-analytics-compat",[Mz]:"fire-app-check",[xz]:"fire-app-check-compat",[kz]:"fire-auth",[Oz]:"fire-auth-compat",[Fz]:"fire-rtdb",[Lz]:"fire-data-connect",[Vz]:"fire-rtdb-compat",[Uz]:"fire-fn",[jz]:"fire-fn-compat",[Bz]:"fire-iid",[$z]:"fire-iid-compat",[Hz]:"fire-fcm",[qz]:"fire-fcm-compat",[zz]:"fire-perf",[Gz]:"fire-perf-compat",[Wz]:"fire-rc",[Kz]:"fire-rc-compat",[Qz]:"fire-gcs",[Yz]:"fire-gcs-compat",[Jz]:"fire-fst",[Zz]:"fire-fst-compat",[Xz]:"fire-vertex","fire-js":"fire-js",[e9]:"fire-js-all"};var r9=new Map,i9=new Map,R1=new Map;function P1(n,e){try{n.container.addComponent(e)}catch(t){Ki.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function lo(n){let e=n.name;if(R1.has(e))return Ki.debug(`There were multiple attempts to register component ${e}.`),!1;R1.set(e,n);for(let t of r9.values())P1(t,n);for(let t of i9.values())P1(t,n);return!0}function Qi(n){return n==null?!1:n.settings!==void 0}var s9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},eb=new Gi("app","Firebase",s9);var Bu=t9;function Wi(n,e,t){let r=n9[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ki.warn(o.join(" "));return}lo(new Lr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var o9="firebase-heartbeat-database",a9=1,$h="firebase-heartbeat-store",QT=null;function O1(){return QT||(QT=ay(o9,a9,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore($h)}catch(t){console.warn(t)}}}}).catch(n=>{throw eb.create("idb-open",{originalErrorMessage:n.message})})),QT}function c9(n){return C(this,null,function*(){try{let t=(yield O1()).transaction($h),r=yield t.objectStore($h).get(F1(n));return yield t.done,r}catch(e){if(e instanceof hr)Ki.warn(e.message);else{let t=eb.create("idb-get",{originalErrorMessage:e?.message});Ki.warn(t.message)}}})}function N1(n,e){return C(this,null,function*(){try{let r=(yield O1()).transaction($h,"readwrite");yield r.objectStore($h).put(e,F1(n)),yield r.done}catch(t){if(t instanceof hr)Ki.warn(t.message);else{let r=eb.create("idb-set",{originalErrorMessage:t?.message});Ki.warn(r.message)}}})}function F1(n){return`${n.name}!${n.options.appId}`}var u9=1024,l9=30,XT=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new ZT(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return C(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=x1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>l9){let i=h9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ki.warn(e)}})}getHeartbeatsHeader(){return C(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=x1(),{heartbeatsToSend:t,unsentEntries:r}=d9(this._heartbeatsCache.heartbeats),i=GT(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ki.warn(e),""}})}};function x1(){return new Date().toISOString().substring(0,10)}function d9(n,e=u9){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),M1(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),M1(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var ZT=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return C(this,null,function*(){return WT()?D1().then(()=>!0).catch(()=>!1):!1})}read(){return C(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield c9(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return C(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return N1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return C(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return N1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function M1(n){return GT(JSON.stringify({version:2,heartbeats:n})).length}function h9(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function f9(n){lo(new Lr("platform-logger",e=>new YT(e),"PRIVATE")),lo(new Lr("heartbeat",e=>new XT(e),"PRIVATE")),Wi(JT,A1,n),Wi(JT,A1,"esm2020"),Wi("fire-js","")}f9("");function q1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var z1=q1,G1=new Gi("auth","Firebase",q1());var gy=new uo("@firebase/auth");function _9(n,...e){gy.logLevel<=Se.WARN&&gy.warn(`Auth (${Bu}): ${n}`,...e)}function fy(n,...e){gy.logLevel<=Se.ERROR&&gy.error(`Auth (${Bu}): ${n}`,...e)}function L1(n,...e){throw hb(n,...e)}function db(n,...e){return hb(n,...e)}function W1(n,e,t){let r=se(H({},z1()),{[e]:t});return new Gi("auth","Firebase",r).create(e,{appName:n.name})}function py(n){return W1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hb(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return G1.create(n,...e)}function He(n,e,...t){if(!n)throw hb(e,...t)}function Hh(n){let e="INTERNAL ASSERTION FAILED: "+n;throw fy(e),new Error(e)}function my(n,e){n||Hh(e)}function v9(){return V1()==="http:"||V1()==="https:"}function V1(){return typeof self<"u"&&self.location?.protocol||null}function E9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(v9()||T1()||"connection"in navigator)?navigator.onLine:!0}function I9(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Na=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,my(t>e,"Short delay should be less than long delay!"),this.isMobile=I1()||b1()}get(){return E9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function w9(n,e){my(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var yy=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var T9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var b9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],C9=new Na(3e4,6e4);function K1(n,e){return n.tenantId&&!e.tenantId?se(H({},e),{tenantId:n.tenantId}):e}function wy(s,o,a,c){return C(this,arguments,function*(n,e,t,r,i={}){return Q1(n,i,()=>C(null,null,function*(){let d={},h={};r&&(e==="GET"?h=r:d={body:JSON.stringify(r)});let g=KT(H({key:n.config.apiKey},h)).slice(1),I=yield n._getAdditionalHeaders();I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode);let S=H({method:e,headers:I},d);return w1()||(S.referrerPolicy="no-referrer"),n.emulatorConfig&&Bh(n.emulatorConfig.host)&&(S.credentials="include"),yy.fetch()(yield Y1(n,n.config.apiHost,t,g),S)}))})}function Q1(n,e,t){return C(this,null,function*(){n._canInitEmulator=!1;let r=H(H({},T9),e);try{let i=new rb(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw hy(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw hy(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw hy(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw hy(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw W1(n,h,d);L1(n,h)}}catch(i){if(i instanceof hr)throw i;L1(n,"network-request-failed",{message:String(i)})}})}function Y1(n,e,t,r){return C(this,null,function*(){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?w9(n.config,i):`${n.config.apiScheme}://${i}`;return b9.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}var rb=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(db(this.auth,"network-request-failed")),C9.get())})}};function hy(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=db(n,e,r);return i.customData._tokenResponse=t,i}function D9(n,e){return C(this,null,function*(){return wy(n,"POST","/v1/accounts:delete",e)})}function _y(n,e){return C(this,null,function*(){return wy(n,"POST","/v1/accounts:lookup",e)})}function qh(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function J1(n,e=!1){return C(this,null,function*(){let t=co(n),r=yield t.getIdToken(e),i=X1(r);He(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:qh(tb(i.auth_time)),issuedAtTime:qh(tb(i.iat)),expirationTime:qh(tb(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function tb(n){return Number(n)*1e3}function X1(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return fy("JWT malformed, contained fewer than 3 sections"),null;try{let i=dy(t);return i?JSON.parse(i):(fy("Failed to decode base64 JWT payload"),null)}catch(i){return fy("Caught error parsing JWT payload as JSON",i?.toString()),null}}function U1(n){let e=X1(n);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ib(n,e,t=!1){return C(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof hr&&S9(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function S9({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var sb=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>C(this,null,function*(){yield this.iteration()}),t)}iteration(){return C(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Gh=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qh(this.lastLoginAt),this.creationTime=qh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function vy(n){return C(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),r=yield ib(n,_y(e,{idToken:t}));He(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?ek(i.providerUserInfo):[],o=A9(n.providerData,s),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,d=a?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Gh(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,h)})}function Z1(n){return C(this,null,function*(){let e=co(n);yield vy(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function A9(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ek(n){return n.map(r=>{var i=r,{providerId:e}=i,t=Wv(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function R9(n,e){return C(this,null,function*(){let t=yield Q1(n,{},()=>C(null,null,function*(){let r=KT({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=yield Y1(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Bh(n.emulatorConfig.host)&&(c.credentials="include"),yy.fetch()(o,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function P9(n,e){return C(this,null,function*(){return wy(n,"POST","/v2/accounts:revokeToken",K1(n,e))})}var zh=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):U1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){He(e.length!==0,"internal-error");let t=U1(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return C(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(He(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return C(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield R9(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(He(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(He(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(He(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Hh("not implemented")}};function ho(n,e){He(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ra=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=Wv(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Gh(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return C(this,null,function*(){let t=yield ib(this,this.stsTokenManager.getToken(this.auth,e));return He(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return J1(this,e)}reload(){return Z1(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>H({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(se(H({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return C(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield vy(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return C(this,null,function*(){if(Qi(this.auth.app))return Promise.reject(py(this.auth));let e=yield this.getIdToken();return yield ib(this,D9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return se(H({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>H({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,d=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:g,emailVerified:I,isAnonymous:S,providerData:P,stsTokenManager:U}=t;He(g&&U,e,"internal-error");let O=zh.fromJSON(this.name,U);He(typeof g=="string",e,"internal-error"),ho(r,e.name),ho(i,e.name),He(typeof I=="boolean",e,"internal-error"),He(typeof S=="boolean",e,"internal-error"),ho(s,e.name),ho(o,e.name),ho(a,e.name),ho(c,e.name),ho(d,e.name),ho(h,e.name);let G=new n({uid:g,auth:e,email:i,emailVerified:I,displayName:r,isAnonymous:S,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:O,createdAt:d,lastLoginAt:h});return P&&Array.isArray(P)&&(G.providerData=P.map(ne=>H({},ne))),c&&(G._redirectEventId=c),G}static _fromIdTokenResponse(e,t,r=!1){return C(this,null,function*(){let i=new zh;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield vy(s),s})}static _fromGetAccountInfoResponse(e,t,r){return C(this,null,function*(){let i=t.users[0];He(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?ek(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new zh;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Gh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c})}};var j1=new Map;function Pa(n){my(n instanceof Function,"Expected a class definition");let e=j1.get(n);return e?(my(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,j1.set(n,e),e)}var N9=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return C(this,null,function*(){return!0})}_set(t,r){return C(this,null,function*(){this.storage[t]=r})}_get(t){return C(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return C(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),ob=N9;function nb(n,e,t){return`firebase:${n}:${e}:${t}`}var Ey=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=nb(this.userKey,i.apiKey,s),this.fullPersistenceKey=nb("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return C(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield _y(this.auth,{idToken:e}).catch(()=>{});return t?Ra._fromGetAccountInfoResponse(this.auth,t,e):null}return Ra._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return C(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return C(this,null,function*(){if(!t.length)return new n(Pa(ob),e,r);let i=(yield Promise.all(t.map(d=>C(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||Pa(ob),o=nb(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=yield d._get(o);if(h){let g;if(typeof h=="string"){let I=yield _y(e,{idToken:h}).catch(()=>{});if(!I)break;g=yield Ra._fromGetAccountInfoResponse(e,I,h)}else g=Ra._fromJSON(e,h);d!==s&&(a=g),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(d=>C(null,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new n(s,e,r))})}};function B1(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(O9(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(x9(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(L9(e))return"Blackberry";if(V9(e))return"Webos";if(M9(e))return"Safari";if((e.includes("chrome/")||k9(e))&&!e.includes("edge/"))return"Chrome";if(F9(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function x9(n=Xn()){return/firefox\//i.test(n)}function M9(n=Xn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function k9(n=Xn()){return/crios\//i.test(n)}function O9(n=Xn()){return/iemobile/i.test(n)}function F9(n=Xn()){return/android/i.test(n)}function L9(n=Xn()){return/blackberry/i.test(n)}function V9(n=Xn()){return/webos/i.test(n)}function tk(n,e=[]){let t;switch(n){case"Browser":t=B1(Xn());break;case"Worker":t=`${B1(Xn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bu}/${r}`}var ab=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return C(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function U9(t){return C(this,arguments,function*(n,e={}){return wy(n,"GET","/v2/passwordPolicy",K1(n,e))})}var j9=6,cb=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??j9,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var ub=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Iy(this),this.idTokenSubscription=new Iy(this),this.beforeStateQueue=new ab(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=G1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Pa(t)),this._initializationPromise=this.queue(()=>C(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield Ey.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return C(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return C(this,null,function*(){try{let t=yield _y(this,{idToken:e}),r=yield Ra._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return C(this,null,function*(){if(Qi(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return He(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return C(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return C(this,null,function*(){try{yield vy(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=I9()}_delete(){return C(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return C(this,null,function*(){if(Qi(this.app))return Promise.reject(py(this));let t=e?co(e):null;return t&&He(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return C(this,null,function*(){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>C(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return C(this,null,function*(){return Qi(this.app)?Promise.reject(py(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Qi(this.app)?Promise.reject(py(this)):this.queue(()=>C(this,null,function*(){yield this.assertedPersistence.setPersistence(Pa(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return C(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return C(this,null,function*(){let e=yield U9(this),t=new cb(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gi("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return C(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield P9(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return C(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return C(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Pa(e)||this._popupRedirectResolver;He(t,this,"argument-error"),this.redirectPersistenceManager=yield Ey.create(this,[Pa(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return C(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>C(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return C(this,null,function*(){if(e===this.currentUser)return this.queue(()=>C(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return C(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return C(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return C(this,null,function*(){if(Qi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&_9(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function B9(n){return co(n)}var Iy=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=S1(t=>this.observer=t)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var $9={loadJS(){return C(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function H9(n){$9=n}function q9(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function z9(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Pa);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function fb(n,e,t,r){return co(n).onIdTokenChanged(e,t,r)}var Ome=q9("rcb"),Fme=new Na(3e4,6e4);var Lme=new Na(2e3,1e4);var Vme=600*1e3;var Ume=new Na(3e4,6e4);var jme=new Na(5e3,15e3);var Bme=encodeURIComponent("fac");var $1="@firebase/auth",H1="1.11.1";var lb=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return C(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function G9(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function W9(n){lo(new Lr("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;He(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tk(n)},d=new ub(r,i,s,c);return z9(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),lo(new Lr("auth-internal",e=>{let t=B9(e.getProvider("auth").getImmediate());return(r=>new lb(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wi($1,H1,G9(n)),Wi($1,H1,"esm2020")}var K9=300,$me=E1("authIdTokenMaxAge")||K9;function Q9(){return document.getElementsByTagName("head")?.[0]??document}H9({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=db("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Q9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});W9("Browser");function nk(n){return new fe(function(e){var t=fb(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function _k(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var vk=_k,Ek=new kr("auth","Firebase",_k());var Ay=new ci("@firebase/auth");function X9(n,...e){Ay.logLevel<=De.WARN&&Ay.warn(`Auth (${io}): ${n}`,...e)}function by(n,...e){Ay.logLevel<=De.ERROR&&Ay.error(`Auth (${io}): ${n}`,...e)}function di(n,...e){throw Vb(n,...e)}function xa(n,...e){return Vb(n,...e)}function Ik(n,e,t){let r=Object.assign(Object.assign({},vk()),{[e]:t});return new kr("auth","Firebase",r).create(e,{appName:n.name})}function Xi(n){return Ik(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vb(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Ek.create(n,...e)}function ce(n,e,...t){if(!n)throw Vb(e,...t)}function Yi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw by(e),new Error(e)}function go(n,e){n||Yi(e)}function yb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Z9(){return rk()==="http:"||rk()==="https:"}function rk(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function e5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Z9()||kM()||"connection"in navigator)?navigator.onLine:!0}function t5(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ma=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,go(t>e,"Short delay should be less than long delay!"),this.isMobile=xM()||OM()}get(){return e5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Ub(n,e){go(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ry=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var n5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var r5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],i5=new Ma(3e4,6e4);function mo(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Zi(s,o,a,c){return C(this,arguments,function*(n,e,t,r,i={}){return wk(n,i,()=>C(null,null,function*(){let d={},h={};r&&(e==="GET"?h=r:d={body:JSON.stringify(r)});let g=Oh(Object.assign({key:n.config.apiKey},h)).slice(1),I=yield n._getAdditionalHeaders();I["Content-Type"]="application/json",n.languageCode&&(I["X-Firebase-Locale"]=n.languageCode);let S=Object.assign({method:e,headers:I},d);return MM()||(S.referrerPolicy="no-referrer"),n.emulatorConfig&&no(n.emulatorConfig.host)&&(S.credentials="include"),Ry.fetch()(yield Tk(n,n.config.apiHost,t,g),S)}))})}function wk(n,e,t){return C(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},n5),e);try{let i=new _b(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Ty(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ty(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ty(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ty(n,"user-disabled",o);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Ik(n,h,d);di(n,h)}}catch(i){if(i instanceof Jn)throw i;di(n,"network-request-failed",{message:String(i)})}})}function ef(s,o,a,c){return C(this,arguments,function*(n,e,t,r,i={}){let d=yield Zi(n,e,t,r,i);return"mfaPendingCredential"in d&&di(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function Tk(n,e,t,r){return C(this,null,function*(){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?Ub(n.config,i):`${n.config.apiScheme}://${i}`;return r5.includes(t)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}function s5(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var _b=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(xa(this.auth,"network-request-failed")),i5.get())})}};function Ty(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=xa(n,e,r);return i.customData._tokenResponse=t,i}function ik(n){return n!==void 0&&n.enterprise!==void 0}var vb=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return s5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function o5(n,e){return C(this,null,function*(){return Zi(n,"GET","/v2/recaptchaConfig",mo(n,e))})}function a5(n,e){return C(this,null,function*(){return Zi(n,"POST","/v1/accounts:delete",e)})}function Py(n,e){return C(this,null,function*(){return Zi(n,"POST","/v1/accounts:lookup",e)})}function Kh(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function jb(n,e=!1){return C(this,null,function*(){let t=Et(n),r=yield t.getIdToken(e),i=Bb(r);ce(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Kh(pb(i.auth_time)),issuedAtTime:Kh(pb(i.iat)),expirationTime:Kh(pb(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function pb(n){return Number(n)*1e3}function Bb(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return by("JWT malformed, contained fewer than 3 sections"),null;try{let i=ty(t);return i?JSON.parse(i):(by("Failed to decode base64 JWT payload"),null)}catch(i){return by("Caught error parsing JWT payload as JSON",i?.toString()),null}}function sk(n){let e=Bb(n);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function $u(n,e,t=!1){return C(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Jn&&c5(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function c5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Eb=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>C(this,null,function*(){yield this.iteration()}),t)}iteration(){return C(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Yh=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kh(this.lastLoginAt),this.creationTime=Kh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ny(n){return C(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield $u(n,Py(t,{idToken:r}));ce(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?bk(s.providerUserInfo):[],a=u5(n.providerData,o),c=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!a?.length,h=c?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Yh(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,g)})}function $b(n){return C(this,null,function*(){let e=Et(n);yield Ny(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function u5(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function bk(n){return n.map(e=>{var{providerId:t}=e,r=fE(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function l5(n,e){return C(this,null,function*(){let t=yield wk(n,{},()=>C(null,null,function*(){let r=Oh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=yield Tk(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&no(n.emulatorConfig.host)&&(c.credentials="include"),Ry.fetch()(o,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function d5(n,e){return C(this,null,function*(){return Zi(n,"POST","/v2/accounts:revokeToken",mo(n,e))})}var Qh=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ce(e.length!==0,"internal-error");let t=sk(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return C(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return C(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield l5(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ce(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ce(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Yi("not implemented")}};function fo(n,e){ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var po=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=fE(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Eb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Yh(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return C(this,null,function*(){let t=yield $u(this,this.stsTokenManager.getToken(this.auth,e));return ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return jb(this,e)}reload(){return $b(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return C(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Ny(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return C(this,null,function*(){if(Mn(this.auth.app))return Promise.reject(Xi(this.auth));let e=yield this.getIdToken();return yield $u(this,a5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,d,h;let g=(r=t.displayName)!==null&&r!==void 0?r:void 0,I=(i=t.email)!==null&&i!==void 0?i:void 0,S=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,P=(o=t.photoURL)!==null&&o!==void 0?o:void 0,U=(a=t.tenantId)!==null&&a!==void 0?a:void 0,O=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,G=(d=t.createdAt)!==null&&d!==void 0?d:void 0,ne=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:re,emailVerified:Re,isAnonymous:nt,providerData:be,stsTokenManager:b}=t;ce(re&&b,e,"internal-error");let _=Qh.fromJSON(this.name,b);ce(typeof re=="string",e,"internal-error"),fo(g,e.name),fo(I,e.name),ce(typeof Re=="boolean",e,"internal-error"),ce(typeof nt=="boolean",e,"internal-error"),fo(S,e.name),fo(P,e.name),fo(U,e.name),fo(O,e.name),fo(G,e.name),fo(ne,e.name);let E=new n({uid:re,auth:e,email:I,emailVerified:Re,displayName:g,isAnonymous:nt,photoURL:P,phoneNumber:S,tenantId:U,stsTokenManager:_,createdAt:G,lastLoginAt:ne});return be&&Array.isArray(be)&&(E.providerData=be.map(T=>Object.assign({},T))),O&&(E._redirectEventId=O),E}static _fromIdTokenResponse(e,t,r=!1){return C(this,null,function*(){let i=new Qh;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ny(s),s})}static _fromGetAccountInfoResponse(e,t,r){return C(this,null,function*(){let i=t.users[0];ce(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?bk(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Qh;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Yh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,d),c})}};var ok=new Map;function Ji(n){go(n instanceof Function,"Expected a class definition");let e=ok.get(n);return e?(go(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ok.set(n,e),e)}var h5=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return C(this,null,function*(){return!0})}_set(t,r){return C(this,null,function*(){this.storage[t]=r})}_get(t){return C(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return C(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Ib=h5;function Cy(n,e,t){return`firebase:${n}:${e}:${t}`}var xy=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Cy(this.userKey,i.apiKey,s),this.fullPersistenceKey=Cy("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return C(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Py(this.auth,{idToken:e}).catch(()=>{});return t?po._fromGetAccountInfoResponse(this.auth,t,e):null}return po._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return C(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return C(this,null,function*(){if(!t.length)return new n(Ji(Ib),e,r);let i=(yield Promise.all(t.map(d=>C(null,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||Ji(Ib),o=Cy(r,e.config.apiKey,e.name),a=null;for(let d of t)try{let h=yield d._get(o);if(h){let g;if(typeof h=="string"){let I=yield Py(e,{idToken:h}).catch(()=>{});if(!I)break;g=yield po._fromGetAccountInfoResponse(e,I,h)}else g=po._fromJSON(e,h);d!==s&&(a=g),s=d;break}}catch{}let c=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(d=>C(null,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new n(s,e,r))})}};function ak(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ak(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ck(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Pk(e))return"Blackberry";if(Nk(e))return"Webos";if(Dk(e))return"Safari";if((e.includes("chrome/")||Sk(e))&&!e.includes("edge/"))return"Chrome";if(Rk(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Ck(n=Wt()){return/firefox\//i.test(n)}function Dk(n=Wt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Sk(n=Wt()){return/crios\//i.test(n)}function Ak(n=Wt()){return/iemobile/i.test(n)}function Rk(n=Wt()){return/android/i.test(n)}function Pk(n=Wt()){return/blackberry/i.test(n)}function Nk(n=Wt()){return/webos/i.test(n)}function Hb(n=Wt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function f5(n=Wt()){var e;return Hb(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function p5(){return FM()&&document.documentMode===10}function xk(n=Wt()){return Hb(n)||Rk(n)||Nk(n)||Pk(n)||/windows phone/i.test(n)||Ak(n)}function Mk(n,e=[]){let t;switch(n){case"Browser":t=ak(Wt());break;case"Worker":t=`${ak(Wt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${io}/${r}`}var wb=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return C(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function g5(t){return C(this,arguments,function*(n,e={}){return Zi(n,"GET","/v2/passwordPolicy",mo(n,e))})}var m5=6,Tb=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:m5,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var bb=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new My(this),this.idTokenSubscription=new My(this),this.beforeStateQueue=new wb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ek,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ji(t)),this._initializationPromise=this.queue(()=>C(this,null,function*(){var r,i,s;if(!this._deleted&&(this.persistenceManager=yield xy.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return C(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return C(this,null,function*(){try{let t=yield Py(this,{idToken:e}),r=yield po._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return C(this,null,function*(){var t;if(Mn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return C(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return C(this,null,function*(){try{yield Ny(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=t5()}_delete(){return C(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return C(this,null,function*(){if(Mn(this.app))return Promise.reject(Xi(this));let t=e?Et(e):null;return t&&ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return C(this,null,function*(){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>C(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return C(this,null,function*(){return Mn(this.app)?Promise.reject(Xi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Mn(this.app)?Promise.reject(Xi(this)):this.queue(()=>C(this,null,function*(){yield this.assertedPersistence.setPersistence(Ji(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return C(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return C(this,null,function*(){let e=yield g5(this),t=new Tb(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new kr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return C(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield d5(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return C(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return C(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Ji(e)||this._popupRedirectResolver;ce(t,this,"argument-error"),this.redirectPersistenceManager=yield xy.create(this,[Ji(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return C(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>C(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return C(this,null,function*(){if(e===this.currentUser)return this.queue(()=>C(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return C(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Mk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return C(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return C(this,null,function*(){var e;if(Mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&X9(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Oa(n){return Et(n)}var My=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=jM(t=>this.observer=t)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var jy={loadJS(){return C(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function y5(n){jy=n}function kk(n){return jy.loadJS(n)}function _5(){return jy.recaptchaEnterpriseScript}function v5(){return jy.gapiScript}function Ok(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Cb=class{constructor(){this.enterprise=new Db}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},Db=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var E5="recaptcha-enterprise",Fk="NO_RECAPTCHA",Sb=class{constructor(e){this.type=E5,this.auth=Oa(e)}verify(e="verify",t=!1){return C(this,null,function*(){function r(s){return C(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>C(null,null,function*(){o5(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let d=new vb(c);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,o(d.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;ik(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(d=>{o(d)}).catch(()=>{o(Fk)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Cb().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&ik(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=_5();c.length!==0&&(c+=a),kk(c).then(()=>{i(a,s,o)}).catch(d=>{o(d)})}}).catch(a=>{o(a)})})})}};function Wh(n,e,t,r=!1,i=!1){return C(this,null,function*(){let s=new Sb(n),o;if(i)o=Fk;else try{o=yield s.verify(t)}catch{o=yield s.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,d=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Ab(n,e,t,r,i){return C(this,null,function*(){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Wh(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>C(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield Wh(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){let a=yield Wh(n,e,t);return r(n,a).catch(c=>C(null,null,function*(){var d;if(((d=n._getRecaptchaConfig())===null||d===void 0?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield Wh(n,e,t,!1,!0);return r(n,h)}return Promise.reject(c)}))}else{let a=yield Wh(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function qb(n,e){let t=Lu(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(ai(s,e??{}))return i;di(i,"already-initialized")}return t.initialize({options:e})}function I5(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ji);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function zb(n,e,t){let r=Oa(n);ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=Lk(e),{host:o,port:a}=w5(e),c=a===null?"":`:${a}`,d={url:`${s}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ce(ai(d,r.config.emulator)&&ai(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,no(o)?(ry(`${s}//${o}${c}`),iy("Auth",!0)):i||T5()}function Lk(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function w5(n){let e=Lk(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:ck(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:ck(o)}}}function ck(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function T5(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Jh=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Yi("not implemented")}_getIdTokenResponse(e){return Yi("not implemented")}_linkToIdToken(e,t){return Yi("not implemented")}_getReauthenticationResolver(e){return Yi("not implemented")}};function b5(n,e){return C(this,null,function*(){return Zi(n,"POST","/v1/accounts:signUp",e)})}function C5(n,e){return C(this,null,function*(){return ef(n,"POST","/v1/accounts:signInWithPassword",mo(n,e))})}function D5(n,e){return C(this,null,function*(){return ef(n,"POST","/v1/accounts:signInWithEmailLink",mo(n,e))})}function S5(n,e){return C(this,null,function*(){return ef(n,"POST","/v1/accounts:signInWithEmailLink",mo(n,e))})}var Xh=class n extends Jh{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return C(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ab(e,t,"signInWithPassword",C5,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return D5(e,{email:this._email,oobCode:this._password});default:di(e,"internal-error")}})}_linkToIdToken(e,t){return C(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ab(e,r,"signUpPassword",b5,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return S5(e,{idToken:t,email:this._email,oobCode:this._password});default:di(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function gb(n,e){return C(this,null,function*(){return ef(n,"POST","/v1/accounts:signInWithIdp",mo(n,e))})}function A5(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function R5(n){let e=Ou(Fu(n)).link,t=e?Ou(Fu(e)).deep_link_id:null,r=Ou(Fu(n)).deep_link_id;return(r?Ou(Fu(r)).link:null)||r||t||e||n}var ky=class n{constructor(e){var t,r,i,s,o,a;let c=Ou(Fu(e)),d=(t=c.apiKey)!==null&&t!==void 0?t:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,g=A5((i=c.mode)!==null&&i!==void 0?i:null);ce(d&&h&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=h,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=R5(e);try{return new n(t)}catch{return null}}};var Vk=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Xh._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=ky.parseLink(r);return ce(i,"argument-error"),Xh._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Oy=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Rb=class extends Oy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function P5(n,e){return C(this,null,function*(){return ef(n,"POST","/v1/accounts:signUp",mo(n,e))})}var Hu=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return C(this,null,function*(){let s=yield po._fromIdTokenResponse(e,r,i),o=uk(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return C(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=uk(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function uk(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Pb=class n extends Jn{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Uk(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Pb._fromErrorAndOperation(n,s,e,r):s})}function N5(n,e,t=!1){return C(this,null,function*(){let r=yield $u(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Hu._forOperation(n,"link",r)})}function x5(n,e,t=!1){return C(this,null,function*(){let{auth:r}=n;if(Mn(r.app))return Promise.reject(Xi(r));let i="reauthenticate";try{let s=yield $u(n,Uk(r,i,e,n),t);ce(s.idToken,r,"internal-error");let o=Bb(s.idToken);ce(o,r,"internal-error");let{sub:a}=o;return ce(n.uid===a,r,"user-mismatch"),Hu._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&di(r,"user-mismatch"),s}})}function jk(n,e,t=!1){return C(this,null,function*(){if(Mn(n.app))return Promise.reject(Xi(n));let r="signIn",i=yield Uk(n,r,e),s=yield Hu._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function Gb(n,e){return C(this,null,function*(){return jk(Oa(n),e)})}function Bk(n){return C(this,null,function*(){let e=Oa(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Wb(n,e,t){return C(this,null,function*(){if(Mn(n.app))return Promise.reject(Xi(n));let r=Oa(n),o=yield Ab(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",P5,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&Bk(n),c}),a=yield Hu._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function Kb(n,e,t){return Mn(n.app)?Promise.reject(Xi(n)):Gb(Et(n),Vk.credential(e,t)).catch(r=>C(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Bk(n),r}))}function M5(n,e){return C(this,null,function*(){return Zi(n,"POST","/v1/accounts:update",e)})}function Qb(r,i){return C(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let s=Et(n),a={idToken:yield s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=yield $u(s,M5(s.auth,a));s.displayName=c.displayName||null,s.photoURL=c.photoUrl||null;let d=s.providerData.find(({providerId:h})=>h==="password");d&&(d.displayName=s.displayName,d.photoURL=s.photoURL),yield s._updateTokensIfNecessary(c)})}function Yb(n,e,t,r){return Et(n).onIdTokenChanged(e,t,r)}function Jb(n,e,t){return Et(n).beforeAuthStateChanged(e,t)}function Xb(n){return Et(n).signOut()}var Fy="__sak";var Ly=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Fy,"1"),this.storage.removeItem(Fy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var k5=1e3,O5=10,F5=(()=>{class n extends Ly{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xk(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);p5()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,O5):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},k5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return C(this,null,function*(){yield Kr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return C(this,null,function*(){let r=yield Kr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return C(this,null,function*(){yield Kr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),$k=F5;var L5=(()=>{class n extends Ly{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Zb=L5;function V5(n){return Promise.all(n.map(e=>C(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var U5=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return C(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(h=>C(this,null,function*(){return h(r.origin,o)})),d=yield V5(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Hk(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Nb=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return C(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let d=Hk("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){let I=g;if(I.data.eventId===d)switch(I.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(I.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function li(){return window}function j5(n){li().location.href=n}function qk(){return typeof li().WorkerGlobalScope<"u"&&typeof li().importScripts=="function"}function B5(){return C(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function $5(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function H5(){return qk()?self:null}var zk="firebaseLocalStorageDb",q5=1,Vy="firebaseLocalStorage",Gk="fbase_key",ka=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function By(n,e){return n.transaction([Vy],e?"readwrite":"readonly").objectStore(Vy)}function z5(){let n=indexedDB.deleteDatabase(zk);return new ka(n).toPromise()}function xb(){let n=indexedDB.open(zk,q5);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Vy,{keyPath:Gk})}catch(i){t(i)}}),n.addEventListener("success",()=>C(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Vy)?e(r):(r.close(),yield z5(),e(yield xb()))}))})}function lk(n,e,t){return C(this,null,function*(){let r=By(n,!0).put({[Gk]:e,value:t});return new ka(r).toPromise()})}function G5(n,e){return C(this,null,function*(){let t=By(n,!1).get(e),r=yield new ka(t).toPromise();return r===void 0?null:r.value})}function dk(n,e){let t=By(n,!0).delete(e);return new ka(t).toPromise()}var W5=800,K5=3,Q5=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return C(this,null,function*(){return this.db?this.db:(this.db=yield xb(),this.db)})}_withRetries(t){return C(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>K5)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return C(this,null,function*(){return qk()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return C(this,null,function*(){this.receiver=U5._getInstance(H5()),this.receiver._subscribe("keyChanged",(t,r)=>C(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>C(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return C(this,null,function*(){var t,r;if(this.activeServiceWorker=yield B5(),!this.activeServiceWorker)return;this.sender=new Nb(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return C(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||$5()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return C(this,null,function*(){try{if(!indexedDB)return!1;let t=yield xb();return yield lk(t,Fy,"1"),yield dk(t,Fy),!0}catch{}return!1})}_withPendingWrite(t){return C(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return C(this,null,function*(){return this._withPendingWrite(()=>C(this,null,function*(){return yield this._withRetries(i=>lk(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return C(this,null,function*(){let r=yield this._withRetries(i=>G5(i,t));return this.localCache[t]=r,r})}_remove(t){return C(this,null,function*(){return this._withPendingWrite(()=>C(this,null,function*(){return yield this._withRetries(r=>dk(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return C(this,null,function*(){let t=yield this._withRetries(s=>{let o=By(s,!1).getAll();return new ka(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>C(this,null,function*(){return this._poll()}),W5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Wk=Q5;var N_e=Ok("rcb"),x_e=new Ma(3e4,6e4);function Y5(n,e){return e?Ji(e):(ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Zh=class extends Jh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gb(e,this._buildIdpRequest())}_linkToIdToken(e,t){return gb(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return gb(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function J5(n){return jk(n.auth,new Zh(n),n.bypassAuthState)}function X5(n){let{auth:e,user:t}=n;return ce(t,e,"internal-error"),x5(t,new Zh(n),n.bypassAuthState)}function Z5(n){return C(this,null,function*(){let{auth:e,user:t}=n;return ce(t,e,"internal-error"),N5(t,new Zh(n),n.bypassAuthState)})}var Mb=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>C(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return C(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return J5;case"linkViaPopup":case"linkViaRedirect":return Z5;case"reauthViaPopup":case"reauthViaRedirect":return X5;default:di(this.auth,"internal-error")}}resolve(e){go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){go(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var M_e=new Ma(2e3,1e4);var eG="pendingRedirect",Dy=new Map,kb=class n extends Mb{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return C(this,null,function*(){let e=Dy.get(this.auth._key());if(!e){try{let r=(yield tG(this.resolver,this.auth))?yield Kr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Dy.set(this.auth._key(),e)}return this.bypassAuthState||Dy.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return C(this,null,function*(){if(e.type==="signInViaRedirect")return Kr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Kr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return C(this,null,function*(){})}cleanUp(){}};function tG(n,e){return C(this,null,function*(){let t=iG(e),r=rG(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function nG(n,e){Dy.set(n._key(),e)}function rG(n){return Ji(n._redirectPersistence)}function iG(n){return Cy(eG,n.config.apiKey,n.name)}function sG(n,e,t=!1){return C(this,null,function*(){if(Mn(n.app))return Promise.reject(Xi(n));let r=Oa(n),i=Y5(r,e),o=yield new kb(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var oG=600*1e3,Ob=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!aG(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Kk(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(xa(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oG&&this.cachedEventUids.clear(),this.cachedEventUids.has(hk(e))}saveEventToCache(e){this.cachedEventUids.add(hk(e)),this.lastProcessedEventTime=Date.now()}};function hk(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Kk({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function aG(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kk(n);default:return!1}}function cG(t){return C(this,arguments,function*(n,e={}){return Zi(n,"GET","/v1/projects",e)})}var uG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lG=/^https?/;function dG(n){return C(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield cG(n);for(let t of e)try{if(hG(t))return}catch{}di(n,"unauthorized-domain")})}function hG(n){let e=yb(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!lG.test(t))return!1;if(uG.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var fG=new Ma(3e4,6e4);function fk(){let n=li().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function pG(n){return new Promise((e,t)=>{var r,i,s;function o(){fk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fk(),t(xa(n,"network-request-failed"))},timeout:fG.get()})}if(!((i=(r=li().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=li().gapi)===null||s===void 0)&&s.load)o();else{let a=Ok("iframefcb");return li()[a]=()=>{gapi.load?o():t(xa(n,"network-request-failed"))},kk(`${v5()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Sy=null,e})}var Sy=null;function gG(n){return Sy=Sy||pG(n),Sy}var mG=new Ma(5e3,15e3),yG="__/auth/iframe",_G="emulator/auth/iframe",vG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IG(n){let e=n.config;ce(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Ub(e,_G):`https://${n.config.authDomain}/${yG}`,r={apiKey:e.apiKey,appName:n.name,v:io},i=EG.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Oh(r).slice(1)}`}function wG(n){return C(this,null,function*(){let e=yield gG(n),t=li().gapi;return ce(t,n,"internal-error"),e.open({where:document.body,url:IG(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vG,dontclear:!0},r=>new Promise((i,s)=>C(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=xa(n,"network-request-failed"),a=li().setTimeout(()=>{s(o)},mG.get());function c(){li().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var TG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bG=500,CG=600,DG="_blank",SG="http://localhost",Uy=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function AG(n,e,t,r=bG,i=CG){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},TG),{width:r.toString(),height:i.toString(),top:s,left:o}),d=Wt().toLowerCase();t&&(a=Sk(d)?DG:t),Ck(d)&&(e=e||SG,c.scrollbars="yes");let h=Object.entries(c).reduce((I,[S,P])=>`${I}${S}=${P},`,"");if(f5(d)&&a!=="_self")return RG(e||"",a),new Uy(null);let g=window.open(e||"",a,h);ce(g,n,"popup-blocked");try{g.focus()}catch{}return new Uy(g)}function RG(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var PG="__/auth/handler",NG="emulator/auth/handler",xG=encodeURIComponent("fac");function pk(n,e,t,r,i,s){return C(this,null,function*(){ce(n.config.authDomain,n,"auth-domain-config-required"),ce(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:io,eventId:i};if(e instanceof Oy){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",UM(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,g]of Object.entries(s||{}))o[h]=g}if(e instanceof Rb){let h=e.getScopes().filter(g=>g!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield n._getAppCheckToken(),d=c?`#${xG}=${encodeURIComponent(c)}`:"";return`${MG(n)}?${Oh(a).slice(1)}${d}`})}function MG({config:n}){return n.emulator?Ub(n,NG):`https://${n.authDomain}/${PG}`}var mb="webStorageSupport",Fb=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zb,this._completeRedirectFn=sG,this._overrideRedirectResult=nG}_openPopup(e,t,r,i){return C(this,null,function*(){var s;go((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield pk(e,t,r,yb(),i);return AG(e,o,Hk())})}_openRedirect(e,t,r,i){return C(this,null,function*(){yield this._originValidation(e);let s=yield pk(e,t,r,yb(),i);return j5(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(go(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return C(this,null,function*(){let t=yield wG(e),r=new Ob(e);return t.register("authEvent",i=>(ce(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(mb,{type:mb},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[mb];o!==void 0&&t(!!o),di(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dG(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return xk()||Dk()||Hb()}},Qk=Fb;var gk="@firebase/auth",mk="1.10.8";var Lb=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return C(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function kG(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OG(n){Or(new En("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mk(n)},d=new bb(r,i,s,c);return I5(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Or(new En("auth-internal",e=>{let t=Oa(e.getProvider("auth").getImmediate());return(r=>new Lb(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ht(gk,mk,kG(n)),ht(gk,mk,"esm2017")}var FG=300,LG=ET("authIdTokenMaxAge")||FG,yk=null,VG=n=>e=>C(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>LG)return;let i=t?.token;yk!==i&&(yk=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function e0(n=Da()){let e=Lu(n,"auth");if(e.isInitialized())return e.getImmediate();let t=qb(n,{popupRedirectResolver:Qk,persistence:[Wk,$k,Zb]}),r=ET("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=VG(s.toString());Jb(t,o,()=>o(t.currentUser)),Yb(t,a=>o(a))}}let i=_T("auth");return i&&zb(t,`http://${i}`),t}function UG(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}y5({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=xa("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",UG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OG("Browser");var Yk="auth",Fa=class{constructor(e){return e}},tf=class{constructor(){return Uu(Yk)}};var t0=new ee("angularfire2.auth-instances");function S8(n,e){let t=Vh(Yk,n,e);return t&&new Fa(t)}function A8(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Fa(r)}}var R8={provide:tf,deps:[[new Wn,t0]]},P8={provide:Fa,useFactory:S8,deps:[[new Wn,t0],zi]};function Jk(n,...e){return ht("angularfire",so.full,"auth"),$n([P8,R8,{provide:t0,useFactory:A8(n),multi:!0,deps:[Ge,Tt,oo,Aa,[new Wn,ju],...e]}])}var Xk=ft(nk,!0);var Zk=ft(Wb,!0,2);var eO=ft(e0,!0);var tO=ft(Kb,!0,2);var nO=ft(Xb,!0,2);var rO=ft(Qb,!0,2);var iO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sO={};var es,n0;(function(){var n;function e(b,_){function E(){}E.prototype=_.prototype,b.F=_.prototype,b.prototype=new E,b.prototype.constructor=b,b.D=function(T,w,R){for(var v=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)v[ot-2]=arguments[ot];return _.prototype[w].apply(T,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,_,E){E||(E=0);let T=Array(16);if(typeof _=="string")for(var w=0;w<16;++w)T[w]=_.charCodeAt(E++)|_.charCodeAt(E++)<<8|_.charCodeAt(E++)<<16|_.charCodeAt(E++)<<24;else for(w=0;w<16;++w)T[w]=_[E++]|_[E++]<<8|_[E++]<<16|_[E++]<<24;_=b.g[0],E=b.g[1],w=b.g[2];let R=b.g[3],v;v=_+(R^E&(w^R))+T[0]+3614090360&4294967295,_=E+(v<<7&4294967295|v>>>25),v=R+(w^_&(E^w))+T[1]+3905402710&4294967295,R=_+(v<<12&4294967295|v>>>20),v=w+(E^R&(_^E))+T[2]+606105819&4294967295,w=R+(v<<17&4294967295|v>>>15),v=E+(_^w&(R^_))+T[3]+3250441966&4294967295,E=w+(v<<22&4294967295|v>>>10),v=_+(R^E&(w^R))+T[4]+4118548399&4294967295,_=E+(v<<7&4294967295|v>>>25),v=R+(w^_&(E^w))+T[5]+1200080426&4294967295,R=_+(v<<12&4294967295|v>>>20),v=w+(E^R&(_^E))+T[6]+2821735955&4294967295,w=R+(v<<17&4294967295|v>>>15),v=E+(_^w&(R^_))+T[7]+4249261313&4294967295,E=w+(v<<22&4294967295|v>>>10),v=_+(R^E&(w^R))+T[8]+1770035416&4294967295,_=E+(v<<7&4294967295|v>>>25),v=R+(w^_&(E^w))+T[9]+2336552879&4294967295,R=_+(v<<12&4294967295|v>>>20),v=w+(E^R&(_^E))+T[10]+4294925233&4294967295,w=R+(v<<17&4294967295|v>>>15),v=E+(_^w&(R^_))+T[11]+2304563134&4294967295,E=w+(v<<22&4294967295|v>>>10),v=_+(R^E&(w^R))+T[12]+1804603682&4294967295,_=E+(v<<7&4294967295|v>>>25),v=R+(w^_&(E^w))+T[13]+4254626195&4294967295,R=_+(v<<12&4294967295|v>>>20),v=w+(E^R&(_^E))+T[14]+2792965006&4294967295,w=R+(v<<17&4294967295|v>>>15),v=E+(_^w&(R^_))+T[15]+1236535329&4294967295,E=w+(v<<22&4294967295|v>>>10),v=_+(w^R&(E^w))+T[1]+4129170786&4294967295,_=E+(v<<5&4294967295|v>>>27),v=R+(E^w&(_^E))+T[6]+3225465664&4294967295,R=_+(v<<9&4294967295|v>>>23),v=w+(_^E&(R^_))+T[11]+643717713&4294967295,w=R+(v<<14&4294967295|v>>>18),v=E+(R^_&(w^R))+T[0]+3921069994&4294967295,E=w+(v<<20&4294967295|v>>>12),v=_+(w^R&(E^w))+T[5]+3593408605&4294967295,_=E+(v<<5&4294967295|v>>>27),v=R+(E^w&(_^E))+T[10]+38016083&4294967295,R=_+(v<<9&4294967295|v>>>23),v=w+(_^E&(R^_))+T[15]+3634488961&4294967295,w=R+(v<<14&4294967295|v>>>18),v=E+(R^_&(w^R))+T[4]+3889429448&4294967295,E=w+(v<<20&4294967295|v>>>12),v=_+(w^R&(E^w))+T[9]+568446438&4294967295,_=E+(v<<5&4294967295|v>>>27),v=R+(E^w&(_^E))+T[14]+3275163606&4294967295,R=_+(v<<9&4294967295|v>>>23),v=w+(_^E&(R^_))+T[3]+4107603335&4294967295,w=R+(v<<14&4294967295|v>>>18),v=E+(R^_&(w^R))+T[8]+1163531501&4294967295,E=w+(v<<20&4294967295|v>>>12),v=_+(w^R&(E^w))+T[13]+2850285829&4294967295,_=E+(v<<5&4294967295|v>>>27),v=R+(E^w&(_^E))+T[2]+4243563512&4294967295,R=_+(v<<9&4294967295|v>>>23),v=w+(_^E&(R^_))+T[7]+1735328473&4294967295,w=R+(v<<14&4294967295|v>>>18),v=E+(R^_&(w^R))+T[12]+2368359562&4294967295,E=w+(v<<20&4294967295|v>>>12),v=_+(E^w^R)+T[5]+4294588738&4294967295,_=E+(v<<4&4294967295|v>>>28),v=R+(_^E^w)+T[8]+2272392833&4294967295,R=_+(v<<11&4294967295|v>>>21),v=w+(R^_^E)+T[11]+1839030562&4294967295,w=R+(v<<16&4294967295|v>>>16),v=E+(w^R^_)+T[14]+4259657740&4294967295,E=w+(v<<23&4294967295|v>>>9),v=_+(E^w^R)+T[1]+2763975236&4294967295,_=E+(v<<4&4294967295|v>>>28),v=R+(_^E^w)+T[4]+1272893353&4294967295,R=_+(v<<11&4294967295|v>>>21),v=w+(R^_^E)+T[7]+4139469664&4294967295,w=R+(v<<16&4294967295|v>>>16),v=E+(w^R^_)+T[10]+3200236656&4294967295,E=w+(v<<23&4294967295|v>>>9),v=_+(E^w^R)+T[13]+681279174&4294967295,_=E+(v<<4&4294967295|v>>>28),v=R+(_^E^w)+T[0]+3936430074&4294967295,R=_+(v<<11&4294967295|v>>>21),v=w+(R^_^E)+T[3]+3572445317&4294967295,w=R+(v<<16&4294967295|v>>>16),v=E+(w^R^_)+T[6]+76029189&4294967295,E=w+(v<<23&4294967295|v>>>9),v=_+(E^w^R)+T[9]+3654602809&4294967295,_=E+(v<<4&4294967295|v>>>28),v=R+(_^E^w)+T[12]+3873151461&4294967295,R=_+(v<<11&4294967295|v>>>21),v=w+(R^_^E)+T[15]+530742520&4294967295,w=R+(v<<16&4294967295|v>>>16),v=E+(w^R^_)+T[2]+3299628645&4294967295,E=w+(v<<23&4294967295|v>>>9),v=_+(w^(E|~R))+T[0]+4096336452&4294967295,_=E+(v<<6&4294967295|v>>>26),v=R+(E^(_|~w))+T[7]+1126891415&4294967295,R=_+(v<<10&4294967295|v>>>22),v=w+(_^(R|~E))+T[14]+2878612391&4294967295,w=R+(v<<15&4294967295|v>>>17),v=E+(R^(w|~_))+T[5]+4237533241&4294967295,E=w+(v<<21&4294967295|v>>>11),v=_+(w^(E|~R))+T[12]+1700485571&4294967295,_=E+(v<<6&4294967295|v>>>26),v=R+(E^(_|~w))+T[3]+2399980690&4294967295,R=_+(v<<10&4294967295|v>>>22),v=w+(_^(R|~E))+T[10]+4293915773&4294967295,w=R+(v<<15&4294967295|v>>>17),v=E+(R^(w|~_))+T[1]+2240044497&4294967295,E=w+(v<<21&4294967295|v>>>11),v=_+(w^(E|~R))+T[8]+1873313359&4294967295,_=E+(v<<6&4294967295|v>>>26),v=R+(E^(_|~w))+T[15]+4264355552&4294967295,R=_+(v<<10&4294967295|v>>>22),v=w+(_^(R|~E))+T[6]+2734768916&4294967295,w=R+(v<<15&4294967295|v>>>17),v=E+(R^(w|~_))+T[13]+1309151649&4294967295,E=w+(v<<21&4294967295|v>>>11),v=_+(w^(E|~R))+T[4]+4149444226&4294967295,_=E+(v<<6&4294967295|v>>>26),v=R+(E^(_|~w))+T[11]+3174756917&4294967295,R=_+(v<<10&4294967295|v>>>22),v=w+(_^(R|~E))+T[2]+718787259&4294967295,w=R+(v<<15&4294967295|v>>>17),v=E+(R^(w|~_))+T[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(w+(v<<21&4294967295|v>>>11))&4294967295,b.g[2]=b.g[2]+w&4294967295,b.g[3]=b.g[3]+R&4294967295}r.prototype.v=function(b,_){_===void 0&&(_=b.length);let E=_-this.blockSize,T=this.C,w=this.h,R=0;for(;R<_;){if(w==0)for(;R<=E;)i(this,b,R),R+=this.blockSize;if(typeof b=="string"){for(;R<_;)if(T[w++]=b.charCodeAt(R++),w==this.blockSize){i(this,T),w=0;break}}else for(;R<_;)if(T[w++]=b[R++],w==this.blockSize){i(this,T),w=0;break}}this.h=w,this.o+=_},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;_=this.o*8;for(var E=b.length-8;E<b.length;++E)b[E]=_&255,_/=256;for(this.v(b),b=Array(16),_=0,E=0;E<4;++E)for(let T=0;T<32;T+=8)b[_++]=this.g[E]>>>T&255;return b};function s(b,_){var E=a;return Object.prototype.hasOwnProperty.call(E,b)?E[b]:E[b]=_(b)}function o(b,_){this.h=_;let E=[],T=!0;for(let w=b.length-1;w>=0;w--){let R=b[w]|0;T&&R==_||(E[w]=R,T=!1)}this.g=E}var a={};function c(b){return-128<=b&&b<128?s(b,function(_){return new o([_|0],_<0?-1:0)}):new o([b|0],b<0?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return g;if(b<0)return O(d(-b));let _=[],E=1;for(let T=0;b>=E;T++)_[T]=b/E|0,E*=4294967296;return new o(_,0)}function h(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return O(h(b.substring(1),_));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=d(Math.pow(_,8)),T=g;for(let R=0;R<b.length;R+=8){var w=Math.min(8,b.length-R);let v=parseInt(b.substring(R,R+w),_);w<8?(w=d(Math.pow(_,w)),T=T.j(w).add(d(v))):(T=T.j(E),T=T.add(d(v)))}return T}var g=c(0),I=c(1),S=c(16777216);n=o.prototype,n.m=function(){if(U(this))return-O(this).m();let b=0,_=1;for(let E=0;E<this.g.length;E++){let T=this.i(E);b+=(T>=0?T:4294967296+T)*_,_*=4294967296}return b},n.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(P(this))return"0";if(U(this))return"-"+O(this).toString(b);let _=d(Math.pow(b,6));var E=this;let T="";for(;;){let w=Re(E,_).g;E=G(E,w.j(_));let R=((E.g.length>0?E.g[0]:E.h)>>>0).toString(b);if(E=w,P(E))return R+T;for(;R.length<6;)R="0"+R;T=R+T}},n.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function P(b){if(b.h!=0)return!1;for(let _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function U(b){return b.h==-1}n.l=function(b){return b=G(this,b),U(b)?-1:P(b)?0:1};function O(b){let _=b.g.length,E=[];for(let T=0;T<_;T++)E[T]=~b.g[T];return new o(E,~b.h).add(I)}n.abs=function(){return U(this)?O(this):this},n.add=function(b){let _=Math.max(this.g.length,b.g.length),E=[],T=0;for(let w=0;w<=_;w++){let R=T+(this.i(w)&65535)+(b.i(w)&65535),v=(R>>>16)+(this.i(w)>>>16)+(b.i(w)>>>16);T=v>>>16,R&=65535,v&=65535,E[w]=v<<16|R}return new o(E,E[E.length-1]&-2147483648?-1:0)};function G(b,_){return b.add(O(_))}n.j=function(b){if(P(this)||P(b))return g;if(U(this))return U(b)?O(this).j(O(b)):O(O(this).j(b));if(U(b))return O(this.j(O(b)));if(this.l(S)<0&&b.l(S)<0)return d(this.m()*b.m());let _=this.g.length+b.g.length,E=[];for(var T=0;T<2*_;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(let w=0;w<b.g.length;w++){let R=this.i(T)>>>16,v=this.i(T)&65535,ot=b.i(w)>>>16,Tn=b.i(w)&65535;E[2*T+2*w]+=v*Tn,ne(E,2*T+2*w),E[2*T+2*w+1]+=R*Tn,ne(E,2*T+2*w+1),E[2*T+2*w+1]+=v*ot,ne(E,2*T+2*w+1),E[2*T+2*w+2]+=R*ot,ne(E,2*T+2*w+2)}for(b=0;b<_;b++)E[b]=E[2*b+1]<<16|E[2*b];for(b=_;b<2*_;b++)E[b]=0;return new o(E,0)};function ne(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function re(b,_){this.g=b,this.h=_}function Re(b,_){if(P(_))throw Error("division by zero");if(P(b))return new re(g,g);if(U(b))return _=Re(O(b),_),new re(O(_.g),O(_.h));if(U(_))return _=Re(b,O(_)),new re(O(_.g),_.h);if(b.g.length>30){if(U(b)||U(_))throw Error("slowDivide_ only works with positive integers.");for(var E=I,T=_;T.l(b)<=0;)E=nt(E),T=nt(T);var w=be(E,1),R=be(T,1);for(T=be(T,2),E=be(E,2);!P(T);){var v=R.add(T);v.l(b)<=0&&(w=w.add(E),R=v),T=be(T,1),E=be(E,1)}return _=G(b,w.j(_)),new re(w,_)}for(w=g;b.l(_)>=0;){for(E=Math.max(1,Math.floor(b.m()/_.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),R=d(E),v=R.j(_);U(v)||v.l(b)>0;)E-=T,R=d(E),v=R.j(_);P(R)&&(R=I),w=w.add(R),b=G(b,v)}return new re(w,b)}n.B=function(b){return Re(this,b).h},n.and=function(b){let _=Math.max(this.g.length,b.g.length),E=[];for(let T=0;T<_;T++)E[T]=this.i(T)&b.i(T);return new o(E,this.h&b.h)},n.or=function(b){let _=Math.max(this.g.length,b.g.length),E=[];for(let T=0;T<_;T++)E[T]=this.i(T)|b.i(T);return new o(E,this.h|b.h)},n.xor=function(b){let _=Math.max(this.g.length,b.g.length),E=[];for(let T=0;T<_;T++)E[T]=this.i(T)^b.i(T);return new o(E,this.h^b.h)};function nt(b){let _=b.g.length+1,E=[];for(let T=0;T<_;T++)E[T]=b.i(T)<<1|b.i(T-1)>>>31;return new o(E,b.h)}function be(b,_){let E=_>>5;_%=32;let T=b.g.length-E,w=[];for(let R=0;R<T;R++)w[R]=_>0?b.i(R+E)>>>_|b.i(R+E+1)<<32-_:b.i(R+E);return new o(w,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,n0=sO.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,es=sO.Integer=o}).apply(typeof iO<"u"?iO:typeof self<"u"?self:typeof window<"u"?window:{});var $y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ts={};var r0,N8,qu,i0,nf,Hy,s0,o0,a0;(function(){var n,e=Object.defineProperty;function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof $y=="object"&&$y];for(var p=0;p<l.length;++p){var y=l[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function i(l,p){if(p)e:{var y=r;l=l.split(".");for(var A=0;A<l.length-1;A++){var N=l[A];if(!(N in y))break e;y=y[N]}l=l[l.length-1],A=y[l],p=p(A),p!=A&&p!=null&&e(y,l,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(p){var y=[],A;for(A in p)Object.prototype.hasOwnProperty.call(p,A)&&y.push([A,p[A]]);return y}});var s=s||{},o=this||self;function a(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function c(l,p,y){return l.call.apply(l.bind,arguments)}function d(l,p,y){return d=c,d.apply(null,arguments)}function h(l,p){var y=Array.prototype.slice.call(arguments,1);return function(){var A=y.slice();return A.push.apply(A,arguments),l.apply(this,A)}}function g(l,p){function y(){}y.prototype=p.prototype,l.Z=p.prototype,l.prototype=new y,l.prototype.constructor=l,l.Ob=function(A,N,F){for(var K=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)K[ue-2]=arguments[ue];return p.prototype[N].apply(A,K)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function S(l){let p=l.length;if(p>0){let y=Array(p);for(let A=0;A<p;A++)y[A]=l[A];return y}return[]}function P(l,p){for(let A=1;A<arguments.length;A++){let N=arguments[A];var y=typeof N;if(y=y!="object"?y:N?Array.isArray(N)?"array":y:"null",y=="array"||y=="object"&&typeof N.length=="number"){y=l.length||0;let F=N.length||0;l.length=y+F;for(let K=0;K<F;K++)l[y+K]=N[K]}else l.push(N)}}class U{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function O(l){o.setTimeout(()=>{throw l},0)}function G(){var l=b;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class ne{constructor(){this.h=this.g=null}add(p,y){let A=re.get();A.set(p,y),this.h?this.h.next=A:this.g=A,this.h=A}}var re=new U(()=>new Re,l=>l.reset());class Re{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let nt,be=!1,b=new ne,_=()=>{let l=Promise.resolve(void 0);nt=()=>{l.then(E)}};function E(){for(var l;l=G();){try{l.h.call(l.g)}catch(y){O(y)}var p=re;p.j(l),p.h<100&&(p.h++,l.next=p.g,p.g=l)}be=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let y=()=>{};o.addEventListener("test",y,p),o.removeEventListener("test",y,p)}catch{}return l})();function v(l){return/^[\s\xa0]*$/.test(l)}function ot(l,p){w.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,p)}g(ot,w),ot.prototype.init=function(l,p){let y=this.type=l.type,A=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget,p||(y=="mouseover"?p=l.fromElement:y=="mouseout"&&(p=l.toElement)),this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&ot.Z.h.call(this)},ot.prototype.h=function(){ot.Z.h.call(this);let l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Tn="closure_listenable_"+(Math.random()*1e6|0),Hv=0;function Ro(l,p,y,A,N){this.listener=l,this.proxy=null,this.src=p,this.type=y,this.capture=!!A,this.ha=N,this.key=++Hv,this.da=this.fa=!1}function Br(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ps(l,p,y){for(let A in l)p.call(y,l[A],A,l)}function cp(l,p){for(let y in l)p.call(void 0,l[y],y,l)}function up(l){let p={};for(let y in l)p[y]=l[y];return p}let yr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Nt(l,p){let y,A;for(let N=1;N<arguments.length;N++){A=arguments[N];for(y in A)l[y]=A[y];for(let F=0;F<yr.length;F++)y=yr[F],Object.prototype.hasOwnProperty.call(A,y)&&(l[y]=A[y])}}function ac(l){this.src=l,this.g={},this.h=0}ac.prototype.add=function(l,p,y,A,N){let F=l.toString();l=this.g[F],l||(l=this.g[F]=[],this.h++);let K=Ql(l,p,A,N);return K>-1?(p=l[K],y||(p.fa=!1)):(p=new Ro(p,this.src,F,!!A,N),p.fa=y,l.push(p)),p};function vi(l,p){let y=p.type;if(y in l.g){var A=l.g[y],N=Array.prototype.indexOf.call(A,p,void 0),F;(F=N>=0)&&Array.prototype.splice.call(A,N,1),F&&(Br(p),l.g[y].length==0&&(delete l.g[y],l.h--))}}function Ql(l,p,y,A){for(let N=0;N<l.length;++N){let F=l[N];if(!F.da&&F.listener==p&&F.capture==!!y&&F.ha==A)return N}return-1}var Ei="closure_lm_"+(Math.random()*1e6|0),Yl={};function lp(l,p,y,A,N){if(A&&A.once)return uc(l,p,y,A,N);if(Array.isArray(p)){for(let F=0;F<p.length;F++)lp(l,p[F],y,A,N);return null}return y=fc(y),l&&l[Tn]?l.J(p,y,a(A)?!!A.capture:!!A,N):Po(l,p,y,!1,A,N)}function Po(l,p,y,A,N,F){if(!p)throw Error("Invalid event type");let K=a(N)?!!N.capture:!!N,ue=hc(l);if(ue||(l[Ei]=ue=new ac(l)),y=ue.add(p,y,A,K,F),y.proxy)return y;if(A=cc(),y.proxy=A,A.src=l,A.listener=y,l.addEventListener)R||(N=K),N===void 0&&(N=!1),l.addEventListener(p.toString(),A,N);else if(l.attachEvent)l.attachEvent(dc(p.toString()),A);else if(l.addListener&&l.removeListener)l.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return y}function cc(){function l(y){return p.call(l.src,l.listener,y)}let p=dp;return l}function uc(l,p,y,A,N){if(Array.isArray(p)){for(let F=0;F<p.length;F++)uc(l,p[F],y,A,N);return null}return y=fc(y),l&&l[Tn]?l.K(p,y,a(A)?!!A.capture:!!A,N):Po(l,p,y,!0,A,N)}function lc(l,p,y,A,N){if(Array.isArray(p))for(var F=0;F<p.length;F++)lc(l,p[F],y,A,N);else A=a(A)?!!A.capture:!!A,y=fc(y),l&&l[Tn]?(l=l.i,F=String(p).toString(),F in l.g&&(p=l.g[F],y=Ql(p,y,A,N),y>-1&&(Br(p[y]),Array.prototype.splice.call(p,y,1),p.length==0&&(delete l.g[F],l.h--)))):l&&(l=hc(l))&&(p=l.g[p.toString()],l=-1,p&&(l=Ql(p,y,A,N)),(y=l>-1?p[l]:null)&&No(y))}function No(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[Tn])vi(p.i,l);else{var y=l.type,A=l.proxy;p.removeEventListener?p.removeEventListener(y,A,l.capture):p.detachEvent?p.detachEvent(dc(y),A):p.addListener&&p.removeListener&&p.removeListener(A),(y=hc(p))?(vi(y,l),y.h==0&&(y.src=null,p[Ei]=null)):Br(l)}}}function dc(l){return l in Yl?Yl[l]:Yl[l]="on"+l}function dp(l,p){if(l.da)l=!0;else{p=new ot(p,this);let y=l.listener,A=l.ha||l.src;l.fa&&No(l),l=y.call(A,p)}return l}function hc(l){return l=l[Ei],l instanceof ac?l:null}var Jl="__closure_events_fn_"+(Math.random()*1e9>>>0);function fc(l){return typeof l=="function"?l:(l[Jl]||(l[Jl]=function(p){return l.handleEvent(p)}),l[Jl])}function xt(){T.call(this),this.i=new ac(this),this.M=this,this.G=null}g(xt,T),xt.prototype[Tn]=!0,xt.prototype.removeEventListener=function(l,p,y,A){lc(this,l,p,y,A)};function Mt(l,p){var y,A=l.G;if(A)for(y=[];A;A=A.G)y.push(A);if(l=l.M,A=p.type||p,typeof p=="string")p=new w(p,l);else if(p instanceof w)p.target=p.target||l;else{var N=p;p=new w(A,l),Nt(p,N)}N=!0;let F,K;if(y)for(K=y.length-1;K>=0;K--)F=p.g=y[K],N=xo(F,A,!0,p)&&N;if(F=p.g=l,N=xo(F,A,!0,p)&&N,N=xo(F,A,!1,p)&&N,y)for(K=0;K<y.length;K++)F=p.g=y[K],N=xo(F,A,!1,p)&&N}xt.prototype.N=function(){if(xt.Z.N.call(this),this.i){var l=this.i;for(let p in l.g){let y=l.g[p];for(let A=0;A<y.length;A++)Br(y[A]);delete l.g[p],l.h--}}this.G=null},xt.prototype.J=function(l,p,y,A){return this.i.add(String(l),p,!1,y,A)},xt.prototype.K=function(l,p,y,A){return this.i.add(String(l),p,!0,y,A)};function xo(l,p,y,A){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();let N=!0;for(let F=0;F<p.length;++F){let K=p[F];if(K&&!K.da&&K.capture==y){let ue=K.listener,u=K.ha||K.src;K.fa&&vi(l.i,K),N=ue.call(u,A)!==!1&&N}}return N&&!A.defaultPrevented}function qv(l,p){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(l,p||0)}function pc(l){l.g=qv(()=>{l.g=null,l.i&&(l.i=!1,pc(l))},l.l);let p=l.h;l.h=null,l.m.apply(null,p)}class Xl extends T{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:pc(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ii(l){T.call(this),this.h=l,this.g={}}g(Ii,T);var kt=[];function Ht(l){ps(l.g,function(p,y){this.g.hasOwnProperty(y)&&No(p)},l),l.g={}}Ii.prototype.N=function(){Ii.Z.N.call(this),Ht(this)},Ii.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gs=o.JSON.stringify,hp=o.JSON.parse,fp=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function pp(){}function ms(){}var ys={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function gc(){w.call(this,"d")}g(gc,w);function Mo(){w.call(this,"c")}g(Mo,w);var wi={},gp=null;function _s(){return gp=gp||new xt}wi.Ia="serverreachability";function Zl(l){w.call(this,wi.Ia,l)}g(Zl,w);function vs(l){let p=_s();Mt(p,new Zl(p))}wi.STAT_EVENT="statevent";function Es(l,p){w.call(this,wi.STAT_EVENT,l),this.stat=p}g(Es,w);function Ot(l){let p=_s();Mt(p,new Es(p,l))}wi.Ja="timingevent";function mc(l,p){w.call(this,wi.Ja,l),this.size=p}g(mc,w);function kn(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},p)}function Is(){this.g=!0}Is.prototype.ua=function(){this.g=!1};function yc(l,p,y,A,N,F){l.info(function(){if(l.g)if(F){var K="",ue=F.split("&");for(let f=0;f<ue.length;f++){var u=ue[f].split("=");if(u.length>1){let m=u[0];u=u[1];let D=m.split("_");K=D.length>=2&&D[1]=="type"?K+(m+"="+u+"&"):K+(m+"=redacted&")}}}else K=null;else K=F;return"XMLHTTP REQ ("+A+") [attempt "+N+"]: "+p+`
`+y+`
`+K})}function mp(l,p,y,A,N,F,K){l.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+N+"]: "+p+`
`+y+`
`+F+" "+K})}function nr(l,p,y,A){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+Yt(l,y)+(A?" "+A:"")})}function yp(l,p){l.info(function(){return"TIMEOUT: "+p})}Is.prototype.info=function(){};function Yt(l,p){if(!l.g)return p;if(!p)return null;try{let F=JSON.parse(p);if(F){for(l=0;l<F.length;l++)if(Array.isArray(F[l])){var y=F[l];if(!(y.length<2)){var A=y[1];if(Array.isArray(A)&&!(A.length<1)){var N=A[0];if(N!="noop"&&N!="stop"&&N!="close")for(let K=1;K<A.length;K++)A[K]=""}}}}return gs(F)}catch{return p}}var ko={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ws={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ts;function ed(){}g(ed,pp),ed.prototype.g=function(){return new XMLHttpRequest},Ts=new ed;function Oo(l){return encodeURIComponent(String(l))}function bs(l){var p=1;l=l.split(":");let y=[];for(;p>0&&l.length;)y.push(l.shift()),p--;return l.length&&y.push(l.join(":")),y}function $r(l,p,y,A){this.j=l,this.i=p,this.l=y,this.S=A||1,this.V=new Ii(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _p}function _p(){this.i=null,this.g="",this.h=!1}var Fo={},_c={};function Lo(l,p,y){l.M=1,l.A=Bo(On(p)),l.u=y,l.R=!0,Vo(l,null)}function Vo(l,p){l.F=Date.now(),Cs(l),l.B=On(l.A);var y=l.B,A=l.S;Array.isArray(A)||(A=[String(A)]),bp(y.i,"t",A),l.C=0,y=l.j.L,l.h=new _p,l.g=Nc(l.j,y?p:null,!l.u),l.P>0&&(l.O=new Xl(d(l.Y,l,l.g),l.P)),p=l.V,y=l.g,A=l.ba;var N="readystatechange";Array.isArray(N)||(N&&(kt[0]=N.toString()),N=kt);for(let F=0;F<N.length;F++){let K=lp(y,N[F],A||p.handleEvent,!1,p.h||p);if(!K)break;p.g[K.key]=K}p=l.J?up(l.J):{},l.u?(l.v||(l.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,p)):(l.v="GET",l.g.ea(l.B,l.v,null,p)),vs(),yc(l.i,l.v,l.B,l.l,l.S,l.u)}$r.prototype.ba=function(l){l=l.target;let p=this.O;p&&Be(l)==3?p.j():this.Y(l)},$r.prototype.Y=function(l){try{if(l==this.g)e:{let ue=Be(this.g),u=this.g.ya(),f=this.g.ca();if(!(ue<3)&&(ue!=3||this.g&&(this.h.h||this.g.la()||Np(this.g)))){this.K||ue!=4||u==7||(u==8||f<=0?vs(3):vs(2)),Ec(this);var p=this.g.ca();this.X=p;var y=Hr(this);if(this.o=p==200,mp(this.i,this.v,this.B,this.l,this.S,ue,p),this.o){if(this.U&&!this.L){t:{if(this.g){var A,N=this.g;if((A=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(A)){var F=A;break t}}F=null}if(l=F)nr(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ss(this,l);else{this.o=!1,this.m=3,Ot(12),Ti(this),Ds(this);break e}}if(this.R){l=!0;let m;for(;!this.K&&this.C<y.length;)if(m=vp(this,y),m==_c){ue==4&&(this.m=4,Ot(14),l=!1),nr(this.i,this.l,null,"[Incomplete Response]");break}else if(m==Fo){this.m=4,Ot(15),nr(this.i,this.l,y,"[Invalid Chunk]"),l=!1;break}else nr(this.i,this.l,m,null),Ss(this,m);if(td(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ue!=4||y.length!=0||this.h.h||(this.m=1,Ot(16),l=!1),this.o=this.o&&l,!l)nr(this.i,this.l,y,"[Invalid Chunked Response]"),Ti(this),Ds(this);else if(y.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),Ac(K),K.P=!0,Ot(11))}}else nr(this.i,this.l,y,null),Ss(this,y);ue==4&&Ti(this),this.o&&!this.K&&(ue==4?pd(this.j,this):(this.o=!1,Cs(this)))}else zv(this.g),p==400&&y.indexOf("Unknown SID")>0?(this.m=3,Ot(12)):(this.m=0,Ot(13)),Ti(this),Ds(this)}}}catch{}finally{}};function Hr(l){if(!td(l))return l.g.la();let p=Np(l.g);if(p==="")return"";let y="",A=p.length,N=Be(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Ti(l),Ds(l),"";l.h.i=new o.TextDecoder}for(let F=0;F<A;F++)l.h.h=!0,y+=l.h.i.decode(p[F],{stream:!(N&&F==A-1)});return p.length=0,l.h.g+=y,l.C=0,l.h.g}function td(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function vp(l,p){var y=l.C,A=p.indexOf(`
`,y);return A==-1?_c:(y=Number(p.substring(y,A)),isNaN(y)?Fo:(A+=1,A+y>p.length?_c:(p=p.slice(A,A+y),l.C=A+y,p)))}$r.prototype.cancel=function(){this.K=!0,Ti(this)};function Cs(l){l.T=Date.now()+l.H,vc(l,l.H)}function vc(l,p){if(l.D!=null)throw Error("WatchDog timer not null");l.D=kn(d(l.aa,l),p)}function Ec(l){l.D&&(o.clearTimeout(l.D),l.D=null)}$r.prototype.aa=function(){this.D=null;let l=Date.now();l-this.T>=0?(yp(this.i,this.B),this.M!=2&&(vs(),Ot(17)),Ti(this),this.m=2,Ds(this)):vc(this,this.T-l)};function Ds(l){l.j.I==0||l.K||pd(l.j,l)}function Ti(l){Ec(l);var p=l.O;p&&typeof p.dispose=="function"&&p.dispose(),l.O=null,Ht(l.V),l.g&&(p=l.g,l.g=null,p.abort(),p.dispose())}function Ss(l,p){try{var y=l.j;if(y.I!=0&&(y.g==l||Uo(y.h,l))){if(!l.L&&Uo(y.h,l)&&y.I==3){try{var A=y.Ba.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var N=A;if(N[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<l.F)Rc(y),bi(y);else break e;Os(y),Ot(18)}}else y.xa=N[1],0<y.xa-y.K&&N[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=kn(d(y.Va,y),6e3));qr(y.h)<=1&&y.ta&&(y.ta=void 0)}else Gr(y,11)}else if((l.L||y.g==l)&&Rc(y),!v(p))for(N=y.Ba.g.parse(p),p=0;p<N.length;p++){let f=N[p],m=f[0];if(!(m<=y.K))if(y.K=m,f=f[1],y.I==2)if(f[0]=="c"){y.M=f[1],y.ba=f[2];let D=f[3];D!=null&&(y.ka=D,y.j.info("VER="+y.ka));let x=f[4];x!=null&&(y.za=x,y.j.info("SVER="+y.za));let L=f[5];L!=null&&typeof L=="number"&&L>0&&(A=1.5*L,y.O=A,y.j.info("backChannelRequestTimeoutMs_="+A)),A=y;let W=l.g;if(W){let Ve=W.g?W.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ve){var F=A.h;F.g||Ve.indexOf("spdy")==-1&&Ve.indexOf("quic")==-1&&Ve.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(nd(F,F.h),F.h=null))}if(A.G){let yt=W.g?W.g.getResponseHeader("X-HTTP-Session-Id"):null;yt&&(A.wa=yt,Ye(A.J,A.G,yt))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-l.F,y.j.info("Handshake RTT: "+y.T+"ms")),A=y;var K=l;if(A.na=Pc(A,A.L?A.ba:null,A.W),K.L){rd(A.h,K);var ue=K,u=A.O;u&&(ue.H=u),ue.D&&(Ec(ue),Cs(ue)),A.g=K}else Sc(A);y.i.length>0&&Cn(y)}else f[0]!="stop"&&f[0]!="close"||Gr(y,7);else y.I==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?Gr(y,7):Dc(y):f[0]!="noop"&&y.l&&y.l.qa(f),y.A=0)}}vs(4)}catch{}}var Ep=class{constructor(l,p){this.g=l,this.map=p}};function Ic(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function As(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function qr(l){return l.h?1:l.g?l.g.size:0}function Uo(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function nd(l,p){l.g?l.g.add(p):l.h=p}function rd(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}Ic.prototype.cancel=function(){if(this.i=id(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function id(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let p=l.i;for(let y of l.g.values())p=p.concat(y.G);return p}return S(l.i)}var sd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function od(l,p){if(l){l=l.split("&");for(let y=0;y<l.length;y++){let A=l[y].indexOf("="),N,F=null;A>=0?(N=l[y].substring(0,A),F=l[y].substring(A+1)):N=l[y],p(N,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function rr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;l instanceof rr?(this.l=l.l,Rs(this,l.j),this.o=l.o,this.g=l.g,jo(this,l.u),this.h=l.h,ad(this,Cp(l.i)),this.m=l.m):l&&(p=String(l).match(sd))?(this.l=!1,Rs(this,p[1]||"",!0),this.o=$o(p[2]||""),this.g=$o(p[3]||"",!0),jo(this,p[4]),this.h=$o(p[5]||"",!0),ad(this,p[6]||"",!0),this.m=$o(p[7]||"")):(this.l=!1,this.i=new vr(null,this.l))}rr.prototype.toString=function(){let l=[];var p=this.j;p&&l.push(Fn(p,Ho,!0),":");var y=this.g;return(y||p=="file")&&(l.push("//"),(p=this.o)&&l.push(Fn(p,Ho,!0),"@"),l.push(Oo(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&l.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(Fn(y,y.charAt(0)=="/"?Ip:wc,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",Fn(y,Tc)),l.join("")},rr.prototype.resolve=function(l){let p=On(this),y=!!l.j;y?Rs(p,l.j):y=!!l.o,y?p.o=l.o:y=!!l.g,y?p.g=l.g:y=l.u!=null;var A=l.h;if(y)jo(p,l.u);else if(y=!!l.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var N=p.h.lastIndexOf("/");N!=-1&&(A=p.h.slice(0,N+1)+A)}if(N=A,N==".."||N==".")A="";else if(N.indexOf("./")!=-1||N.indexOf("/.")!=-1){A=N.lastIndexOf("/",0)==0,N=N.split("/");let F=[];for(let K=0;K<N.length;){let ue=N[K++];ue=="."?A&&K==N.length&&F.push(""):ue==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),A&&K==N.length&&F.push("")):(F.push(ue),A=!0)}A=F.join("/")}else A=N}return y?p.h=A:y=l.i.toString()!=="",y?ad(p,Cp(l.i)):y=!!l.m,y&&(p.m=l.m),p};function On(l){return new rr(l)}function Rs(l,p,y){l.j=y?$o(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function jo(l,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);l.u=p}else l.u=null}function ad(l,p,y){p instanceof vr?(l.i=p,qo(l.i,l.l)):(y||(p=Fn(p,Xe)),l.i=new vr(p,l.l))}function Ye(l,p,y){l.i.set(p,y)}function Bo(l){return Ye(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function $o(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Fn(l,p,y){return typeof l=="string"?(l=encodeURI(l).replace(p,_r),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function _r(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Ho=/[#\/\?@]/g,wc=/[#\?:]/g,Ip=/[#\?]/g,Xe=/[#\?@]/g,Tc=/#/g;function vr(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function Ln(l){l.g||(l.g=new Map,l.h=0,l.i&&od(l.i,function(p,y){l.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}n=vr.prototype,n.add=function(l,p){Ln(this),this.i=null,l=Ps(this,l);let y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(p),this.h+=1,this};function wp(l,p){Ln(l),p=Ps(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function cd(l,p){return Ln(l),p=Ps(l,p),l.g.has(p)}n.forEach=function(l,p){Ln(this),this.g.forEach(function(y,A){y.forEach(function(N){l.call(p,N,A,this)},this)},this)};function Tp(l,p){Ln(l);let y=[];if(typeof p=="string")cd(l,p)&&(y=y.concat(l.g.get(Ps(l,p))));else for(l=Array.from(l.g.values()),p=0;p<l.length;p++)y=y.concat(l[p]);return y}n.set=function(l,p){return Ln(this),this.i=null,l=Ps(this,l),cd(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},n.get=function(l,p){return l?(l=Tp(this,l),l.length>0?String(l[0]):p):p};function bp(l,p,y){wp(l,p),y.length>0&&(l.i=null,l.g.set(Ps(l,p),S(y)),l.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],p=Array.from(this.g.keys());for(let A=0;A<p.length;A++){var y=p[A];let N=Oo(y);y=Tp(this,y);for(let F=0;F<y.length;F++){let K=N;y[F]!==""&&(K+="="+Oo(y[F])),l.push(K)}}return this.i=l.join("&")};function Cp(l){let p=new vr;return p.i=l.i,l.g&&(p.g=new Map(l.g),p.h=l.h),p}function Ps(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function qo(l,p){p&&!l.j&&(Ln(l),l.i=null,l.g.forEach(function(y,A){let N=A.toLowerCase();A!=N&&(wp(this,A),bp(this,N,y))},l)),l.j=p}function zr(l,p){let y=new Is;if(o.Image){let A=new Image;A.onload=h(Er,y,"TestLoadImage: loaded",!0,p,A),A.onerror=h(Er,y,"TestLoadImage: error",!1,p,A),A.onabort=h(Er,y,"TestLoadImage: abort",!1,p,A),A.ontimeout=h(Er,y,"TestLoadImage: timeout",!1,p,A),o.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=l}else p(!1)}function Dp(l,p){let y=new Is,A=new AbortController,N=setTimeout(()=>{A.abort(),Er(y,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:A.signal}).then(F=>{clearTimeout(N),F.ok?Er(y,"TestPingServer: ok",!0,p):Er(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(N),Er(y,"TestPingServer: error",!1,p)})}function Er(l,p,y,A,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),A(y)}catch{}}function Sp(){this.g=new fp}function Ir(l){this.i=l.Sb||null,this.h=l.ab||!1}g(Ir,pp),Ir.prototype.g=function(){return new bc(this.i,this.h)};function bc(l,p){xt.call(this),this.H=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(bc,xt),n=bc.prototype,n.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=p,this.readyState=1,bn(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(p.body=l),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,zo(this)),this.readyState=0},n.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,bn(this)),this.g&&(this.readyState=3,bn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ap(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ap(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}n.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?zo(this):bn(this),this.readyState==3&&Ap(this)}},n.Oa=function(l){this.g&&(this.response=this.responseText=l,zo(this))},n.Na=function(l){this.g&&(this.response=l,zo(this))},n.ga=function(){this.g&&zo(this)};function zo(l){l.readyState=4,l.l=null,l.j=null,l.B=null,bn(l)}n.setRequestHeader=function(l,p){this.A.append(l,p)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=p.next();return l.join(`\r
`)};function bn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(bc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Rp(l){let p="";return ps(l,function(y,A){p+=A,p+=":",p+=y,p+=`\r
`}),p}function ud(l,p,y){e:{for(A in y){var A=!1;break e}A=!0}A||(y=Rp(y),typeof l=="string"?y!=null&&Oo(y):Ye(l,p,y))}function Je(l){xt.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Je,xt);var Cc=/^https?$/i,Pp=["POST","PUT"];n=Je.prototype,n.Fa=function(l){this.H=l},n.ea=function(l,p,y,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ts.g(),this.g.onreadystatechange=I(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(F){Ns(this,F);return}if(l=y||"",y=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var N in A)y.set(N,A[N]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(let F of A.keys())y.set(F,A.get(F));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(y.keys()).find(F=>F.toLowerCase()=="content-type"),N=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(Pp,p,void 0)>=0)||A||N||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[F,K]of y)this.g.setRequestHeader(F,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(F){Ns(this,F)}};function Ns(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.o=5,xs(l),Ms(l)}function xs(l){l.A||(l.A=!0,Mt(l,"complete"),Mt(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,Mt(this,"complete"),Mt(this,"abort"),Ms(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ms(this,!0)),Je.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ld(this):this.Xa())},n.Xa=function(){ld(this)};function ld(l){if(l.h&&typeof s<"u"){if(l.v&&Be(l)==4)setTimeout(l.Ca.bind(l),0);else if(Mt(l,"readystatechange"),Be(l)==4){l.h=!1;try{let F=l.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var A;if(A=F===0){let K=String(l.D).match(sd)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),A=!Cc.test(K?K.toLowerCase():"")}y=A}if(y)Mt(l,"complete"),Mt(l,"success");else{l.o=6;try{var N=Be(l)>2?l.g.statusText:""}catch{N=""}l.l=N+" ["+l.ca()+"]",xs(l)}}finally{Ms(l)}}}}function Ms(l,p){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);let y=l.g;l.g=null,p||Mt(l,"ready");try{y.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Be(l){return l.g?l.g.readyState:0}n.ca=function(){try{return Be(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),hp(p)}};function Np(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function zv(l){let p={};l=(l.g&&Be(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<l.length;A++){if(v(l[A]))continue;var y=bs(l[A]);let N=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let F=p[N]||[];p[N]=F,F.push(y)}cp(p,function(A){return A.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ks(l,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||p}function dd(l){this.za=0,this.i=[],this.j=new Is,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ks("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ks("baseRetryDelayMs",5e3,l),this.Za=ks("retryDelaySeedMs",1e4,l),this.Ta=ks("forwardChannelMaxRetries",2,l),this.va=ks("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new Ic(l&&l.concurrentRequestLimit),this.Ba=new Sp,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=dd.prototype,n.ka=8,n.I=1,n.connect=function(l,p,y,A){Ot(0),this.W=l,this.H=p||{},y&&A!==void 0&&(this.H.OSID=y,this.H.OAID=A),this.F=this.X,this.J=Pc(this,null,this.W),Cn(this)};function Dc(l){if(hd(l),l.I==3){var p=l.V++,y=On(l.J);if(Ye(y,"SID",l.M),Ye(y,"RID",p),Ye(y,"TYPE","terminate"),wr(l,y),p=new $r(l,l.j,p),p.M=2,p.A=Bo(On(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!y&&o.Image&&(new Image().src=p.A,y=!0),y||(p.g=Nc(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Cs(p)}gd(l)}function bi(l){l.g&&(Ac(l),l.g.cancel(),l.g=null)}function hd(l){bi(l),l.v&&(o.clearTimeout(l.v),l.v=null),Rc(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function Cn(l){if(!As(l.h)&&!l.m){l.m=!0;var p=l.Ea;nt||_(),be||(nt(),be=!0),b.add(p,l),l.D=0}}function xp(l,p){return qr(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=p.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=kn(d(l.Ea,l,p),Fs(l,l.D)),l.D++,!0)}n.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;let N=new $r(this,this.j,l),F=this.o;if(this.U&&(F?(F=up(F),Nt(F,this.U)):F=this.U),this.u!==null||this.R||(N.J=F,F=null),this.S)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var A=this.i[y];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(p+=A,p>4096){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=fd(this,N,p),y=On(this.J),Ye(y,"RID",l),Ye(y,"CVER",22),this.G&&Ye(y,"X-HTTP-Session-Id",this.G),wr(this,y),F&&(this.R?p="headers="+Oo(Rp(F))+"&"+p:this.u&&ud(y,this.u,F)),nd(this.h,N),this.Ra&&Ye(y,"TYPE","init"),this.S?(Ye(y,"$req",p),Ye(y,"SID","null"),N.U=!0,Lo(N,y,null)):Lo(N,y,p),this.I=2}}else this.I==3&&(l?Mp(this,l):this.i.length==0||As(this.h)||Mp(this))};function Mp(l,p){var y;p?y=p.l:y=l.V++;let A=On(l.J);Ye(A,"SID",l.M),Ye(A,"RID",y),Ye(A,"AID",l.K),wr(l,A),l.u&&l.o&&ud(A,l.u,l.o),y=new $r(l,l.j,y,l.D+1),l.u===null&&(y.J=l.o),p&&(l.i=p.G.concat(l.i)),p=fd(l,y,1e3),y.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),nd(l.h,y),Lo(y,A,p)}function wr(l,p){l.H&&ps(l.H,function(y,A){Ye(p,A,y)}),l.l&&ps({},function(y,A){Ye(p,A,y)})}function fd(l,p,y){y=Math.min(l.i.length,y);let A=l.l?d(l.l.Ka,l.l,l):null;e:{var N=l.i;let ue=-1;for(;;){let u=["count="+y];ue==-1?y>0?(ue=N[0].g,u.push("ofs="+ue)):ue=0:u.push("ofs="+ue);let f=!0;for(let m=0;m<y;m++){var F=N[m].g;let D=N[m].map;if(F-=ue,F<0)ue=Math.max(0,N[m].g-100),f=!1;else try{F="req"+F+"_"||"";try{var K=D instanceof Map?D:Object.entries(D);for(let[x,L]of K){let W=L;a(L)&&(W=gs(L)),u.push(F+x+"="+encodeURIComponent(W))}}catch(x){throw u.push(F+"type="+encodeURIComponent("_badmap")),x}}catch{A&&A(D)}}if(f){K=u.join("&");break e}}K=void 0}return l=l.i.splice(0,y),p.G=l,K}function Sc(l){if(!l.g&&!l.v){l.Y=1;var p=l.Da;nt||_(),be||(nt(),be=!0),b.add(p,l),l.A=0}}function Os(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=kn(d(l.Da,l),Fs(l,l.A)),l.A++,!0)}n.Da=function(){if(this.v=null,Go(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=kn(d(this.Wa,this),l)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ot(10),bi(this),Go(this))};function Ac(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Go(l){l.g=new $r(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var p=On(l.na);Ye(p,"RID","rpc"),Ye(p,"SID",l.M),Ye(p,"AID",l.K),Ye(p,"CI",l.F?"0":"1"),!l.F&&l.ia&&Ye(p,"TO",l.ia),Ye(p,"TYPE","xmlhttp"),wr(l,p),l.u&&l.o&&ud(p,l.u,l.o),l.O&&(l.g.H=l.O);var y=l.g;l=l.ba,y.M=1,y.A=Bo(On(p)),y.u=null,y.R=!0,Vo(y,l)}n.Va=function(){this.C!=null&&(this.C=null,bi(this),Os(this),Ot(19))};function Rc(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function pd(l,p){var y=null;if(l.g==p){Rc(l),Ac(l),l.g=null;var A=2}else if(Uo(l.h,p))y=p.G,rd(l.h,p),A=1;else return;if(l.I!=0){if(p.o)if(A==1){y=p.u?p.u.length:0,p=Date.now()-p.F;var N=l.D;A=_s(),Mt(A,new mc(A,y)),Cn(l)}else Sc(l);else if(N=p.m,N==3||N==0&&p.X>0||!(A==1&&xp(l,p)||A==2&&Os(l)))switch(y&&y.length>0&&(p=l.h,p.i=p.i.concat(y)),N){case 1:Gr(l,5);break;case 4:Gr(l,10);break;case 3:Gr(l,6);break;default:Gr(l,2)}}}function Fs(l,p){let y=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(y*=2),y*p}function Gr(l,p){if(l.j.info("Error code "+p),p==2){var y=d(l.bb,l),A=l.Ua;let N=!A;A=new rr(A||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Rs(A,"https"),Bo(A),N?zr(A.toString(),y):Dp(A.toString(),y)}else Ot(2);l.I=0,l.l&&l.l.pa(p),gd(l),hd(l)}n.bb=function(l){l?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function gd(l){if(l.I=0,l.ja=[],l.l){let p=id(l.h);(p.length!=0||l.i.length!=0)&&(P(l.ja,p),P(l.ja,l.i),l.h.i.length=0,S(l.i),l.i.length=0),l.l.oa()}}function Pc(l,p,y){var A=y instanceof rr?On(y):new rr(y);if(A.g!="")p&&(A.g=p+"."+A.g),jo(A,A.u);else{var N=o.location;A=N.protocol,p=p?p+"."+N.hostname:N.hostname,N=+N.port;let F=new rr(null);A&&Rs(F,A),p&&(F.g=p),N&&jo(F,N),y&&(F.h=y),A=F}return y=l.G,p=l.wa,y&&p&&Ye(A,y,p),Ye(A,"VER",l.ka),wr(l,A),A}function Nc(l,p,y){if(p&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Aa&&!l.ma?new Je(new Ir({ab:y})):new Je(l.ma),p.Fa(l.L),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function md(){}n=md.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ci(){}Ci.prototype.g=function(l,p){return new nn(l,p)};function nn(l,p){xt.call(this),this.g=new dd(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(l?l["X-WebChannel-Client-Profile"]=p.sa:l={"X-WebChannel-Client-Profile":p.sa}),this.g.U=l,(l=p&&p.Qb)&&!v(l)&&(this.g.u=l),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!v(p)&&(this.g.G=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new Di(this)}g(nn,xt),nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Dc(this.g)},nn.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.v&&(y={},y.__data__=gs(l),l=y);p.i.push(new Ep(p.Ya++,l)),p.I==3&&Cn(p)},nn.prototype.N=function(){this.g.l=null,delete this.j,Dc(this.g),delete this.g,nn.Z.N.call(this)};function yd(l){gc.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(let y in p){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}g(yd,gc);function Wr(){Mo.call(this),this.status=1}g(Wr,Mo);function Di(l){this.g=l}g(Di,md),Di.prototype.ra=function(){Mt(this.g,"a")},Di.prototype.qa=function(l){Mt(this.g,new yd(l))},Di.prototype.pa=function(l){Mt(this.g,new Wr)},Di.prototype.oa=function(){Mt(this.g,"b")},Ci.prototype.createWebChannel=Ci.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,a0=ts.createWebChannelTransport=function(){return new Ci},o0=ts.getStatEventTarget=function(){return _s()},s0=ts.Event=wi,Hy=ts.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ko.NO_ERROR=0,ko.TIMEOUT=8,ko.HTTP_ERROR=6,nf=ts.ErrorCode=ko,ws.COMPLETE="complete",i0=ts.EventType=ws,ms.EventType=ys,ys.OPEN="a",ys.CLOSE="b",ys.ERROR="c",ys.MESSAGE="d",xt.prototype.listen=xt.prototype.J,qu=ts.WebChannel=ms,N8=ts.FetchXmlHttpFactory=Ir,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,r0=ts.XhrIo=Je}).apply(typeof $y<"u"?$y:typeof self<"u"?self:typeof window<"u"?window:{});var oO="@firebase/firestore",aO="4.9.2";var ln=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");var gl="12.3.0";var $a=new uo("@firebase/firestore");function zu(){return $a.logLevel}function J(n,...e){if($a.logLevel<=Se.DEBUG){let t=e.map(GC);$a.debug(`Firestore (${gl}): ${n}`,...t)}}function is(n,...e){if($a.logLevel<=Se.ERROR){let t=e.map(GC);$a.error(`Firestore (${gl}): ${n}`,...t)}}function lf(n,...e){if($a.logLevel<=Se.WARN){let t=e.map(GC);$a.warn(`Firestore (${gl}): ${n}`,...t)}}function GC(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function me(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,QO(n,r,t)}function QO(n,e,t){let r=`FIRESTORE (${gl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw is(r),new Error(r)}function ut(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||QO(e,i,r)}function ke(n,e){return n}var Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},oe=class extends hr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var yo=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var g0=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},m0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ln.UNAUTHENTICATED))}shutdown(){}};var y0=class{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ut(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new yo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new yo,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>C(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new yo)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ut(typeof r.accessToken=="string",31837,{l:r}),new g0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ut(e===null||typeof e=="string",2055,{h:e}),new ln(e)}},_0=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},v0=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new _0(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Qy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},E0=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ut(this.o===void 0,3512);let r=s=>{s.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Qy(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ut(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Qy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function x8(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Yy=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=x8(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Ne(n,e){return n<e?-1:n>e?1:0}function I0(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),s=e.charAt(r);if(i!==s)return c0(i)===c0(s)?Ne(i,s):c0(i)?1:-1}return Ne(n.length,e.length)}var M8=55296,k8=57343;function c0(n){let e=n.charCodeAt(0);return e>=M8&&e<=k8}function rl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var cO="__name__",Jy=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&me(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&me(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ne(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):I0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return es.fromString(e.substring(4,e.length-2))}},jt=class n extends Jy{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new oe(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},O8=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Vr=class n extends Jy{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return O8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cO}static keyField(){return new n([cO])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new oe(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new oe(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new oe(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new oe(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var le=class n{constructor(e){this.path=e}static fromPath(e){return new n(jt.fromString(e))}static fromName(e){return new n(jt.fromString(e).popFirst(5))}static empty(){return new n(jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&jt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new jt(e.slice()))}};function F8(n,e,t,r){if(e===!0&&r===!0)throw new oe(Q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function L8(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function V8(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":me(12329,{type:typeof n})}function u0(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new oe(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=V8(n);throw new oe(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Dt(n,e){let t={typeString:n};return e&&(t.value=e),t}function bf(n,e){if(!L8(n))throw new oe(Q.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new oe(Q.INVALID_ARGUMENT,t);return!0}var uO=-62135596800,lO=1e6,In=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*lO);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<uO)throw new oe(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lO}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bf(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-uO;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};In._jsonSchemaVersion="firestore/timestamp/1.0",In._jsonSchema={type:Dt("string",In._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};var _e=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new In(0,0))}static max(){return new n(new In(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var df=-1,w0=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};w0.UNKNOWN_ID=-1;function U8(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=_e.fromTimestamp(r===1e9?new In(t+1,0):new In(t,r));return new Ha(i,le.empty(),e)}function j8(n){return new Ha(n.readTime,n.key,df)}var Ha=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(_e.min(),le.empty(),df)}static max(){return new n(_e.max(),le.empty(),df)}};function B8(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=le.comparator(n.documentKey,e.documentKey),t!==0?t:Ne(n.largestBatchId,e.largestBatchId))}var $8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",T0=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function T_(n){return C(this,null,function*(){if(n.code!==Q.FAILED_PRECONDITION||n.message!==$8)throw n;J("LocalStore","Unexpectedly lost primary lease")})}var q=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function H8(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ml(n){return n.name==="IndexedDbTransactionError"}var WC=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),q8=-1;function b_(n){return n==null}function Xy(n){return n===0&&1/n==-1/0}var YO="";function z8(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=dO(e)),e=G8(n.get(t),e);return dO(e)}function G8(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case YO:t+="";break;default:t+=s}}return t}function dO(n){return n+YO+""}var W8="remoteDocuments",JO="owner";var XO="mutationQueues";var ZO="mutations";var eF="documentMutations",K8="remoteDocumentsV14";var tF="remoteDocumentGlobal";var nF="targets";var rF="targetDocuments";var iF="targetGlobal",sF="collectionParents";var oF="clientMetadata";var aF="bundles";var cF="namedQueries";var Q8="indexConfiguration";var Y8="indexState";var J8="indexEntries";var uF="documentOverlays";var X8="globals";var Z8=[XO,ZO,eF,W8,nF,JO,iF,rF,oF,tF,sF,aF,cF],Vve=[...Z8,uF],eW=[XO,ZO,eF,K8,nF,JO,iF,rF,oF,tF,sF,aF,cF,uF],tW=eW,nW=[...tW,Q8,Y8,J8];var Uve=[...nW,X8];function hO(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Cf(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rW(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var It=class n{constructor(e,t){this.comparator=e,this.root=t||hi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qu(this.root,e,this.comparator,!0)}},Qu=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},hi=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}};hi.EMPTY=null,hi.RED=!0,hi.BLACK=!1;hi.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new hi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Kt=class n{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Zy(this.data.getIterator())}getIteratorFrom(e){return new Zy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Zy=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var La=class n{constructor(e){this.fields=e,e.sort(Vr.comparator)}static empty(){return new n([])}unionWith(e){let t=new Kt(Vr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rl(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var e_=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var dn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new e_("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};dn.EMPTY_BYTE_STRING=new dn("");var iW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ss(n){if(ut(!!n,39018),typeof n=="string"){let e=0,t=iW.exec(n);if(ut(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ct(n.seconds),nanos:ct(n.nanos)}}function ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function os(n){return typeof n=="string"?dn.fromBase64String(n):dn.fromUint8Array(n)}var lF="server_timestamp",dF="__type__",hF="__previous_value__",fF="__local_write_time__";function KC(n){return(n?.mapValue?.fields||{})[dF]?.stringValue===lF}function C_(n){let e=n.mapValue.fields[hF];return KC(e)?C_(e):e}function hf(n){let e=ss(n.mapValue.fields[fF].timestampValue);return new In(e.seconds,e.nanos)}var b0=class{constructor(e,t,r,i,s,o,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}},C0="(default)",t_=class n{constructor(e,t){this.projectId=e,this.database=t||C0}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===C0}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var pF="__type__",gF="__max__",qy={mapValue:{fields:{__type__:{stringValue:gF}}}},mF="__vector__",ff="value";function _o(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?KC(n)?4:_F(n)?9007199254740991:yF(n)?10:11:me(28295,{value:n})}function pi(n,e){if(n===e)return!0;let t=_o(n);if(t!==_o(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hf(n).isEqual(hf(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=ss(i.timestampValue),a=ss(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return os(i.bytesValue).isEqual(os(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return ct(i.geoPointValue.latitude)===ct(s.geoPointValue.latitude)&&ct(i.geoPointValue.longitude)===ct(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return ct(i.integerValue)===ct(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=ct(i.doubleValue),a=ct(s.doubleValue);return o===a?Xy(o)===Xy(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return rl(n.arrayValue.values||[],e.arrayValue.values||[],pi);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(hO(o)!==hO(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!pi(o[c],a[c])))return!1;return!0})(n,e);default:return me(52216,{left:n})}}function pf(n,e){return(n.values||[]).find(t=>pi(t,e))!==void 0}function il(n,e){if(n===e)return 0;let t=_o(n),r=_o(e);if(t!==r)return Ne(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=ct(s.integerValue||s.doubleValue),c=ct(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return fO(n.timestampValue,e.timestampValue);case 4:return fO(hf(n),hf(e));case 5:return I0(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=os(s),c=os(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=Ne(a[d],c[d]);if(h!==0)return h}return Ne(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Ne(ct(s.latitude),ct(o.latitude));return a!==0?a:Ne(ct(s.longitude),ct(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return pO(n.arrayValue,e.arrayValue);case 10:return(function(s,o){let a=s.fields||{},c=o.fields||{},d=a[ff]?.arrayValue,h=c[ff]?.arrayValue,g=Ne(d?.values?.length||0,h?.values?.length||0);return g!==0?g:pO(d,h)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===qy.mapValue&&o===qy.mapValue)return 0;if(s===qy.mapValue)return 1;if(o===qy.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let I=I0(c[g],h[g]);if(I!==0)return I;let S=il(a[c[g]],d[h[g]]);if(S!==0)return S}return Ne(c.length,h.length)})(n.mapValue,e.mapValue);default:throw me(23264,{he:t})}}function fO(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ne(n,e);let t=ss(n),r=ss(e),i=Ne(t.seconds,r.seconds);return i!==0?i:Ne(t.nanos,r.nanos)}function pO(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=il(t[i],r[i]);if(s)return s}return Ne(t.length,r.length)}function sl(n){return D0(n)}function D0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=ss(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return os(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return le.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=D0(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${D0(t.fields[o])}`;return i+"}"})(n.mapValue):me(61005,{value:n})}function Wy(n){switch(_o(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=C_(n);return e?16+Wy(e):16;case 5:return 2*n.stringValue.length;case 6:return os(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+Wy(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Cf(r.fields,(s,o)=>{i+=s.length+Wy(o)}),i})(n.mapValue);default:throw me(13486,{value:n})}}function S0(n){return!!n&&"integerValue"in n}function QC(n){return!!n&&"arrayValue"in n}function gO(n){return!!n&&"nullValue"in n}function mO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function l0(n){return!!n&&"mapValue"in n}function yF(n){return(n?.mapValue?.fields||{})[pF]?.stringValue===mF}function sf(n){if(n.geoPointValue)return{geoPointValue:H({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:H({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Cf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=sf(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sf(n.arrayValue.values[t]);return e}return H({},n)}function _F(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===gF}var Bve={mapValue:{fields:{[pF]:{stringValue:mF},[ff]:{arrayValue:{}}}}};var ns=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!l0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sf(t)}setAll(e){let t=Vr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=sf(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());l0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];l0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Cf(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(sf(this.value))}};var Ur=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,_e.min(),_e.min(),_e.min(),ns.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,_e.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,_e.min(),_e.min(),ns.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,_e.min(),_e.min(),ns.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ns.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ns.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ol=class{constructor(e,t){this.position=e,this.inclusive=t}};function yO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=le.comparator(le.fromName(o.referenceValue),t.key):r=il(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function _O(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pi(n.position[t],e.position[t]))return!1;return!0}var al=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function sW(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var n_=class{},Bt=class n extends n_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new R0(e,t,r):t==="array-contains"?new x0(e,r):t==="in"?new M0(e,r):t==="not-in"?new k0(e,r):t==="array-contains-any"?new O0(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new P0(e,r):new N0(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(il(t,this.value)):t!==null&&_o(this.value)===_o(t)&&this.matchesComparison(il(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},gi=class n extends n_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return vF(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function vF(n){return n.op==="and"}function EF(n){return oW(n)&&vF(n)}function oW(n){for(let e of n.filters)if(e instanceof gi)return!1;return!0}function A0(n){if(n instanceof Bt)return n.field.canonicalString()+n.op.toString()+sl(n.value);if(EF(n))return n.filters.map(e=>A0(e)).join(",");{let e=n.filters.map(t=>A0(t)).join(",");return`${n.op}(${e})`}}function IF(n,e){return n instanceof Bt?(function(r,i){return i instanceof Bt&&r.op===i.op&&r.field.isEqual(i.field)&&pi(r.value,i.value)})(n,e):n instanceof gi?(function(r,i){return i instanceof gi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&IF(o,i.filters[a]),!0):!1})(n,e):void me(19439)}function wF(n){return n instanceof Bt?(function(t){return`${t.field.canonicalString()} ${t.op} ${sl(t.value)}`})(n):n instanceof gi?(function(t){return t.op.toString()+" {"+t.getFilters().map(wF).join(" ,")+"}"})(n):"Filter"}var R0=class extends Bt{constructor(e,t,r){super(e,t,r),this.key=le.fromName(r.referenceValue)}matches(e){let t=le.comparator(e.key,this.key);return this.matchesComparison(t)}},P0=class extends Bt{constructor(e,t){super(e,"in",t),this.keys=TF("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},N0=class extends Bt{constructor(e,t){super(e,"not-in",t),this.keys=TF("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function TF(n,e){return(e.arrayValue?.values||[]).map(t=>le.fromName(t.referenceValue))}var x0=class extends Bt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return QC(t)&&pf(t.arrayValue,this.value)}},M0=class extends Bt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&pf(this.value.arrayValue,t)}},k0=class extends Bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(pf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!pf(this.value.arrayValue,t)}},O0=class extends Bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!QC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>pf(this.value.arrayValue,r))}};var F0=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}};function vO(n,e=null,t=[],r=[],i=null,s=null,o=null){return new F0(n,e,t,r,i,s,o)}function YC(n){let e=ke(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>A0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),b_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>sl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>sl(r)).join(",")),e.Te=t}return e.Te}function JC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!sW(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!IF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_O(n.startAt,e.startAt)&&_O(n.endAt,e.endAt)}function L0(n){return le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var cl=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function aW(n,e,t,r,i,s,o,a){return new cl(n,e,t,r,i,s,o,a)}function XC(n){return new cl(n)}function EO(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function cW(n){return n.collectionGroup!==null}function of(n){let e=ke(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Kt(Vr.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new al(s,r))}),t.has(Vr.keyField().canonicalString())||e.Ie.push(new al(Vr.keyField(),r))}return e.Ie}function fi(n){let e=ke(n);return e.Ee||(e.Ee=uW(e,of(n))),e.Ee}function uW(n,e){if(n.limitType==="F")return vO(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new al(i.field,s)});let t=n.endAt?new ol(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ol(n.startAt.position,n.startAt.inclusive):null;return vO(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function V0(n,e,t){return new cl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function D_(n,e){return JC(fi(n),fi(e))&&n.limitType===e.limitType}function bF(n){return`${YC(fi(n))}|lt:${n.limitType}`}function Gu(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>wF(i)).join(", ")}]`),b_(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>sl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>sl(i)).join(",")),`Target(${r})`})(fi(n))}; limitType=${n.limitType})`}function S_(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):le.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of of(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let d=yO(o,a,c);return o.inclusive?d<=0:d<0})(r.startAt,of(r),i)||r.endAt&&!(function(o,a,c){let d=yO(o,a,c);return o.inclusive?d>=0:d>0})(r.endAt,of(r),i))})(n,e)}function lW(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function CF(n){return(e,t)=>{let r=!1;for(let i of of(n)){let s=dW(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function dW(n,e,t){let r=n.field.isKeyField()?le.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?il(c,d):me(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return me(19790,{direction:n.dir})}}var as=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Cf(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return rW(this.inner)}size(){return this.innerSize}};var hW=new It(le.comparator);function vo(){return hW}var DF=new It(le.comparator);function rf(...n){let e=DF;for(let t of n)e=e.insert(t.key,t);return e}function fW(n){let e=DF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Va(){return af()}function SF(){return af()}function af(){return new as(n=>n.toString(),(n,e)=>n.isEqual(e))}var $ve=new It(le.comparator),pW=new Kt(le.comparator);function Fe(...n){let e=pW;for(let t of n)e=e.add(t);return e}var gW=new Kt(Ne);function mW(){return gW}function yW(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xy(e)?"-0":e}}function _W(n){return{integerValue:""+n}}var ul=class{constructor(){this._=void 0}};function vW(n,e,t){return n instanceof gf?(function(i,s){let o={fields:{[dF]:{stringValue:lF},[fF]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&KC(s)&&(s=C_(s)),s&&(o.fields[hF]=s),{mapValue:o}})(t,e):n instanceof ll?AF(n,e):n instanceof dl?RF(n,e):(function(i,s){let o=IW(i,s),a=IO(o)+IO(i.Ae);return S0(o)&&S0(i.Ae)?_W(a):yW(i.serializer,a)})(n,e)}function EW(n,e,t){return n instanceof ll?AF(n,e):n instanceof dl?RF(n,e):t}function IW(n,e){return n instanceof mf?(function(r){return S0(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var gf=class extends ul{},ll=class extends ul{constructor(e){super(),this.elements=e}};function AF(n,e){let t=PF(e);for(let r of n.elements)t.some(i=>pi(i,r))||t.push(r);return{arrayValue:{values:t}}}var dl=class extends ul{constructor(e){super(),this.elements=e}};function RF(n,e){let t=PF(e);for(let r of n.elements)t=t.filter(i=>!pi(i,r));return{arrayValue:{values:t}}}var mf=class extends ul{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function IO(n){return ct(n.integerValue||n.doubleValue)}function PF(n){return QC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function wW(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof ll&&i instanceof ll||r instanceof dl&&i instanceof dl?rl(r.elements,i.elements,pi):r instanceof mf&&i instanceof mf?pi(r.Ae,i.Ae):r instanceof gf&&i instanceof gf})(n.transform,e.transform)}var cf=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ky(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var yf=class{};function NF(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new U0(n.key,cf.none()):new _f(n.key,n.data,cf.none());{let t=n.data,r=ns.empty(),i=new Kt(Vr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new hl(n.key,r,new La(i.toArray()),cf.none())}}function TW(n,e,t){n instanceof _f?(function(i,s,o){let a=i.value.clone(),c=TO(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof hl?(function(i,s,o){if(!Ky(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=TO(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(xF(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function uf(n,e,t,r){return n instanceof _f?(function(s,o,a,c){if(!Ky(s.precondition,o))return a;let d=s.value.clone(),h=bO(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof hl?(function(s,o,a,c){if(!Ky(s.precondition,o))return a;let d=bO(s.fieldTransforms,c,o),h=o.data;return h.setAll(xF(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))})(n,e,t,r):(function(s,o,a){return Ky(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function wO(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&rl(r,i,(s,o)=>wW(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var _f=class extends yf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},hl=class extends yf{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function xF(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function TO(n,e,t){let r=new Map;ut(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,EW(o,a,t[i]))}return r}function bO(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,vW(s,o,e))}return r}var U0=class extends yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var j0=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&TW(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=uf(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=uf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=SF();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=NF(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(_e.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Fe())}isEqual(e){return this.batchId===e.batchId&&rl(this.mutations,e.mutations,(t,r)=>wO(t,r))&&rl(this.baseMutations,e.baseMutations,(t,r)=>wO(t,r))}};var B0=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var $0=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var bt,Me;function MF(n){if(n===void 0)return is("GRPC error has no .code"),Q.UNKNOWN;switch(n){case bt.OK:return Q.OK;case bt.CANCELLED:return Q.CANCELLED;case bt.UNKNOWN:return Q.UNKNOWN;case bt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case bt.INTERNAL:return Q.INTERNAL;case bt.UNAVAILABLE:return Q.UNAVAILABLE;case bt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case bt.NOT_FOUND:return Q.NOT_FOUND;case bt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case bt.ABORTED:return Q.ABORTED;case bt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case bt.DATA_LOSS:return Q.DATA_LOSS;default:return me(39323,{code:n})}}(Me=bt||(bt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";var bW=null;function CW(){return new TextEncoder}var DW=new es([4294967295,4294967295],0);function CO(n){let e=CW().encode(n),t=new n0;return t.update(e),new Uint8Array(t.digest())}function DO(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new es([t,r],0),new es([i,s],0)]}var H0=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ua(`Invalid padding: ${t}`);if(r<0)throw new Ua(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ua(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ua(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=es.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(es.fromNumber(r)));return i.compare(DW)===1&&(i=new es([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=CO(e),[r,i]=DO(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;let t=CO(e),[r,i]=DO(t);for(let s=0;s<this.hashCount;s++){let o=this.ye(r,i,s);this.Se(o)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ua=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var r_=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,vf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(_e.min(),i,new It(Ne),vo(),Fe())}},vf=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Fe(),Fe(),Fe())}};var Yu=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},i_=class{constructor(e,t){this.targetId=e,this.Ce=t}},s_=class{constructor(e,t,r=dn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},o_=class{constructor(){this.ve=0,this.Fe=SO(),this.Me=dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),t=Fe(),r=Fe();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:me(38017,{changeType:s})}}),new vf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=SO()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ut(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},q0=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=vo(),this.Je=zy(),this.He=zy(),this.Ye=new It(Ne)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let s=i.target;if(L0(s))if(r===0){let o=new le(s.path);this.et(t,o,Ur.newNoDocument(o,_e.min()))}else ut(r===1,20013,{expectedCount:r});else{let o=this._t(t);if(o!==r){let a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(t);let d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}bW?.lt((function(h,g,I,S,P){let U={localCacheCount:h,existenceFilterCount:g.count,databaseId:I.database,projectId:I.projectId},O=g.unchangedNames;return O&&(U.bloomFilter={applied:P===0,hashCount:O?.hashCount??0,bitmapLength:O?.bits?.bitmap?.length??0,padding:O?.bits?.padding??0,mightContain:G=>S?.mightContain(G)??!1}),U})(o,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=os(r).toUint8Array()}catch(c){if(c instanceof e_)return lf("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new H0(o,i,s)}catch(c){return lf(c instanceof Ua?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(t,s,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((s,o)=>{let a=this.ot(o);if(a){if(s.current&&L0(a.target)){let c=new le(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ur.newNoDocument(c,e))}s.Be&&(t.set(o,s.ke()),s.qe())}});let r=Fe();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));let i=new r_(e,t,this.Ye,this.je,r);return this.je=vo(),this.Je=zy(),this.He=zy(),this.Ye=new It(Ne),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new o_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Kt(Ne),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Kt(Ne),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||J("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new o_),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function zy(){return new It(le.comparator)}function SO(){return new It(le.comparator)}var SW={asc:"ASCENDING",desc:"DESCENDING"},AW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RW={and:"AND",or:"OR"},z0=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function G0(n,e){return n.useProto3Json||b_(e)?e:{value:e}}function PW(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NW(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ju(n){return ut(!!n,49232),_e.fromTimestamp((function(t){let r=ss(t);return new In(r.seconds,r.nanos)})(n))}function xW(n,e){return W0(n,e).canonicalString()}function W0(n,e){let t=(function(i){return new jt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function kF(n){let e=jt.fromString(n);return ut(UF(e),10190,{key:e.toString()}),e}function d0(n,e){let t=kF(e);if(t.get(1)!==n.databaseId.projectId)throw new oe(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new oe(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new le(FF(t))}function OF(n,e){return xW(n.databaseId,e)}function MW(n){let e=kF(n);return e.length===4?jt.emptyPath():FF(e)}function AO(n){return new jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function FF(n){return ut(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function kW(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:me(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(ut(h===void 0||typeof h=="string",58123),dn.fromBase64String(h||"")):(ut(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),dn.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(d){let h=d.code===void 0?Q.UNKNOWN:MF(d.code);return new oe(h,d.message||"")})(o);t=new s_(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=d0(n,r.document.name),s=Ju(r.document.updateTime),o=r.document.createTime?Ju(r.document.createTime):_e.min(),a=new ns({mapValue:{fields:r.document.fields}}),c=Ur.newFoundDocument(i,s,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];t=new Yu(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=d0(n,r.document),s=r.readTime?Ju(r.readTime):_e.min(),o=Ur.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Yu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=d0(n,r.document),s=r.removedTargetIds||[];t=new Yu([],s,i,null)}else{if(!("filter"in e))return me(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new $0(i,s),a=r.targetId;t=new i_(a,o)}}return t}function OW(n,e){return{documents:[OF(n,e.path)]}}function FW(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=OF(n,i);let s=(function(d){if(d.length!==0)return VF(gi.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(d){if(d.length!==0)return d.map(h=>(function(I){return{field:Wu(I.field),direction:UW(I.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=G0(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function LW(n){let e=MW(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ut(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(g){let I=LF(g);return I instanceof gi&&EF(I)?I.getFilters():[I]})(t.where));let o=[];t.orderBy&&(o=(function(g){return g.map(I=>(function(P){return new al(Ku(P.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(I))})(t.orderBy));let a=null;t.limit&&(a=(function(g){let I;return I=typeof g=="object"?g.value:g,b_(I)?null:I})(t.limit));let c=null;t.startAt&&(c=(function(g){let I=!!g.before,S=g.values||[];return new ol(S,I)})(t.startAt));let d=null;return t.endAt&&(d=(function(g){let I=!g.before,S=g.values||[];return new ol(S,I)})(t.endAt)),aW(e,i,o,s,a,"F",c,d)}function VW(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function LF(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ku(t.unaryFilter.field);return Bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ku(t.unaryFilter.field);return Bt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ku(t.unaryFilter.field);return Bt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ku(t.unaryFilter.field);return Bt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Bt.create(Ku(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return gi.create(t.compositeFilter.filters.map(r=>LF(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return me(1026)}})(t.compositeFilter.op))})(n):me(30097,{filter:n})}function UW(n){return SW[n]}function jW(n){return AW[n]}function BW(n){return RW[n]}function Wu(n){return{fieldPath:n.canonicalString()}}function Ku(n){return Vr.fromServerFormat(n.fieldPath)}function VF(n){return n instanceof Bt?(function(t){if(t.op==="=="){if(mO(t.value))return{unaryFilter:{field:Wu(t.field),op:"IS_NAN"}};if(gO(t.value))return{unaryFilter:{field:Wu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(mO(t.value))return{unaryFilter:{field:Wu(t.field),op:"IS_NOT_NAN"}};if(gO(t.value))return{unaryFilter:{field:Wu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wu(t.field),op:jW(t.op),value:t.value}}})(n):n instanceof gi?(function(t){let r=t.getFilters().map(i=>VF(i));return r.length===1?r[0]:{compositeFilter:{op:BW(t.op),filters:r}}})(n):me(54877,{filter:n})}function UF(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ef=class n{constructor(e,t,r,i,s=_e.min(),o=_e.min(),a=dn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var K0=class{constructor(e){this.yt=e}};function $W(n){let e=LW({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?V0(e,e.limit,"L"):e}var a_=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ct(e.integerValue));else if("doubleValue"in e){let r=ct(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Xy(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=ss(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(os(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?_F(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):yF(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):me(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=ff,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ct(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),le.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};a_.Kt=new a_;var Q0=class{constructor(){this.Cn=new Y0}addToCollectionParentIndex(e,t){return this.Cn.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(Ha.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(Ha.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}},Y0=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Kt(jt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Kt(jt.comparator)).toArray()}};var Hve=new Uint8Array(0);var RO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jF=41943040,fr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};fr.DEFAULT_COLLECTION_PERCENTILE=10,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fr.DEFAULT=new fr(jF,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fr.DISABLED=new fr(-1,0,0);var If=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var PO="LruGarbageCollector",HW=1048576;function NO([n,e],[t,r]){let i=Ne(n,t);return i===0?Ne(e,r):i}var J0=class{constructor(e){this.Ir=e,this.buffer=new Kt(NO),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();NO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},X0=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){J(PO,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>C(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ml(t)?J(PO,"Ignoring IndexedDB error during garbage collection: ",t):yield T_(t)}yield this.Vr(3e5)}))}},Z0=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return q.resolve(WC.ce);let r=new J0(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(RO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RO):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),zu()<=Se.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}};function qW(n,e){return new Z0(n,e)}var eC=class{constructor(){this.changes=new as(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ur.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var tC=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var nC=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&uf(r.mutation,i,La.empty(),In.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Fe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Fe()){let i=Va();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=rf();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Va();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Fe()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=vo(),o=af(),a=(function(){return af()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof hl)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),uf(h.mutation,d,h.mutation.getFieldMask(),In.now())):o.set(d.key,La.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>a.set(d,new tC(h,o.get(d)??null))),a))}recalculateAndSaveOverlays(e,t){let r=af(),i=new It((o,a)=>o-a),s=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||La.empty();h=a.applyToLocalView(d,h),r.set(c,h);let g=(i.get(a.batchId)||Fe()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,g=SF();h.forEach(I=>{if(!s.has(I)){let S=NF(t.get(I),r.get(I));S!==null&&g.set(I,S),s=s.add(I)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cW(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):q.resolve(Va()),a=df,c=s;return o.next(d=>q.forEach(d,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(I=>{c=c.insert(h,I)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,Fe())).next(h=>({batchId:a,changes:fW(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new le(t)).next(r=>{let i=rf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=rf();return this.indexManager.getCollectionParents(e,s).next(a=>q.forEach(a,c=>{let d=(function(g,I){return new cl(I,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,I)=>{o=o.insert(g,I)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,Ur.newInvalidDocument(h)))});let a=rf();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&uf(h.mutation,d,La.empty(),In.now()),S_(t,d)&&(a=a.insert(c,d))}),a})}};var rC=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return q.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Ju(i.createTime)}})(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:$W(i.bundledQuery),readTime:Ju(i.readTime)}})(t)),q.resolve()}};var iC=class{constructor(){this.overlays=new It(le.comparator),this.qr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Va();return q.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.St(e,t,s)}),q.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){let i=Va(),s=t.length+1,o=new le(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new It((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=Va(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=Va(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return q.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new B0(t,r));let s=this.qr.get(t);s===void 0&&(s=Fe(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}};var sC=class{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}};var wf=class{constructor(){this.Qr=new Kt(Ct.$r),this.Ur=new Kt(Ct.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Ct(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Ct(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new le(new jt([])),r=new Ct(t,e),i=new Ct(t,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new le(new jt([])),r=new Ct(t,e),i=new Ct(t,e+1),s=Fe();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ct(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ct=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return le.comparator(e.key,t.key)||Ne(e.Yr,t.Yr)}static Kr(e,t){return Ne(e.Yr,t.Yr)||le.comparator(e.key,t.key)}};var oC=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Kt(Ct.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new j0(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Zr=this.Zr.add(new Ct(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,t){return q.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?q8:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ct(t,0),i=new Ct(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{let a=this.Xr(o.Yr);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kt(Ne);return t.forEach(i=>{let s=new Ct(i,0),o=new Ct(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;le.isDocumentKey(s)||(s=s.child(""));let o=new Ct(new le(s),0),a=new Kt(Ne);return this.Zr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Yr)),!0)},o),q.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ut(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return q.forEach(t.mutations,i=>{let s=new Ct(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Ct(t,0),i=this.Zr.firstAfterOrEqual(r);return q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var aC=class{constructor(e){this.ri=e,this.docs=(function(){return new It(le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():Ur.newInvalidDocument(t))}getEntries(e,t){let r=vo();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ur.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=vo(),o=t.path,a=new le(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||B8(j8(h),r)<=0||(i.has(h.key)||S_(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,t,r,i){me(9500)}ii(e,t){return q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new cC(this)}getSize(e){return q.resolve(this.size)}},cC=class extends eC{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),q.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var uC=class{constructor(e){this.persistence=e,this.si=new as(t=>YC(t),JC),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.oi=0,this._i=new wf,this.targetCount=0,this.ai=If.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),q.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new If(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Pr(t),q.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),q.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),q.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this._i.containsKey(t))}};var c_=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new WC(0),this.li=!1,this.li=!0,this.hi=new sC,this.referenceDelegate=e(this),this.Pi=new uC(this),this.indexManager=new Q0,this.remoteDocumentCache=(function(i){return new aC(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new K0(t),this.Ii=new rC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new oC(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){J("MemoryPersistence","Starting transaction:",e);let i=new lC(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return q.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},lC=class extends T0{constructor(e){super(),this.currentSequenceNumber=e}},dC=class n{constructor(e){this.persistence=e,this.Ri=new wf,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw me(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),q.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,r=>{let i=le.fromPath(r);return this.gi(e,i).next(s=>{s||t.removeEntry(i,_e.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return q.or([()=>q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},u_=class n{constructor(e,t){this.persistence=e,this.pi=new as(r=>z8(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=qW(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return q.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?q.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,t).next(a=>{a||(r++,s.removeEntry(o,_e.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),q.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wy(e.data.value)),t}br(e,t,r){return q.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var hC=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Fe(),i=Fe();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var fC=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var pC=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return C1()?8:H8(Xn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ys(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new fC;return this.Ss(e,t,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,t,o,a.size)})}).next(()=>s.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(zu()<=Se.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Gu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(zu()<=Se.DEBUG&&J("QueryEngine","Query:",Gu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(zu()<=Se.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Gu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fi(t))):q.resolve())}ys(e,t){if(EO(t))return q.resolve(null);let r=fi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=V0(t,null,"F"),r=fi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Fe(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.Ds(t,a);return this.Cs(t,d,o,c.readTime)?this.ys(e,V0(t,null,"F")):this.vs(e,d,t,c)}))})))}ws(e,t,r,i){return EO(t)||i.isEqual(_e.min())?q.resolve(null):this.ps.getDocuments(e,r).next(s=>{let o=this.Ds(t,s);return this.Cs(t,o,r,i)?q.resolve(null):(zu()<=Se.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Gu(t)),this.vs(e,o,t,U8(i,df)).next(a=>a))})}Ds(e,t){let r=new Kt(CF(e));return t.forEach((i,s)=>{S_(e,s)&&(r=r.add(s))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return zu()<=Se.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Gu(t)),this.ps.getDocumentsMatchingQuery(e,t,Ha.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var ZC="LocalStore",zW=3e8,gC=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new It(Ne),this.xs=new as(s=>YC(s),JC),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function GW(n,e,t,r){return new gC(n,e,t,r)}function BF(n,e){return C(this,null,function*(){let t=ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Fe();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:a}))})})})}function $F(n){let e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function WW(n,e){let t=ke(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,g)=>{let I=i.get(g);if(!I)return;a.push(t.Pi.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.Pi.addMatchingKeys(s,h.addedDocuments,g)));let S=I.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?S=S.withResumeToken(dn.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):h.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(h.resumeToken,r)),i=i.insert(g,S),(function(U,O,G){return U.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=zW?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(I,S,h)&&a.push(t.Pi.updateTargetData(s,S))});let c=vo(),d=Fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(KW(s,o,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(_e.min())){let h=t.Pi.getLastRemoteSnapshotVersion(s).next(g=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(t.Ms=i,s))}function KW(n,e,t){let r=Fe(),i=Fe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=vo();return t.forEach((a,c)=>{let d=s.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(_e.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):J(ZC,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:i}})}function QW(n,e){let t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):t.Pi.allocateTargetId(r).next(o=>(i=new Ef(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function mC(n,e,t){return C(this,null,function*(){let r=ke(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ml(o))throw o;J(ZC,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function xO(n,e,t){let r=ke(n),i=_e.min(),s=Fe();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(c,d,h){let g=ke(c),I=g.xs.get(h);return I!==void 0?q.resolve(g.Ms.get(I)):g.Pi.getTargetData(d,h)})(r,o,fi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,t?i:_e.min(),t?s:Fe())).next(a=>(YW(r,lW(e),a),{documents:a,Qs:s})))}function YW(n,e,t){let r=n.Os.get(e)||_e.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Os.set(e,r)}var l_=class{constructor(){this.activeTargetIds=mW()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var yC=class{constructor(){this.Mo=new l_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new l_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var _C=class{Oo(e){}shutdown(){}};var MO="ConnectivityMonitor",d_=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){J(MO,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){J(MO,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Gy=null;function vC(){return Gy===null?Gy=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gy++,"0x"+Gy.toString(16)}var h0="RestConnection",JW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},EC=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===C0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){let o=vC(),a=this.zo(e,t.toUriEncodedString());J(h0,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);let{host:d}=new URL(a),h=Bh(d);return this.Jo(e,a,c,r,h).then(g=>(J(h0,`Received RPC '${e}' ${o}: `,g),g),g=>{throw lf(h0,`RPC '${e}' ${o} failed with error: `,g,"url: ",a,"request:",r),g})}Ho(e,t,r,i,s,o){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+gl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,t){let r=JW[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var IC=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var un="WebChannelConnection",wC=class extends EC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){let o=vC();return new Promise((a,c)=>{let d=new r0;d.setWithCredentials(!0),d.listenOnce(i0.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case nf.NO_ERROR:let g=d.getResponseJson();J(un,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),a(g);break;case nf.TIMEOUT:J(un,`RPC '${e}' ${o} timed out`),c(new oe(Q.DEADLINE_EXCEEDED,"Request time out"));break;case nf.HTTP_ERROR:let I=d.getStatus();if(J(un,`RPC '${e}' ${o} failed with status:`,I,"response text:",d.getResponseText()),I>0){let S=d.getResponseJson();Array.isArray(S)&&(S=S[0]);let P=S?.error;if(P&&P.status&&P.message){let U=(function(G){let ne=G.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(ne)>=0?ne:Q.UNKNOWN})(P.status);c(new oe(U,P.message))}else c(new oe(Q.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new oe(Q.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{J(un,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);J(un,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}T_(e,t,r){let i=vC(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=a0(),a=o0(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");J(un,`Creating RPC '${e}' stream ${i}: ${h}`,c);let g=o.createWebChannel(h,c);this.I_(g);let I=!1,S=!1,P=new IC({Yo:O=>{S?J(un,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(I||(J(un,`Opening RPC '${e}' stream ${i} transport.`),g.open(),I=!0),J(un,`RPC '${e}' stream ${i} sending:`,O),g.send(O))},Zo:()=>g.close()}),U=(O,G,ne)=>{O.listen(G,re=>{try{ne(re)}catch(Re){setTimeout(()=>{throw Re},0)}})};return U(g,qu.EventType.OPEN,()=>{S||(J(un,`RPC '${e}' stream ${i} transport opened.`),P.o_())}),U(g,qu.EventType.CLOSE,()=>{S||(S=!0,J(un,`RPC '${e}' stream ${i} transport closed`),P.a_(),this.E_(g))}),U(g,qu.EventType.ERROR,O=>{S||(S=!0,lf(un,`RPC '${e}' stream ${i} transport errored. Name:`,O.name,"Message:",O.message),P.a_(new oe(Q.UNAVAILABLE,"The operation could not be completed")))}),U(g,qu.EventType.MESSAGE,O=>{if(!S){let G=O.data[0];ut(!!G,16349);let ne=G,re=ne?.error||ne[0]?.error;if(re){J(un,`RPC '${e}' stream ${i} received error:`,re);let Re=re.status,nt=(function(_){let E=bt[_];if(E!==void 0)return MF(E)})(Re),be=re.message;nt===void 0&&(nt=Q.INTERNAL,be="Unknown error status: "+Re+" with message "+re.message),S=!0,P.a_(new oe(nt,be)),g.close()}else J(un,`RPC '${e}' stream ${i} received:`,G),P.u_(G)}}),U(a,s0.STAT_EVENT,O=>{O.stat===Hy.PROXY?J(un,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===Hy.NOPROXY&&J(un,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.__()},0),P}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function f0(){return typeof document<"u"?document:null}function HF(n){return new z0(n,!0)}var h_=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var kO="PersistentStream",TC=class{constructor(e,t,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new h_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return C(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return C(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return C(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(is(t.toString()),is("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new oe(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>C(this,null,function*(){this.state=0,this.start()}))}z_(e){return J(kO,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(J(kO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},bC=class extends TC{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=kW(this.serializer,e),r=(function(s){if(!("targetChange"in s))return _e.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?_e.min():o.readTime?Ju(o.readTime):_e.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=AO(this.serializer),t.addTarget=(function(s,o){let a,c=o.target;if(a=L0(c)?{documents:OW(s,c)}:{query:FW(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=NW(s,o.resumeToken);let d=G0(s,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(_e.min())>0){a.readTime=PW(s,o.snapshotVersion.toTimestamp());let d=G0(s,o.expectedCount);d!==null&&(a.expectedCount=d)}return a})(this.serializer,e);let r=VW(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=AO(this.serializer),t.removeTarget=e,this.q_(t)}};var CC=class{},DC=class extends CC{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new oe(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,W0(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new oe(Q.UNKNOWN,s.toString())})}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,W0(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(Q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},SC=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(is(t),this.aa=!1):J("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var fl="RemoteStore",AC=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(()=>C(this,null,function*(){Sf(this)&&(J(fl,"Restarting streams for network reachability change."),yield(function(c){return C(this,null,function*(){let d=ke(c);d.Ea.add(4),yield Df(d),d.Ra.set("Unknown"),d.Ea.delete(4),yield A_(d)})})(this))}))}),this.Ra=new SC(r,i)}};function A_(n){return C(this,null,function*(){if(Sf(n))for(let e of n.da)yield e(!0)})}function Df(n){return C(this,null,function*(){for(let e of n.da)yield e(!1)})}function qF(n,e){let t=ke(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),rD(t)?nD(t):yl(t).O_()&&tD(t,e))}function eD(n,e){let t=ke(n),r=yl(t);t.Ia.delete(e),r.O_()&&zF(t,e),t.Ia.size===0&&(r.O_()?r.L_():Sf(t)&&t.Ra.set("Unknown"))}function tD(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}yl(n).Y_(e)}function zF(n,e){n.Va.Ue(e),yl(n).Z_(e)}function nD(n){n.Va=new q0({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),yl(n).start(),n.Ra.ua()}function rD(n){return Sf(n)&&!yl(n).x_()&&n.Ia.size>0}function Sf(n){return ke(n).Ea.size===0}function GF(n){n.Va=void 0}function XW(n){return C(this,null,function*(){n.Ra.set("Online")})}function ZW(n){return C(this,null,function*(){n.Ia.forEach((e,t)=>{tD(n,e)})})}function e7(n,e){return C(this,null,function*(){GF(n),rD(n)?(n.Ra.ha(e),nD(n)):n.Ra.set("Unknown")})}function t7(n,e,t){return C(this,null,function*(){if(n.Ra.set("Online"),e instanceof s_&&e.state===2&&e.cause)try{yield(function(i,s){return C(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.Ia.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})})(n,e)}catch(r){J(fl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield OO(n,r)}else if(e instanceof Yu?n.Va.Ze(e):e instanceof i_?n.Va.st(e):n.Va.tt(e),!t.isEqual(_e.min()))try{let r=yield $F(n.localStore);t.compareTo(r)>=0&&(yield(function(s,o){let a=s.Va.Tt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{let h=s.Ia.get(c);if(!h)return;s.Ia.set(c,h.withResumeToken(dn.EMPTY_BYTE_STRING,h.snapshotVersion)),zF(s,c);let g=new Ef(h.target,c,d,h.sequenceNumber);tD(s,g)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){J(fl,"Failed to raise snapshot:",r),yield OO(n,r)}})}function OO(n,e,t){return C(this,null,function*(){if(!ml(e))throw e;n.Ea.add(1),yield Df(n),n.Ra.set("Offline"),t||(t=()=>$F(n.localStore)),n.asyncQueue.enqueueRetryable(()=>C(null,null,function*(){J(fl,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield A_(n)}))})}function FO(n,e){return C(this,null,function*(){let t=ke(n);t.asyncQueue.verifyOperationInProgress(),J(fl,"RemoteStore received new credentials");let r=Sf(t);t.Ea.add(3),yield Df(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield A_(t)})}function n7(n,e){return C(this,null,function*(){let t=ke(n);e?(t.Ea.delete(2),yield A_(t)):e||(t.Ea.add(2),yield Df(t),t.Ra.set("Unknown"))})}function yl(n){return n.ma||(n.ma=(function(t,r,i){let s=ke(t);return s.sa(),new bC(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:XW.bind(null,n),t_:ZW.bind(null,n),r_:e7.bind(null,n),H_:t7.bind(null,n)}),n.da.push(e=>C(null,null,function*(){e?(n.ma.B_(),rD(n)?nD(n):n.Ra.set("Unknown")):(yield n.ma.stop(),GF(n))}))),n.ma}var RC=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new yo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function WF(n,e){if(is("AsyncQueue",`${e}: ${n}`),ml(n))return new oe(Q.UNAVAILABLE,`${e}: ${n}`);throw n}var f_=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||le.comparator(t.key,r.key):(t,r)=>le.comparator(t.key,r.key),this.keyedMap=rf(),this.sortedSet=new It(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var p_=class{constructor(){this.ga=new It(le.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):me(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},pl=class n{constructor(e,t,r,i,s,o,a,c,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,f_.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&D_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var PC=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},NC=class{constructor(){this.queries=LO(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=ke(t),s=i.queries;i.queries=LO(),s.forEach((o,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new oe(Q.ABORTED,"Firestore shutting down"))}};function LO(){return new as(n=>bF(n),D_)}function r7(n,e){return C(this,null,function*(){let t=ke(n),r=3,i=e.query,s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new PC,r=e.Da()?0:1);try{switch(r){case 0:s.wa=yield t.onListen(i,!0);break;case 1:s.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=WF(o,`Initialization of query '${Gu(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&iD(t)})}function i7(n,e){return C(this,null,function*(){let t=ke(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function s7(n,e){let t=ke(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&iD(t)}function o7(n,e,t){let r=ke(n),i=r.queries.get(e);if(i)for(let s of i.Sa)s.onError(t);r.queries.delete(e)}function iD(n){n.Ca.forEach(e=>{e.next()})}var xC,VO;(VO=xC||(xC={})).Ma="default",VO.Cache="cache";var MC=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new pl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=pl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==xC.Cache}};var g_=class{constructor(e){this.key=e}},m_=class{constructor(e){this.key=e}},kC=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=CF(e),this.tu=new f_(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new p_,i=t?t.tu:this.tu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{let I=i.get(h),S=S_(this.query,g)?g:null,P=!!I&&this.mutatedKeys.has(I.key),U=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations),O=!1;I&&S?I.data.isEqual(S.data)?P!==U&&(r.track({type:3,doc:S}),O=!0):this.su(I,S)||(r.track({type:2,doc:S}),O=!0,(c&&this.eu(S,c)>0||d&&this.eu(S,d)<0)&&(a=!0)):!I&&S?(r.track({type:0,doc:S}),O=!0):I&&!S&&(r.track({type:1,doc:I}),O=!0,(c||d)&&(a=!0)),O&&(S?(o=o.add(S),s=U?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let o=e.iu.ya();o.sort((h,g)=>(function(S,P){let U=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Rt:O})}};return U(S)-U(P)})(h.type,g.type)||this.eu(h.doc,g.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new pl(this.query,e.tu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new p_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=Fe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new m_(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new g_(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Fe();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return pl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},sD="SyncEngine",OC=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},FC=class{constructor(e){this.key=e,this.hu=!1}},LC=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new as(a=>bF(a),D_),this.Iu=new Map,this.Eu=new Set,this.du=new It(le.comparator),this.Au=new Map,this.Ru=new wf,this.Vu={},this.mu=new Map,this.fu=If.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function a7(n,e,t=!0){return C(this,null,function*(){let r=XF(n),i,s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=yield KF(r,e,t,!0),i})}function c7(n,e){return C(this,null,function*(){let t=XF(n);yield KF(t,e,!0,!1)})}function KF(n,e,t,r){return C(this,null,function*(){let i=yield QW(n.localStore,fi(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield u7(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&qF(n.remoteStore,i),a})}function u7(n,e,t,r,i){return C(this,null,function*(){n.pu=(g,I,S)=>(function(U,O,G,ne){return C(this,null,function*(){let re=O.view.ru(G);re.Cs&&(re=yield xO(U.localStore,O.query,!1).then(({documents:b})=>O.view.ru(b,re)));let Re=ne&&ne.targetChanges.get(O.targetId),nt=ne&&ne.targetMismatches.get(O.targetId)!=null,be=O.view.applyChanges(re,U.isPrimaryClient,Re,nt);return jO(U,O.targetId,be.au),be.snapshot})})(n,g,I,S);let s=yield xO(n.localStore,e,!0),o=new kC(e,s.Qs),a=o.ru(s.documents),c=vf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=o.applyChanges(a,n.isPrimaryClient,c);jO(n,t,d.au);let h=new OC(e,t,o);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot})}function l7(n,e,t){return C(this,null,function*(){let r=ke(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!D_(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield mC(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&eD(r.remoteStore,i.targetId),VC(r,i.targetId)}).catch(T_))):(VC(r,i.targetId),yield mC(r.localStore,i.targetId,!0))})}function d7(n,e){return C(this,null,function*(){let t=ke(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),eD(t.remoteStore,r.targetId))})}function QF(n,e){return C(this,null,function*(){let t=ke(n);try{let r=yield WW(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Au.get(s);o&&(ut(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ut(o.hu,14607):i.removedDocuments.size>0&&(ut(o.hu,42227),o.hu=!1))}),yield JF(t,r,e)}catch(r){yield T_(r)}})}function UO(n,e,t){let r=ke(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=ke(o);c.onlineState=a;let d=!1;c.queries.forEach((h,g)=>{for(let I of g.Sa)I.va(a)&&(d=!0)}),d&&iD(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function h7(n,e,t){return C(this,null,function*(){let r=ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),s=i&&i.key;if(s){let o=new It(le.comparator);o=o.insert(s,Ur.newNoDocument(s,_e.min()));let a=Fe().add(s),c=new r_(_e.min(),new Map,new It(Ne),o,a);yield QF(r,c),r.du=r.du.remove(s),r.Au.delete(e),oD(r)}else yield mC(r.localStore,e,!1).then(()=>VC(r,e,t)).catch(T_)})}function VC(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||YF(n,r)})}function YF(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(eD(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),oD(n))}function jO(n,e,t){for(let r of t)r instanceof g_?(n.Ru.addReference(r.key,e),f7(n,r)):r instanceof m_?(J(sD,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||YF(n,r.key)):me(19791,{wu:r})}function f7(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(J(sD,"New document in limbo: "+t),n.Eu.add(r),oD(n))}function oD(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new le(jt.fromString(e)),r=n.fu.next();n.Au.set(r,new FC(t)),n.du=n.du.insert(t,r),qF(n.remoteStore,new Ef(fi(XC(t.path)),r,"TargetPurposeLimboResolution",WC.ce))}}function JF(n,e,t){return C(this,null,function*(){let r=ke(n),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let h=d?!d.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(d){i.push(d);let h=hC.As(c.targetId,d);s.push(h)}}))}),yield Promise.all(o),r.Pu.H_(i),yield(function(c,d){return C(this,null,function*(){let h=ke(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>q.forEach(d,I=>q.forEach(I.Es,S=>h.persistence.referenceDelegate.addReference(g,I.targetId,S)).next(()=>q.forEach(I.ds,S=>h.persistence.referenceDelegate.removeReference(g,I.targetId,S)))))}catch(g){if(!ml(g))throw g;J(ZC,"Failed to update sequence numbers: "+g)}for(let g of d){let I=g.targetId;if(!g.fromCache){let S=h.Ms.get(I),P=S.snapshotVersion,U=S.withLastLimboFreeSnapshotVersion(P);h.Ms=h.Ms.insert(I,U)}}})})(r.localStore,s))})}function p7(n,e){return C(this,null,function*(){let t=ke(n);if(!t.currentUser.isEqual(e)){J(sD,"User change. New user:",e.toKey());let r=yield BF(t.localStore,e);t.currentUser=e,(function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new oe(Q.CANCELLED,o))})}),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield JF(t,r.Ls)}})}function g7(n,e){let t=ke(n),r=t.Au.get(e);if(r&&r.hu)return Fe().add(r.key);{let i=Fe(),s=t.Iu.get(e);if(!s)return i;for(let o of s){let a=t.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function XF(n){let e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=QF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h7.bind(null,e),e.Pu.H_=s7.bind(null,e.eventManager),e.Pu.yu=o7.bind(null,e.eventManager),e}var ZF=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return C(this,null,function*(){this.serializer=HF(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return GW(this.persistence,new pC,t.initialUser,this.serializer)}Cu(t){return new c_(dC.mi,this.serializer)}Du(t){return new yC}terminate(){return C(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),UC=class extends ZF{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ut(this.persistence.referenceDelegate instanceof u_,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new X0(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?fr.withCacheSize(this.cacheSizeBytes):fr.DEFAULT;return new c_(r=>u_.mi(r,t),this.serializer)}};var m7=(()=>{class n{initialize(t,r){return C(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>UO(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=p7.bind(null,this.syncEngine),yield n7(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new NC})()}createDatastore(t){let r=HF(t.databaseInfo.databaseId),i=(function(o){return new wC(o)})(t.databaseInfo);return(function(o,a,c,d){return new DC(o,a,c,d)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new AC(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>UO(this.syncEngine,r,0),(function(){return d_.v()?new d_:new _C})())}createSyncEngine(t,r){return(function(s,o,a,c,d,h,g){let I=new LC(s,o,a,c,d,h);return g&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return C(this,null,function*(){yield(function(r){return C(this,null,function*(){let i=ke(r);J(fl,"RemoteStore shutting down."),i.Ea.add(5),yield Df(i),i.Aa.shutdown(),i.Ra.set("Unknown")})})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var jC=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):is("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Eo="FirestoreClient",BC=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ln.UNAUTHENTICATED,this.clientId=Yy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>C(this,null,function*(){J(Eo,"Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(J(Eo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new yo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>C(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=WF(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function p0(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),J(Eo,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>C(null,null,function*(){r.isEqual(i)||(yield BF(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function BO(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield y7(n);J(Eo,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>FO(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>FO(e.remoteStore,i)),n._onlineComponents=e})}function y7(n){return C(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){J(Eo,"Using user provided OfflineComponentProvider");try{yield p0(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Q.FAILED_PRECONDITION||i.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;lf("Error using user provided cache. Falling back to memory cache: "+t),yield p0(n,new ZF)}}else J(Eo,"Using default OfflineComponentProvider"),yield p0(n,new UC(void 0));return n._offlineComponents})}function _7(n){return C(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(J(Eo,"Using user provided OnlineComponentProvider"),yield BO(n,n._uninitializedComponentsProvider._online)):(J(Eo,"Using default OnlineComponentProvider"),yield BO(n,new m7))),n._onlineComponents})}function $O(n){return C(this,null,function*(){let e=yield _7(n),t=e.eventManager;return t.onListen=a7.bind(null,e.syncEngine),t.onUnlisten=l7.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=c7.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=d7.bind(null,e.syncEngine),t})}function eL(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var HO=new Map;var v7="firestore.googleapis.com",qO=!0,y_=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=v7,this.ssl=qO}else this.host=e.host,this.ssl=e.ssl??qO;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jF;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HW)throw new oe(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}F8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eL(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new oe(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new oe(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new oe(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},$C=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new y_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new y_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new m0;switch(r.type){case"firstParty":return new v0(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return C(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=HO.get(t);r&&(J("ComponentProvider","Removing Datastore"),HO.delete(t),r.terminate())})(this),Promise.resolve()}};var __=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},rs=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new HC(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(bf(t,n._jsonSchema))return new n(e,r||null,new le(jt.fromString(t.referencePath)))}};rs._jsonSchemaVersion="firestore/documentReference/1.0",rs._jsonSchema={type:Dt("string",rs._jsonSchemaVersion),referencePath:Dt("string")};var HC=class n extends __{constructor(e,t,r){super(e,t,XC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new rs(this.firestore,null,new le(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var zO="AsyncQueue",v_=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new h_(this,"async_queue_retry"),this._c=()=>{let r=f0();r&&J(zO,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=f0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=f0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new yo;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return C(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ml(e))throw e;J(zO,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,is("INTERNAL UNHANDLED ERROR: ",GO(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=RC.createAndSchedule(this,e,t,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&me(47125,{Pc:GO(this.nc)})}verifyOperationInProgress(){}Tc(){return C(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function GO(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function WO(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var Tf=class extends $C{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new v_,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return C(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new v_(e),this._firestoreClient=void 0,yield e}})}};function E7(n){if(n._terminated)throw new oe(Q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||I7(n),n._firestoreClient}function I7(n){let e=n._freezeSettings(),t=(function(i,s,o,a){return new b0(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,eL(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new BC(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}var Xu=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(dn.fromBase64String(e))}catch(t){throw new oe(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bf(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Xu._jsonSchemaVersion="firestore/bytes/1.0",Xu._jsonSchema={type:Dt("string",Xu._jsonSchemaVersion),bytes:Dt("string")};var E_=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Zu=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(bf(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Zu._jsonSchemaVersion="firestore/geoPoint/1.0",Zu._jsonSchema={type:Dt("string",Zu._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};var el=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bf(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new oe(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};el._jsonSchemaVersion="firestore/vectorValue/1.0",el._jsonSchema={type:Dt("string",el._jsonSchemaVersion),vectorValues:Dt("object")};var w7=new RegExp("[~\\*/\\[\\]]");function T7(n,e,t){if(e.search(w7)>=0)throw KO(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new E_(...e.split("."))._internalPath}catch{throw KO(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function KO(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new oe(Q.INVALID_ARGUMENT,a+n+c)}var I_=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new rs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new qC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(tL("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},qC=class extends I_{data(){return super.data()}};function tL(n,e){return typeof e=="string"?T7(n,e):e instanceof E_?e._internalPath:e._delegate._internalPath}function b7(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new oe(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var zC=class{convertValue(e,t="none"){switch(_o(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Cf(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){let t=e.fields?.[ff].arrayValue?.values?.map(r=>ct(r.doubleValue));return new el(t)}convertGeoPoint(e){return new Zu(ct(e.latitude),ct(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=C_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(hf(e));default:return null}}convertTimestamp(e){let t=ss(e);return new In(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=jt.fromString(e);ut(UF(r),9688,{name:e});let i=new t_(r.get(1),r.get(3)),s=new le(r.popFirst(5));return i.isEqual(t)||is(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var ja=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ba=class n extends I_{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new tl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(tL("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Ba._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ba._jsonSchema={type:Dt("string",Ba._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};var tl=class extends Ba{data(e={}){return super.data(e)}},nl=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ja(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new tl(this._firestore,this._userDataWriter,r.key,r,new ja(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new tl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ja(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new tl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ja(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:C7(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function C7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:n})}}nl._jsonSchemaVersion="firestore/querySnapshot/1.0",nl._jsonSchema={type:Dt("string",nl._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};var w_=class extends zC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xu(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new rs(this.firestore,null,t)}};function nL(n,...e){n=co(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||WO(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(WO(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let s,o,a;if(n instanceof rs)o=u0(n.firestore,Tf),a=XC(n._key.path),s={next:c=>{e[r]&&e[r](D7(o,n,c))},error:e[r+1],complete:e[r+2]};else{let c=u0(n,__);o=u0(c.firestore,Tf),a=c._query;let d=new w_(o);s={next:h=>{e[r]&&e[r](new nl(o,d,c,h))},error:e[r+1],complete:e[r+2]},b7(n._query)}return(function(d,h,g,I){let S=new jC(I),P=new MC(h,S,g);return d.asyncQueue.enqueueAndForget(()=>C(null,null,function*(){return r7(yield $O(d),P)})),()=>{S.Nu(),d.asyncQueue.enqueueAndForget(()=>C(null,null,function*(){return i7(yield $O(d),P)}))}})(E7(o),a,i,s)}function D7(n,e,t){let r=t.docs.get(e._key),i=new w_(n);return new Ba(n,i,e._key,r,new ja(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){gl=i})(Bu),lo(new Lr("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Tf(new y0(r.getProvider("auth-internal")),new E0(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new oe(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new t_(d.options.projectId,h)})(o,i),o);return s=H({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Wi(oO,aO,e),Wi(oO,aO,"esm2020")})();var R_=function(){return R_=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},R_.apply(this,arguments)};var S7={includeMetadataChanges:!1};function aD(n,e){return e===void 0&&(e=S7),new fe(function(t){var r=nL(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function rL(n){return aD(n,{includeMetadataChanges:!0})}function iL(n,e){return e===void 0&&(e={}),rL(n).pipe(ae(function(t){return cD(t,e)}))}function cD(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:R_(R_({},r),(t={},t[e.idField]=n.id,t))}function sL(n){return aD(n,{includeMetadataChanges:!0}).pipe(ae(function(e){return e.docs}))}function oL(n,e){return e===void 0&&(e={}),sL(n).pipe(ae(function(t){return t.map(function(r){return cD(r,e)})}))}var aL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cL={};var P_,uL;(function(){var n;function e(b,_){function E(){}E.prototype=_.prototype,b.D=_.prototype,b.prototype=new E,b.prototype.constructor=b,b.C=function(T,w,R){for(var v=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)v[ot-2]=arguments[ot];return _.prototype[w].apply(T,v)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,_,E){E||(E=0);var T=Array(16);if(typeof _=="string")for(var w=0;16>w;++w)T[w]=_.charCodeAt(E++)|_.charCodeAt(E++)<<8|_.charCodeAt(E++)<<16|_.charCodeAt(E++)<<24;else for(w=0;16>w;++w)T[w]=_[E++]|_[E++]<<8|_[E++]<<16|_[E++]<<24;_=b.g[0],E=b.g[1],w=b.g[2];var R=b.g[3],v=_+(R^E&(w^R))+T[0]+3614090360&4294967295;_=E+(v<<7&4294967295|v>>>25),v=R+(w^_&(E^w))+T[1]+3905402710&4294967295,R=_+(v<<12&4294967295|v>>>20),v=w+(E^R&(_^E))+T[2]+606105819&4294967295,w=R+(v<<17&4294967295|v>>>15),v=E+(_^w&(R^_))+T[3]+3250441966&4294967295,E=w+(v<<22&4294967295|v>>>10),v=_+(R^E&(w^R))+T[4]+4118548399&4294967295,_=E+(v<<7&4294967295|v>>>25),v=R+(w^_&(E^w))+T[5]+1200080426&4294967295,R=_+(v<<12&4294967295|v>>>20),v=w+(E^R&(_^E))+T[6]+2821735955&4294967295,w=R+(v<<17&4294967295|v>>>15),v=E+(_^w&(R^_))+T[7]+4249261313&4294967295,E=w+(v<<22&4294967295|v>>>10),v=_+(R^E&(w^R))+T[8]+1770035416&4294967295,_=E+(v<<7&4294967295|v>>>25),v=R+(w^_&(E^w))+T[9]+2336552879&4294967295,R=_+(v<<12&4294967295|v>>>20),v=w+(E^R&(_^E))+T[10]+4294925233&4294967295,w=R+(v<<17&4294967295|v>>>15),v=E+(_^w&(R^_))+T[11]+2304563134&4294967295,E=w+(v<<22&4294967295|v>>>10),v=_+(R^E&(w^R))+T[12]+1804603682&4294967295,_=E+(v<<7&4294967295|v>>>25),v=R+(w^_&(E^w))+T[13]+4254626195&4294967295,R=_+(v<<12&4294967295|v>>>20),v=w+(E^R&(_^E))+T[14]+2792965006&4294967295,w=R+(v<<17&4294967295|v>>>15),v=E+(_^w&(R^_))+T[15]+1236535329&4294967295,E=w+(v<<22&4294967295|v>>>10),v=_+(w^R&(E^w))+T[1]+4129170786&4294967295,_=E+(v<<5&4294967295|v>>>27),v=R+(E^w&(_^E))+T[6]+3225465664&4294967295,R=_+(v<<9&4294967295|v>>>23),v=w+(_^E&(R^_))+T[11]+643717713&4294967295,w=R+(v<<14&4294967295|v>>>18),v=E+(R^_&(w^R))+T[0]+3921069994&4294967295,E=w+(v<<20&4294967295|v>>>12),v=_+(w^R&(E^w))+T[5]+3593408605&4294967295,_=E+(v<<5&4294967295|v>>>27),v=R+(E^w&(_^E))+T[10]+38016083&4294967295,R=_+(v<<9&4294967295|v>>>23),v=w+(_^E&(R^_))+T[15]+3634488961&4294967295,w=R+(v<<14&4294967295|v>>>18),v=E+(R^_&(w^R))+T[4]+3889429448&4294967295,E=w+(v<<20&4294967295|v>>>12),v=_+(w^R&(E^w))+T[9]+568446438&4294967295,_=E+(v<<5&4294967295|v>>>27),v=R+(E^w&(_^E))+T[14]+3275163606&4294967295,R=_+(v<<9&4294967295|v>>>23),v=w+(_^E&(R^_))+T[3]+4107603335&4294967295,w=R+(v<<14&4294967295|v>>>18),v=E+(R^_&(w^R))+T[8]+1163531501&4294967295,E=w+(v<<20&4294967295|v>>>12),v=_+(w^R&(E^w))+T[13]+2850285829&4294967295,_=E+(v<<5&4294967295|v>>>27),v=R+(E^w&(_^E))+T[2]+4243563512&4294967295,R=_+(v<<9&4294967295|v>>>23),v=w+(_^E&(R^_))+T[7]+1735328473&4294967295,w=R+(v<<14&4294967295|v>>>18),v=E+(R^_&(w^R))+T[12]+2368359562&4294967295,E=w+(v<<20&4294967295|v>>>12),v=_+(E^w^R)+T[5]+4294588738&4294967295,_=E+(v<<4&4294967295|v>>>28),v=R+(_^E^w)+T[8]+2272392833&4294967295,R=_+(v<<11&4294967295|v>>>21),v=w+(R^_^E)+T[11]+1839030562&4294967295,w=R+(v<<16&4294967295|v>>>16),v=E+(w^R^_)+T[14]+4259657740&4294967295,E=w+(v<<23&4294967295|v>>>9),v=_+(E^w^R)+T[1]+2763975236&4294967295,_=E+(v<<4&4294967295|v>>>28),v=R+(_^E^w)+T[4]+1272893353&4294967295,R=_+(v<<11&4294967295|v>>>21),v=w+(R^_^E)+T[7]+4139469664&4294967295,w=R+(v<<16&4294967295|v>>>16),v=E+(w^R^_)+T[10]+3200236656&4294967295,E=w+(v<<23&4294967295|v>>>9),v=_+(E^w^R)+T[13]+681279174&4294967295,_=E+(v<<4&4294967295|v>>>28),v=R+(_^E^w)+T[0]+3936430074&4294967295,R=_+(v<<11&4294967295|v>>>21),v=w+(R^_^E)+T[3]+3572445317&4294967295,w=R+(v<<16&4294967295|v>>>16),v=E+(w^R^_)+T[6]+76029189&4294967295,E=w+(v<<23&4294967295|v>>>9),v=_+(E^w^R)+T[9]+3654602809&4294967295,_=E+(v<<4&4294967295|v>>>28),v=R+(_^E^w)+T[12]+3873151461&4294967295,R=_+(v<<11&4294967295|v>>>21),v=w+(R^_^E)+T[15]+530742520&4294967295,w=R+(v<<16&4294967295|v>>>16),v=E+(w^R^_)+T[2]+3299628645&4294967295,E=w+(v<<23&4294967295|v>>>9),v=_+(w^(E|~R))+T[0]+4096336452&4294967295,_=E+(v<<6&4294967295|v>>>26),v=R+(E^(_|~w))+T[7]+1126891415&4294967295,R=_+(v<<10&4294967295|v>>>22),v=w+(_^(R|~E))+T[14]+2878612391&4294967295,w=R+(v<<15&4294967295|v>>>17),v=E+(R^(w|~_))+T[5]+4237533241&4294967295,E=w+(v<<21&4294967295|v>>>11),v=_+(w^(E|~R))+T[12]+1700485571&4294967295,_=E+(v<<6&4294967295|v>>>26),v=R+(E^(_|~w))+T[3]+2399980690&4294967295,R=_+(v<<10&4294967295|v>>>22),v=w+(_^(R|~E))+T[10]+4293915773&4294967295,w=R+(v<<15&4294967295|v>>>17),v=E+(R^(w|~_))+T[1]+2240044497&4294967295,E=w+(v<<21&4294967295|v>>>11),v=_+(w^(E|~R))+T[8]+1873313359&4294967295,_=E+(v<<6&4294967295|v>>>26),v=R+(E^(_|~w))+T[15]+4264355552&4294967295,R=_+(v<<10&4294967295|v>>>22),v=w+(_^(R|~E))+T[6]+2734768916&4294967295,w=R+(v<<15&4294967295|v>>>17),v=E+(R^(w|~_))+T[13]+1309151649&4294967295,E=w+(v<<21&4294967295|v>>>11),v=_+(w^(E|~R))+T[4]+4149444226&4294967295,_=E+(v<<6&4294967295|v>>>26),v=R+(E^(_|~w))+T[11]+3174756917&4294967295,R=_+(v<<10&4294967295|v>>>22),v=w+(_^(R|~E))+T[2]+718787259&4294967295,w=R+(v<<15&4294967295|v>>>17),v=E+(R^(w|~_))+T[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(w+(v<<21&4294967295|v>>>11))&4294967295,b.g[2]=b.g[2]+w&4294967295,b.g[3]=b.g[3]+R&4294967295}r.prototype.u=function(b,_){_===void 0&&(_=b.length);for(var E=_-this.blockSize,T=this.B,w=this.h,R=0;R<_;){if(w==0)for(;R<=E;)i(this,b,R),R+=this.blockSize;if(typeof b=="string"){for(;R<_;)if(T[w++]=b.charCodeAt(R++),w==this.blockSize){i(this,T),w=0;break}}else for(;R<_;)if(T[w++]=b[R++],w==this.blockSize){i(this,T),w=0;break}}this.h=w,this.o+=_},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;var E=8*this.o;for(_=b.length-8;_<b.length;++_)b[_]=E&255,E/=256;for(this.u(b),b=Array(16),_=E=0;4>_;++_)for(var T=0;32>T;T+=8)b[E++]=this.g[_]>>>T&255;return b};function s(b,_){var E=a;return Object.prototype.hasOwnProperty.call(E,b)?E[b]:E[b]=_(b)}function o(b,_){this.h=_;for(var E=[],T=!0,w=b.length-1;0<=w;w--){var R=b[w]|0;T&&R==_||(E[w]=R,T=!1)}this.g=E}var a={};function c(b){return-128<=b&&128>b?s(b,function(_){return new o([_|0],0>_?-1:0)}):new o([b|0],0>b?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return g;if(0>b)return O(d(-b));for(var _=[],E=1,T=0;b>=E;T++)_[T]=b/E|0,E*=4294967296;return new o(_,0)}function h(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return O(h(b.substring(1),_));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(_,8)),T=g,w=0;w<b.length;w+=8){var R=Math.min(8,b.length-w),v=parseInt(b.substring(w,w+R),_);8>R?(R=d(Math.pow(_,R)),T=T.j(R).add(d(v))):(T=T.j(E),T=T.add(d(v)))}return T}var g=c(0),I=c(1),S=c(16777216);n=o.prototype,n.m=function(){if(U(this))return-O(this).m();for(var b=0,_=1,E=0;E<this.g.length;E++){var T=this.i(E);b+=(0<=T?T:4294967296+T)*_,_*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(P(this))return"0";if(U(this))return"-"+O(this).toString(b);for(var _=d(Math.pow(b,6)),E=this,T="";;){var w=Re(E,_).g;E=G(E,w.j(_));var R=((0<E.g.length?E.g[0]:E.h)>>>0).toString(b);if(E=w,P(E))return R+T;for(;6>R.length;)R="0"+R;T=R+T}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function P(b){if(b.h!=0)return!1;for(var _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function U(b){return b.h==-1}n.l=function(b){return b=G(this,b),U(b)?-1:P(b)?0:1};function O(b){for(var _=b.g.length,E=[],T=0;T<_;T++)E[T]=~b.g[T];return new o(E,~b.h).add(I)}n.abs=function(){return U(this)?O(this):this},n.add=function(b){for(var _=Math.max(this.g.length,b.g.length),E=[],T=0,w=0;w<=_;w++){var R=T+(this.i(w)&65535)+(b.i(w)&65535),v=(R>>>16)+(this.i(w)>>>16)+(b.i(w)>>>16);T=v>>>16,R&=65535,v&=65535,E[w]=v<<16|R}return new o(E,E[E.length-1]&-2147483648?-1:0)};function G(b,_){return b.add(O(_))}n.j=function(b){if(P(this)||P(b))return g;if(U(this))return U(b)?O(this).j(O(b)):O(O(this).j(b));if(U(b))return O(this.j(O(b)));if(0>this.l(S)&&0>b.l(S))return d(this.m()*b.m());for(var _=this.g.length+b.g.length,E=[],T=0;T<2*_;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(var w=0;w<b.g.length;w++){var R=this.i(T)>>>16,v=this.i(T)&65535,ot=b.i(w)>>>16,Tn=b.i(w)&65535;E[2*T+2*w]+=v*Tn,ne(E,2*T+2*w),E[2*T+2*w+1]+=R*Tn,ne(E,2*T+2*w+1),E[2*T+2*w+1]+=v*ot,ne(E,2*T+2*w+1),E[2*T+2*w+2]+=R*ot,ne(E,2*T+2*w+2)}for(T=0;T<_;T++)E[T]=E[2*T+1]<<16|E[2*T];for(T=_;T<2*_;T++)E[T]=0;return new o(E,0)};function ne(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function re(b,_){this.g=b,this.h=_}function Re(b,_){if(P(_))throw Error("division by zero");if(P(b))return new re(g,g);if(U(b))return _=Re(O(b),_),new re(O(_.g),O(_.h));if(U(_))return _=Re(b,O(_)),new re(O(_.g),_.h);if(30<b.g.length){if(U(b)||U(_))throw Error("slowDivide_ only works with positive integers.");for(var E=I,T=_;0>=T.l(b);)E=nt(E),T=nt(T);var w=be(E,1),R=be(T,1);for(T=be(T,2),E=be(E,2);!P(T);){var v=R.add(T);0>=v.l(b)&&(w=w.add(E),R=v),T=be(T,1),E=be(E,1)}return _=G(b,w.j(_)),new re(w,_)}for(w=g;0<=b.l(_);){for(E=Math.max(1,Math.floor(b.m()/_.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),R=d(E),v=R.j(_);U(v)||0<v.l(b);)E-=T,R=d(E),v=R.j(_);P(R)&&(R=I),w=w.add(R),b=G(b,v)}return new re(w,b)}n.A=function(b){return Re(this,b).h},n.and=function(b){for(var _=Math.max(this.g.length,b.g.length),E=[],T=0;T<_;T++)E[T]=this.i(T)&b.i(T);return new o(E,this.h&b.h)},n.or=function(b){for(var _=Math.max(this.g.length,b.g.length),E=[],T=0;T<_;T++)E[T]=this.i(T)|b.i(T);return new o(E,this.h|b.h)},n.xor=function(b){for(var _=Math.max(this.g.length,b.g.length),E=[],T=0;T<_;T++)E[T]=this.i(T)^b.i(T);return new o(E,this.h^b.h)};function nt(b){for(var _=b.g.length+1,E=[],T=0;T<_;T++)E[T]=b.i(T)<<1|b.i(T-1)>>>31;return new o(E,b.h)}function be(b,_){var E=_>>5;_%=32;for(var T=b.g.length-E,w=[],R=0;R<T;R++)w[R]=0<_?b.i(R+E)>>>_|b.i(R+E+1)<<32-_:b.i(R+E);return new o(w,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,uL=cL.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,P_=cL.Integer=o}).apply(typeof aL<"u"?aL:typeof self<"u"?self:typeof window<"u"?window:{});var N_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cs={};var uD,A7,_l,lD,Af,x_,dD,hD,fD;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof N_=="object"&&N_];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var D=0;D<u.length-1;D++){var x=u[D];if(!(x in m))break e;m=m[x]}u=u[u.length-1],D=m[u],f=f(D),f!=D&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,D=!1,x={next:function(){if(!D&&m<u.length){var L=m++;return{value:f(L,u[L]),done:!1}}return D=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});var o=o||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function d(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function g(u,f,m){if(!u)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,D),u.apply(f,x)}}return function(){return u.apply(f,arguments)}}function I(u,f,m){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,I.apply(null,arguments)}function S(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var D=m.slice();return D.push.apply(D,arguments),u.apply(this,D)}}function P(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(D,x,L){for(var W=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)W[Ve-2]=arguments[Ve];return f.prototype[x].apply(D,W)}}function U(u){let f=u.length;if(0<f){let m=Array(f);for(let D=0;D<f;D++)m[D]=u[D];return m}return[]}function O(u,f){for(let m=1;m<arguments.length;m++){let D=arguments[m];if(c(D)){let x=u.length||0,L=D.length||0;u.length=x+L;for(let W=0;W<L;W++)u[x+W]=D[W]}else u.push(D)}}class G{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function ne(u){return/^[\s\xa0]*$/.test(u)}function re(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Re(u){return Re[" "](u),u}Re[" "]=function(){};var nt=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function be(u,f,m){for(let D in u)f.call(m,u[D],D,u)}function b(u,f){for(let m in u)f.call(void 0,u[m],m,u)}function _(u){let f={};for(let m in u)f[m]=u[m];return f}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,f){let m,D;for(let x=1;x<arguments.length;x++){D=arguments[x];for(m in D)u[m]=D[m];for(let L=0;L<E.length;L++)m=E[L],Object.prototype.hasOwnProperty.call(D,m)&&(u[m]=D[m])}}function w(u){var f=1;u=u.split(":");let m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function R(u){a.setTimeout(()=>{throw u},0)}function v(){var u=ps;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class ot{constructor(){this.h=this.g=null}add(f,m){let D=Tn.get();D.set(f,m),this.h?this.h.next=D:this.g=D,this.h=D}}var Tn=new G(()=>new Hv,u=>u.reset());class Hv{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Ro,Br=!1,ps=new ot,cp=()=>{let u=a.Promise.resolve(void 0);Ro=()=>{u.then(up)}};var up=()=>{for(var u;u=v();){try{u.h.call(u.g)}catch(m){R(m)}var f=Tn;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}Br=!1};function yr(){this.s=this.s,this.C=this.C}yr.prototype.s=!1,yr.prototype.ma=function(){this.s||(this.s=!0,this.N())},yr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Nt(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}Nt.prototype.h=function(){this.defaultPrevented=!0};var ac=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u})();function vi(u,f){if(Nt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,D=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(nt){e:{try{Re(f.nodeName);var x=!0;break e}catch{}x=!1}x||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ql[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&vi.aa.h.call(this)}}P(vi,Nt);var Ql={2:"touch",3:"pen",4:"mouse"};vi.prototype.h=function(){vi.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ei="closure_listenable_"+(1e6*Math.random()|0),Yl=0;function lp(u,f,m,D,x){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!D,this.ha=x,this.key=++Yl,this.da=this.fa=!1}function Po(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function cc(u){this.src=u,this.g={},this.h=0}cc.prototype.add=function(u,f,m,D,x){var L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);var W=lc(u,f,D,x);return-1<W?(f=u[W],m||(f.fa=!1)):(f=new lp(f,this.src,L,!!D,x),f.fa=m,u.push(f)),f};function uc(u,f){var m=f.type;if(m in u.g){var D=u.g[m],x=Array.prototype.indexOf.call(D,f,void 0),L;(L=0<=x)&&Array.prototype.splice.call(D,x,1),L&&(Po(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function lc(u,f,m,D){for(var x=0;x<u.length;++x){var L=u[x];if(!L.da&&L.listener==f&&L.capture==!!m&&L.ha==D)return x}return-1}var No="closure_lm_"+(1e6*Math.random()|0),dc={};function dp(u,f,m,D,x){if(D&&D.once)return fc(u,f,m,D,x);if(Array.isArray(f)){for(var L=0;L<f.length;L++)dp(u,f[L],m,D,x);return null}return m=Ii(m),u&&u[Ei]?u.K(f,m,d(D)?!!D.capture:!!D,x):hc(u,f,m,!1,D,x)}function hc(u,f,m,D,x,L){if(!f)throw Error("Invalid event type");var W=d(x)?!!x.capture:!!x,Ve=pc(u);if(Ve||(u[No]=Ve=new cc(u)),m=Ve.add(f,m,D,W,L),m.proxy)return m;if(D=Jl(),m.proxy=D,D.src=u,D.listener=m,u.addEventListener)ac||(x=W),x===void 0&&(x=!1),u.addEventListener(f.toString(),D,x);else if(u.attachEvent)u.attachEvent(xo(f.toString()),D);else if(u.addListener&&u.removeListener)u.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Jl(){function u(m){return f.call(u.src,u.listener,m)}let f=qv;return u}function fc(u,f,m,D,x){if(Array.isArray(f)){for(var L=0;L<f.length;L++)fc(u,f[L],m,D,x);return null}return m=Ii(m),u&&u[Ei]?u.L(f,m,d(D)?!!D.capture:!!D,x):hc(u,f,m,!0,D,x)}function xt(u,f,m,D,x){if(Array.isArray(f))for(var L=0;L<f.length;L++)xt(u,f[L],m,D,x);else D=d(D)?!!D.capture:!!D,m=Ii(m),u&&u[Ei]?(u=u.i,f=String(f).toString(),f in u.g&&(L=u.g[f],m=lc(L,m,D,x),-1<m&&(Po(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete u.g[f],u.h--)))):u&&(u=pc(u))&&(f=u.g[f.toString()],u=-1,f&&(u=lc(f,m,D,x)),(m=-1<u?f[u]:null)&&Mt(m))}function Mt(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Ei])uc(f.i,u);else{var m=u.type,D=u.proxy;f.removeEventListener?f.removeEventListener(m,D,u.capture):f.detachEvent?f.detachEvent(xo(m),D):f.addListener&&f.removeListener&&f.removeListener(D),(m=pc(f))?(uc(m,u),m.h==0&&(m.src=null,f[No]=null)):Po(u)}}}function xo(u){return u in dc?dc[u]:dc[u]="on"+u}function qv(u,f){if(u.da)u=!0;else{f=new vi(f,this);var m=u.listener,D=u.ha||u.src;u.fa&&Mt(u),u=m.call(D,f)}return u}function pc(u){return u=u[No],u instanceof cc?u:null}var Xl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ii(u){return typeof u=="function"?u:(u[Xl]||(u[Xl]=function(f){return u.handleEvent(f)}),u[Xl])}function kt(){yr.call(this),this.i=new cc(this),this.M=this,this.F=null}P(kt,yr),kt.prototype[Ei]=!0,kt.prototype.removeEventListener=function(u,f,m,D){xt(this,u,f,m,D)};function Ht(u,f){var m,D=u.F;if(D)for(m=[];D;D=D.F)m.push(D);if(u=u.M,D=f.type||f,typeof f=="string")f=new Nt(f,u);else if(f instanceof Nt)f.target=f.target||u;else{var x=f;f=new Nt(D,u),T(f,x)}if(x=!0,m)for(var L=m.length-1;0<=L;L--){var W=f.g=m[L];x=gs(W,D,!0,f)&&x}if(W=f.g=u,x=gs(W,D,!0,f)&&x,x=gs(W,D,!1,f)&&x,m)for(L=0;L<m.length;L++)W=f.g=m[L],x=gs(W,D,!1,f)&&x}kt.prototype.N=function(){if(kt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],D=0;D<m.length;D++)Po(m[D]);delete u.g[f],u.h--}}this.F=null},kt.prototype.K=function(u,f,m,D){return this.i.add(String(u),f,!1,m,D)},kt.prototype.L=function(u,f,m,D){return this.i.add(String(u),f,!0,m,D)};function gs(u,f,m,D){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var x=!0,L=0;L<f.length;++L){var W=f[L];if(W&&!W.da&&W.capture==m){var Ve=W.listener,yt=W.ha||W.src;W.fa&&uc(u.i,W),x=Ve.call(yt,D)!==!1&&x}}return x&&!D.defaultPrevented}function hp(u,f,m){if(typeof u=="function")m&&(u=I(u,m));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function fp(u){u.g=hp(()=>{u.g=null,u.i&&(u.i=!1,fp(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class pp extends yr{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:fp(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ms(u){yr.call(this),this.h=u,this.g={}}P(ms,yr);var ys=[];function gc(u){be(u.g,function(f,m){this.g.hasOwnProperty(m)&&Mt(f)},u),u.g={}}ms.prototype.N=function(){ms.aa.N.call(this),gc(this)},ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mo=a.JSON.stringify,wi=a.JSON.parse,gp=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function _s(){}_s.prototype.h=null;function Zl(u){return u.h||(u.h=u.i())}function vs(){}var Es={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ot(){Nt.call(this,"d")}P(Ot,Nt);function mc(){Nt.call(this,"c")}P(mc,Nt);var kn={},Is=null;function yc(){return Is=Is||new kt}kn.La="serverreachability";function mp(u){Nt.call(this,kn.La,u)}P(mp,Nt);function nr(u){let f=yc();Ht(f,new mp(f))}kn.STAT_EVENT="statevent";function yp(u,f){Nt.call(this,kn.STAT_EVENT,u),this.stat=f}P(yp,Nt);function Yt(u){let f=yc();Ht(f,new yp(f,u))}kn.Ma="timingevent";function ko(u,f){Nt.call(this,kn.Ma,u),this.size=f}P(ko,Nt);function ws(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Ts(){this.g=!0}Ts.prototype.xa=function(){this.g=!1};function ed(u,f,m,D,x,L){u.info(function(){if(u.g)if(L)for(var W="",Ve=L.split("&"),yt=0;yt<Ve.length;yt++){var Ue=Ve[yt].split("=");if(1<Ue.length){var rn=Ue[0];Ue=Ue[1];var sn=rn.split("_");W=2<=sn.length&&sn[1]=="type"?W+(rn+"="+Ue+"&"):W+(rn+"=redacted&")}}else W=null;else W=L;return"XMLHTTP REQ ("+D+") [attempt "+x+"]: "+f+`
`+m+`
`+W})}function Oo(u,f,m,D,x,L,W){u.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+x+"]: "+f+`
`+m+`
`+L+" "+W})}function bs(u,f,m,D){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+_p(u,m)+(D?" "+D:"")})}function $r(u,f){u.info(function(){return"TIMEOUT: "+f})}Ts.prototype.info=function(){};function _p(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var D=m[u];if(!(2>D.length)){var x=D[1];if(Array.isArray(x)&&!(1>x.length)){var L=x[0];if(L!="noop"&&L!="stop"&&L!="close")for(var W=1;W<x.length;W++)x[W]=""}}}}return Mo(m)}catch{return f}}var Fo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_c={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Lo;function Vo(){}P(Vo,_s),Vo.prototype.g=function(){return new XMLHttpRequest},Vo.prototype.i=function(){return{}},Lo=new Vo;function Hr(u,f,m,D){this.j=u,this.i=f,this.l=m,this.R=D||1,this.U=new ms(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new td}function td(){this.i=null,this.g="",this.h=!1}var vp={},Cs={};function vc(u,f,m){u.L=1,u.v=Tc(_r(f)),u.m=m,u.P=!0,Ec(u,null)}function Ec(u,f){u.F=Date.now(),Ss(u),u.A=_r(u.v);var m=u.A,D=u.R;Array.isArray(D)||(D=[String(D)]),Sp(m.i,"t",D),u.C=0,m=u.j.J,u.h=new td,u.g=p(u.j,m?f:null,!u.m),0<u.O&&(u.M=new pp(I(u.Y,u,u.g),u.O)),f=u.U,m=u.g,D=u.ca;var x="readystatechange";Array.isArray(x)||(x&&(ys[0]=x.toString()),x=ys);for(var L=0;L<x.length;L++){var W=dp(m,x[L],D||f.handleEvent,!1,f.h||f);if(!W)break;f.g[W.key]=W}f=u.H?_(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),nr(),ed(u.i,u.u,u.A,u.l,u.R,u.m)}Hr.prototype.ca=function(u){u=u.target;let f=this.M;f&&Cn(u)==3?f.j():this.Y(u)},Hr.prototype.Y=function(u){try{if(u==this.g)e:{let sn=Cn(this.g);var f=this.g.Ba();let xc=this.g.Z();if(!(3>sn)&&(sn!=3||this.g&&(this.h.h||this.g.oa()||xp(this.g)))){this.J||sn!=4||f==7||(f==8||0>=xc?nr(3):nr(2)),Ic(this);var m=this.g.Z();this.X=m;t:if(Ds(this)){var D=xp(this.g);u="";var x=D.length,L=Cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qr(this),As(this);var W="";break t}this.h.i=new a.TextDecoder}for(f=0;f<x;f++)this.h.h=!0,u+=this.h.i.decode(D[f],{stream:!(L&&f==x-1)});D.length=0,this.h.g+=u,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=m==200,Oo(this.i,this.u,this.A,this.l,this.R,sn,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,yt=this.g;if((Ve=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(Ve)){var Ue=Ve;break t}}Ue=null}if(m=Ue)bs(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Uo(this,m);else{this.o=!1,this.s=3,Yt(12),qr(this),As(this);break e}}if(this.P){m=!0;let Tr;for(;!this.J&&this.C<W.length;)if(Tr=Ti(this,W),Tr==Cs){sn==4&&(this.s=4,Yt(14),m=!1),bs(this.i,this.l,null,"[Incomplete Response]");break}else if(Tr==vp){this.s=4,Yt(15),bs(this.i,this.l,W,"[Invalid Chunk]"),m=!1;break}else bs(this.i,this.l,Tr,null),Uo(this,Tr);if(Ds(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),sn!=4||W.length!=0||this.h.h||(this.s=1,Yt(16),m=!1),this.o=this.o&&m,!m)bs(this.i,this.l,W,"[Invalid Chunked Response]"),qr(this),As(this);else if(0<W.length&&!this.W){this.W=!0;var rn=this.j;rn.g==this&&rn.ba&&!rn.M&&(rn.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Nc(rn),rn.M=!0,Yt(11))}}else bs(this.i,this.l,W,null),Uo(this,W);sn==4&&qr(this),this.o&&!this.J&&(sn==4?nn(this.j,this):(this.o=!1,Ss(this)))}else Mp(this.g),m==400&&0<W.indexOf("Unknown SID")?(this.s=3,Yt(12)):(this.s=0,Yt(13)),qr(this),As(this)}}}catch{}finally{}};function Ds(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ti(u,f){var m=u.C,D=f.indexOf(`
`,m);return D==-1?Cs:(m=Number(f.substring(m,D)),isNaN(m)?vp:(D+=1,D+m>f.length?Cs:(f=f.slice(D,D+m),u.C=D+m,f)))}Hr.prototype.cancel=function(){this.J=!0,qr(this)};function Ss(u){u.S=Date.now()+u.I,Ep(u,u.I)}function Ep(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ws(I(u.ba,u),f)}function Ic(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Hr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?($r(this.i,this.A),this.L!=2&&(nr(),Yt(17)),qr(this),this.s=2,As(this)):Ep(this,this.S-u)};function As(u){u.j.G==0||u.J||nn(u.j,u)}function qr(u){Ic(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,gc(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Uo(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||od(m.h,u))){if(!u.K&&od(m.h,u)&&m.G==3){try{var D=m.Da.g.parse(f)}catch{D=null}if(Array.isArray(D)&&D.length==3){var x=D;if(x[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Ci(m),Os(m);else break e;Pc(m),Yt(18)}}else m.za=x[1],0<m.za-m.T&&37500>x[2]&&m.F&&m.v==0&&!m.C&&(m.C=ws(I(m.Za,m),6e3));if(1>=sd(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Wr(m,11)}else if((u.K||m.g==u)&&Ci(m),!ne(f))for(x=m.Da.g.parse(f),f=0;f<x.length;f++){let Ue=x[f];if(m.T=Ue[0],Ue=Ue[1],m.G==2)if(Ue[0]=="c"){m.K=Ue[1],m.ia=Ue[2];let rn=Ue[3];rn!=null&&(m.la=rn,m.j.info("VER="+m.la));let sn=Ue[4];sn!=null&&(m.Aa=sn,m.j.info("SVER="+m.Aa));let xc=Ue[5];xc!=null&&typeof xc=="number"&&0<xc&&(D=1.5*xc,m.L=D,m.j.info("backChannelRequestTimeoutMs_="+D)),D=m;let Tr=u.g;if(Tr){let kp=Tr.g?Tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kp){var L=D.h;L.g||kp.indexOf("spdy")==-1&&kp.indexOf("quic")==-1&&kp.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(rr(L,L.h),L.h=null))}if(D.D){let Gv=Tr.g?Tr.g.getResponseHeader("X-HTTP-Session-Id"):null;Gv&&(D.ya=Gv,Xe(D.I,D.D,Gv))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),D=m;var W=u;if(D.qa=l(D,D.J?D.ia:null,D.W),W.K){On(D.h,W);var Ve=W,yt=D.L;yt&&(Ve.I=yt),Ve.B&&(Ic(Ve),Ss(Ve)),D.g=W}else gd(D);0<m.i.length&&Go(m)}else Ue[0]!="stop"&&Ue[0]!="close"||Wr(m,7);else m.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Wr(m,7):Sc(m):Ue[0]!="noop"&&m.l&&m.l.ta(Ue),m.v=0)}}nr(4)}catch{}}var nd=class{constructor(u,f){this.g=u,this.map=f}};function rd(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function id(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function sd(u){return u.h?1:u.g?u.g.size:0}function od(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function rr(u,f){u.g?u.g.add(f):u.h=f}function On(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}rd.prototype.cancel=function(){if(this.i=Rs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Rs(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let m of u.g.values())f=f.concat(m.D);return f}return U(u.i)}function jo(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],m=u.length,D=0;D<m;D++)f.push(u[D]);return f}f=[],m=0;for(D in u)f[m++]=u[D];return f}function ad(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(let D in u)f[m++]=D;return f}}}function Ye(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=ad(u),D=jo(u),x=D.length,L=0;L<x;L++)f.call(void 0,D[L],m&&m[L],u)}var Bo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $o(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var D=u[m].indexOf("="),x=null;if(0<=D){var L=u[m].substring(0,D);x=u[m].substring(D+1)}else L=u[m];f(L,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Fn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Fn){this.h=u.h,Ho(this,u.j),this.o=u.o,this.g=u.g,wc(this,u.s),this.l=u.l;var f=u.i,m=new qo;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Ip(this,m),this.m=u.m}else u&&(f=String(u).match(Bo))?(this.h=!1,Ho(this,f[1]||"",!0),this.o=vr(f[2]||""),this.g=vr(f[3]||"",!0),wc(this,f[4]),this.l=vr(f[5]||"",!0),Ip(this,f[6]||"",!0),this.m=vr(f[7]||"")):(this.h=!1,this.i=new qo(null,this.h))}Fn.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Ln(f,cd,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Ln(f,cd,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Ln(m,m.charAt(0)=="/"?bp:Tp,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Ln(m,Ps)),u.join("")};function _r(u){return new Fn(u)}function Ho(u,f,m){u.j=m?vr(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function wc(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Ip(u,f,m){f instanceof qo?(u.i=f,bc(u.i,u.h)):(m||(f=Ln(f,Cp)),u.i=new qo(f,u.h))}function Xe(u,f,m){u.i.set(f,m)}function Tc(u){return Xe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function vr(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ln(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,wp),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function wp(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var cd=/[#\/\?@]/g,Tp=/[#\?:]/g,bp=/[#\?]/g,Cp=/[#\?@]/g,Ps=/#/g;function qo(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function zr(u){u.g||(u.g=new Map,u.h=0,u.i&&$o(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=qo.prototype,n.add=function(u,f){zr(this),this.i=null,u=Ir(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function Dp(u,f){zr(u),f=Ir(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Er(u,f){return zr(u),f=Ir(u,f),u.g.has(f)}n.forEach=function(u,f){zr(this),this.g.forEach(function(m,D){m.forEach(function(x){u.call(f,x,D,this)},this)},this)},n.na=function(){zr(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let D=0;D<f.length;D++){let x=u[D];for(let L=0;L<x.length;L++)m.push(f[D])}return m},n.V=function(u){zr(this);let f=[];if(typeof u=="string")Er(this,u)&&(f=f.concat(this.g.get(Ir(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},n.set=function(u,f){return zr(this),this.i=null,u=Ir(this,u),Er(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Sp(u,f,m){Dp(u,f),0<m.length&&(u.i=null,u.g.set(Ir(u,f),U(m)),u.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var D=f[m];let L=encodeURIComponent(String(D)),W=this.V(D);for(D=0;D<W.length;D++){var x=L;W[D]!==""&&(x+="="+encodeURIComponent(String(W[D]))),u.push(x)}}return this.i=u.join("&")};function Ir(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function bc(u,f){f&&!u.j&&(zr(u),u.i=null,u.g.forEach(function(m,D){var x=D.toLowerCase();D!=x&&(Dp(this,D),Sp(this,x,m))},u)),u.j=f}function Ap(u,f){let m=new Ts;if(a.Image){let D=new Image;D.onload=S(bn,m,"TestLoadImage: loaded",!0,f,D),D.onerror=S(bn,m,"TestLoadImage: error",!1,f,D),D.onabort=S(bn,m,"TestLoadImage: abort",!1,f,D),D.ontimeout=S(bn,m,"TestLoadImage: timeout",!1,f,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=u}else f(!1)}function zo(u,f){let m=new Ts,D=new AbortController,x=setTimeout(()=>{D.abort(),bn(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:D.signal}).then(L=>{clearTimeout(x),L.ok?bn(m,"TestPingServer: ok",!0,f):bn(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(x),bn(m,"TestPingServer: error",!1,f)})}function bn(u,f,m,D,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),D(m)}catch{}}function Rp(){this.g=new gp}function ud(u,f,m){let D=m||"";try{Ye(u,function(x,L){let W=x;d(x)&&(W=Mo(x)),f.push(D+L+"="+encodeURIComponent(W))})}catch(x){throw f.push(D+"type="+encodeURIComponent("_badmap")),x}}function Je(u){this.l=u.Ub||null,this.j=u.eb||!1}P(Je,_s),Je.prototype.g=function(){return new Cc(this.l,this.j)},Je.prototype.i=(function(u){return function(){return u}})({});function Cc(u,f){kt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Cc,kt),n=Cc.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,xs(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ns(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,xs(this)),this.g&&(this.readyState=3,xs(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pp(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pp(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Ns(this):xs(this),this.readyState==3&&Pp(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Ns(this))},n.Qa=function(u){this.g&&(this.response=u,Ns(this))},n.ga=function(){this.g&&Ns(this)};function Ns(u){u.readyState=4,u.l=null,u.j=null,u.v=null,xs(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function xs(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Cc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ld(u){let f="";return be(u,function(m,D){f+=D,f+=":",f+=m,f+=`\r
`}),f}function Ms(u,f,m){e:{for(D in m){var D=!1;break e}D=!0}D||(m=ld(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Xe(u,f,m))}function Be(u){kt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(Be,kt);var Np=/^https?$/i,zv=["POST","PUT"];n=Be.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,m,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Lo.g(),this.v=this.o?Zl(this.o):Zl(Lo),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(L){ks(this,L);return}if(u=m||"",m=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var x in D)m.set(x,D[x]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(let L of D.keys())m.set(L,D.get(L));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),x=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(zv,f,void 0))||D||x||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,W]of m)this.g.setRequestHeader(L,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hd(this),this.u=!0,this.g.send(u),this.u=!1}catch(L){ks(this,L)}};function ks(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,dd(u),bi(u)}function dd(u){u.A||(u.A=!0,Ht(u,"complete"),Ht(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ht(this,"complete"),Ht(this,"abort"),bi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bi(this,!0)),Be.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Dc(this):this.bb())},n.bb=function(){Dc(this)};function Dc(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Cn(u)!=4||u.Z()!=2)){if(u.u&&Cn(u)==4)hp(u.Ea,0,u);else if(Ht(u,"readystatechange"),Cn(u)==4){u.h=!1;try{let W=u.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var D;if(D=W===0){var x=String(u.D).match(Bo)[1]||null;!x&&a.self&&a.self.location&&(x=a.self.location.protocol.slice(0,-1)),D=!Np.test(x?x.toLowerCase():"")}m=D}if(m)Ht(u,"complete"),Ht(u,"success");else{u.m=6;try{var L=2<Cn(u)?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.Z()+"]",dd(u)}}finally{bi(u)}}}}function bi(u,f){if(u.g){hd(u);let m=u.g,D=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Ht(u,"ready");try{m.onreadystatechange=D}catch{}}}function hd(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Cn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Cn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),wi(f)}};function xp(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Mp(u){let f={};u=(u.g&&2<=Cn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<u.length;D++){if(ne(u[D]))continue;var m=w(u[D]);let x=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let L=f[x]||[];f[x]=L,L.push(m)}b(f,function(D){return D.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wr(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function fd(u){this.Aa=0,this.i=[],this.j=new Ts,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wr("baseRetryDelayMs",5e3,u),this.cb=wr("retryDelaySeedMs",1e4,u),this.Wa=wr("forwardChannelMaxRetries",2,u),this.wa=wr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new rd(u&&u.concurrentRequestLimit),this.Da=new Rp,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=fd.prototype,n.la=8,n.G=1,n.connect=function(u,f,m,D){Yt(0),this.W=u,this.H=f||{},m&&D!==void 0&&(this.H.OSID=m,this.H.OAID=D),this.F=this.X,this.I=l(this,null,this.W),Go(this)};function Sc(u){if(Ac(u),u.G==3){var f=u.U++,m=_r(u.I);if(Xe(m,"SID",u.K),Xe(m,"RID",f),Xe(m,"TYPE","terminate"),Fs(u,m),f=new Hr(u,u.j,f),f.L=2,f.v=Tc(_r(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=p(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ss(f)}Di(u)}function Os(u){u.g&&(Nc(u),u.g.cancel(),u.g=null)}function Ac(u){Os(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ci(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Go(u){if(!id(u.h)&&!u.s){u.s=!0;var f=u.Ga;Ro||cp(),Br||(Ro(),Br=!0),ps.add(f,u),u.B=0}}function Rc(u,f){return sd(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ws(I(u.Ga,u,f),yd(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let x=new Hr(this,this.j,u),L=this.o;if(this.S&&(L?(L=_(L),T(L,this.S)):L=this.S),this.m!==null||this.O||(x.H=L,L=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var D=this.i[m];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(f+=D,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Gr(this,x,f),m=_r(this.I),Xe(m,"RID",u),Xe(m,"CVER",22),this.D&&Xe(m,"X-HTTP-Session-Id",this.D),Fs(this,m),L&&(this.O?f="headers="+encodeURIComponent(String(ld(L)))+"&"+f:this.m&&Ms(m,this.m,L)),rr(this.h,x),this.Ua&&Xe(m,"TYPE","init"),this.P?(Xe(m,"$req",f),Xe(m,"SID","null"),x.T=!0,vc(x,m,null)):vc(x,m,f),this.G=2}}else this.G==3&&(u?pd(this,u):this.i.length==0||id(this.h)||pd(this))};function pd(u,f){var m;f?m=f.l:m=u.U++;let D=_r(u.I);Xe(D,"SID",u.K),Xe(D,"RID",m),Xe(D,"AID",u.T),Fs(u,D),u.m&&u.o&&Ms(D,u.m,u.o),m=new Hr(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Gr(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),rr(u.h,m),vc(m,D,f)}function Fs(u,f){u.H&&be(u.H,function(m,D){Xe(f,D,m)}),u.l&&Ye({},function(m,D){Xe(f,D,m)})}function Gr(u,f,m){m=Math.min(u.i.length,m);var D=u.l?I(u.l.Na,u.l,u):null;e:{var x=u.i;let L=-1;for(;;){let W=["count="+m];L==-1?0<m?(L=x[0].g,W.push("ofs="+L)):L=0:W.push("ofs="+L);let Ve=!0;for(let yt=0;yt<m;yt++){let Ue=x[yt].g,rn=x[yt].map;if(Ue-=L,0>Ue)L=Math.max(0,x[yt].g-100),Ve=!1;else try{ud(rn,W,"req"+Ue+"_")}catch{D&&D(rn)}}if(Ve){D=W.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,D}function gd(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Ro||cp(),Br||(Ro(),Br=!0),ps.add(f,u),u.v=0}}function Pc(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ws(I(u.Fa,u),yd(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,md(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ws(I(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yt(10),Os(this),md(this))};function Nc(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function md(u){u.g=new Hr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=_r(u.qa);Xe(f,"RID","rpc"),Xe(f,"SID",u.K),Xe(f,"AID",u.T),Xe(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Xe(f,"TO",u.ja),Xe(f,"TYPE","xmlhttp"),Fs(u,f),u.m&&u.o&&Ms(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Tc(_r(f)),m.m=null,m.P=!0,Ec(m,u)}n.Za=function(){this.C!=null&&(this.C=null,Os(this),Pc(this),Yt(19))};function Ci(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function nn(u,f){var m=null;if(u.g==f){Ci(u),Nc(u),u.g=null;var D=2}else if(od(u.h,f))m=f.D,On(u.h,f),D=1;else return;if(u.G!=0){if(f.o)if(D==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var x=u.B;D=yc(),Ht(D,new ko(D,m)),Go(u)}else gd(u);else if(x=f.s,x==3||x==0&&0<f.X||!(D==1&&Rc(u,f)||D==2&&Pc(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),x){case 1:Wr(u,5);break;case 4:Wr(u,10);break;case 3:Wr(u,6);break;default:Wr(u,2)}}}function yd(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function Wr(u,f){if(u.j.info("Error code "+f),f==2){var m=I(u.fb,u),D=u.Xa;let x=!D;D=new Fn(D||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ho(D,"https"),Tc(D),x?Ap(D.toString(),m):zo(D.toString(),m)}else Yt(2);u.G=0,u.l&&u.l.sa(f),Di(u),Ac(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function Di(u){if(u.G=0,u.ka=[],u.l){let f=Rs(u.h);(f.length!=0||u.i.length!=0)&&(O(u.ka,f),O(u.ka,u.i),u.h.i.length=0,U(u.i),u.i.length=0),u.l.ra()}}function l(u,f,m){var D=m instanceof Fn?_r(m):new Fn(m);if(D.g!="")f&&(D.g=f+"."+D.g),wc(D,D.s);else{var x=a.location;D=x.protocol,f=f?f+"."+x.hostname:x.hostname,x=+x.port;var L=new Fn(null);D&&Ho(L,D),f&&(L.g=f),x&&wc(L,x),m&&(L.l=m),D=L}return m=u.D,f=u.ya,m&&f&&Xe(D,m,f),Xe(D,"VER",u.la),Fs(u,D),D}function p(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Be(new Je({eb:m})):new Be(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function y(){}n=y.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function A(){}A.prototype.g=function(u,f){return new N(u,f)};function N(u,f){kt.call(this),this.g=new fd(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!ne(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!ne(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new ue(this)}P(N,kt),N.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},N.prototype.close=function(){Sc(this.g)},N.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Mo(u),u=m);f.i.push(new nd(f.Ya++,u)),f.G==3&&Go(f)},N.prototype.N=function(){this.g.l=null,delete this.j,Sc(this.g),delete this.g,N.aa.N.call(this)};function F(u){Ot.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}P(F,Ot);function K(){mc.call(this),this.status=1}P(K,mc);function ue(u){this.g=u}P(ue,y),ue.prototype.ua=function(){Ht(this.g,"a")},ue.prototype.ta=function(u){Ht(this.g,new F(u))},ue.prototype.sa=function(u){Ht(this.g,new K)},ue.prototype.ra=function(){Ht(this.g,"b")},A.prototype.createWebChannel=A.prototype.g,N.prototype.send=N.prototype.o,N.prototype.open=N.prototype.m,N.prototype.close=N.prototype.close,fD=cs.createWebChannelTransport=function(){return new A},hD=cs.getStatEventTarget=function(){return yc()},dD=cs.Event=kn,x_=cs.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fo.NO_ERROR=0,Fo.TIMEOUT=8,Fo.HTTP_ERROR=6,Af=cs.ErrorCode=Fo,_c.COMPLETE="complete",lD=cs.EventType=_c,vs.EventType=Es,Es.OPEN="a",Es.CLOSE="b",Es.ERROR="c",Es.MESSAGE="d",kt.prototype.listen=kt.prototype.K,_l=cs.WebChannel=vs,A7=cs.FetchXmlHttpFactory=Je,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,uD=cs.XhrIo=Be}).apply(typeof N_<"u"?N_:typeof self<"u"?self:typeof window<"u"?window:{});var lL="@firebase/firestore",dL="4.8.0";var Qt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");var jl="11.10.0";var Qa=new ci("@firebase/firestore");function vl(){return Qa.logLevel}function te(n,...e){if(Qa.logLevel<=De.DEBUG){let t=e.map(HS);Qa.debug(`Firestore (${jl}): ${n}`,...t)}}function Ya(n,...e){if(Qa.logLevel<=De.ERROR){let t=e.map(HS);Qa.error(`Firestore (${jl}): ${n}`,...t)}}function Dl(n,...e){if(Qa.logLevel<=De.WARN){let t=e.map(HS);Qa.warn(`Firestore (${jl}): ${n}`,...t)}}function HS(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Te(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,QL(n,r,t)}function QL(n,e,t){let r=`FIRESTORE (${jl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ya(r),new Error(r)}function mt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||QL(e,i,r)}function tt(n,e){return n}var $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Y=class extends Jn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var us=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var U_=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},yD=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qt.UNAUTHENTICATED))}shutdown(){}},_D=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},vD=class{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){mt(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new us;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new us,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>C(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new us)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt(typeof r.accessToken=="string",31837,{l:r}),new U_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return mt(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}},ED=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},ID=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new ED(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},j_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},wD=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){mt(this.o===void 0,3512);let r=s=>{s.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new j_(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(mt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new j_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function R7(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function P7(){return new TextEncoder}var Of=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=R7(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function Le(n,e){return n<e?-1:n>e?1:0}function TD(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Le(r,i);{let s=P7(),o=N7(s.encode(hL(n,t)),s.encode(hL(e,t)));return o!==0?o:Le(r,i)}}t+=r>65535?2:1}return Le(n.length,e.length)}function hL(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function N7(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Le(n[t],e[t]);return Le(n.length,e.length)}function Sl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var fL="__name__",B_=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Te(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Le(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):TD(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return P_.fromString(e.substring(4,e.length-2))}},gt=class n extends B_{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Y($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},x7=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Zn=class n extends B_{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return x7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fL}static keyField(){return new n([fL])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new Y($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Y($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Y($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Ie=class n{constructor(e){this.path=e}static fromPath(e){return new n(gt.fromString(e))}static fromName(e){return new n(gt.fromString(e).popFirst(5))}static empty(){return new n(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new gt(e.slice()))}};function YL(n,e,t){if(!t)throw new Y($.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function M7(n,e,t,r){if(e===!0&&r===!0)throw new Y($.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function pL(n){if(!Ie.isDocumentKey(n))throw new Y($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gL(n){if(Ie.isDocumentKey(n))throw new Y($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function JL(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function av(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te(12329,{type:typeof n})}function Ff(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Y($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=av(n);throw new Y($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Pt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Gf(n,e){if(!JL(n))throw new Y($.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new Y($.INVALID_ARGUMENT,t);return!0}var mL=-62135596800,yL=1e6,st=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*yL);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Y($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Y($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<mL)throw new Y($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/yL}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gf(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-mL;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:Pt("string",st._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};var pt=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new st(0,0))}static max(){return new n(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Lf=-1,bD=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};bD.UNKNOWN_ID=-1;function k7(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=pt.fromTimestamp(r===1e9?new st(t+1,0):new st(t,r));return new Ja(i,Ie.empty(),e)}function O7(n){return new Ja(n.readTime,n.key,Lf)}var Ja=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(pt.min(),Ie.empty(),Lf)}static max(){return new n(pt.max(),Ie.empty(),Lf)}};function F7(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ie.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}var L7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",CD=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function qS(n){return C(this,null,function*(){if(n.code!==$.FAILED_PRECONDITION||n.message!==L7)throw n;te("LocalStore","Unexpectedly lost primary lease")})}var z=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let d=c;t(e[d]).next(h=>{o[d]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function V7(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Wf(n){return n.name==="IndexedDbTransactionError"}var XL=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),zS=-1;function GS(n){return n==null}function Vf(n){return n===0&&1/n==-1/0}function U7(n){return typeof n=="number"&&Number.isInteger(n)&&!Vf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var ZL="";function j7(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=_L(e)),e=B7(n.get(t),e);return _L(e)}function B7(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case ZL:t+="";break;default:t+=s}}return t}function _L(n){return n+ZL+""}var $7="remoteDocuments",eV="owner";var tV="mutationQueues";var nV="mutations";var rV="documentMutations",H7="remoteDocumentsV14";var iV="remoteDocumentGlobal";var sV="targets";var oV="targetDocuments";var aV="targetGlobal",cV="collectionParents";var uV="clientMetadata";var lV="bundles";var dV="namedQueries";var q7="indexConfiguration";var z7="indexState";var G7="indexEntries";var hV="documentOverlays";var W7="globals";var K7=[tV,nV,rV,$7,sV,eV,aV,oV,uV,iV,cV,lV,dV],pEe=[...K7,hV],Q7=[tV,nV,rV,H7,sV,eV,aV,oV,uV,iV,cV,lV,dV,hV],Y7=Q7,J7=[...Y7,q7,z7,G7];var gEe=[...J7,W7];function vL(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ic(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fV(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var er=class n{constructor(e,t){this.comparator=e,this.root=t||mi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Il(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Il(this.root,e,this.comparator,!1)}getReverseIterator(){return new Il(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Il(this.root,e,this.comparator,!0)}},Il=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},mi=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}};mi.EMPTY=null,mi.RED=!0,mi.BLACK=!1;mi.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new mi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var pn=class n{constructor(e){this.comparator=e,this.data=new er(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $_(this.data.getIterator())}getIteratorFrom(e){return new $_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},$_=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var mr=class n{constructor(e){this.fields=e,e.sort(Zn.comparator)}static empty(){return new n([])}unionWith(e){let t=new pn(Zn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sl(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var DD=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ds=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new DD("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ds.EMPTY_BYTE_STRING=new ds("");var X7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wo(n){if(mt(!!n,39018),typeof n=="string"){let e=0,t=X7.exec(n);if(mt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rt(n.seconds),nanos:Rt(n.nanos)}}function Rt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Xa(n){return typeof n=="string"?ds.fromBase64String(n):ds.fromUint8Array(n)}var pV="server_timestamp",gV="__type__",mV="__previous_value__",yV="__local_write_time__";function WS(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[gV])===null||t===void 0?void 0:t.stringValue)===pV}function KS(n){let e=n.mapValue.fields[mV];return WS(e)?KS(e):e}function H_(n){let e=wo(n.mapValue.fields[yV].timestampValue);return new st(e.seconds,e.nanos)}var SD=class{constructor(e,t,r,i,s,o,a,c,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}},q_="(default)",AD=class n{constructor(e,t){this.projectId=e,this.database=t||q_}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===q_}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var QS="__type__",_V="__max__",M_={mapValue:{fields:{__type__:{stringValue:_V}}}},YS="__vector__",Uf="value";function Za(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?WS(n)?4:EV(n)?9007199254740991:vV(n)?10:11:Te(28295,{value:n})}function yi(n,e){if(n===e)return!0;let t=Za(n);if(t!==Za(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return H_(n).isEqual(H_(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=wo(i.timestampValue),a=wo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Xa(i.bytesValue).isEqual(Xa(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Rt(i.geoPointValue.latitude)===Rt(s.geoPointValue.latitude)&&Rt(i.geoPointValue.longitude)===Rt(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Rt(i.integerValue)===Rt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Rt(i.doubleValue),a=Rt(s.doubleValue);return o===a?Vf(o)===Vf(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Sl(n.arrayValue.values||[],e.arrayValue.values||[],yi);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(vL(o)!==vL(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!yi(o[c],a[c])))return!1;return!0})(n,e);default:return Te(52216,{left:n})}}function jf(n,e){return(n.values||[]).find(t=>yi(t,e))!==void 0}function Al(n,e){if(n===e)return 0;let t=Za(n),r=Za(e);if(t!==r)return Le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=Rt(s.integerValue||s.doubleValue),c=Rt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return EL(n.timestampValue,e.timestampValue);case 4:return EL(H_(n),H_(e));case 5:return TD(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=Xa(s),c=Xa(o);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){let h=Le(a[d],c[d]);if(h!==0)return h}return Le(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=Le(Rt(s.latitude),Rt(o.latitude));return a!==0?a:Le(Rt(s.longitude),Rt(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return IL(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,c,d,h;let g=s.fields||{},I=o.fields||{},S=(a=g[Uf])===null||a===void 0?void 0:a.arrayValue,P=(c=I[Uf])===null||c===void 0?void 0:c.arrayValue,U=Le(((d=S?.values)===null||d===void 0?void 0:d.length)||0,((h=P?.values)===null||h===void 0?void 0:h.length)||0);return U!==0?U:IL(S,P)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===M_.mapValue&&o===M_.mapValue)return 0;if(s===M_.mapValue)return 1;if(o===M_.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){let I=TD(c[g],h[g]);if(I!==0)return I;let S=Al(a[c[g]],d[h[g]]);if(S!==0)return S}return Le(c.length,h.length)})(n.mapValue,e.mapValue);default:throw Te(23264,{le:t})}}function EL(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);let t=wo(n),r=wo(e),i=Le(t.seconds,r.seconds);return i!==0?i:Le(t.nanos,r.nanos)}function IL(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Al(t[i],r[i]);if(s)return s}return Le(t.length,r.length)}function Rl(n){return RD(n)}function RD(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=wo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Xa(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ie.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=RD(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${RD(t.fields[o])}`;return i+"}"})(n.mapValue):Te(61005,{value:n})}function F_(n){switch(Za(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=KS(n);return e?16+F_(e):16;case 5:return 2*n.stringValue.length;case 6:return Xa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+F_(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return ic(r.fields,(s,o)=>{i+=s.length+F_(o)}),i})(n.mapValue);default:throw Te(13486,{value:n})}}function wL(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function PD(n){return!!n&&"integerValue"in n}function JS(n){return!!n&&"arrayValue"in n}function L_(n){return!!n&&"mapValue"in n}function vV(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[QS])===null||t===void 0?void 0:t.stringValue)===YS}function Pf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ic(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Pf(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function EV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===_V}var yEe={mapValue:{fields:{[QS]:{stringValue:YS},[Uf]:{arrayValue:{}}}}};var gr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!L_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pf(t)}setAll(e){let t=Zn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Pf(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());L_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];L_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ic(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Pf(this.value))}};function IV(n){let e=[];return ic(n.fields,(t,r)=>{let i=new Zn([t]);if(L_(r)){let s=IV(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new mr(e)}var Pl=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,pt.min(),pt.min(),pt.min(),gr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,pt.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,pt.min(),pt.min(),gr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,pt.min(),pt.min(),gr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Nl=class{constructor(e,t){this.position=e,this.inclusive=t}};function TL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Ie.comparator(Ie.fromName(o.referenceValue),t.key):r=Al(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function bL(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!yi(n.position[t],e.position[t]))return!1;return!0}var ec=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Z7(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var z_=class{},$t=class n extends z_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new xD(e,t,r):t==="array-contains"?new OD(e,r):t==="in"?new FD(e,r):t==="not-in"?new LD(e,r):t==="array-contains-any"?new VD(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new MD(e,r):new kD(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Al(t,this.value)):t!==null&&Za(this.value)===Za(t)&&this.matchesComparison(Al(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},hs=class n extends z_{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return wV(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function wV(n){return n.op==="and"}function TV(n){return eK(n)&&wV(n)}function eK(n){for(let e of n.filters)if(e instanceof hs)return!1;return!0}function ND(n){if(n instanceof $t)return n.field.canonicalString()+n.op.toString()+Rl(n.value);if(TV(n))return n.filters.map(e=>ND(e)).join(",");{let e=n.filters.map(t=>ND(t)).join(",");return`${n.op}(${e})`}}function bV(n,e){return n instanceof $t?(function(r,i){return i instanceof $t&&r.op===i.op&&r.field.isEqual(i.field)&&yi(r.value,i.value)})(n,e):n instanceof hs?(function(r,i){return i instanceof hs&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&bV(o,i.filters[a]),!0):!1})(n,e):void Te(19439)}function CV(n){return n instanceof $t?(function(t){return`${t.field.canonicalString()} ${t.op} ${Rl(t.value)}`})(n):n instanceof hs?(function(t){return t.op.toString()+" {"+t.getFilters().map(CV).join(" ,")+"}"})(n):"Filter"}var xD=class extends $t{constructor(e,t,r){super(e,t,r),this.key=Ie.fromName(r.referenceValue)}matches(e){let t=Ie.comparator(e.key,this.key);return this.matchesComparison(t)}},MD=class extends $t{constructor(e,t){super(e,"in",t),this.keys=DV("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},kD=class extends $t{constructor(e,t){super(e,"not-in",t),this.keys=DV("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function DV(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ie.fromName(r.referenceValue))}var OD=class extends $t{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return JS(t)&&jf(t.arrayValue,this.value)}},FD=class extends $t{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&jf(this.value.arrayValue,t)}},LD=class extends $t{constructor(e,t){super(e,"not-in",t)}matches(e){if(jf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!jf(this.value.arrayValue,t)}},VD=class extends $t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!JS(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>jf(this.value.arrayValue,r))}};var UD=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function CL(n,e=null,t=[],r=[],i=null,s=null,o=null){return new UD(n,e,t,r,i,s,o)}function XS(n){let e=tt(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ND(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),GS(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Rl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Rl(r)).join(",")),e.Pe=t}return e.Pe}function ZS(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Z7(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!bV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!bL(n.startAt,e.startAt)&&bL(n.endAt,e.endAt)}var To=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function tK(n,e,t,r,i,s,o,a){return new To(n,e,t,r,i,s,o,a)}function nK(n){return new To(n)}function DL(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function SV(n){return n.collectionGroup!==null}function Nf(n){let e=tt(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new pn(Zn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new ec(s,r))}),t.has(Zn.keyField().canonicalString())||e.Te.push(new ec(Zn.keyField(),r))}return e.Te}function za(n){let e=tt(n);return e.Ie||(e.Ie=rK(e,Nf(n))),e.Ie}function rK(n,e){if(n.limitType==="F")return CL(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ec(i.field,s)});let t=n.endAt?new Nl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Nl(n.startAt.position,n.startAt.inclusive):null;return CL(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function jD(n,e){let t=n.filters.concat([e]);return new To(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function BD(n,e,t){return new To(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function AV(n,e){return ZS(za(n),za(e))&&n.limitType===e.limitType}function RV(n){return`${XS(za(n))}|lt:${n.limitType}`}function Rf(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>CV(i)).join(", ")}]`),GS(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Rl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Rl(i)).join(",")),`Target(${r})`})(za(n))}; limitType=${n.limitType})`}function eA(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ie.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of Nf(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,c){let d=TL(o,a,c);return o.inclusive?d<=0:d<0})(r.startAt,Nf(r),i)||r.endAt&&!(function(o,a,c){let d=TL(o,a,c);return o.inclusive?d>=0:d>0})(r.endAt,Nf(r),i))})(n,e)}function iK(n){return(e,t)=>{let r=!1;for(let i of Nf(n)){let s=sK(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function sK(n,e,t){let r=n.field.isKeyField()?Ie.comparator(e.key,t.key):(function(s,o,a){let c=o.data.field(s),d=a.data.field(s);return c!==null&&d!==null?Al(c,d):Te(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:n.dir})}}var fs=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ic(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return fV(this.inner)}size(){return this.innerSize}};var oK=new er(Ie.comparator);function G_(){return oK}var PV=new er(Ie.comparator);function k_(...n){let e=PV;for(let t of n)e=e.insert(t.key,t);return e}function NV(n){let e=PV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function qa(){return xf()}function xV(){return xf()}function xf(){return new fs(n=>n.toString(),(n,e)=>n.isEqual(e))}var aK=new er(Ie.comparator),cK=new pn(Ie.comparator);function fn(...n){let e=cK;for(let t of n)e=e.add(t);return e}var uK=new pn(Le);function lK(){return uK}function tA(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vf(e)?"-0":e}}function MV(n){return{integerValue:""+n}}function dK(n,e){return U7(e)?MV(e):tA(n,e)}var xl=class{constructor(){this._=void 0}};function hK(n,e,t){return n instanceof Ml?(function(i,s){let o={fields:{[gV]:{stringValue:pV},[yV]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&WS(s)&&(s=KS(s)),s&&(o.fields[mV]=s),{mapValue:o}})(t,e):n instanceof tc?OV(n,e):n instanceof nc?FV(n,e):(function(i,s){let o=kV(i,s),a=SL(o)+SL(i.Ee);return PD(o)&&PD(i.Ee)?MV(a):tA(i.serializer,a)})(n,e)}function fK(n,e,t){return n instanceof tc?OV(n,e):n instanceof nc?FV(n,e):t}function kV(n,e){return n instanceof kl?(function(r){return PD(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var Ml=class extends xl{},tc=class extends xl{constructor(e){super(),this.elements=e}};function OV(n,e){let t=LV(e);for(let r of n.elements)t.some(i=>yi(i,r))||t.push(r);return{arrayValue:{values:t}}}var nc=class extends xl{constructor(e){super(),this.elements=e}};function FV(n,e){let t=LV(e);for(let r of n.elements)t=t.filter(i=>!yi(i,r));return{arrayValue:{values:t}}}var kl=class extends xl{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function SL(n){return Rt(n.integerValue||n.doubleValue)}function LV(n){return JS(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function pK(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof tc&&i instanceof tc||r instanceof nc&&i instanceof nc?Sl(r.elements,i.elements,yi):r instanceof kl&&i instanceof kl?yi(r.Ee,i.Ee):r instanceof Ml&&i instanceof Ml})(n.transform,e.transform)}var $D=class{constructor(e,t){this.version=e,this.transformResults=t}},ls=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function V_(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ol=class{};function VV(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Bf(n.key,ls.none()):new rc(n.key,n.data,ls.none());{let t=n.data,r=gr.empty(),i=new pn(Zn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new _i(n.key,r,new mr(i.toArray()),ls.none())}}function gK(n,e,t){n instanceof rc?(function(i,s,o){let a=i.value.clone(),c=RL(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof _i?(function(i,s,o){if(!V_(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=RL(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(UV(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Mf(n,e,t,r){return n instanceof rc?(function(s,o,a,c){if(!V_(s.precondition,o))return a;let d=s.value.clone(),h=PL(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,r):n instanceof _i?(function(s,o,a,c){if(!V_(s.precondition,o))return a;let d=PL(s.fieldTransforms,c,o),h=o.data;return h.setAll(UV(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))})(n,e,t,r):(function(s,o,a){return V_(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function mK(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=kV(r.transform,i||null);s!=null&&(t===null&&(t=gr.empty()),t.set(r.field,s))}return t||null}function AL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Sl(r,i,(s,o)=>pK(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var rc=class extends Ol{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},_i=class extends Ol{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function UV(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function RL(n,e,t){let r=new Map;mt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,fK(o,a,t[i]))}return r}function PL(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,hK(s,o,e))}return r}var Bf=class extends Ol{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},HD=class extends Ol{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var qD=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&gK(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Mf(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Mf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=xV();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=VV(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(pt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fn())}isEqual(e){return this.batchId===e.batchId&&Sl(this.mutations,e.mutations,(t,r)=>AL(t,r))&&Sl(this.baseMutations,e.baseMutations,(t,r)=>AL(t,r))}},zD=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){mt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return aK})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var GD=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var St,Oe;function yK(n){switch(n){case $.OK:return Te(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return Te(15467,{code:n})}}function _K(n){if(n===void 0)return Ya("GRPC error has no .code"),$.UNKNOWN;switch(n){case St.OK:return $.OK;case St.CANCELLED:return $.CANCELLED;case St.UNKNOWN:return $.UNKNOWN;case St.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case St.INTERNAL:return $.INTERNAL;case St.UNAVAILABLE:return $.UNAVAILABLE;case St.UNAUTHENTICATED:return $.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case St.NOT_FOUND:return $.NOT_FOUND;case St.ALREADY_EXISTS:return $.ALREADY_EXISTS;case St.PERMISSION_DENIED:return $.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case St.ABORTED:return $.ABORTED;case St.OUT_OF_RANGE:return $.OUT_OF_RANGE;case St.UNIMPLEMENTED:return $.UNIMPLEMENTED;case St.DATA_LOSS:return $.DATA_LOSS;default:return Te(39323,{code:n})}}(Oe=St||(St={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";var _Ee=new P_([4294967295,4294967295],0);var WD=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function KD(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vK(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function EK(n,e){return KD(n,e.toTimestamp())}function Tl(n){return mt(!!n,49232),pt.fromTimestamp((function(t){let r=wo(t);return new st(r.seconds,r.nanos)})(n))}function jV(n,e){return QD(n,e).canonicalString()}function QD(n,e){let t=(function(i){return new gt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function IK(n){let e=gt.fromString(n);return mt(RK(e),10190,{key:e.toString()}),e}function YD(n,e){return jV(n.databaseId,e.path)}function wK(n){let e=IK(n);return e.length===4?gt.emptyPath():bK(e)}function TK(n){return new gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bK(n){return mt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function NL(n,e,t){return{name:YD(n,e),fields:t.value.mapValue.fields}}function CK(n,e){let t;if(e instanceof rc)t={update:NL(n,e.key,e.value)};else if(e instanceof Bf)t={delete:YD(n,e.key)};else if(e instanceof _i)t={update:NL(n,e.key,e.data),updateMask:AK(e.fieldMask)};else{if(!(e instanceof HD))return Te(16599,{Rt:e.type});t={verify:YD(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof Ml)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof tc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof nc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof kl)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw Te(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:EK(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Te(27497)})(n,e.precondition)),t}function DK(n,e){return n&&n.length>0?(mt(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?Tl(i.updateTime):Tl(s);return o.isEqual(pt.min())&&(o=Tl(s)),new $D(o,i.transformResults||[])})(t,e))):[]}function SK(n){let e=wK(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){mt(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(g){let I=BV(g);return I instanceof hs&&TV(I)?I.getFilters():[I]})(t.where));let o=[];t.orderBy&&(o=(function(g){return g.map(I=>(function(P){return new ec(El(P.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(I))})(t.orderBy));let a=null;t.limit&&(a=(function(g){let I;return I=typeof g=="object"?g.value:g,GS(I)?null:I})(t.limit));let c=null;t.startAt&&(c=(function(g){let I=!!g.before,S=g.values||[];return new Nl(S,I)})(t.startAt));let d=null;return t.endAt&&(d=(function(g){let I=!g.before,S=g.values||[];return new Nl(S,I)})(t.endAt)),tK(e,i,o,s,a,"F",c,d)}function BV(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=El(t.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=El(t.unaryFilter.field);return $t.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=El(t.unaryFilter.field);return $t.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=El(t.unaryFilter.field);return $t.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(n):n.fieldFilter!==void 0?(function(t){return $t.create(El(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return hs.create(t.compositeFilter.filters.map(r=>BV(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(n):Te(30097,{filter:n})}function El(n){return Zn.fromServerFormat(n.fieldPath)}function AK(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function RK(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var JD=class{constructor(e){this.gt=e}};function PK(n){let e=SK({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?BD(e,e.limit,"L"):e}var W_=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Rt(e.integerValue));else if("doubleValue"in e){let r=Rt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Vf(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=wo(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Xa(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?EV(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):vV(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Te(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=Uf,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Rt(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),Ie.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};W_.Ut=new W_;var XD=class{constructor(){this.Dn=new ZD}addToCollectionParentIndex(e,t){return this.Dn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(Ja.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(Ja.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}},ZD=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new pn(gt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pn(gt.comparator)).toArray()}};var vEe=new Uint8Array(0);var xL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$V=41943040,pr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};pr.DEFAULT_COLLECTION_PERCENTILE=10,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pr.DEFAULT=new pr($V,pr.DEFAULT_COLLECTION_PERCENTILE,pr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pr.DISABLED=new pr(-1,0,0);var $f=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var ML="LruGarbageCollector",NK=1048576;function kL([n,e],[t,r]){let i=Le(n,t);return i===0?Le(e,r):i}var eS=class{constructor(e){this.Tr=e,this.buffer=new pn(kL),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();kL(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},tS=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){te(ML,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>C(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Wf(t)?te(ML,"Ignoring IndexedDB error during garbage collection: ",t):yield qS(t)}yield this.Rr(3e5)}))}},nS=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return z.resolve(XL.ue);let r=new eS(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(xL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xL):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,c,d,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),vl()<=De.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}};function xK(n,e){return new nS(n,e)}var rS=class{constructor(){this.changes=new fs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var iS=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var sS=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Mf(r.mutation,i,mr.empty(),st.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,fn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=fn()){let i=qa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=k_();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=qa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,fn()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=G_(),o=xf(),a=(function(){return xf()})();return t.forEach((c,d)=>{let h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof _i)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Mf(h.mutation,d,h.mutation.getFieldMask(),st.now())):o.set(d.key,mr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),t.forEach((d,h)=>{var g;return a.set(d,new iS(h,(g=o.get(d))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,t){let r=xf(),i=new er((o,a)=>o-a),s=fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let d=t.get(c);if(d===null)return;let h=r.get(c)||mr.empty();h=a.applyToLocalView(d,h),r.set(c,h);let g=(i.get(a.batchId)||fn()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),d=c.key,h=c.value,g=xV();h.forEach(I=>{if(!s.has(I)){let S=VV(t.get(I),r.get(I));S!==null&&g.set(I,S),s=s.add(I)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return Ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):SV(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):z.resolve(qa()),a=Lf,c=s;return o.next(d=>z.forEach(d,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?z.resolve():this.remoteDocumentCache.getEntry(e,h).next(I=>{c=c.insert(h,I)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,fn())).next(h=>({batchId:a,changes:NV(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ie(t)).next(r=>{let i=k_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=k_();return this.indexManager.getCollectionParents(e,s).next(a=>z.forEach(a,c=>{let d=(function(g,I){return new To(I,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((g,I)=>{o=o.insert(g,I)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,d)=>{let h=d.getKey();o.get(h)===null&&(o=o.insert(h,Pl.newInvalidDocument(h)))});let a=k_();return o.forEach((c,d)=>{let h=s.get(c);h!==void 0&&Mf(h.mutation,d,mr.empty(),st.now()),eA(t,d)&&(a=a.insert(c,d))}),a})}};var oS=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return z.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Tl(i.createTime)}})(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:PK(i.bundledQuery),readTime:Tl(i.readTime)}})(t)),z.resolve()}};var aS=class{constructor(){this.overlays=new er(Ie.comparator),this.kr=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){let r=qa();return z.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),z.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){let i=qa(),s=t.length+1,o=new Ie(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return z.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new er((d,h)=>d-h),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=qa(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=qa(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=i)););return z.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new GD(t,r));let s=this.kr.get(t);s===void 0&&(s=fn(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}};var cS=class{constructor(){this.sessionToken=ds.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}};var Hf=class{constructor(){this.qr=new pn(At.Qr),this.$r=new pn(At.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new At(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new At(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new Ie(new gt([])),r=new At(t,e),i=new At(t,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new Ie(new gt([])),r=new At(t,e),i=new At(t,e+1),s=fn();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new At(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},At=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Ie.comparator(e.key,t.key)||Le(e.Hr,t.Hr)}static Ur(e,t){return Le(e.Hr,t.Hr)||Ie.comparator(e.key,t.key)}};var uS=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new pn(At.Qr)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new qD(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new At(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,t){return z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?zS:this.er-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new At(t,0),i=new At(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pn(Le);return t.forEach(i=>{let s=new At(i,0),o=new At(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),z.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;Ie.isDocumentKey(s)||(s=s.child(""));let o=new At(new Ie(s),0),a=new pn(Le);return this.Yr.forEachWhile(c=>{let d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(c.Hr)),!0)},o),z.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){mt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return z.forEach(t.mutations,i=>{let s=new At(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new At(t,0),i=this.Yr.firstAfterOrEqual(r);return z.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var lS=class{constructor(e){this.ni=e,this.docs=(function(){return new er(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():Pl.newInvalidDocument(t))}getEntries(e,t){let r=G_();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Pl.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=G_(),o=t.path,a=new Ie(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||F7(O7(h),r)<=0||(i.has(h.key)||eA(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Te(9500)}ri(e,t){return z.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new dS(this)}getSize(e){return z.resolve(this.size)}},dS=class extends rS{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),z.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var hS=class{constructor(e){this.persistence=e,this.ii=new fs(t=>XS(t),ZS),this.lastRemoteSnapshotVersion=pt.min(),this.highestTargetId=0,this.si=0,this.oi=new Hf,this.targetCount=0,this._i=$f.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),z.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new $f(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.hr(t),z.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),z.waitFor(s).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),z.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),z.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this.oi.containsKey(t))}};var K_=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new XL(0),this.ci=!1,this.ci=!0,this.li=new cS,this.referenceDelegate=e(this),this.hi=new hS(this),this.indexManager=new XD,this.remoteDocumentCache=(function(i){return new lS(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new JD(t),this.Ti=new oS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new uS(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){te("MemoryPersistence","Starting transaction:",e);let i=new fS(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return z.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},fS=class extends CD{constructor(e){super(),this.currentSequenceNumber=e}},pS=class n{constructor(e){this.persistence=e,this.Ai=new Hf,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw Te(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),z.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.mi,r=>{let i=Ie.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,pt.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return z.or([()=>z.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Q_=class n{constructor(e,t){this.persistence=e,this.gi=new fs(r=>j7(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=xK(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return z.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?z.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,pt.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),z.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=F_(e.data.value)),t}Sr(e,t,r){return z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var gS=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=fn(),i=fn();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var mS=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var yS=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return LM()?8:V7(Wt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new mS;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(vl()<=De.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Rf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),z.resolve()):(vl()<=De.DEBUG&&te("QueryEngine","Query:",Rf(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(vl()<=De.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Rf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,za(t))):z.resolve())}ps(e,t){if(DL(t))return z.resolve(null);let r=za(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=BD(t,null,"F"),r=za(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=fn(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let d=this.bs(t,a);return this.Ds(t,d,o,c.readTime)?this.ps(e,BD(t,null,"F")):this.vs(e,d,t,c)}))})))}ys(e,t,r,i){return DL(t)||i.isEqual(pt.min())?z.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,r,i)?z.resolve(null):(vl()<=De.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Rf(t)),this.vs(e,o,t,k7(i,Lf)).next(a=>a))})}bs(e,t){let r=new pn(iK(e));return t.forEach((i,s)=>{eA(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return vl()<=De.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Rf(t)),this.gs.getDocumentsMatchingQuery(e,t,Ja.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var MK="LocalStore";var _S=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new er(Le),this.Ms=new fs(s=>XS(s),ZS),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sS(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function kK(n,e,t,r){return new _S(n,e,t,r)}function HV(n,e){return C(this,null,function*(){let t=tt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=fn();for(let d of i){o.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}for(let d of s){a.push(d.batchId);for(let h of d.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(d=>({Bs:d,removedBatchIds:o,addedBatchIds:a}))})})})}function OK(n,e){let t=tt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,d,h){let g=d.batch,I=g.keys(),S=z.resolve();return I.forEach(P=>{S=S.next(()=>h.getEntry(c,P)).next(U=>{let O=d.docVersions.get(P);mt(O!==null,48541),U.version.compareTo(O)<0&&(g.applyToRemoteDocument(U,d),U.isValidDocument()&&(U.setReadTime(d.commitVersion),h.addEntry(U)))})}),S.next(()=>a.mutationQueue.removeMutationBatch(c,g))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=fn();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function FK(n){let e=tt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function LK(n,e){let t=tt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=zS),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}var Y_=class{constructor(){this.activeTargetIds=lK()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var vS=class{constructor(){this.Fo=new Y_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Y_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var ES=class{xo(e){}shutdown(){}};var OL="ConnectivityMonitor",J_=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){te(OL,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){te(OL,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var O_=null;function IS(){return O_===null?O_=(function(){return 268435456+Math.round(2147483648*Math.random())})():O_++,"0x"+O_.toString(16)}var pD="RestConnection",VK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},wS=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===q_?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=IS(),a=this.Go(e,t.toUriEncodedString());te(pD,`Sending RPC '${e}' ${o}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,s);let{host:d}=new URL(a),h=no(d);return this.jo(e,a,c,r,h).then(g=>(te(pD,`Received RPC '${e}' ${o}: `,g),g),g=>{throw Dl(pD,`RPC '${e}' ${o} failed with error: `,g,"url: ",a,"request:",r),g})}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+jl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){let r=VK[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var TS=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var hn="WebChannelConnection",bS=class extends wS{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){let o=IS();return new Promise((a,c)=>{let d=new uD;d.setWithCredentials(!0),d.listenOnce(lD.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Af.NO_ERROR:let g=d.getResponseJson();te(hn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),a(g);break;case Af.TIMEOUT:te(hn,`RPC '${e}' ${o} timed out`),c(new Y($.DEADLINE_EXCEEDED,"Request time out"));break;case Af.HTTP_ERROR:let I=d.getStatus();if(te(hn,`RPC '${e}' ${o} failed with status:`,I,"response text:",d.getResponseText()),I>0){let S=d.getResponseJson();Array.isArray(S)&&(S=S[0]);let P=S?.error;if(P&&P.status&&P.message){let U=(function(G){let ne=G.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(ne)>=0?ne:$.UNKNOWN})(P.status);c(new Y(U,P.message))}else c(new Y($.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Y($.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{c_:e,streamId:o,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{te(hn,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);te(hn,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",h,r,15)})}P_(e,t,r){let i=IS(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=fD(),a=hD(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=s.join("");te(hn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let g=o.createWebChannel(h,c);this.T_(g);let I=!1,S=!1,P=new TS({Ho:O=>{S?te(hn,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(I||(te(hn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),I=!0),te(hn,`RPC '${e}' stream ${i} sending:`,O),g.send(O))},Yo:()=>g.close()}),U=(O,G,ne)=>{O.listen(G,re=>{try{ne(re)}catch(Re){setTimeout(()=>{throw Re},0)}})};return U(g,_l.EventType.OPEN,()=>{S||(te(hn,`RPC '${e}' stream ${i} transport opened.`),P.s_())}),U(g,_l.EventType.CLOSE,()=>{S||(S=!0,te(hn,`RPC '${e}' stream ${i} transport closed`),P.__(),this.I_(g))}),U(g,_l.EventType.ERROR,O=>{S||(S=!0,Dl(hn,`RPC '${e}' stream ${i} transport errored. Name:`,O.name,"Message:",O.message),P.__(new Y($.UNAVAILABLE,"The operation could not be completed")))}),U(g,_l.EventType.MESSAGE,O=>{var G;if(!S){let ne=O.data[0];mt(!!ne,16349);let re=ne,Re=re?.error||((G=re[0])===null||G===void 0?void 0:G.error);if(Re){te(hn,`RPC '${e}' stream ${i} received error:`,Re);let nt=Re.status,be=(function(E){let T=St[E];if(T!==void 0)return _K(T)})(nt),b=Re.message;be===void 0&&(be=$.INTERNAL,b="Unknown error status: "+nt+" with message "+Re.message),S=!0,P.__(new Y(be,b)),g.close()}else te(hn,`RPC '${e}' stream ${i} received:`,ne),P.a_(ne)}}),U(a,dD.STAT_EVENT,O=>{O.stat===x_.PROXY?te(hn,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===x_.NOPROXY&&te(hn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.o_()},0),P}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function gD(){return typeof document<"u"?document:null}function cv(n){return new WD(n,!0)}var X_=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var FL="PersistentStream",CS=class{constructor(e,t,r,i,s,o,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new X_(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return C(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return C(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return C(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(Ya(t.toString()),Ya("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new Y($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>C(this,null,function*(){this.state=0,this.start()}))}G_(e){return te(FL,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(te(FL,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}};var DS=class extends CS{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=DK(e.writeResults,e.commitTime),r=Tl(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=TK(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>CK(this.serializer,r))};this.k_(t)}};var SS=class{},AS=class extends SS{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Y($.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,QD(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y($.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,QD(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y($.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},RS=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ya(t),this._a=!1):te("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Kf="RemoteStore",PS=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(()=>C(this,null,function*(){Yf(this)&&(te(Kf,"Restarting streams for network reachability change."),yield(function(c){return C(this,null,function*(){let d=tt(c);d.Ia.add(4),yield Qf(d),d.Aa.set("Unknown"),d.Ia.delete(4),yield uv(d)})})(this))}))}),this.Aa=new RS(r,i)}};function uv(n){return C(this,null,function*(){if(Yf(n))for(let e of n.da)yield e(!0)})}function Qf(n){return C(this,null,function*(){for(let e of n.da)yield e(!1)})}function Yf(n){return tt(n).Ia.size===0}function qV(n,e,t){return C(this,null,function*(){if(!Wf(e))throw e;n.Ia.add(1),yield Qf(n),n.Aa.set("Offline"),t||(t=()=>FK(n.localStore)),n.asyncQueue.enqueueRetryable(()=>C(null,null,function*(){te(Kf,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield uv(n)}))})}function zV(n,e){return e().catch(t=>qV(n,t,e))}function lv(n){return C(this,null,function*(){let e=tt(n),t=bo(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:zS;for(;UK(e);)try{let i=yield LK(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,jK(e,i)}catch(i){yield qV(e,i)}GV(e)&&WV(e)})}function UK(n){return Yf(n)&&n.Pa.length<10}function jK(n,e){n.Pa.push(e);let t=bo(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function GV(n){return Yf(n)&&!bo(n).M_()&&n.Pa.length>0}function WV(n){bo(n).start()}function BK(n){return C(this,null,function*(){bo(n).na()})}function $K(n){return C(this,null,function*(){let e=bo(n);for(let t of n.Pa)e.X_(t.mutations)})}function HK(n,e,t){return C(this,null,function*(){let r=n.Pa.shift(),i=zD.from(r,e,t);yield zV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield lv(n)})}function qK(n,e){return C(this,null,function*(){e&&bo(n).Z_&&(yield(function(r,i){return C(this,null,function*(){if((function(o){return yK(o)&&o!==$.ABORTED})(i.code)){let s=r.Pa.shift();bo(r).N_(),yield zV(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield lv(r)}})})(n,e)),GV(n)&&WV(n)})}function LL(n,e){return C(this,null,function*(){let t=tt(n);t.asyncQueue.verifyOperationInProgress(),te(Kf,"RemoteStore received new credentials");let r=Yf(t);t.Ia.add(3),yield Qf(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield uv(t)})}function zK(n,e){return C(this,null,function*(){let t=tt(n);e?(t.Ia.delete(2),yield uv(t)):e||(t.Ia.add(2),yield Qf(t),t.Aa.set("Unknown"))})}function bo(n){return n.ma||(n.ma=(function(t,r,i){let s=tt(t);return s.ia(),new DS(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:BK.bind(null,n),n_:qK.bind(null,n),ea:$K.bind(null,n),ta:HK.bind(null,n)}),n.da.push(e=>C(null,null,function*(){e?(n.ma.N_(),yield lv(n)):(yield n.ma.stop(),n.Pa.length>0&&(te(Kf,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var NS=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function KV(n,e){if(Ya("AsyncQueue",`${e}: ${n}`),Wf(n))return new Y($.UNAVAILABLE,`${e}: ${n}`);throw n}var xS=class{constructor(){this.queries=VL(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=tt(t),s=i.queries;i.queries=VL(),s.forEach((o,a)=>{for(let c of a.wa)c.onError(r)})})(this,new Y($.ABORTED,"Firestore shutting down"))}};function VL(){return new fs(n=>RV(n),AV)}function GK(n){n.Da.forEach(e=>{e.next()})}var UL,jL;(jL=UL||(UL={})).Fa="default",jL.Cache="cache";var WK="SyncEngine";var MS=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new fs(a=>RV(a),AV),this.Tu=new Map,this.Iu=new Set,this.du=new er(Ie.comparator),this.Eu=new Map,this.Au=new Hf,this.Ru={},this.Vu=new Map,this.mu=$f.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function KK(n,e,t){return C(this,null,function*(){let r=XK(n);try{let i=yield(function(o,a){let c=tt(o),d=st.now(),h=a.reduce((S,P)=>S.add(P.key),fn()),g,I;return c.persistence.runTransaction("Locally write mutations","readwrite",S=>{let P=G_(),U=fn();return c.Os.getEntries(S,h).next(O=>{P=O,P.forEach((G,ne)=>{ne.isValidDocument()||(U=U.add(G))})}).next(()=>c.localDocuments.getOverlayedDocuments(S,P)).next(O=>{g=O;let G=[];for(let ne of a){let re=mK(ne,g.get(ne.key).overlayedDocument);re!=null&&G.push(new _i(ne.key,re,IV(re.value.mapValue),ls.exists(!0)))}return c.mutationQueue.addMutationBatch(S,d,G,a)}).next(O=>{I=O;let G=O.applyToLocalDocumentSet(g,U);return c.documentOverlayCache.saveOverlays(S,O.batchId,G)})}).then(()=>({batchId:I.batchId,changes:NV(g)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,c){let d=o.Ru[o.currentUser.toKey()];d||(d=new er(Le)),d=d.insert(a,c),o.Ru[o.currentUser.toKey()]=d})(r,i.batchId,t),yield dv(r,i.changes),yield lv(r.remoteStore)}catch(i){let s=KV(i,"Failed to persist write");t.reject(s)}})}function BL(n,e,t){let r=tt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let c=tt(o);c.onlineState=a;let d=!1;c.queries.forEach((h,g)=>{for(let I of g.wa)I.va(a)&&(d=!0)}),d&&GK(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function QK(n,e){return C(this,null,function*(){let t=tt(n),r=e.batch.batchId;try{let i=yield OK(t.localStore,e);YV(t,r,null),QV(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield dv(t,i)}catch(i){yield qS(i)}})}function YK(n,e,t){return C(this,null,function*(){let r=tt(n);try{let i=yield(function(o,a){let c=tt(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(g=>(mt(g!==null,37113),h=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})})(r.localStore,e);YV(r,e,t),QV(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield dv(r,i)}catch(i){yield qS(i)}})}function QV(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function YV(n,e,t){let r=tt(n),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function dv(n,e,t){return C(this,null,function*(){let r=tt(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{o.push(r.gu(c,e,t).then(d=>{var h;if((d||t)&&r.isPrimaryClient){let g=d?!d.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){i.push(d);let g=gS.Es(c.targetId,d);s.push(g)}}))}),yield Promise.all(o),r.hu.J_(i),yield(function(c,d){return C(this,null,function*(){let h=tt(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>z.forEach(d,I=>z.forEach(I.Is,S=>h.persistence.referenceDelegate.addReference(g,I.targetId,S)).next(()=>z.forEach(I.ds,S=>h.persistence.referenceDelegate.removeReference(g,I.targetId,S)))))}catch(g){if(!Wf(g))throw g;te(MK,"Failed to update sequence numbers: "+g)}for(let g of d){let I=g.targetId;if(!g.fromCache){let S=h.Fs.get(I),P=S.snapshotVersion,U=S.withLastLimboFreeSnapshotVersion(P);h.Fs=h.Fs.insert(I,U)}}})})(r.localStore,s))})}function JK(n,e){return C(this,null,function*(){let t=tt(n);if(!t.currentUser.isEqual(e)){te(WK,"User change. New user:",e.toKey());let r=yield HV(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(c=>{c.reject(new Y($.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield dv(t,r.Bs)}})}function XK(n){let e=tt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YK.bind(null,e),e}var JV=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return C(this,null,function*(){this.serializer=cv(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return kK(this.persistence,new yS,t.initialUser,this.serializer)}Du(t){return new K_(pS.Vi,this.serializer)}bu(t){return new vS}terminate(){return C(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),kS=class extends JV{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){mt(this.persistence.referenceDelegate instanceof Q_,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new tS(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?pr.withCacheSize(this.cacheSizeBytes):pr.DEFAULT;return new K_(r=>Q_.Vi(r,t),this.serializer)}};var ZK=(()=>{class n{initialize(t,r){return C(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>BL(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=JK.bind(null,this.syncEngine),yield zK(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new xS})()}createDatastore(t){let r=cv(t.databaseInfo.databaseId),i=(function(o){return new bS(o)})(t.databaseInfo);return(function(o,a,c,d){return new AS(o,a,c,d)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,c){return new PS(i,s,o,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>BL(this.syncEngine,r,0),(function(){return J_.C()?new J_:new ES})())}createSyncEngine(t,r){return(function(s,o,a,c,d,h,g){let I=new MS(s,o,a,c,d,h);return g&&(I.fu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return C(this,null,function*(){var t,r;yield(function(s){return C(this,null,function*(){let o=tt(s);te(Kf,"RemoteStore shutting down."),o.Ia.add(5),yield Qf(o),o.Ea.shutdown(),o.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Co="FirestoreClient",OS=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Qt.UNAUTHENTICATED,this.clientId=Of.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>C(this,null,function*(){te(Co,"Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(te(Co,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>C(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=KV(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function mD(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),te(Co,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>C(null,null,function*(){r.isEqual(i)||(yield HV(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Dl("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{te("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Dl("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function $L(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield eQ(n);te(Co,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>LL(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>LL(e.remoteStore,i)),n._onlineComponents=e})}function eQ(n){return C(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){te(Co,"Using user provided OfflineComponentProvider");try{yield mD(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Dl("Error using user provided cache. Falling back to memory cache: "+t),yield mD(n,new JV)}}else te(Co,"Using default OfflineComponentProvider"),yield mD(n,new kS(void 0));return n._offlineComponents})}function tQ(n){return C(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(te(Co,"Using user provided OnlineComponentProvider"),yield $L(n,n._uninitializedComponentsProvider._online)):(te(Co,"Using default OnlineComponentProvider"),yield $L(n,new ZK))),n._onlineComponents})}function nQ(n){return tQ(n).then(e=>e.syncEngine)}function XV(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var HL=new Map;var ZV="firestore.googleapis.com",qL=!0,Z_=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZV,this.ssl=qL}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:qL;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$V;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NK)throw new Y($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}M7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XV((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Fl=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Z_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Z_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new yD;switch(r.type){case"firstParty":return new ID(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return C(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=HL.get(t);r&&(te("ComponentProvider","Removing Datastore"),HL.delete(t),r.terminate())})(this),Promise.resolve()}};function e2(n,e,t,r={}){var i;n=Ff(n,Fl);let s=no(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s&&(ry(`https://${c}`),iy("Firestore",!0)),o.host!==ZV&&o.host!==c&&Dl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let d=Object.assign(Object.assign({},o),{host:c,ssl:s,emulatorOptions:r});if(!ai(d,a)&&(n._setSettings(d),r.mockUserToken)){let h,g;if(typeof r.mockUserToken=="string")h=r.mockUserToken,g=Qt.MOCK_USER;else{h=NM(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let I=r.mockUserToken.sub||r.mockUserToken.user_id;if(!I)throw new Y($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Qt(I)}n._authCredentials=new _D(new U_(h,g))}}var Ll=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},wn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Io(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Gf(t,n._jsonSchema))return new n(e,r||null,new Ie(gt.fromString(t.referencePath)))}};wn._jsonSchemaVersion="firestore/documentReference/1.0",wn._jsonSchema={type:Pt("string",wn._jsonSchemaVersion),referencePath:Pt("string")};var Io=class n extends Ll{constructor(e,t,r){super(e,t,nK(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new Ie(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function t2(n,e,...t){if(n=Et(n),YL("collection","path",e),n instanceof Fl){let r=gt.fromString(e,...t);return gL(r),new Io(n,null,r)}{if(!(n instanceof wn||n instanceof Io))throw new Y($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(gt.fromString(e,...t));return gL(r),new Io(n.firestore,null,r)}}function nA(n,e,...t){if(n=Et(n),arguments.length===1&&(e=Of.newId()),YL("doc","path",e),n instanceof Fl){let r=gt.fromString(e,...t);return pL(r),new wn(n,null,new Ie(r))}{if(!(n instanceof wn||n instanceof Io))throw new Y($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(gt.fromString(e,...t));return pL(r),new wn(n.firestore,n instanceof Io?n.converter:null,new Ie(r))}}var zL="AsyncQueue",ev=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new X_(this,"async_queue_retry"),this.oc=()=>{let r=gD();r&&te(zL,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=gD();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=gD();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new us;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return C(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Wf(e))throw e;te(zL,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ya("INTERNAL UNHANDLED ERROR: ",GL(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=NS.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&Te(47125,{hc:GL(this.tc)})}verifyOperationInProgress(){}Pc(){return C(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function GL(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var Vl=class extends Fl{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ev,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return C(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ev(e),this._firestoreClient=void 0,yield e}})}};function n2(n,e){let t=typeof n=="object"?n:Da(),r=typeof n=="string"?n:e||q_,i=Lu(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=PM("firestore");s&&e2(i,...s)}return i}function rQ(n){if(n._terminated)throw new Y($.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||iQ(n),n._firestoreClient}function iQ(n){var e,t,r;let i=n._freezeSettings(),s=(function(a,c,d,h){return new SD(a,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,XV(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new OS(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var Ga=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ds.fromBase64String(e))}catch(t){throw new Y($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ds.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gf(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ga._jsonSchemaVersion="firestore/bytes/1.0",Ga._jsonSchema={type:Pt("string",Ga._jsonSchemaVersion),bytes:Pt("string")};var Ul=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Y($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var qf=class{constructor(e){this._methodName=e}};var Wa=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Y($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Y($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Gf(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Wa._jsonSchemaVersion="firestore/geoPoint/1.0",Wa._jsonSchema={type:Pt("string",Wa._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};var Ka=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gf(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new Y($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ka._jsonSchemaVersion="firestore/vectorValue/1.0",Ka._jsonSchema={type:Pt("string",Ka._jsonSchemaVersion),vectorValues:Pt("object")};var sQ=/^__.*__$/,FS=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new _i(e,this.data,this.fieldMask,t,this.fieldTransforms):new rc(e,this.data,t,this.fieldTransforms)}},tv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new _i(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function r2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ec:n})}}var LS=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return rv(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(r2(this.Ec)&&sQ.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},VS=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||cv(e)}Dc(e,t,r,i=!1){return new LS({Ec:e,methodName:t,bc:r,path:Zn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function rA(n){let e=n._freezeSettings(),t=cv(n._databaseId);return new VS(n._databaseId,!!e.ignoreUndefinedProperties,t)}function oQ(n,e,t,r,i,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);iA("Data must be an object, but it was:",o,r);let a=i2(r,o),c,d;if(s.merge)c=new mr(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let g of s.mergeFields){let I=US(e,g,t);if(!o.contains(I))throw new Y($.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);o2(h,I)||h.push(I)}c=new mr(h),d=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=o.fieldTransforms;return new FS(new gr(a),c,d)}var nv=class n extends qf{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function aQ(n,e,t,r){let i=n.Dc(1,e,t);iA("Data must be an object, but it was:",i,r);let s=[],o=gr.empty();ic(r,(c,d)=>{let h=sA(e,c,t);d=Et(d);let g=i.gc(h);if(d instanceof nv)s.push(h);else{let I=Jf(d,g);I!=null&&(s.push(h),o.set(h,I))}});let a=new mr(s);return new tv(o,a,i.fieldTransforms)}function cQ(n,e,t,r,i,s){let o=n.Dc(1,e,t),a=[US(e,r,t)],c=[i];if(s.length%2!=0)throw new Y($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<s.length;I+=2)a.push(US(e,s[I])),c.push(s[I+1]);let d=[],h=gr.empty();for(let I=a.length-1;I>=0;--I)if(!o2(d,a[I])){let S=a[I],P=c[I];P=Et(P);let U=o.gc(S);if(P instanceof nv)d.push(S);else{let O=Jf(P,U);O!=null&&(d.push(S),h.set(S,O))}}let g=new mr(d);return new tv(h,g,o.fieldTransforms)}function uQ(n,e,t,r=!1){return Jf(t,n.Dc(r?4:3,e))}function Jf(n,e){if(s2(n=Et(n)))return iA("Unsupported field value:",e,n),i2(n,e);if(n instanceof qf)return(function(r,i){if(!r2(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let c=Jf(a,i.yc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=Et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dK(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=st.fromDate(r);return{timestampValue:KD(i.serializer,s)}}if(r instanceof st){let s=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:KD(i.serializer,s)}}if(r instanceof Wa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ga)return{bytesValue:vK(i.serializer,r._byteString)};if(r instanceof wn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:jV(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ka)return(function(o,a){return{mapValue:{fields:{[QS]:{stringValue:YS},[Uf]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.wc("VectorValues must only contain numeric values.");return tA(a.serializer,d)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${av(r)}`)})(n,e)}function i2(n,e){let t={};return fV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ic(n,(r,i)=>{let s=Jf(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function s2(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof st||n instanceof Wa||n instanceof Ga||n instanceof wn||n instanceof qf||n instanceof Ka)}function iA(n,e,t){if(!s2(t)||!JL(t)){let r=av(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function US(n,e,t){if((e=Et(e))instanceof Ul)return e._internalPath;if(typeof e=="string")return sA(n,e);throw rv("Field path arguments must be of type string or ",n,!1,void 0,t)}var lQ=new RegExp("[~\\*/\\[\\]]");function sA(n,e,t){if(e.search(lQ)>=0)throw rv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ul(...e.split("."))._internalPath}catch{throw rv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rv(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Y($.INVALID_ARGUMENT,a+n+c)}function o2(n,e){return n.some(t=>t.isEqual(e))}var iv=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new jS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(hv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},jS=class extends iv{data(){return super.data()}};function hv(n,e){return typeof e=="string"?sA(n,e):e instanceof Ul?e._internalPath:e._delegate._internalPath}var zf=class{},sv=class extends zf{};function a2(n,e,...t){let r=[];e instanceof zf&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(c=>c instanceof BS).length,a=s.filter(c=>c instanceof ov).length;if(o>1||o>0&&a>0)throw new Y($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var ov=class n extends sv{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return l2(e._query,t),new Ll(e.firestore,e.converter,jD(e._query,t))}_parse(e){let t=rA(e.firestore);return(function(s,o,a,c,d,h,g){let I;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Y($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){KL(g,h);let P=[];for(let U of g)P.push(WL(c,s,U));I={arrayValue:{values:P}}}else I=WL(c,s,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||KL(g,h),I=uQ(a,o,g,h==="in"||h==="not-in");return $t.create(d,h,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function c2(n,e,t){let r=e,i=hv("where",n);return ov._create(i,r,t)}var BS=class n extends zf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:hs.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)l2(o,c),o=jD(o,c)})(e._query,t),new Ll(e.firestore,e.converter,jD(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var $S=class n extends sv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,s,o){if(i.startAt!==null)throw new Y($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Y($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ec(s,o)})(e._query,this._field,this._direction);return new Ll(e.firestore,e.converter,(function(i,s){let o=i.explicitOrderBy.concat([s]);return new To(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function u2(n,e="asc"){let t=e,r=hv("orderBy",n);return $S._create(r,t)}function WL(n,e,t){if(typeof(t=Et(t))=="string"){if(t==="")throw new Y($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SV(e)&&t.indexOf("/")!==-1)throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(gt.fromString(t));if(!Ie.isDocumentKey(r))throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wL(n,new Ie(r))}if(t instanceof wn)return wL(n,t._key);throw new Y($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${av(t)}.`)}function KL(n,e){if(!Array.isArray(n)||n.length===0)throw new Y($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function l2(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Y($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function dQ(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var wl=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},bl=class n extends iv{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Cl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(hv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};bl._jsonSchemaVersion="firestore/documentSnapshot/1.0",bl._jsonSchema={type:Pt("string",bl._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};var Cl=class extends bl{data(e={}){return super.data(e)}},kf=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new wl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Cl(this._firestore,this._userDataWriter,r.key,r,new wl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Y($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Cl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new wl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Cl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new wl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:hQ(a.type),doc:c,oldIndex:d,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Of.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function hQ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:n})}}kf._jsonSchemaVersion="firestore/querySnapshot/1.0",kf._jsonSchema={type:Pt("string",kf._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};function d2(n,e,t,...r){n=Ff(n,wn);let i=Ff(n.firestore,Vl),s=rA(i),o;return o=typeof(e=Et(e))=="string"||e instanceof Ul?cQ(s,"updateDoc",n._key,e,t,r):aQ(s,"updateDoc",n._key,e),oA(i,[o.toMutation(n._key,ls.exists(!0))])}function h2(n){return oA(Ff(n.firestore,Vl),[new Bf(n._key,ls.none())])}function f2(n,e){let t=Ff(n.firestore,Vl),r=nA(n),i=dQ(n.converter,e);return oA(t,[oQ(rA(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ls.exists(!1))]).then(()=>r)}function oA(n,e){return(function(r,i){let s=new us;return r.asyncQueue.enqueueAndForget(()=>C(null,null,function*(){return KK(yield nQ(r),i,s)})),s.promise})(rQ(n),e)}(function(e,t=!0){(function(i){jl=i})(io),Or(new En("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Vl(new vD(r.getProvider("auth-internal")),new wD(o,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Y($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new AD(d.options.projectId,h)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ht(lL,dL,e),ht(lL,dL,"esm2017")})();var sc=class{constructor(e){return e}},p2="firestore",aA=class{constructor(){return Uu(p2)}};var cA=new ee("angularfire2.firestore-instances");function fQ(n,e){let t=Vh(p2,n,e);return t&&new sc(t)}function pQ(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new sc(r)}}var gQ={provide:aA,deps:[[new Wn,cA]]},mQ={provide:sc,useFactory:fQ,deps:[[new Wn,cA],zi]};function g2(n,...e){return ht("angularfire",so.full,"fst"),$n([mQ,gQ,{provide:cA,useFactory:pQ(n),multi:!0,deps:[Ge,Tt,oo,Aa,[new Wn,tf],[new Wn,ju],...e]}])}var fv=ft(oL,!0);var m2=ft(iL,!0);var uA=ft(f2,!0,2);var lA=ft(t2,!0,2);var y2=ft(h2,!0,2);var pv=ft(nA,!0,2);var _2=ft(n2,!0);var gv=ft(u2,!0,2),mv=ft(a2,!0,2);var v2=ft(d2,!0,2);var dA=ft(c2,!0,2);var E2={production:!1,firebase:{apiKey:"AIzaSyBhfFnuSwiVvRPOmqVxC0BUU8ZvMUGiye0",authDomain:"sistema-evaluacion-5b6eb.firebaseapp.com",projectId:"sistema-evaluacion-5b6eb",storageBucket:"sistema-evaluacion-5b6eb.firebasestorage.app",messagingSenderId:"858778646472",appId:"1:858778646472:web:2aaf997dac54ce3732b2fd"}};var P2=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(he(Js),he(Li))};static \u0275dir=et({type:n})}return n})(),Dv=(()=>{class n extends P2{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Nr(n)))(i||n)}})();static \u0275dir=et({type:n,features:[en]})}return n})(),ql=new ee("");var yQ={provide:ql,useExisting:gn(()=>So),multi:!0};function _Q(){let n=lr()?lr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var vQ=new ee(""),So=(()=>{class n extends P2{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!_Q())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(he(Js),he(Li),he(vQ,8))};static \u0275dir=et({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&je("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[ur([yQ]),en]})}return n})();function yA(n){return n==null||_A(n)===0}function _A(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var zl=new ee(""),ip=new ee(""),EQ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,qe=class{static min(e){return N2(e)}static max(e){return IQ(e)}static required(e){return wQ(e)}static requiredTrue(e){return TQ(e)}static email(e){return bQ(e)}static minLength(e){return CQ(e)}static maxLength(e){return DQ(e)}static pattern(e){return SQ(e)}static nullValidator(e){return _v()}static compose(e){return L2(e)}static composeAsync(e){return U2(e)}};function N2(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function IQ(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function wQ(n){return yA(n.value)?{required:!0}:null}function TQ(n){return n.value===!0?null:{required:!0}}function bQ(n){return yA(n.value)||EQ.test(n.value)?null:{email:!0}}function CQ(n){return e=>{let t=e.value?.length??_A(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function DQ(n){return e=>{let t=e.value?.length??_A(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function SQ(n){if(!n)return _v;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(yA(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function _v(n){return null}function x2(n){return n!=null}function M2(n){return Xs(n)?at(n):n}function k2(n){let e={};return n.forEach(t=>{e=t!=null?H(H({},e),t):e}),Object.keys(e).length===0?null:e}function O2(n,e){return e.map(t=>t(n))}function AQ(n){return!n.validate}function F2(n){return n.map(e=>AQ(e)?e:t=>e.validate(t))}function L2(n){if(!n)return null;let e=n.filter(x2);return e.length==0?null:function(t){return k2(O2(t,e))}}function V2(n){return n!=null?L2(F2(n)):null}function U2(n){if(!n)return null;let e=n.filter(x2);return e.length==0?null:function(t){let r=O2(t,e).map(M2);return gE(r).pipe(ae(k2))}}function j2(n){return n!=null?U2(F2(n)):null}function I2(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function B2(n){return n._rawValidators}function $2(n){return n._rawAsyncValidators}function hA(n){return n?Array.isArray(n)?n:[n]:[]}function vv(n,e){return Array.isArray(n)?n.includes(e):n===e}function w2(n,e){let t=hA(e);return hA(n).forEach(i=>{vv(t,i)||t.push(i)}),t}function T2(n,e){return hA(e).filter(t=>!vv(n,t))}var Ev=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=V2(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=j2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},tr=class extends Ev{name;get formDirective(){return null}get path(){return null}},oc=class extends Ev{_parent=null;name=null;valueAccessor=null},Iv=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},RQ={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},YIe=se(H({},RQ),{"[class.ng-submitted]":"isSubmitted"}),Gl=(()=>{class n extends Iv{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(he(oc,2))};static \u0275dir=et({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&vt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[en]})}return n})(),Sv=(()=>{class n extends Iv{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(he(tr,10))};static \u0275dir=et({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&vt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[en]})}return n})();var Xf="VALID",yv="INVALID",Bl="PENDING",Zf="DISABLED",Do=class{},wv=class extends Do{value;source;constructor(e,t){super(),this.value=e,this.source=t}},ep=class extends Do{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},tp=class extends Do{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},$l=class extends Do{status;source;constructor(e,t){super(),this.status=e,this.source=t}},fA=class extends Do{source;constructor(e){super(),this.source=e}},rp=class extends Do{source;constructor(e){super(),this.source=e}};function vA(n){return(Av(n)?n.validators:n)||null}function PQ(n){return Array.isArray(n)?V2(n):n||null}function EA(n,e){return(Av(e)?e.asyncValidators:n)||null}function NQ(n){return Array.isArray(n)?j2(n):n||null}function Av(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function H2(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Z(1e3,"");if(!r[t])throw new Z(1001,"")}function q2(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Z(1002,"")})}var Hl=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return tn(this.statusReactive)}set status(e){tn(()=>this.statusReactive.set(e))}_status=Eu(()=>this.statusReactive());statusReactive=Gn(void 0);get valid(){return this.status===Xf}get invalid(){return this.status===yv}get pending(){return this.status==Bl}get disabled(){return this.status===Zf}get enabled(){return this.status!==Zf}errors;get pristine(){return tn(this.pristineReactive)}set pristine(e){tn(()=>this.pristineReactive.set(e))}_pristine=Eu(()=>this.pristineReactive());pristineReactive=Gn(!0);get dirty(){return!this.pristine}get touched(){return tn(this.touchedReactive)}set touched(e){tn(()=>this.touchedReactive.set(e))}_touched=Eu(()=>this.touchedReactive());touchedReactive=Gn(!1);get untouched(){return!this.touched}_events=new Ft;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(w2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(w2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(T2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(T2(e,this._rawAsyncValidators))}hasValidator(e){return vv(this._rawValidators,e)}hasAsyncValidator(e){return vv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(se(H({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new tp(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new tp(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(se(H({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ep(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new ep(!0,r))}markAsPending(e={}){this.status=Bl;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new $l(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(se(H({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Zf,this.errors=null,this._forEachChild(i=>{i.disable(se(H({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new wv(this.value,r)),this._events.next(new $l(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(se(H({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Xf,this._forEachChild(r=>{r.enable(se(H({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(se(H({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xf||this.status===Bl)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new wv(this.value,t)),this._events.next(new $l(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(se(H({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zf:Xf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Bl,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=M2(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new $l(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new _t,this.statusChanges=new _t}_calculateStatus(){return this._allControlsDisabled()?Zf:this.errors?yv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bl)?Bl:this._anyControlsHaveStatus(yv)?yv:Xf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new ep(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new tp(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Av(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=PQ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=NQ(this._rawAsyncValidators)}},Tv=class extends Hl{constructor(e,t,r){super(vA(t),EA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){q2(this,!0,e),Object.keys(e).forEach(r=>{H2(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new rp(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var pA=class extends Tv{};var Rv=new ee("",{providedIn:"root",factory:()=>Pv}),Pv="always";function Nv(n,e){return[...e.path,n]}function gA(n,e,t=Pv){IA(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),MQ(n,e),OQ(n,e),kQ(n,e),xQ(n,e)}function b2(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Cv(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function bv(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function xQ(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function IA(n,e){let t=B2(n);e.validator!==null?n.setValidators(I2(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=$2(n);e.asyncValidator!==null?n.setAsyncValidators(I2(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();bv(e._rawValidators,i),bv(e._rawAsyncValidators,i)}function Cv(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=B2(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=$2(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return bv(e._rawValidators,r),bv(e._rawAsyncValidators,r),t}function MQ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&z2(n,e)})}function kQ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&z2(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function z2(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function OQ(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function FQ(n,e){n==null,IA(n,e)}function LQ(n,e){return Cv(n,e)}function G2(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function VQ(n){return Object.getPrototypeOf(n.constructor)===Dv}function UQ(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function W2(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===So?t=s:VQ(s)?r=s:i=s}),i||r||t||null}function jQ(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function C2(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function D2(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var np=class extends Hl{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(vA(t),EA(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Av(t)&&(t.nonNullable||t.initialValueIsDefault)&&(D2(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new rp(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){C2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){C2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){D2(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var BQ=n=>n instanceof np,$Q=(()=>{class n extends tr{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Nv(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Nr(n)))(i||n)}})();static \u0275dir=et({type:n,standalone:!1,features:[en]})}return n})();var HQ={provide:oc,useExisting:gn(()=>wA)},S2=Promise.resolve(),wA=(()=>{class n extends oc{_changeDetectorRef;callSetDisabledState;control=new np;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new _t;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=W2(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),G2(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){gA(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){S2.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Pw(r);S2.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Nv(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(he(tr,9),he(zl,10),he(ip,10),he(ql,10),he(Iu,8),he(Rv,8))};static \u0275dir=et({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ur([HQ]),en,Fi]})}return n})();var xv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=et({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),qQ={provide:ql,useExisting:gn(()=>TA),multi:!0},TA=(()=>{class n extends Dv{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Nr(n)))(i||n)}})();static \u0275dir=et({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&je("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[ur([qQ]),en]})}return n})();var K2=new ee("");var zQ={provide:tr,useExisting:gn(()=>Wl)},Wl=(()=>{class n extends tr{callSetDisabledState;get submitted(){return tn(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Eu(()=>this._submittedReactive());_submittedReactive=Gn(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new _t;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Cv(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return gA(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){b2(t.control||null,t,!1),jQ(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),UQ(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new fA(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(b2(r||null,t),BQ(i)&&(gA(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);FQ(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&LQ(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){IA(this.form,this),this._oldForm&&Cv(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(he(zl,10),he(ip,10),he(Rv,8))};static \u0275dir=et({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&je("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ur([zQ]),en,Fi]})}return n})(),GQ={provide:tr,useExisting:gn(()=>Mv)},Mv=(()=>{class n extends $Q{name=null;constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){Q2(this._parent)}static \u0275fac=function(r){return new(r||n)(he(tr,13),he(zl,10),he(ip,10))};static \u0275dir=et({type:n,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[ur([GQ]),en]})}return n})(),WQ={provide:tr,useExisting:gn(()=>kv)},kv=(()=>{class n extends tr{_parent;name=null;constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){Q2(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Nv(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(r){return new(r||n)(he(tr,13),he(zl,10),he(ip,10))};static \u0275dir=et({type:n,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[ur([WQ]),en]})}return n})();function Q2(n){return!(n instanceof Mv)&&!(n instanceof Wl)&&!(n instanceof kv)}var KQ={provide:oc,useExisting:gn(()=>sp)},sp=(()=>{class n extends oc{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new _t;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=W2(this,s)}ngOnChanges(t){this._added||this._setUpControl(),G2(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Nv(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(he(tr,13),he(zl,10),he(ip,10),he(ql,10),he(K2,8))};static \u0275dir=et({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[ur([KQ]),en,Fi]})}return n})();var QQ={provide:ql,useExisting:gn(()=>Kl),multi:!0};function Y2(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function YQ(n){return n.split(":")[0]}var Kl=(()=>{class n extends Dv{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=j(Ui).injector;destroyRef=j(Rr);cdr=j(Iu);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,dm({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=Y2(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=YQ(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Nr(n)))(i||n)}})();static \u0275dir=et({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&je("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ur([QQ]),en]})}return n})(),Ov=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(Y2(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(he(Li),he(Js),he(Kl,9))};static \u0275dir=et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),JQ={provide:ql,useExisting:gn(()=>J2),multi:!0};function A2(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function XQ(n){return n.split(":")[0]}var J2=(()=>{class n extends Dv{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],d=this._getOptionValue(c.value);i.push(d)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let d=this._getOptionValue(c.value);i.push(d)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=XQ(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Nr(n)))(i||n)}})();static \u0275dir=et({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&je("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ur([JQ]),en]})}return n})(),Fv=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(A2(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(A2(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(he(Li),he(Js),he(J2,9))};static \u0275dir=et({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function ZQ(n){return typeof n=="number"?n:parseFloat(n)}var eY=(()=>{class n{_validator=_v;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):_v,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=et({type:n,features:[Fi]})}return n})();var tY={provide:zl,useExisting:gn(()=>bA),multi:!0},bA=(()=>{class n extends eY{min;inputName="min";normalizeInput=t=>ZQ(t);createValidator=t=>N2(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Nr(n)))(i||n)}})();static \u0275dir=et({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&mm("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[ur([tY]),en]})}return n})();var X2=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Vi({type:n});static \u0275inj=Yr({})}return n})(),mA=class extends Hl{constructor(e,t,r){super(vA(t),EA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){q2(this,!1,e),e.forEach((r,i)=>{H2(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new rp(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function R2(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Lv=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),s={};return R2(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Tv(i,s)}record(t,r=null){let i=this._reduceControls(t);return new pA(i,r)}control(t,r,i){let s={};return this.useNonNullable?(R2(r)?s=r:(s.validators=r,s.asyncValidators=i),new np(t,se(H({},s),{nonNullable:!0}))):new np(t,r,i)}array(t,r,i){let s=t.map(o=>this._createControl(o));return new mA(s,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof np)return t;if(t instanceof Hl)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,i,s)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Z2=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Rv,useValue:t.callSetDisabledState??Pv}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Vi({type:n});static \u0275inj=Yr({imports:[X2]})}return n})(),Vv=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:K2,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Rv,useValue:t.callSetDisabledState??Pv}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Vi({type:n});static \u0275inj=Yr({imports:[X2]})}return n})();var jr=class n{auth=j(Fa);user$=Xk(this.auth);currentUser=null;constructor(){this.user$.subscribe(e=>{this.currentUser=e})}register(e,t,r){return C(this,null,function*(){try{let i=yield Zk(this.auth,e,t);i.user&&(yield rO(i.user,{displayName:r}))}catch(i){throw console.error("Error al registrar:",i),i}})}login(e,t){return C(this,null,function*(){try{yield tO(this.auth,e,t)}catch(r){throw console.error("Error al iniciar sesi\xF3n:",r),r}})}logout(){return C(this,null,function*(){try{yield nO(this.auth)}catch(e){throw console.error("Error al cerrar sesi\xF3n:",e),e}})}getCurrentUser(){return this.currentUser}getUser(){return this.user$}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};function nY(n,e){n&1&&(k(0,"span",14),V(1," Ingresa un correo v\xE1lido "),M())}function rY(n,e){n&1&&(k(0,"span",14),V(1," La contrase\xF1a debe tener al menos 6 caracteres "),M())}function iY(n,e){if(n&1&&(k(0,"div",14),V(1),M()),n&2){let t=Ke(2);B(),it(" ",t.errorMessage," ")}}function sY(n,e){if(n&1){let t=xr();k(0,"form",6),je("ngSubmit",function(){Pn(t);let i=Ke();return Nn(i.onLogin())}),k(1,"div",7)(2,"label",8),V(3,"Correo Electr\xF3nico"),M(),rt(4,"input",9),Pe(5,nY,2,0,"span",10),M(),k(6,"div",7)(7,"label",11),V(8,"Contrase\xF1a"),M(),rt(9,"input",12),Pe(10,rY,2,0,"span",10),M(),Pe(11,iY,2,1,"div",10),k(12,"button",13),V(13),M()()}if(n&2){let t,r,i,s,o=Ke();X("formGroup",o.loginForm),B(4),vt("error",((t=o.loginForm.get("email"))==null?null:t.invalid)&&((t=o.loginForm.get("email"))==null?null:t.touched)),B(),X("ngIf",((r=o.loginForm.get("email"))==null?null:r.invalid)&&((r=o.loginForm.get("email"))==null?null:r.touched)),B(4),vt("error",((i=o.loginForm.get("password"))==null?null:i.invalid)&&((i=o.loginForm.get("password"))==null?null:i.touched)),B(),X("ngIf",((s=o.loginForm.get("password"))==null?null:s.invalid)&&((s=o.loginForm.get("password"))==null?null:s.touched)),B(),X("ngIf",o.errorMessage),B(),X("disabled",o.loading||o.loginForm.invalid),B(),it(" ",o.loading?"Iniciando sesi\xF3n...":"Iniciar Sesi\xF3n"," ")}}function oY(n,e){n&1&&(k(0,"span",14),V(1," El nombre debe tener al menos 3 caracteres "),M())}function aY(n,e){n&1&&(k(0,"span",14),V(1," Ingresa un correo v\xE1lido "),M())}function cY(n,e){n&1&&(k(0,"span",14),V(1," La contrase\xF1a debe tener al menos 6 caracteres "),M())}function uY(n,e){n&1&&(k(0,"span",14),V(1," Confirma tu contrase\xF1a "),M())}function lY(n,e){if(n&1&&(k(0,"div",14),V(1),M()),n&2){let t=Ke(2);B(),it(" ",t.errorMessage," ")}}function dY(n,e){if(n&1){let t=xr();k(0,"form",6),je("ngSubmit",function(){Pn(t);let i=Ke();return Nn(i.onRegister())}),k(1,"div",7)(2,"label",15),V(3,"Nombre Completo"),M(),rt(4,"input",16),Pe(5,oY,2,0,"span",10),M(),k(6,"div",7)(7,"label",17),V(8,"Correo Electr\xF3nico"),M(),rt(9,"input",18),Pe(10,aY,2,0,"span",10),M(),k(11,"div",7)(12,"label",19),V(13,"Contrase\xF1a"),M(),rt(14,"input",20),Pe(15,cY,2,0,"span",10),M(),k(16,"div",7)(17,"label",21),V(18,"Confirmar Contrase\xF1a"),M(),rt(19,"input",22),Pe(20,uY,2,0,"span",10),M(),Pe(21,lY,2,1,"div",10),k(22,"button",13),V(23),M()()}if(n&2){let t,r,i,s,o,a,c,d,h=Ke();X("formGroup",h.registerForm),B(4),vt("error",((t=h.registerForm.get("displayName"))==null?null:t.invalid)&&((t=h.registerForm.get("displayName"))==null?null:t.touched)),B(),X("ngIf",((r=h.registerForm.get("displayName"))==null?null:r.invalid)&&((r=h.registerForm.get("displayName"))==null?null:r.touched)),B(4),vt("error",((i=h.registerForm.get("email"))==null?null:i.invalid)&&((i=h.registerForm.get("email"))==null?null:i.touched)),B(),X("ngIf",((s=h.registerForm.get("email"))==null?null:s.invalid)&&((s=h.registerForm.get("email"))==null?null:s.touched)),B(4),vt("error",((o=h.registerForm.get("password"))==null?null:o.invalid)&&((o=h.registerForm.get("password"))==null?null:o.touched)),B(),X("ngIf",((a=h.registerForm.get("password"))==null?null:a.invalid)&&((a=h.registerForm.get("password"))==null?null:a.touched)),B(4),vt("error",((c=h.registerForm.get("confirmPassword"))==null?null:c.invalid)&&((c=h.registerForm.get("confirmPassword"))==null?null:c.touched)),B(),X("ngIf",((d=h.registerForm.get("confirmPassword"))==null?null:d.invalid)&&((d=h.registerForm.get("confirmPassword"))==null?null:d.touched)),B(),X("ngIf",h.errorMessage),B(),X("disabled",h.loading||h.registerForm.invalid),B(),it(" ",h.loading?"Creando cuenta...":"Registrarse"," ")}}var Uv=class n{fb=j(Lv);authService=j(jr);router=j(vn);loginForm;registerForm;isLoginMode=!0;errorMessage="";loading=!1;constructor(){this.loginForm=this.fb.group({email:["",[qe.required,qe.email]],password:["",[qe.required,qe.minLength(6)]]}),this.registerForm=this.fb.group({displayName:["",[qe.required,qe.minLength(3)]],email:["",[qe.required,qe.email]],password:["",[qe.required,qe.minLength(6)]],confirmPassword:["",[qe.required]]})}toggleMode(){this.isLoginMode=!this.isLoginMode,this.errorMessage=""}onLogin(){return C(this,null,function*(){if(this.loginForm.invalid){this.errorMessage="Por favor, completa todos los campos correctamente.";return}this.loading=!0,this.errorMessage="";try{let{email:e,password:t}=this.loginForm.value;yield this.authService.login(e,t),this.router.navigate(["/evaluaciones"])}catch(e){this.errorMessage=this.getErrorMessage(e.code)}finally{this.loading=!1}})}onRegister(){return C(this,null,function*(){if(this.registerForm.invalid){this.errorMessage="Por favor, completa todos los campos correctamente.";return}let{password:e,confirmPassword:t}=this.registerForm.value;if(e!==t){this.errorMessage="Las contrase\xF1as no coinciden.";return}this.loading=!0,this.errorMessage="";try{let{displayName:r,email:i,password:s}=this.registerForm.value;yield this.authService.register(i,s,r),this.router.navigate(["/evaluaciones"])}catch(r){this.errorMessage=this.getErrorMessage(r.code)}finally{this.loading=!1}})}getErrorMessage(e){return{"auth/email-already-in-use":"Este correo electr\xF3nico ya est\xE1 registrado.","auth/invalid-email":"El correo electr\xF3nico no es v\xE1lido.","auth/operation-not-allowed":"Operaci\xF3n no permitida.","auth/weak-password":"La contrase\xF1a es demasiado d\xE9bil.","auth/user-disabled":"Esta cuenta ha sido deshabilitada.","auth/user-not-found":"No existe una cuenta con este correo.","auth/wrong-password":"Contrase\xF1a incorrecta.","auth/invalid-credential":"Credenciales inv\xE1lidas. Verifica tu correo y contrase\xF1a."}[e]||"Ocurri\xF3 un error. Int\xE9ntalo de nuevo."}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Kn({type:n,selectors:[["app-login"]],decls:14,vars:5,consts:[[1,"login-container"],[1,"login-card"],[1,"login-header"],["class","login-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"toggle-mode"],[3,"click"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","login-email"],["type","email","id","login-email","formControlName","email","placeholder","ejemplo@correo.com"],["class","error-message",4,"ngIf"],["for","login-password"],["type","password","id","login-password","formControlName","password","placeholder","M\xEDnimo 6 caracteres"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error-message"],["for","register-name"],["type","text","id","register-name","formControlName","displayName","placeholder","Tu nombre"],["for","register-email"],["type","email","id","register-email","formControlName","email","placeholder","ejemplo@correo.com"],["for","register-password"],["type","password","id","register-password","formControlName","password","placeholder","M\xEDnimo 6 caracteres"],["for","register-confirm"],["type","password","id","register-confirm","formControlName","confirmPassword","placeholder","Repite tu contrase\xF1a"]],template:function(t,r){t&1&&(k(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),V(4,"Sistema de Evaluaci\xF3n Online"),M(),k(5,"p"),V(6),M()(),Pe(7,sY,14,10,"form",3)(8,dY,24,16,"form",3),k(9,"div",4)(10,"p"),V(11),k(12,"a",5),je("click",function(){return r.toggleMode()}),V(13),M()()()()()),t&2&&(B(6),Qe(r.isLoginMode?"Inicia sesi\xF3n":"Crea tu cuenta"),B(),X("ngIf",r.isLoginMode),B(),X("ngIf",!r.isLoginMode),B(3),it(" ",r.isLoginMode?"\xBFNo tienes cuenta?":"\xBFYa tienes cuenta?"," "),B(2),it(" ",r.isLoginMode?"Reg\xEDstrate":"Inicia sesi\xF3n"," "))},dependencies:[ri,ji,Vv,xv,So,Gl,Sv,Wl,sp],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 10px 40px #0003;padding:40px;width:100%;max-width:450px}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;font-size:28px;margin-bottom:10px;font-weight:600}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:16px}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#333;font-weight:500;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px;transition:border-color .3s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%]{border-color:#e74c3c}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:12px;margin-top:4px}.btn[_ngcontent-%COMP%]{padding:14px 24px;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s;margin-top:10px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.toggle-mode[_ngcontent-%COMP%]{text-align:center;margin-top:20px;padding-top:20px;border-top:1px solid #e0e0e0}.toggle-mode[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}.toggle-mode[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;font-weight:600;cursor:pointer;text-decoration:none;margin-left:5px}.toggle-mode[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var Ao=class n{firestore=j(sc);evaluacionesCollection=lA(this.firestore,"evaluaciones");respuestasCollection=lA(this.firestore,"respuestas");crearEvaluacion(e){return C(this,null,function*(){try{let t=se(H({},e),{fechaCreacion:st.fromDate(new Date(e.fechaCreacion)),fechaLimite:st.fromDate(new Date(e.fechaLimite))});return(yield uA(this.evaluacionesCollection,t)).id}catch(t){throw console.error("Error al crear evaluaci\xF3n:",t),t}})}getEvaluacionesByUser(e){let t=mv(this.evaluacionesCollection,dA("userId","==",e),gv("fechaCreacion","desc"));return fv(t,{idField:"id"}).pipe(ae(r=>r.map(i=>se(H({},i),{fechaCreacion:i.fechaCreacion?.toDate(),fechaLimite:i.fechaLimite?.toDate()}))))}getTodasEvaluaciones(){let e=mv(this.evaluacionesCollection,gv("fechaCreacion","desc"));return fv(e,{idField:"id"}).pipe(ae(t=>t.map(r=>se(H({},r),{fechaCreacion:r.fechaCreacion?.toDate(),fechaLimite:r.fechaLimite?.toDate()}))))}getEvaluacionById(e){let t=pv(this.firestore,`evaluaciones/${e}`);return m2(t,{idField:"id"}).pipe(ae(r=>{if(r)return se(H({},r),{fechaCreacion:r.fechaCreacion?.toDate(),fechaLimite:r.fechaLimite?.toDate()})}))}actualizarEvaluacion(e,t){return C(this,null,function*(){try{let r=pv(this.firestore,`evaluaciones/${e}`),i=H({},t);t.fechaCreacion&&(i.fechaCreacion=st.fromDate(new Date(t.fechaCreacion))),t.fechaLimite&&(i.fechaLimite=st.fromDate(new Date(t.fechaLimite))),yield v2(r,i)}catch(r){throw console.error("Error al actualizar evaluaci\xF3n:",r),r}})}eliminarEvaluacion(e){return C(this,null,function*(){try{let t=pv(this.firestore,`evaluaciones/${e}`);yield y2(t)}catch(t){throw console.error("Error al eliminar evaluaci\xF3n:",t),t}})}buscarEvaluaciones(e,t){return this.getEvaluacionesByUser(t).pipe(ae(r=>r.filter(i=>i.titulo.toLowerCase().includes(e.toLowerCase())||i.categoria.toLowerCase().includes(e.toLowerCase())||i.descripcion.toLowerCase().includes(e.toLowerCase()))))}filtrarPorEstado(e,t){return this.getEvaluacionesByUser(t).pipe(ae(r=>r.filter(i=>i.estado===e)))}filtrarPorCategoria(e,t){return this.getEvaluacionesByUser(t).pipe(ae(r=>r.filter(i=>i.categoria===e)))}guardarRespuesta(e){return C(this,null,function*(){try{let t=se(H({},e),{fechaEntrega:st.fromDate(new Date(e.fechaEntrega))});return(yield uA(this.respuestasCollection,t)).id}catch(t){throw console.error("Error al guardar respuesta:",t),t}})}getRespuestasByEvaluacion(e){let t=mv(this.respuestasCollection,dA("evaluacionId","==",e),gv("fechaEntrega","desc"));return fv(t,{idField:"id"}).pipe(ae(r=>r.map(i=>se(H({},i),{fechaEntrega:i.fechaEntrega?.toDate()}))))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};function hY(n,e){if(n&1&&(k(0,"option",22),V(1),M()),n&2){let t=e.$implicit;X("value",t),B(),Qe(t)}}function fY(n,e){if(n&1){let t=xr();k(0,"button",23),je("click",function(){Pn(t);let i=Ke();return Nn(i.limpiarFiltros())}),V(1," Limpiar filtros "),M()}}function pY(n,e){n&1&&(k(0,"div",24)(1,"p"),V(2,"Cargando evaluaciones..."),M()())}function gY(n,e){if(n&1){let t=xr();k(0,"button",18),je("click",function(){Pn(t);let i=Ke(2);return Nn(i.crearNuevaEvaluacion())}),V(1," Crear Primera Evaluaci\xF3n "),M()}}function mY(n,e){if(n&1&&(k(0,"div",25)(1,"div",26),V(2,"\u{1F4CB}"),M(),k(3,"h2"),V(4),M(),k(5,"p"),V(6),M(),Pe(7,gY,2,0,"button",27),M()),n&2){let t=Ke();B(4),Qe(t.searchTerm||t.filtroEstado||t.filtroCategoria?"No se encontraron evaluaciones":"No tienes evaluaciones a\xFAn"),B(2),Qe(t.searchTerm||t.filtroEstado||t.filtroCategoria?"Intenta con otros criterios de b\xFAsqueda":"Comienza creando tu primera evaluaci\xF3n"),B(),X("ngIf",!t.searchTerm&&!t.filtroEstado&&!t.filtroCategoria)}}function yY(n,e){if(n&1){let t=xr();k(0,"div",30)(1,"div",31)(2,"h3"),V(3),M(),k(4,"span",32),V(5),M()(),k(6,"div",33)(7,"p",34),V(8),M(),k(9,"div",35)(10,"div",36)(11,"span",37),V(12,"Categor\xEDa:"),M(),k(13,"span",38),V(14),M()(),k(15,"div",36)(16,"span",37),V(17,"Puntaje m\xE1ximo:"),M(),k(18,"span",38),V(19),M()(),k(20,"div",36)(21,"span",37),V(22,"Fecha creaci\xF3n:"),M(),k(23,"span",38),V(24),M()(),k(25,"div",36)(26,"span",37),V(27,"Fecha l\xEDmite:"),M(),k(28,"span",38),V(29),M()(),k(30,"div",36)(31,"span",37),V(32,"Preguntas:"),M(),k(33,"span",38),V(34),M()()()(),k(35,"div",39)(36,"button",40),je("click",function(){let i=Pn(t).$implicit,s=Ke(2);return Nn(s.verEstadisticas(i.id))}),V(37," \u{1F4CA} Estad\xEDsticas "),M(),k(38,"button",41),je("click",function(){let i=Pn(t).$implicit,s=Ke(2);return Nn(s.editarEvaluacion(i.id))}),V(39," \u270F\uFE0F Editar "),M(),k(40,"button",42),je("click",function(){let i=Pn(t).$implicit,s=Ke(2);return Nn(s.eliminarEvaluacion(i))}),V(41," \u{1F5D1}\uFE0F Eliminar "),M()()()}if(n&2){let t=e.$implicit,r=Ke(2);B(3),Qe(t.titulo),B(),X("ngClass",r.getEstadoClass(t.estado)),B(),it(" ",t.estado," "),B(3),Qe(t.descripcion),B(6),Qe(t.categoria),B(5),it("",t.puntajeMaximo," pts"),B(5),Qe(r.formatearFecha(t.fechaCreacion)),B(5),Qe(r.formatearFecha(t.fechaLimite)),B(5),Qe((t.preguntas==null?null:t.preguntas.length)||0)}}function _Y(n,e){if(n&1&&(k(0,"div",28),Pe(1,yY,42,9,"div",29),M()),n&2){let t=Ke();B(),X("ngForOf",t.evaluacionesFiltradas)}}var jv=class n{evaluacionService=j(Ao);authService=j(jr);router=j(vn);evaluaciones=[];evaluacionesFiltradas=[];loading=!0;searchTerm="";filtroEstado="";filtroCategoria="";categorias=[];ngOnInit(){this.cargarEvaluaciones()}cargarEvaluaciones(){let e=this.authService.getCurrentUser();if(!e){this.router.navigate(["/login"]);return}this.loading=!0,this.evaluacionService.getEvaluacionesByUser(e.uid).subscribe({next:t=>{this.evaluaciones=t,this.evaluacionesFiltradas=t,this.loading=!1,this.categorias=[...new Set(t.map(r=>r.categoria))]},error:t=>{console.error("Error al cargar evaluaciones:",t),this.loading=!1}})}aplicarFiltros(){let e=[...this.evaluaciones];if(this.searchTerm.trim()){let t=this.searchTerm.toLowerCase();e=e.filter(r=>r.titulo.toLowerCase().includes(t)||r.descripcion.toLowerCase().includes(t)||r.categoria.toLowerCase().includes(t))}this.filtroEstado&&(e=e.filter(t=>t.estado===this.filtroEstado)),this.filtroCategoria&&(e=e.filter(t=>t.categoria===this.filtroCategoria)),this.evaluacionesFiltradas=e}onSearchChange(){this.aplicarFiltros()}onEstadoChange(){this.aplicarFiltros()}onCategoriaChange(){this.aplicarFiltros()}limpiarFiltros(){this.searchTerm="",this.filtroEstado="",this.filtroCategoria="",this.evaluacionesFiltradas=[...this.evaluaciones]}crearNuevaEvaluacion(){this.router.navigate(["/evaluaciones/nueva"])}editarEvaluacion(e){e&&this.router.navigate(["/evaluaciones/editar",e])}eliminarEvaluacion(e){return C(this,null,function*(){if(!(!e.id||!confirm(`\xBFEst\xE1s seguro de eliminar la evaluaci\xF3n "${e.titulo}"?`)))try{yield this.evaluacionService.eliminarEvaluacion(e.id)}catch(r){console.error("Error al eliminar:",r),alert("Error al eliminar la evaluaci\xF3n")}})}verEstadisticas(e){e&&this.router.navigate(["/evaluaciones/estadisticas",e])}getEstadoClass(e){return{activa:"estado-activa",cerrada:"estado-cerrada",borrador:"estado-borrador"}[e]||""}formatearFecha(e){return new Date(e).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})}logout(){return C(this,null,function*(){try{yield this.authService.logout(),this.router.navigate(["/login"])}catch(e){console.error("Error al cerrar sesi\xF3n:",e)}})}get userName(){return this.authService.getCurrentUser()?.displayName||"Usuario"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Kn({type:n,selectors:[["app-evaluaciones-list"]],decls:36,vars:9,consts:[[1,"evaluaciones-container"],[1,"header"],[1,"header-content"],[1,"user-info"],[1,"btn","btn-secondary",3,"click"],[1,"content"],[1,"toolbar"],[1,"search-box"],["type","text","placeholder","Buscar por t\xEDtulo, descripci\xF3n o categor\xEDa...",1,"search-input",3,"ngModelChange","ngModel"],[1,"search-icon"],[1,"filters"],[1,"filter-select",3,"ngModelChange","ngModel"],["value",""],["value","activa"],["value","borrador"],["value","cerrada"],[3,"value",4,"ngFor","ngForOf"],["class","btn btn-link",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],["class","loading",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","evaluaciones-grid",4,"ngIf"],[3,"value"],[1,"btn","btn-link",3,"click"],[1,"loading"],[1,"empty-state"],[1,"empty-icon"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"evaluaciones-grid"],["class","evaluacion-card",4,"ngFor","ngForOf"],[1,"evaluacion-card"],[1,"card-header"],[1,"estado-badge",3,"ngClass"],[1,"card-body"],[1,"descripcion"],[1,"info-grid"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"card-actions"],[1,"btn","btn-small","btn-info",3,"click"],[1,"btn","btn-small","btn-secondary",3,"click"],[1,"btn","btn-small","btn-danger",3,"click"]],template:function(t,r){t&1&&(k(0,"div",0)(1,"header",1)(2,"div",2)(3,"h1"),V(4,"Mis Evaluaciones"),M(),k(5,"div",3)(6,"span"),V(7),M(),k(8,"button",4),je("click",function(){return r.logout()}),V(9,"Cerrar Sesi\xF3n"),M()()()(),k(10,"div",5)(11,"div",6)(12,"div",7)(13,"input",8),vu("ngModelChange",function(s){return nh(r.searchTerm,s)||(r.searchTerm=s),s}),je("ngModelChange",function(){return r.onSearchChange()}),M(),k(14,"span",9),V(15,"\u{1F50D}"),M()(),k(16,"div",10)(17,"select",11),vu("ngModelChange",function(s){return nh(r.filtroEstado,s)||(r.filtroEstado=s),s}),je("ngModelChange",function(){return r.onEstadoChange()}),k(18,"option",12),V(19,"Todos los estados"),M(),k(20,"option",13),V(21,"Activa"),M(),k(22,"option",14),V(23,"Borrador"),M(),k(24,"option",15),V(25,"Cerrada"),M()(),k(26,"select",11),vu("ngModelChange",function(s){return nh(r.filtroCategoria,s)||(r.filtroCategoria=s),s}),je("ngModelChange",function(){return r.onCategoriaChange()}),k(27,"option",12),V(28,"Todas las categor\xEDas"),M(),Pe(29,hY,2,2,"option",16),M(),Pe(30,fY,2,0,"button",17),M(),k(31,"button",18),je("click",function(){return r.crearNuevaEvaluacion()}),V(32," \u2795 Nueva Evaluaci\xF3n "),M()(),Pe(33,pY,3,0,"div",19)(34,mY,8,3,"div",20)(35,_Y,2,1,"div",21),M()()),t&2&&(B(7),it("Hola, ",r.userName),B(6),_u("ngModel",r.searchTerm),B(4),_u("ngModel",r.filtroEstado),B(9),_u("ngModel",r.filtroCategoria),B(3),X("ngForOf",r.categorias),B(),X("ngIf",r.searchTerm||r.filtroEstado||r.filtroCategoria),B(3),X("ngIf",r.loading),B(),X("ngIf",!r.loading&&r.evaluacionesFiltradas.length===0),B(),X("ngIf",!r.loading&&r.evaluacionesFiltradas.length>0))},dependencies:[ri,oh,eo,ji,Z2,Ov,Fv,So,Kl,Gl,wA],styles:[".evaluaciones-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#f5f7fa}.header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:20px 0;box-shadow:0 2px 8px #0000001a}.header-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;justify-content:space-between;align-items:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:30px 20px}.toolbar[_ngcontent-%COMP%]{display:flex;gap:15px;margin-bottom:30px;flex-wrap:wrap;align-items:center}.search-box[_ngcontent-%COMP%]{position:relative;flex:1;min-width:250px}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 40px 12px 16px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px}.search-icon[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%)}.filters[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}.filter-select[_ngcontent-%COMP%]{padding:10px 14px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px;background:#fff;cursor:pointer}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#667eea;border:2px solid #667eea}.btn-secondary[_ngcontent-%COMP%]:hover{background:#667eea;color:#fff}.btn-link[_ngcontent-%COMP%]{background:transparent;color:#667eea;text-decoration:underline}.btn-small[_ngcontent-%COMP%]{padding:8px 12px;font-size:12px}.btn-info[_ngcontent-%COMP%]{background:#3498db;color:#fff}.btn-danger[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}.loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 20px}.empty-icon[_ngcontent-%COMP%]{font-size:80px;margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:10px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:30px}.evaluaciones-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px}.evaluacion-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden;transition:transform .3s,box-shadow .3s}.evaluacion-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 16px #00000026}.card-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #f0f0f0;display:flex;justify-content:space-between;align-items:start;gap:10px}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333;font-size:18px;flex:1}.estado-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase}.estado-activa[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.estado-cerrada[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.estado-borrador[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.card-body[_ngcontent-%COMP%]{padding:20px}.descripcion[_ngcontent-%COMP%]{color:#666;margin-bottom:20px;line-height:1.5}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.info-label[_ngcontent-%COMP%]{font-size:12px;color:#999;font-weight:500}.info-value[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:600}.card-actions[_ngcontent-%COMP%]{padding:15px 20px;border-top:1px solid #f0f0f0;display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap}@media (max-width: 768px){.toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-box[_ngcontent-%COMP%]{width:100%}.filters[_ngcontent-%COMP%]{flex-direction:column}.filter-select[_ngcontent-%COMP%]{width:100%}.evaluaciones-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:15px;text-align:center}}"]})};function vY(n,e){n&1&&(k(0,"span",31),V(1," El t\xEDtulo debe tener al menos 3 caracteres "),M())}function EY(n,e){n&1&&(k(0,"span",31),V(1," La categor\xEDa es obligatoria "),M())}function IY(n,e){n&1&&(k(0,"span",31),V(1," La descripci\xF3n debe tener al menos 10 caracteres "),M())}function wY(n,e){n&1&&(k(0,"span",31),V(1," La fecha l\xEDmite es obligatoria "),M())}function TY(n,e){if(n&1){let t=xr();k(0,"button",44),je("click",function(){Pn(t);let i=Ke().index,s=Ke();return Nn(s.eliminarPregunta(i))}),V(1," \u{1F5D1}\uFE0F Eliminar "),M()}}function bY(n,e){n&1&&(k(0,"span",31),V(1," La pregunta debe tener al menos 5 caracteres "),M())}function CY(n,e){n&1&&(k(0,"span",31),V(1," Debes agregar las opciones "),M())}function DY(n,e){if(n&1&&(k(0,"div",6)(1,"label",35),V(2,"Opciones (una por l\xEDnea) *"),M(),rt(3,"textarea",45),Pe(4,CY,2,0,"span",9),M()),n&2){let t,r,i=Ke(),s=i.$implicit,o=i.index;B(),X("for","opciones-"+o),B(2),vt("error",((t=s.get("opciones"))==null?null:t.invalid)&&((t=s.get("opciones"))==null?null:t.touched)),X("id","opciones-"+o),B(),X("ngIf",((r=s.get("opciones"))==null?null:r.invalid)&&((r=s.get("opciones"))==null?null:r.touched))}}function SY(n,e){n&1&&(k(0,"span",31),V(1," La respuesta correcta es obligatoria "),M())}function AY(n,e){if(n&1){let t=xr();k(0,"div",32)(1,"div",33)(2,"h3"),V(3),M(),Pe(4,TY,2,0,"button",34),M(),k(5,"div",6)(6,"label",35),V(7,"Texto de la Pregunta *"),M(),rt(8,"textarea",36),Pe(9,bY,2,0,"span",9),M(),k(10,"div",5)(11,"div",6)(12,"label",35),V(13,"Tipo de Pregunta *"),M(),k(14,"select",37)(15,"option",38),V(16,"Opci\xF3n M\xFAltiple"),M(),k(17,"option",39),V(18,"Verdadero/Falso"),M(),k(19,"option",40),V(20,"Respuesta Corta"),M()()(),k(21,"div",6)(22,"label",35),V(23,"Puntaje *"),M(),k(24,"input",41),je("change",function(){Pn(t);let i=Ke();return Nn(i.onPuntajeChange())}),M()()(),Pe(25,DY,5,5,"div",42),k(26,"div",6)(27,"label",35),V(28,"Respuesta Correcta *"),M(),rt(29,"input",43),Pe(30,SY,2,0,"span",9),M()()}if(n&2){let t,r,i,s,o,a,c,d=e.$implicit,h=e.index,g=Ke();X("formGroupName",h),B(3),it("Pregunta ",h+1),B(),X("ngIf",g.preguntas.length>1),B(2),X("for","texto-"+h),B(2),vt("error",((t=d.get("texto"))==null?null:t.invalid)&&((t=d.get("texto"))==null?null:t.touched)),X("id","texto-"+h),B(),X("ngIf",((r=d.get("texto"))==null?null:r.invalid)&&((r=d.get("texto"))==null?null:r.touched)),B(3),X("for","tipo-"+h),B(2),X("id","tipo-"+h),B(8),X("for","puntaje-"+h),B(2),vt("error",((i=d.get("puntaje"))==null?null:i.invalid)&&((i=d.get("puntaje"))==null?null:i.touched)),X("id","puntaje-"+h),B(),X("ngIf",((s=d.get("tipo"))==null?null:s.value)==="opcion-multiple"),B(2),X("for","respuesta-"+h),B(2),vt("error",((o=d.get("respuestaCorrecta"))==null?null:o.invalid)&&((o=d.get("respuestaCorrecta"))==null?null:o.touched)),X("id","respuesta-"+h)("placeholder",((a=d.get("tipo"))==null?null:a.value)==="opcion-multiple"?"Escribe la opci\xF3n correcta exactamente como aparece arriba":"Escribe la respuesta correcta"),B(),X("ngIf",((c=d.get("respuestaCorrecta"))==null?null:c.invalid)&&((c=d.get("respuestaCorrecta"))==null?null:c.touched))}}function RY(n,e){n&1&&(k(0,"div",46)(1,"p"),V(2,"No hay preguntas. Agrega al menos una pregunta."),M()())}function PY(n,e){if(n&1&&(k(0,"div",31),V(1),M()),n&2){let t=Ke();B(),it(" ",t.errorMessage," ")}}var op=class n{fb=j(Lv);evaluacionService=j(Ao);authService=j(jr);router=j(vn);route=j(dr);evaluacionForm;isEditMode=!1;evaluacionId=null;loading=!1;errorMessage="";constructor(){this.evaluacionForm=this.fb.group({titulo:["",[qe.required,qe.minLength(3)]],descripcion:["",[qe.required,qe.minLength(10)]],categoria:["",qe.required],fechaLimite:["",qe.required],puntajeMaximo:[0,[qe.required,qe.min(1)]],estado:["borrador",qe.required],preguntas:this.fb.array([])})}ngOnInit(){this.evaluacionId=this.route.snapshot.paramMap.get("id"),this.evaluacionId?(this.isEditMode=!0,this.cargarEvaluacion()):this.agregarPregunta()}get preguntas(){return this.evaluacionForm.get("preguntas")}crearPreguntaForm(e){return this.fb.group({id:[e?.id||this.generarId()],texto:[e?.texto||"",[qe.required,qe.minLength(5)]],tipo:[e?.tipo||"opcion-multiple",qe.required],opciones:[e?.opciones?.join(`
`)||"",qe.required],respuestaCorrecta:[e?.respuestaCorrecta||"",qe.required],puntaje:[e?.puntaje||1,[qe.required,qe.min(.5)]]})}agregarPregunta(){this.preguntas.push(this.crearPreguntaForm()),this.calcularPuntajeMaximo()}eliminarPregunta(e){this.preguntas.length>1?(this.preguntas.removeAt(e),this.calcularPuntajeMaximo()):alert("Debe haber al menos una pregunta")}calcularPuntajeMaximo(){let e=0;this.preguntas.controls.forEach(t=>{e+=Number(t.get("puntaje")?.value||0)}),this.evaluacionForm.patchValue({puntajeMaximo:e})}onPuntajeChange(){this.calcularPuntajeMaximo()}cargarEvaluacion(){this.evaluacionId&&(this.loading=!0,this.evaluacionService.getEvaluacionById(this.evaluacionId).subscribe({next:e=>{if(e){for(;this.preguntas.length;)this.preguntas.removeAt(0);e.preguntas?.forEach(i=>{this.preguntas.push(this.crearPreguntaForm(i))});let t=new Date(e.fechaLimite),r=this.formatearFechaParaInput(t);this.evaluacionForm.patchValue({titulo:e.titulo,descripcion:e.descripcion,categoria:e.categoria,fechaLimite:r,puntajeMaximo:e.puntajeMaximo,estado:e.estado})}this.loading=!1},error:e=>{console.error("Error al cargar evaluaci\xF3n:",e),this.errorMessage="Error al cargar la evaluaci\xF3n",this.loading=!1}}))}onSubmit(){return C(this,null,function*(){if(this.evaluacionForm.invalid){this.errorMessage="Por favor, completa todos los campos correctamente.",this.marcarCamposComoTocados();return}let e=this.authService.getCurrentUser();if(!e){this.router.navigate(["/login"]);return}this.loading=!0,this.errorMessage="";try{let t=this.evaluacionForm.value,r=t.preguntas.map(s=>({id:s.id,texto:s.texto,tipo:s.tipo,opciones:s.tipo==="opcion-multiple"?s.opciones.split(`
`).filter(o=>o.trim()):void 0,respuestaCorrecta:s.respuestaCorrecta,puntaje:Number(s.puntaje)})),i={titulo:t.titulo,descripcion:t.descripcion,categoria:t.categoria,fechaCreacion:this.isEditMode?new Date:new Date,fechaLimite:new Date(t.fechaLimite),puntajeMaximo:Number(t.puntajeMaximo),estado:t.estado,userId:e.uid,preguntas:r};this.isEditMode&&this.evaluacionId?yield this.evaluacionService.actualizarEvaluacion(this.evaluacionId,i):yield this.evaluacionService.crearEvaluacion(i),this.router.navigate(["/evaluaciones"])}catch(t){console.error("Error al guardar:",t),this.errorMessage="Error al guardar la evaluaci\xF3n. Int\xE9ntalo de nuevo."}finally{this.loading=!1}})}cancelar(){this.router.navigate(["/evaluaciones"])}marcarCamposComoTocados(){Object.keys(this.evaluacionForm.controls).forEach(e=>{this.evaluacionForm.get(e)?.markAsTouched()}),this.preguntas.controls.forEach(e=>{Object.keys(e.controls).forEach(t=>{e.get(t)?.markAsTouched()})})}generarId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}formatearFechaParaInput(e){let t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),s=String(e.getHours()).padStart(2,"0"),o=String(e.getMinutes()).padStart(2,"0");return`${t}-${r}-${i}T${s}:${o}`}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Kn({type:n,selectors:[["app-evaluacion-form"]],decls:63,vars:19,consts:[[1,"form-container"],[1,"form-header"],[1,"btn","btn-secondary",3,"click"],[1,"evaluacion-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-row"],[1,"form-group"],["for","titulo"],["type","text","id","titulo","formControlName","titulo","placeholder","Ej: Examen de Matem\xE1ticas - Unidad 1"],["class","error-message",4,"ngIf"],["for","categoria"],["type","text","id","categoria","formControlName","categoria","placeholder","Ej: Matem\xE1ticas, Historia, Ciencias"],["for","descripcion"],["id","descripcion","formControlName","descripcion","rows","3","placeholder","Describe el contenido y objetivos de esta evaluaci\xF3n..."],["for","fechaLimite"],["type","datetime-local","id","fechaLimite","formControlName","fechaLimite"],["for","estado"],["id","estado","formControlName","estado"],["value","borrador"],["value","activa"],["value","cerrada"],["for","puntajeMaximo"],["type","number","id","puntajeMaximo","formControlName","puntajeMaximo","readonly","",1,"readonly-input"],[1,"section-header"],["type","button",1,"btn","btn-success",3,"click"],["formArrayName","preguntas",1,"preguntas-list"],["class","pregunta-card",3,"formGroupName",4,"ngFor","ngForOf"],["class","empty-preguntas",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error-message"],[1,"pregunta-card",3,"formGroupName"],[1,"pregunta-header"],["type","button","class","btn btn-danger btn-small",3,"click",4,"ngIf"],[3,"for"],["formControlName","texto","rows","2","placeholder","Escribe la pregunta...",3,"id"],["formControlName","tipo",3,"id"],["value","opcion-multiple"],["value","verdadero-falso"],["value","respuesta-corta"],["type","number","formControlName","puntaje","step","0.5","min","0.5",3,"change","id"],["class","form-group",4,"ngIf"],["type","text","formControlName","respuestaCorrecta",3,"id","placeholder"],["type","button",1,"btn","btn-danger","btn-small",3,"click"],["formControlName","opciones","rows","4","placeholder",`Opci\xF3n 1
Opci\xF3n 2
Opci\xF3n 3
Opci\xF3n 4`,3,"id"],[1,"empty-preguntas"]],template:function(t,r){if(t&1&&(k(0,"div",0)(1,"div",1)(2,"h1"),V(3),M(),k(4,"button",2),je("click",function(){return r.cancelar()}),V(5,"\u2190 Volver"),M()(),k(6,"form",3),je("ngSubmit",function(){return r.onSubmit()}),k(7,"div",4)(8,"h2"),V(9,"Informaci\xF3n General"),M(),k(10,"div",5)(11,"div",6)(12,"label",7),V(13,"T\xEDtulo de la Evaluaci\xF3n *"),M(),rt(14,"input",8),Pe(15,vY,2,0,"span",9),M(),k(16,"div",6)(17,"label",10),V(18,"Categor\xEDa *"),M(),rt(19,"input",11),Pe(20,EY,2,0,"span",9),M()(),k(21,"div",6)(22,"label",12),V(23,"Descripci\xF3n *"),M(),rt(24,"textarea",13),Pe(25,IY,2,0,"span",9),M(),k(26,"div",5)(27,"div",6)(28,"label",14),V(29,"Fecha y Hora L\xEDmite *"),M(),rt(30,"input",15),Pe(31,wY,2,0,"span",9),M(),k(32,"div",6)(33,"label",16),V(34,"Estado *"),M(),k(35,"select",17)(36,"option",18),V(37,"Borrador"),M(),k(38,"option",19),V(39,"Activa"),M(),k(40,"option",20),V(41,"Cerrada"),M()()(),k(42,"div",6)(43,"label",21),V(44,"Puntaje M\xE1ximo"),M(),rt(45,"input",22),k(46,"small"),V(47,"Se calcula autom\xE1ticamente seg\xFAn las preguntas"),M()()()(),k(48,"div",4)(49,"div",23)(50,"h2"),V(51,"Preguntas"),M(),k(52,"button",24),je("click",function(){return r.agregarPregunta()}),V(53," \u2795 Agregar Pregunta "),M()(),k(54,"div",25),Pe(55,AY,31,21,"div",26)(56,RY,3,0,"div",27),M()(),Pe(57,PY,2,1,"div",9),k(58,"div",28)(59,"button",29),je("click",function(){return r.cancelar()}),V(60,"Cancelar"),M(),k(61,"button",30),V(62),M()()()()),t&2){let i,s,o,a,c,d,h,g;B(3),Qe(r.isEditMode?"Editar Evaluaci\xF3n":"Nueva Evaluaci\xF3n"),B(3),X("formGroup",r.evaluacionForm),B(8),vt("error",((i=r.evaluacionForm.get("titulo"))==null?null:i.invalid)&&((i=r.evaluacionForm.get("titulo"))==null?null:i.touched)),B(),X("ngIf",((s=r.evaluacionForm.get("titulo"))==null?null:s.invalid)&&((s=r.evaluacionForm.get("titulo"))==null?null:s.touched)),B(4),vt("error",((o=r.evaluacionForm.get("categoria"))==null?null:o.invalid)&&((o=r.evaluacionForm.get("categoria"))==null?null:o.touched)),B(),X("ngIf",((a=r.evaluacionForm.get("categoria"))==null?null:a.invalid)&&((a=r.evaluacionForm.get("categoria"))==null?null:a.touched)),B(4),vt("error",((c=r.evaluacionForm.get("descripcion"))==null?null:c.invalid)&&((c=r.evaluacionForm.get("descripcion"))==null?null:c.touched)),B(),X("ngIf",((d=r.evaluacionForm.get("descripcion"))==null?null:d.invalid)&&((d=r.evaluacionForm.get("descripcion"))==null?null:d.touched)),B(5),vt("error",((h=r.evaluacionForm.get("fechaLimite"))==null?null:h.invalid)&&((h=r.evaluacionForm.get("fechaLimite"))==null?null:h.touched)),B(),X("ngIf",((g=r.evaluacionForm.get("fechaLimite"))==null?null:g.invalid)&&((g=r.evaluacionForm.get("fechaLimite"))==null?null:g.touched)),B(24),X("ngForOf",r.preguntas.controls),B(),X("ngIf",r.preguntas.length===0),B(),X("ngIf",r.errorMessage),B(4),X("disabled",r.loading||r.evaluacionForm.invalid),B(),it(" ",r.loading?"Guardando...":r.isEditMode?"Actualizar Evaluaci\xF3n":"Crear Evaluaci\xF3n"," ")}},dependencies:[ri,eo,ji,Vv,xv,Ov,Fv,So,TA,Kl,Gl,Sv,bA,Wl,sp,Mv,kv],styles:[".form-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#f5f7fa;padding:30px 20px}.form-header[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto 30px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}.form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;font-size:32px;margin:0}.evaluacion-form[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.form-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:30px;margin-bottom:20px;box-shadow:0 2px 8px #0000001a}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;font-size:22px;margin:0 0 25px;padding-bottom:15px;border-bottom:2px solid #f0f0f0}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;padding-bottom:15px;border-bottom:2px solid #f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;padding:0;border:none}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#333;font-weight:600;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px;font-family:inherit;transition:border-color .3s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.error[_ngcontent-%COMP%]{border-color:#e74c3c}.form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#999;font-size:12px}.readonly-input[_ngcontent-%COMP%]{background-color:#f5f5f5;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:12px;margin-top:4px}.preguntas-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.pregunta-card[_ngcontent-%COMP%]{background:#f8f9fa;border:2px solid #e9ecef;border-radius:12px;padding:20px}.pregunta-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:2px solid #dee2e6}.pregunta-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#495057;font-size:18px}.empty-preguntas[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#999}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;max-width:1000px;margin:30px auto 0}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#667eea;border:2px solid #667eea}.btn-secondary[_ngcontent-%COMP%]:hover{background:#667eea;color:#fff}.btn-success[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn-success[_ngcontent-%COMP%]:hover{background:#218838}.btn-danger[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background:#c0392b}.btn-small[_ngcontent-%COMP%]{padding:8px 16px;font-size:14px}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@media (max-width: 768px){.form-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.btn[_ngcontent-%COMP%]{width:100%}.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:15px}.section-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}.pregunta-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}}"]})};function NY(n,e){n&1&&(k(0,"div",7)(1,"p"),V(2,"Cargando estad\xEDsticas..."),M()())}function xY(n,e){n&1&&(k(0,"div",17)(1,"div",18),V(2,"\u{1F4CA}"),M(),k(3,"h2"),V(4,"No hay respuestas registradas"),M(),k(5,"p"),V(6,"A\xFAn no hay estudiantes que hayan completado esta evaluaci\xF3n."),M()())}function MY(n,e){if(n&1&&(k(0,"div",35)(1,"div",36)(2,"span",37),V(3),M(),k(4,"span",38),V(5),M()(),k(6,"div",39),rt(7,"div",40),M()()),n&2){let t=e.$implicit,r=Ke(3);B(3),it("",t.rango," pts"),B(2),it("",t.cantidad," estudiantes"),B(2),mu("width",r.getBarWidth(t.cantidad))}}function kY(n,e){if(n&1&&(k(0,"tr")(1,"td"),V(2),M(),k(3,"td"),V(4),M(),k(5,"td")(6,"strong"),V(7),M(),V(8),M(),k(9,"td")(10,"span",41),V(11),M()(),k(12,"td")(13,"span",42),V(14),M()()()),n&2){let t=e.$implicit,r=Ke(3);B(2),Qe(t.userName),B(2),Qe(r.formatearFecha(t.fechaEntrega)),B(3),Qe(r.redondear(t.puntajeObtenido)),B(),it(" / ",r.evaluacion.puntajeMaximo),B(2),X("ngClass",t.estado==="completada"?"estado-activa":"estado-borrador"),B(),it(" ",t.estado," "),B(2),X("ngClass",t.puntajeObtenido>=r.evaluacion.puntajeMaximo*.6?"success":"danger"),B(),it(" ",r.redondear(t.puntajeObtenido/r.evaluacion.puntajeMaximo*100),"% ")}}function OY(n,e){if(n&1&&(k(0,"div",19)(1,"div",20)(2,"h3"),V(3,"\u{1F4C8} Resumen General"),M(),k(4,"div",21)(5,"div",22)(6,"span",23),V(7,"Total de respuestas:"),M(),k(8,"span",24),V(9),M()(),k(10,"div",22)(11,"span",23),V(12,"Promedio general:"),M(),k(13,"span",24),V(14),M()(),k(15,"div",22)(16,"span",23),V(17,"Puntaje m\xE1s alto:"),M(),k(18,"span",25),V(19),M()(),k(20,"div",22)(21,"span",23),V(22,"Puntaje m\xE1s bajo:"),M(),k(23,"span",26),V(24),M()()()(),k(25,"div",20)(26,"h3"),V(27,"\u2713 Aprobaci\xF3n"),M(),k(28,"div",21)(29,"div",22)(30,"span",23),V(31,"Aprobados:"),M(),k(32,"span",25),V(33),M()(),k(34,"div",22)(35,"span",23),V(36,"Reprobados:"),M(),k(37,"span",26),V(38),M()()(),k(39,"div",27),rt(40,"div",28)(41,"div",29),M()(),k(42,"div",30)(43,"h3"),V(44,"\u{1F4CA} Distribuci\xF3n de Puntajes"),M(),k(45,"div",31),Pe(46,MY,8,4,"div",32),M()(),k(47,"div",30)(48,"h3"),V(49,"\u{1F4DD} Respuestas Individuales"),M(),k(50,"div",33)(51,"table")(52,"thead")(53,"tr")(54,"th"),V(55,"Estudiante"),M(),k(56,"th"),V(57,"Fecha de Entrega"),M(),k(58,"th"),V(59,"Puntaje"),M(),k(60,"th"),V(61,"Estado"),M(),k(62,"th"),V(63,"Porcentaje"),M()()(),k(64,"tbody"),Pe(65,kY,15,8,"tr",34),M()()()()()),n&2){let t=Ke(2);B(9),Qe(t.estadisticas.totalRespuestas),B(5),yu("",t.redondear(t.estadisticas.promedioGeneral)," / ",t.evaluacion.puntajeMaximo),B(5),Qe(t.redondear(t.estadisticas.puntajeMaximo)),B(5),Qe(t.redondear(t.estadisticas.puntajeMinimo)),B(9),yu("",t.estadisticas.aprobados," (",t.redondear(t.estadisticas.porcentajeAprobacion),"%)"),B(5),yu("",t.estadisticas.reprobados," (",t.redondear(100-t.estadisticas.porcentajeAprobacion),"%)"),B(2),mu("width",t.estadisticas.porcentajeAprobacion+"%"),B(),mu("width",100-t.estadisticas.porcentajeAprobacion+"%"),B(5),X("ngForOf",t.estadisticas.distribucionPuntajes),B(19),X("ngForOf",t.respuestas)}}function FY(n,e){if(n&1&&(k(0,"div")(1,"div",8)(2,"h2"),V(3),M(),k(4,"p",9),V(5),M(),k(6,"div",10)(7,"div",11)(8,"span",12),V(9,"Categor\xEDa:"),M(),k(10,"span",13),V(11),M()(),k(12,"div",11)(13,"span",12),V(14,"Estado:"),M(),k(15,"span",14),V(16),M()(),k(17,"div",11)(18,"span",12),V(19,"Fecha l\xEDmite:"),M(),k(20,"span",13),V(21),M()(),k(22,"div",11)(23,"span",12),V(24,"Puntaje m\xE1ximo:"),M(),k(25,"span",13),V(26),M()(),k(27,"div",11)(28,"span",12),V(29,"Total preguntas:"),M(),k(30,"span",13),V(31),M()()()(),Pe(32,xY,7,0,"div",15)(33,OY,66,15,"div",16),M()),n&2){let t=Ke();B(3),Qe(t.evaluacion.titulo),B(2),Qe(t.evaluacion.descripcion),B(6),Qe(t.evaluacion.categoria),B(4),X("ngClass","estado-"+t.evaluacion.estado),B(),Qe(t.evaluacion.estado),B(5),Qe(t.formatearFecha(t.evaluacion.fechaLimite)),B(5),it("",t.evaluacion.puntajeMaximo," puntos"),B(5),Qe((t.evaluacion.preguntas==null?null:t.evaluacion.preguntas.length)||0),B(),X("ngIf",!t.estadisticas),B(),X("ngIf",t.estadisticas)}}var Bv=class n{evaluacionService=j(Ao);router=j(vn);route=j(dr);evaluacion=null;respuestas=[];estadisticas=null;loading=!0;ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&this.cargarDatos(e)}cargarDatos(e){this.loading=!0,this.evaluacionService.getEvaluacionById(e).subscribe({next:t=>{this.evaluacion=t||null,this.evaluacionService.getRespuestasByEvaluacion(e).subscribe({next:r=>{this.respuestas=r,this.calcularEstadisticas(),this.loading=!1},error:r=>{console.error("Error al cargar respuestas:",r),this.loading=!1}})},error:t=>{console.error("Error al cargar evaluaci\xF3n:",t),this.loading=!1}})}calcularEstadisticas(){if(!this.evaluacion||this.respuestas.length===0){this.estadisticas=null;return}let e=this.respuestas.filter(S=>S.estado==="completada").map(S=>S.puntajeObtenido);if(e.length===0){this.estadisticas=null;return}let t=e.length,i=e.reduce((S,P)=>S+P,0)/t,s=Math.max(...e),o=Math.min(...e),a=this.evaluacion.puntajeMaximo*.6,c=e.filter(S=>S>=a).length,d=t-c,h=c/t*100,g=this.evaluacion.puntajeMaximo,I=[{rango:`0-${Math.floor(g*.25)}`,cantidad:e.filter(S=>S<g*.25).length},{rango:`${Math.floor(g*.25)}-${Math.floor(g*.5)}`,cantidad:e.filter(S=>S>=g*.25&&S<g*.5).length},{rango:`${Math.floor(g*.5)}-${Math.floor(g*.75)}`,cantidad:e.filter(S=>S>=g*.5&&S<g*.75).length},{rango:`${Math.floor(g*.75)}-${g}`,cantidad:e.filter(S=>S>=g*.75).length}];this.estadisticas={totalRespuestas:t,promedioGeneral:i,puntajeMaximo:s,puntajeMinimo:o,aprobados:c,reprobados:d,porcentajeAprobacion:h,distribucionPuntajes:I}}volver(){this.router.navigate(["/evaluaciones"])}formatearFecha(e){return new Date(e).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}redondear(e){return Math.round(e*100)/100}getBarWidth(e){return!this.estadisticas||this.estadisticas.totalRespuestas===0?"0%":`${e/this.estadisticas.totalRespuestas*100}%`}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Kn({type:n,selectors:[["app-estadisticas"]],decls:10,vars:2,consts:[[1,"estadisticas-container"],[1,"header"],[1,"header-content"],[1,"btn","btn-secondary",3,"click"],[1,"content"],["class","loading",4,"ngIf"],[4,"ngIf"],[1,"loading"],[1,"info-card"],[1,"descripcion"],[1,"info-grid"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"info-value","badge",3,"ngClass"],["class","empty-state",4,"ngIf"],["class","estadisticas-grid",4,"ngIf"],[1,"empty-state"],[1,"empty-icon"],[1,"estadisticas-grid"],[1,"stats-card"],[1,"stats-list"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value","highlight"],[1,"stat-value","success"],[1,"stat-value","danger"],[1,"progress-bar"],[1,"progress-fill","success"],[1,"progress-fill","danger"],[1,"stats-card","full-width"],[1,"distribution-chart"],["class","distribution-item",4,"ngFor","ngForOf"],[1,"respuestas-table"],[4,"ngFor","ngForOf"],[1,"distribution-item"],[1,"distribution-header"],[1,"range-label"],[1,"range-count"],[1,"distribution-bar"],[1,"bar-fill"],[1,"badge",3,"ngClass"],[3,"ngClass"]],template:function(t,r){t&1&&(k(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),V(4,"Estad\xEDsticas de Evaluaci\xF3n"),M(),k(5,"button",3),je("click",function(){return r.volver()}),V(6,"\u2190 Volver a Evaluaciones"),M()()(),k(7,"div",4),Pe(8,NY,3,0,"div",5)(9,FY,34,10,"div",6),M()()),t&2&&(B(8),X("ngIf",r.loading),B(),X("ngIf",!r.loading&&r.evaluacion))},dependencies:[ri,oh,eo,ji],styles:[".estadisticas-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#f5f7fa}.header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:20px 0;box-shadow:0 2px 8px #0000001a}.header-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px}.content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:30px 20px}.loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.info-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:30px;margin-bottom:30px;box-shadow:0 2px 8px #0000001a}.info-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin:0 0 15px;font-size:24px}.descripcion[_ngcontent-%COMP%]{color:#666;margin-bottom:25px;line-height:1.6}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.info-label[_ngcontent-%COMP%]{font-size:13px;color:#999;font-weight:500}.info-value[_ngcontent-%COMP%]{font-size:15px;color:#333;font-weight:600}.badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase}.estado-activa[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.estado-cerrada[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.estado-borrador[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 20px;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a}.empty-icon[_ngcontent-%COMP%]{font-size:80px;margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:10px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.estadisticas-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.stats-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:25px;box-shadow:0 2px 8px #0000001a}.stats-card.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.stats-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#333;font-size:18px;padding-bottom:15px;border-bottom:2px solid #f0f0f0}.stats-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.stat-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px;background:#f8f9fa;border-radius:8px}.stat-label[_ngcontent-%COMP%]{color:#666;font-size:14px}.stat-value[_ngcontent-%COMP%]{color:#333;font-size:16px;font-weight:700}.stat-value.highlight[_ngcontent-%COMP%]{color:#667eea}.stat-value.success[_ngcontent-%COMP%]{color:#28a745}.stat-value.danger[_ngcontent-%COMP%]{color:#e74c3c}.progress-bar[_ngcontent-%COMP%]{display:flex;height:30px;border-radius:8px;overflow:hidden;margin-top:20px}.progress-fill[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:600;transition:width .5s}.progress-fill.success[_ngcontent-%COMP%]{background:#28a745}.progress-fill.danger[_ngcontent-%COMP%]{background:#e74c3c}.distribution-chart[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.distribution-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.distribution-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.range-label[_ngcontent-%COMP%]{font-weight:600;color:#333}.range-count[_ngcontent-%COMP%]{color:#666;font-size:14px}.distribution-bar[_ngcontent-%COMP%]{height:30px;background:#f0f0f0;border-radius:8px;overflow:hidden}.bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(135deg,#667eea,#764ba2);transition:width .5s;display:flex;align-items:center;padding:0 10px}.respuestas-table[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}thead[_ngcontent-%COMP%]{background:#f8f9fa}th[_ngcontent-%COMP%]{text-align:left;padding:12px;font-weight:600;color:#333;border-bottom:2px solid #e0e0e0}td[_ngcontent-%COMP%]{padding:12px;border-bottom:1px solid #f0f0f0;color:#666}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.success[_ngcontent-%COMP%]{color:#28a745;font-weight:600}.danger[_ngcontent-%COMP%]{color:#e74c3c;font-weight:600}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#667eea;border:2px solid white}.btn-secondary[_ngcontent-%COMP%]:hover{background:#ffffffe6;transform:translateY(-2px)}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.estadisticas-grid[_ngcontent-%COMP%], .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}table[_ngcontent-%COMP%]{font-size:12px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px}}"]})};var ap=()=>{let n=j(jr),e=j(vn);return n.getUser().pipe(ae(t=>t?!0:(e.navigate(["/login"]),!1)))},eU=()=>{let n=j(jr),e=j(vn);return n.getUser().pipe(ae(t=>t?(e.navigate(["/evaluaciones"]),!1):!0))};var tU=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:Uv,canActivate:[eU]},{path:"evaluaciones",component:jv,canActivate:[ap]},{path:"evaluaciones/nueva",component:op,canActivate:[ap]},{path:"evaluaciones/editar/:id",component:op,canActivate:[ap]},{path:"evaluaciones/estadisticas/:id",component:Bv,canActivate:[ap]},{path:"**",redirectTo:"/login"}];var nU={providers:[hI(),Iw({eventCoalescing:!0}),fT(tU),r1(()=>i1(E2.firebase)),Jk(()=>eO()),g2(()=>_2())]};var $v=class n{title=Gn("Sistema_de_evaluacion_online");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Kn({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&rt(0,"router-outlet")},dependencies:[Ah],encapsulation:2})};Hw($v,nU).catch(n=>console.error(n));
