var YO=Object.defineProperty,QO=Object.defineProperties;var JO=Object.getOwnPropertyDescriptors;var yd=Object.getOwnPropertySymbols,ZO=Object.getPrototypeOf,IC=Object.prototype.hasOwnProperty,wC=Object.prototype.propertyIsEnumerable,XO=Reflect.get;var EC=(n,e,t)=>e in n?YO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L=(n,e)=>{for(var t in e||={})IC.call(e,t)&&EC(n,t,e[t]);if(yd)for(var t of yd(e))wC.call(e,t)&&EC(n,t,e[t]);return n},K=(n,e)=>QO(n,JO(e));var Em=(n,e)=>{var t={};for(var r in n)IC.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&yd)for(var r of yd(n))e.indexOf(r)<0&&wC.call(n,r)&&(t[r]=n[r]);return t};var Tr=(n,e,t)=>XO(ZO(n),t,e);var v=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});var Im;function _d(){return Im}function Zn(n){let e=Im;return Im=n,e}var bC=Symbol("NotFound");function Cs(n){return n===bC||n?.name==="\u0275NotFound"}var Pt=null,Ed=!1,wm=1,ek=null,xt=Symbol("SIGNAL");function fe(n){let e=Pt;return Pt=n,e}function Cd(){return Pt}var Ts={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ds(n){if(Ed)throw new Error("");if(Pt===null)return;Pt.consumerOnSignalRead(n);let e=Pt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Pt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Pt.producers,t!==void 0&&t.producer===n)){Pt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Pt&&(!r||nk(i,Pt)))return;let o=As(Pt),s={producer:n,consumer:Pt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Pt.producersTail=s,e!==void 0?e.nextProducer=s:Pt.producers=s,o&&SC(n,s)}function CC(){wm++}function Td(n){if(!(As(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===wm)){if(!n.producerMustRecompute(n)&&!Uc(n)){bd(n);return}n.producerRecomputeValue(n),bd(n)}}function bm(n){if(n.consumers===void 0)return;let e=Ed;Ed=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||tk(r)}}finally{Ed=e}}function Cm(){return Pt?.consumerAllowSignalWrites!==!1}function tk(n){n.dirty=!0,bm(n),n.consumerMarkedDirty?.(n)}function bd(n){n.dirty=!1,n.lastCleanEpoch=wm}function Ss(n){return n&&TC(n),fe(n)}function TC(n){n.producersTail=void 0,n.recomputing=!0}function Vc(n,e){fe(e),n&&DC(n)}function DC(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(As(n))do t=Tm(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Uc(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Td(t),r!==t.version))return!0}return!1}function jc(n){if(As(n)){let e=n.producers;for(;e!==void 0;)e=Tm(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function SC(n,e){let t=n.consumersTail,r=As(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)SC(i.producer,i)}function Tm(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!As(e)){let o=e.producers;for(;o!==void 0;)o=Tm(o)}return t}function As(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Dd(n){ek?.(n)}function nk(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Sd(n,e){return Object.is(n,e)}function Ad(n,e){let t=Object.create(rk);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Td(t),Ds(t),t.value===Lc)throw t.error;return t.value};return r[xt]=t,Dd(t),r}var Id=Symbol("UNSET"),wd=Symbol("COMPUTING"),Lc=Symbol("ERRORED"),rk=K(L({},Ts),{value:Id,dirty:!0,error:null,equal:Sd,kind:"computed",producerMustRecompute(n){return n.value===Id||n.value===wd},producerRecomputeValue(n){if(n.value===wd)throw new Error("");let e=n.value;n.value=wd;let t=Ss(n),r,i=!1;try{r=n.computation(),fe(null),i=e!==Id&&e!==Lc&&r!==Lc&&n.equal(e,r)}catch(o){r=Lc,n.error=o}finally{Vc(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function ik(){throw new Error}var AC=ik;function RC(n){AC(n)}function Dm(n){AC=n}var ok=null;function Sm(n,e){let t=Object.create(Rd);t.value=n,e!==void 0&&(t.equal=e);let r=()=>MC(t);return r[xt]=t,Dd(t),[r,s=>Rs(t,s),s=>Am(t,s)]}function MC(n){return Ds(n),n.value}function Rs(n,e){Cm()||RC(n),n.equal(n.value,e)||(n.value=e,sk(n))}function Am(n,e){Cm()||RC(n),Rs(n,e(n.value))}var Rd=K(L({},Ts),{equal:Sd,value:void 0,kind:"signal"});function sk(n){n.version++,CC(),bm(n),ok?.(n)}function ce(n){return typeof n=="function"}function Ms(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Md=Ms(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function fo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ge=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ce(r))try{r()}catch(o){e=o instanceof Md?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{PC(o)}catch(s){e=e??[],s instanceof Md?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Md(e)}}add(e){var t;if(e&&e!==this)if(this.closed)PC(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&fo(t,e)}remove(e){let{_finalizers:t}=this;t&&fo(t,e),e instanceof n&&e._removeParent(this)}};Ge.EMPTY=(()=>{let n=new Ge;return n.closed=!0,n})();var Rm=Ge.EMPTY;function Pd(n){return n instanceof Ge||n&&"closed"in n&&ce(n.remove)&&ce(n.add)&&ce(n.unsubscribe)}function PC(n){ce(n)?n():n.unsubscribe()}var Fn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ps={setTimeout(n,e,...t){let{delegate:r}=Ps;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ps;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function xd(n){Ps.setTimeout(()=>{let{onUnhandledError:e}=Fn;if(e)e(n);else throw n})}function Bc(){}var xC=Mm("C",void 0,void 0);function NC(n){return Mm("E",void 0,n)}function OC(n){return Mm("N",n,void 0)}function Mm(n,e,t){return{kind:n,value:e,error:t}}var po=null;function xs(n){if(Fn.useDeprecatedSynchronousErrorHandling){let e=!po;if(e&&(po={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=po;if(po=null,t)throw r}}else n()}function kC(n){Fn.useDeprecatedSynchronousErrorHandling&&po&&(po.errorThrown=!0,po.error=n)}var go=class extends Ge{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Pd(e)&&e.add(this)):this.destination=uk}static create(e,t,r){return new Ns(e,t,r)}next(e){this.isStopped?xm(OC(e),this):this._next(e)}error(e){this.isStopped?xm(NC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?xm(xC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ak=Function.prototype.bind;function Pm(n,e){return ak.call(n,e)}var Nm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Nd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Nd(r)}else Nd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Nd(t)}}},Ns=class extends go{constructor(e,t,r){super();let i;if(ce(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Fn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Pm(e.next,o),error:e.error&&Pm(e.error,o),complete:e.complete&&Pm(e.complete,o)}):i=e}this.destination=new Nm(i)}};function Nd(n){Fn.useDeprecatedSynchronousErrorHandling?kC(n):xd(n)}function ck(n){throw n}function xm(n,e){let{onStoppedNotification:t}=Fn;t&&Ps.setTimeout(()=>t(n,e))}var uk={closed:!0,next:Bc,error:ck,complete:Bc};var Os=typeof Symbol=="function"&&Symbol.observable||"@@observable";function on(n){return n}function Om(...n){return km(n)}function km(n){return n.length===0?on:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var X=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=dk(t)?t:new Ns(t,r,i);return xs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=FC(r),new r((i,o)=>{let s=new Ns({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Os](){return this}pipe(...t){return km(t)(this)}toPromise(t){return t=FC(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function FC(n){var e;return(e=n??Fn.Promise)!==null&&e!==void 0?e:Promise}function lk(n){return n&&ce(n.next)&&ce(n.error)&&ce(n.complete)}function dk(n){return n&&n instanceof go||lk(n)&&Pd(n)}function Fm(n){return ce(n?.lift)}function we(n){return e=>{if(Fm(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function _e(n,e,t,r,i){return new Lm(n,e,t,r,i)}var Lm=class extends go{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ks(){return we((n,e)=>{let t=null;n._refCount++;let r=_e(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Fs=class extends X{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Fm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ge;let t=this.getSubject();e.add(this.source.subscribe(_e(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ge.EMPTY)}return e}refCount(){return ks()(this)}};var LC=Ms(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var at=(()=>{class n extends X{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Od(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new LC}next(t){xs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){xs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){xs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Rm:(this.currentObservers=null,o.push(t),new Ge(()=>{this.currentObservers=null,fo(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new X;return t.source=this,t}}return n.create=(e,t)=>new Od(e,t),n})(),Od=class extends at{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Rm}};var It=class extends at{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Vm={now(){return(Vm.delegate||Date).now()},delegate:void 0};var kd=class extends Ge{constructor(e,t){super()}schedule(e,t=0){return this}};var $c={setInterval(n,e,...t){let{delegate:r}=$c;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=$c;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Ls=class extends kd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return $c.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&$c.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,fo(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Vs=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Vs.now=Vm.now;var Us=class extends Vs{constructor(e,t=Vs.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Um=new Us(Ls);var Fd=class extends Ls{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Ld=class extends Us{};var jm=new Ld(Fd);var Qt=new X(n=>n.complete());function VC(n){return n&&ce(n.schedule)}function UC(n){return n[n.length-1]}function Vd(n){return ce(UC(n))?n.pop():void 0}function fi(n){return VC(UC(n))?n.pop():void 0}function Bm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function BC(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function jC(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mo(n){return this instanceof mo?(this.v=n,this):new mo(n)}function $C(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(M){return Promise.resolve(M).then(y,p)}}function a(y,M){r[y]&&(i[y]=function(k){return new Promise(function(O,B){o.push([y,k,O,B])>1||u(y,k)})},M&&(i[y]=M(i[y])))}function u(y,M){try{l(r[y](M))}catch(k){g(o[0][3],k)}}function l(y){y.value instanceof mo?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,M){y(M),o.shift(),o.length&&u(o[0][0],o[0][1])}}function HC(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof jC=="function"?jC(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Ud=n=>n&&typeof n.length=="number"&&typeof n!="function";function jd(n){return ce(n?.then)}function Bd(n){return ce(n[Os])}function $d(n){return Symbol.asyncIterator&&ce(n?.[Symbol.asyncIterator])}function Hd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function hk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var zd=hk();function qd(n){return ce(n?.[zd])}function Gd(n){return $C(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield mo(t.read());if(i)return yield mo(void 0);yield yield mo(r)}}finally{t.releaseLock()}})}function Wd(n){return ce(n?.getReader)}function et(n){if(n instanceof X)return n;if(n!=null){if(Bd(n))return fk(n);if(Ud(n))return pk(n);if(jd(n))return gk(n);if($d(n))return zC(n);if(qd(n))return mk(n);if(Wd(n))return vk(n)}throw Hd(n)}function fk(n){return new X(e=>{let t=n[Os]();if(ce(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function pk(n){return new X(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function gk(n){return new X(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,xd)})}function mk(n){return new X(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function zC(n){return new X(e=>{yk(n,e).catch(t=>e.error(t))})}function vk(n){return zC(Gd(n))}function yk(n,e){var t,r,i,o;return BC(this,void 0,void 0,function*(){try{for(t=HC(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Jt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function pi(n,e=0){return we((t,r)=>{t.subscribe(_e(r,i=>Jt(r,n,()=>r.next(i),e),()=>Jt(r,n,()=>r.complete(),e),i=>Jt(r,n,()=>r.error(i),e)))})}function gi(n,e=0){return we((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function qC(n,e){return et(n).pipe(gi(e),pi(e))}function GC(n,e){return et(n).pipe(gi(e),pi(e))}function WC(n,e){return new X(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function KC(n,e){return new X(t=>{let r;return Jt(t,e,()=>{r=n[zd](),Jt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ce(r?.return)&&r.return()})}function Kd(n,e){if(!n)throw new Error("Iterable cannot be null");return new X(t=>{Jt(t,e,()=>{let r=n[Symbol.asyncIterator]();Jt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function YC(n,e){return Kd(Gd(n),e)}function QC(n,e){if(n!=null){if(Bd(n))return qC(n,e);if(Ud(n))return WC(n,e);if(jd(n))return GC(n,e);if($d(n))return Kd(n,e);if(qd(n))return KC(n,e);if(Wd(n))return YC(n,e)}throw Hd(n)}function ze(n,e){return e?QC(n,e):et(n)}function re(...n){let e=fi(n);return ze(n,e)}function js(n,e){let t=ce(n)?n:()=>n,r=i=>i.error(t());return new X(e?i=>e.schedule(r,0,i):r)}function $m(n){return!!n&&(n instanceof X||ce(n.lift)&&ce(n.subscribe))}var Dr=Ms(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ue(n,e){return we((t,r)=>{let i=0;t.subscribe(_e(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:_k}=Array;function Ek(n,e){return _k(e)?n(...e):n(e)}function Yd(n){return ue(e=>Ek(n,e))}var{isArray:Ik}=Array,{getPrototypeOf:wk,prototype:bk,keys:Ck}=Object;function Qd(n){if(n.length===1){let e=n[0];if(Ik(e))return{args:e,keys:null};if(Tk(e)){let t=Ck(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function Tk(n){return n&&typeof n=="object"&&wk(n)===bk}function Jd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Zd(...n){let e=fi(n),t=Vd(n),{args:r,keys:i}=Qd(n);if(r.length===0)return ze([],e);let o=new X(Dk(r,e,i?s=>Jd(i,s):on));return t?o.pipe(Yd(t)):o}function Dk(n,e,t=on){return r=>{JC(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)JC(e,()=>{let l=ze(n[u],e),h=!1;l.subscribe(_e(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function JC(n,e,t){n?Jt(t,n,e):e()}function ZC(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=k=>l<r?M(k):u.push(k),M=k=>{o&&e.next(k),l++;let O=!1;et(t(k,h++)).subscribe(_e(e,B=>{i?.(B),o?y(B):e.next(B)},()=>{O=!0},void 0,()=>{if(O)try{for(l--;u.length&&l<r;){let B=u.shift();s?Jt(e,s,()=>M(B)):M(B)}g()}catch(B){e.error(B)}}))};return n.subscribe(_e(e,y,()=>{p=!0,g()})),()=>{a?.()}}function ct(n,e,t=1/0){return ce(e)?ct((r,i)=>ue((o,s)=>e(r,o,i,s))(et(n(r,i))),t):(typeof e=="number"&&(t=e),we((r,i)=>ZC(r,i,n,t)))}function XC(n=1/0){return ct(on,n)}function eT(){return XC(1)}function Bs(...n){return eT()(ze(n,fi(n)))}function Hc(n){return new X(e=>{et(n()).subscribe(e)})}function Hm(...n){let e=Vd(n),{args:t,keys:r}=Qd(n),i=new X(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;et(t[h]).subscribe(_e(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Jd(r,a):a),o.complete())}))}});return e?i.pipe(Yd(e)):i}function In(n,e){return we((t,r)=>{let i=0;t.subscribe(_e(r,o=>n.call(e,o,i++)&&r.next(o)))})}function mi(n){return we((e,t)=>{let r=null,i=!1,o;r=e.subscribe(_e(t,void 0,void 0,s=>{o=et(n(s,mi(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function tT(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(_e(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function $s(n,e){return ce(e)?ct(n,e,1):ct(n,1)}function vi(n){return we((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Sr(n){return n<=0?()=>Qt:we((e,t)=>{let r=0;e.subscribe(_e(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Xd(n=Sk){return we((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Sk(){return new Dr}function zc(n){return we((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ar(n,e){let t=arguments.length>=2;return r=>r.pipe(n?In((i,o)=>n(i,o,r)):on,Sr(1),t?vi(e):Xd(()=>new Dr))}function Hs(n){return n<=0?()=>Qt:we((e,t)=>{let r=[];e.subscribe(_e(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function zm(n,e){let t=arguments.length>=2;return r=>r.pipe(n?In((i,o)=>n(i,o,r)):on,Hs(1),t?vi(e):Xd(()=>new Dr))}function qm(n,e){return we(tT(n,e,arguments.length>=2,!0))}function Gm(...n){let e=fi(n);return we((t,r)=>{(e?Bs(n,t,e):Bs(n,t)).subscribe(r)})}function Zt(n,e){return we((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(_e(r,u=>{i?.unsubscribe();let l=0,h=o++;et(n(u,h)).subscribe(i=_e(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function eh(n){return we((e,t)=>{et(n).subscribe(_e(t,()=>t.complete(),Bc)),!t.closed&&e.subscribe(t)})}function ht(n,e,t){let r=ce(n)||e||t?{next:n,error:e,complete:t}:n;return r?we((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(_e(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):on}function nT(n){let e=fe(null);try{return n()}finally{fe(e)}}var yo=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},ov=new yo("20.3.13");var sv="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",z=class extends Error{code;constructor(e,t){super(qs(e,t)),this.code=e}};function Ak(n){return`NG0${Math.abs(n)}`}function qs(n,e){return`${Ak(n)}${e?": "+e:""}`}function Re(n){for(let e in n)if(n[e]===Re)return e;throw Error("")}function oT(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Mr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Mr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function ih(n,e){return n?e?`${n} ${e}`:n:e||""}var Rk=Re({__forward_ref__:Re});function Nt(n){return n.__forward_ref__=Nt,n.toString=function(){return Mr(this())},n}function wt(n){return av(n)?n():n}function av(n){return typeof n=="function"&&n.hasOwnProperty(Rk)&&n.__forward_ref__===Nt}function G(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Xn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Kc(n){return Mk(n,oh)}function cv(n){return Kc(n)!==null}function Mk(n,e){return n.hasOwnProperty(e)&&n[e]||null}function Pk(n){let e=n?.[oh]??null;return e||null}function Km(n){return n&&n.hasOwnProperty(nh)?n[nh]:null}var oh=Re({\u0275prov:Re}),nh=Re({\u0275inj:Re}),q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=G({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function uv(n){return n&&!!n.\u0275providers}var lv=Re({\u0275cmp:Re}),dv=Re({\u0275dir:Re}),hv=Re({\u0275pipe:Re}),fv=Re({\u0275mod:Re}),Gc=Re({\u0275fac:Re}),bo=Re({__NG_ELEMENT_ID__:Re}),rT=Re({__NG_ENV_ID__:Re});function Gs(n){return typeof n=="string"?n:n==null?"":String(n)}function sT(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Gs(n)}var aT=Re({ngErrorCode:Re}),xk=Re({ngErrorMessage:Re}),Nk=Re({ngTokenPath:Re});function pv(n,e){return cT("",-200,e)}function sh(n,e){throw new z(-201,!1)}function cT(n,e,t){let r=new z(e,n);return r[aT]=e,r[xk]=n,t&&(r[Nk]=t),r}function Ok(n){return n[aT]}var Ym;function uT(){return Ym}function sn(n){let e=Ym;return Ym=n,e}function gv(n,e,t){let r=Kc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;sh(n,"Injector")}var kk={},vo=kk,Qm="__NG_DI_FLAG__",Jm=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=_o(t)||0;try{return this.injector.get(e,r&8?null:vo,r)}catch(i){if(Cs(i))return i;throw i}}};function Fk(n,e=0){let t=_d();if(t===void 0)throw new z(-203,!1);if(t===null)return gv(n,void 0,e);{let r=Lk(e),i=t.retrieve(n,r);if(Cs(i)){if(r.optional)return null;throw i}return i}}function pe(n,e=0){return(uT()||Fk)(wt(n),e)}function x(n,e){return pe(n,_o(e))}function _o(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Lk(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Zm(n){let e=[];for(let t=0;t<n.length;t++){let r=wt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new z(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=Vk(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(pe(i,o))}else e.push(pe(r))}return e}function lT(n,e){return n[Qm]=e,n.prototype[Qm]=e,n}function Vk(n){return n[Qm]}function Eo(n,e){let t=n.hasOwnProperty(Gc);return t?n[Gc]:null}function ah(n,e){n.forEach(t=>Array.isArray(t)?ah(t,e):e(t))}function mv(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Yc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function dT(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function ch(n,e,t){let r=Ws(n,e);return r>=0?n[r|1]=t:(r=~r,dT(n,r,e,t)),r}function uh(n,e){let t=Ws(n,e);if(t>=0)return n[t|1]}function Ws(n,e){return Uk(n,e,1)}function Uk(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var _i={},zt=[],xr=new q(""),vv=new q("",-1),yv=new q(""),Wc=class{get(e,t=vo){if(t===vo){let i=cT("",-201);throw i.name="\u0275NotFound",i}return t}};function _v(n){return n[fv]||null}function Ei(n){return n[lv]||null}function Ev(n){return n[dv]||null}function hT(n){return n[hv]||null}function an(n){return{\u0275providers:n}}function fT(n){return an([{provide:xr,multi:!0,useValue:n}])}function pT(...n){return{\u0275providers:Iv(!0,n),\u0275fromNgModule:!0}}function Iv(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return ah(e,s=>{let a=s;rh(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&gT(i,o),t}function gT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];wv(i,o=>{e(o,r)})}}function rh(n,e,t,r){if(n=wt(n),!n)return!1;let i=null,o=Km(n),s=!o&&Ei(n);if(!o&&!s){let u=n.ngModule;if(o=Km(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)rh(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{ah(o.imports,h=>{rh(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&gT(l,e)}if(!a){let l=Eo(i)||(()=>new i);e({provide:i,useFactory:l,deps:zt},i),e({provide:yv,useValue:i,multi:!0},i),e({provide:xr,useValue:()=>pe(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;wv(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function wv(n,e){for(let t of n)uv(t)&&(t=t.\u0275providers),Array.isArray(t)?wv(t,e):e(t)}var jk=Re({provide:String,useValue:Re});function mT(n){return n!==null&&typeof n=="object"&&jk in n}function Bk(n){return!!(n&&n.useExisting)}function $k(n){return!!(n&&n.useFactory)}function Io(n){return typeof n=="function"}function vT(n){return!!n.useClass}var Qc=new q(""),th={},iT={},Wm;function Jc(){return Wm===void 0&&(Wm=new Wc),Wm}var ut=class{},wo=class extends ut{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,ev(e,s=>this.processProvider(s)),this.records.set(vv,zs(void 0,this)),i.has("environment")&&this.records.set(ut,zs(void 0,this));let o=this.records.get(Qc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(yv,zt,{self:!0}))}retrieve(e,t){let r=_o(t)||0;try{return this.get(e,vo,r)}catch(i){if(Cs(i))return i;throw i}}destroy(){qc(this),this._destroyed=!0;let e=fe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),fe(e)}}onDestroy(e){return qc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){qc(this);let t=Zn(this),r=sn(void 0),i;try{return e()}finally{Zn(t),sn(r)}}get(e,t=vo,r){if(qc(this),e.hasOwnProperty(rT))return e[rT](this);let i=_o(r),o,s=Zn(this),a=sn(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=Wk(e)&&Kc(e);h&&this.injectableDefInScope(h)?l=zs(Xm(e),th):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Jc():this.parent;return t=i&8&&t===vo?null:t,u.get(e,t)}catch(u){let l=Ok(u);throw l===-200||l===-201?new z(l,null):u}finally{sn(a),Zn(s)}}resolveInjectorInitializers(){let e=fe(null),t=Zn(this),r=sn(void 0),i;try{let o=this.get(xr,zt,{self:!0});for(let s of o)s()}finally{Zn(t),sn(r),fe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Mr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=wt(e);let t=Io(e)?e:wt(e&&e.provide),r=zk(e);if(!Io(e)&&e.multi===!0){let i=this.records.get(t);i||(i=zs(void 0,th,!0),i.factory=()=>Zm(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=fe(null);try{if(t.value===iT)throw pv(Mr(e));return t.value===th&&(t.value=iT,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&Gk(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{fe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=wt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Xm(n){let e=Kc(n),t=e!==null?e.factory:Eo(n);if(t!==null)return t;if(n instanceof q)throw new z(204,!1);if(n instanceof Function)return Hk(n);throw new z(204,!1)}function Hk(n){if(n.length>0)throw new z(204,!1);let t=Pk(n);return t!==null?()=>t.factory(n):()=>new n}function zk(n){if(mT(n))return zs(void 0,n.useValue);{let e=bv(n);return zs(e,th)}}function bv(n,e,t){let r;if(Io(n)){let i=wt(n);return Eo(i)||Xm(i)}else if(mT(n))r=()=>wt(n.useValue);else if($k(n))r=()=>n.useFactory(...Zm(n.deps||[]));else if(Bk(n))r=(i,o)=>pe(wt(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=wt(n&&(n.useClass||n.provide));if(qk(n))r=()=>new i(...Zm(n.deps));else return Eo(i)||Xm(i)}return r}function qc(n){if(n.destroyed)throw new z(205,!1)}function zs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function qk(n){return!!n.deps}function Gk(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Wk(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function ev(n,e){for(let t of n)Array.isArray(t)?ev(t,e):t&&uv(t)?ev(t.\u0275providers,e):e(t)}function lt(n,e){let t;n instanceof wo?(qc(n),t=n):t=new Jm(n);let r,i=Zn(t),o=sn(void 0);try{return e()}finally{Zn(i),sn(o)}}function yT(){return uT()!==void 0||_d()!=null}var Vn=0,de=1,oe=2,bt=3,wn=4,bn=5,Zc=6,Ks=7,Ot=8,Ii=9,Nr=10,Be=11,Ys=12,Cv=13,Co=14,Cn=15,To=16,Do=17,So=18,Xc=19,Tv=20,Rr=21,lh=22,eu=23,cn=24,Ao=25,tu=26,Xt=27,_T=1;var wi=7,nu=8,ru=9,en=10;function er(n){return Array.isArray(n)&&typeof n[_T]=="object"}function Un(n){return Array.isArray(n)&&n[_T]===!0}function Dv(n){return(n.flags&4)!==0}function bi(n){return n.componentOffset>-1}function iu(n){return(n.flags&1)===1}function tr(n){return!!n.template}function Qs(n){return(n[oe]&512)!==0}function Ro(n){return(n[oe]&256)===256}var Sv="svg",ET="math";function Tn(n){for(;Array.isArray(n);)n=n[Vn];return n}function Av(n,e){return Tn(e[n])}function jn(n,e){return Tn(e[n.index])}function dh(n,e){return n.data[e]}function Dn(n,e){let t=e[n];return er(t)?t:t[Vn]}function hh(n){return(n[oe]&128)===128}function IT(n){return Un(n[bt])}function Mo(n,e){return e==null?null:n[e]}function Rv(n){n[Do]=0}function Mv(n){n[oe]&1024||(n[oe]|=1024,hh(n)&&Js(n))}function wT(n,e){for(;n>0;)e=e[Co],n--;return e}function ou(n){return!!(n[oe]&9216||n[cn]?.dirty)}function fh(n){n[Nr].changeDetectionScheduler?.notify(8),n[oe]&64&&(n[oe]|=1024),ou(n)&&Js(n)}function Js(n){n[Nr].changeDetectionScheduler?.notify(0);let e=yi(n);for(;e!==null&&!(e[oe]&8192||(e[oe]|=8192,!hh(e)));)e=yi(e)}function Pv(n,e){if(Ro(n))throw new z(911,!1);n[Rr]===null&&(n[Rr]=[]),n[Rr].push(e)}function bT(n,e){if(n[Rr]===null)return;let t=n[Rr].indexOf(e);t!==-1&&n[Rr].splice(t,1)}function yi(n){let e=n[bt];return Un(e)?e[bt]:e}function CT(n){return n[Ks]??=[]}function TT(n){return n.cleanup??=[]}var me={lFrame:VT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var tv=!1;function DT(){return me.lFrame.elementDepthCount}function ST(){me.lFrame.elementDepthCount++}function xv(){me.lFrame.elementDepthCount--}function Nv(){return me.bindingsEnabled}function AT(){return me.skipHydrationRootTNode!==null}function Ov(n){return me.skipHydrationRootTNode===n}function kv(){me.skipHydrationRootTNode=null}function De(){return me.lFrame.lView}function qt(){return me.lFrame.tView}function tt(n){return me.lFrame.contextLView=n,n[Ot]}function nt(n){return me.lFrame.contextLView=null,n}function Ct(){let n=Fv();for(;n!==null&&n.type===64;)n=n.parent;return n}function Fv(){return me.lFrame.currentTNode}function RT(){let n=me.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Zs(n,e){let t=me.lFrame;t.currentTNode=n,t.isParent=e}function Lv(){return me.lFrame.isParent}function MT(){me.lFrame.isParent=!1}function Vv(){return tv}function Uv(n){let e=tv;return tv=n,e}function PT(){return me.lFrame.bindingIndex}function xT(n){return me.lFrame.bindingIndex=n}function su(){return me.lFrame.bindingIndex++}function ph(n){let e=me.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function NT(){return me.lFrame.inI18n}function OT(n,e){let t=me.lFrame;t.bindingIndex=t.bindingRootIndex=n,gh(e)}function kT(){return me.lFrame.currentDirectiveIndex}function gh(n){me.lFrame.currentDirectiveIndex=n}function FT(n){let e=me.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function jv(n){me.lFrame.currentQueryIndex=n}function Kk(n){let e=n[de];return e.type===2?e.declTNode:e.type===1?n[bn]:null}function Bv(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=Kk(o),i===null||(o=o[Co],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=me.lFrame=LT();return r.currentTNode=e,r.lView=n,!0}function mh(n){let e=LT(),t=n[de];me.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function LT(){let n=me.lFrame,e=n===null?null:n.child;return e===null?VT(n):e}function VT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function UT(){let n=me.lFrame;return me.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var $v=UT;function vh(){let n=UT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function jT(n){return(me.lFrame.contextLView=wT(n,me.lFrame.contextLView))[Ot]}function Or(){return me.lFrame.selectedIndex}function Ci(n){me.lFrame.selectedIndex=n}function yh(){let n=me.lFrame;return dh(n.tView,n.selectedIndex)}function un(){me.lFrame.currentNamespace=Sv}function ln(){Yk()}function Yk(){me.lFrame.currentNamespace=null}function BT(){return me.lFrame.currentNamespace}var $T=!0;function _h(){return $T}function Eh(n){$T=n}function nv(n,e=null,t=null,r){let i=Hv(n,e,t,r);return i.resolveInjectorInitializers(),i}function Hv(n,e=null,t=null,r,i=new Set){let o=[t||zt,pT(n)];return r=r||(typeof n=="object"?void 0:Mr(n)),new wo(o,e||Jc(),r||null,i)}var Qe=class n{static THROW_IF_NOT_FOUND=vo;static NULL=new Wc;static create(e,t){if(Array.isArray(e))return nv({name:""},t,e,"");{let r=e.name??"";return nv({name:r},e.parent,e.providers,r)}}static \u0275prov=G({token:n,providedIn:"any",factory:()=>pe(vv)});static __NG_ELEMENT_ID__=-1},ft=new q(""),Bn=(()=>{class n{static __NG_ELEMENT_ID__=Qk;static __NG_ENV_ID__=t=>t}return n})(),rv=class extends Bn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Ro(this._lView)}onDestroy(e){let t=this._lView;return Pv(t,e),()=>bT(t,e)}};function Qk(){return new rv(De())}var Ln=class{_console=console;handleError(e){this._console.error("ERROR",e)}},tn=new q("",{providedIn:"root",factory:()=>{let n=x(ut),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Ln),e.handleError(t))}}}),HT={provide:xr,useValue:()=>void x(Ln),multi:!0},Jk=new q("",{providedIn:"root",factory:()=>{let n=x(ft).defaultView;if(!n)return;let e=x(tn),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),x(Bn).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function zv(){return an([fT(()=>void x(Jk))])}function qv(n){return typeof n=="function"&&n[xt]!==void 0}function dn(n,e){let[t,r,i]=Sm(n,e?.equal),o=t,s=o[xt];return o.set=r,o.update=i,o.asReadonly=zT.bind(o),o}function zT(){let n=this[xt];if(n.readonlyFn===void 0){let e=()=>this();e[xt]=n,n.readonlyFn=e}return n.readonlyFn}function Gv(n){return qv(n)&&typeof n.set=="function"}var Ih=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=Zk}return n})();function Zk(){return new Ih(De(),Ct())}var Pr=class{},au=new q("",{providedIn:"root",factory:()=>!1});var Wv=new q(""),Kv=new q(""),nr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new It(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new X(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}return n})(),Xs=(()=>{class n{internalPendingTasks=x(nr);scheduler=x(Pr);errorHandler=x(tn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}return n})();function cu(...n){}var Yv=(()=>{class n{static \u0275prov=G({token:n,providedIn:"root",factory:()=>new iv})}return n})(),iv=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function aa(n){return{toString:n}.toString()}var wh="__parameters__";function oF(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function sF(n,e,t){return aa(()=>{let r=oF(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(wh)?u[wh]:Object.defineProperty(u,wh,{value:[]})[wh];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var hn=lT(sF("Optional"),8);function aF(n){return typeof n=="function"}var Ah=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function ID(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Fr=(()=>{let n=()=>wD;return n.ngInherit=!0,n})();function wD(n){return n.type.prototype.ngOnChanges&&(n.setInput=uF),cF}function cF(){let n=CD(this),e=n?.current;if(e){let t=n.previous;if(t===_i)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function uF(n,e,t,r,i){let o=this.declaredInputs[r],s=CD(n)||lF(n,{previous:_i,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Ah(l&&l.currentValue,t,u===_i),ID(n,e,i,t)}var bD="__ngSimpleChanges__";function CD(n){return n[bD]||null}function lF(n,e){return n[bD]=e}var qT=[];var Ne=function(n,e=null,t){for(let r=0;r<qT.length;r++){let i=qT[r];i(n,e,t)}};function dF(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=wD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function TD(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Ch(n,e,t){DD(n,e,3,t)}function Th(n,e,t,r){(n[oe]&3)===t&&DD(n,e,t,r)}function Qv(n,e){let t=n[oe];(t&3)===e&&(t&=16383,t+=1,n[oe]=t)}function DD(n,e,t,r){let i=r!==void 0?n[Do]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Do]+=65536),(a<o||o==-1)&&(hF(n,t,e,u),n[Do]=(n[Do]&4294901760)+u+2),u++}function GT(n,e){Ne(4,n,e);let t=fe(null);try{e.call(n)}finally{fe(t),Ne(5,n,e)}}function hF(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[oe]>>14<n[Do]>>16&&(n[oe]&3)===e&&(n[oe]+=16384,GT(a,o)):GT(a,o)}var ta=-1,xo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function fF(n){return(n.flags&8)!==0}function pF(n){return(n.flags&16)!==0}function gF(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];vF(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function mF(n){return n===3||n===4||n===6}function vF(n){return n.charCodeAt(0)===64}function na(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?WT(n,t,i,null,e[++r]):WT(n,t,i,null,null))}}return n}function WT(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function SD(n){return n!==ta}function Rh(n){return n&32767}function yF(n){return n>>16}function Mh(n,e){let t=yF(n),r=e;for(;t>0;)r=r[Co],t--;return r}var oy=!0;function KT(n){let e=oy;return oy=n,e}var _F=256,AD=_F-1,RD=5,EF=0,rr={};function IF(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(bo)&&(r=t[bo]),r==null&&(r=t[bo]=EF++);let i=r&AD,o=1<<i;e.data[n+(i>>RD)]|=o}function Ph(n,e){let t=MD(n,e);if(t!==-1)return t;let r=e[de];r.firstCreatePass&&(n.injectorIndex=e.length,Jv(r.data,n),Jv(e,null),Jv(r.blueprint,null));let i=Dy(n,e),o=n.injectorIndex;if(SD(i)){let s=Rh(i),a=Mh(i,e),u=a[de].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Jv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function MD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Dy(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=kD(i),r===null)return ta;if(t++,i=i[Co],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ta}function sy(n,e,t){IF(n,e,t)}function PD(n,e,t){if(t&8||n!==void 0)return n;sh(e,"NodeInjector")}function xD(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Ii],o=sn(void 0);try{return i?i.get(e,r,t&8):gv(e,r,t&8)}finally{sn(o)}}return PD(r,e,t)}function ND(n,e,t,r=0,i){if(n!==null){if(e[oe]&2048&&!(r&2)){let s=DF(n,e,t,r,rr);if(s!==rr)return s}let o=OD(n,e,t,r,rr);if(o!==rr)return o}return xD(e,t,r,i)}function OD(n,e,t,r,i){let o=CF(t);if(typeof o=="function"){if(!Bv(e,n,r))return r&1?PD(i,t,r):xD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))sh(t);else return s}finally{$v()}}else if(typeof o=="number"){let s=null,a=MD(n,e),u=ta,l=r&1?e[Cn][bn]:null;for((a===-1||r&4)&&(u=a===-1?Dy(n,e):e[a+8],u===ta||!QT(r,!1)?a=-1:(s=e[de],a=Rh(u),e=Mh(u,e)));a!==-1;){let h=e[de];if(YT(o,a,h.data)){let p=wF(a,e,t,s,r,l);if(p!==rr)return p}u=e[a+8],u!==ta&&QT(r,e[de].data[a+8]===l)&&YT(o,a,e)?(s=h,a=Rh(u),e=Mh(u,e)):a=-1}}return i}function wF(n,e,t,r,i,o){let s=e[de],a=s.data[n+8],u=r==null?bi(a)&&oy:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=bF(a,s,t,u,l);return h!==null?xh(e,s,h,a,i):rr}function bF(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let M=s[y];if(y<u&&t===M||y>=u&&M.type===t)return y}if(i){let y=s[u];if(y&&tr(y)&&y.type===t)return u}return null}function xh(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof xo){let a=o;if(a.resolving){let y=sT(s[t]);throw pv(y)}let u=KT(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],h,p=a.injectImpl?sn(a.injectImpl):null,g=Bv(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&dF(t,s[t],e)}finally{p!==null&&sn(p),KT(u),a.resolving=!1,$v()}}return o}function CF(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(bo)?n[bo]:void 0;return typeof e=="number"?e>=0?e&AD:TF:e}function YT(n,e,t){let r=1<<n;return!!(t[e+(n>>RD)]&r)}function QT(n,e){return!(n&2)&&!(n&1&&e)}var Po=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return ND(this._tNode,this._lView,e,_o(r),t)}};function TF(){return new Po(Ct(),De())}function zn(n){return aa(()=>{let e=n.prototype.constructor,t=e[Gc]||ay(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Gc]||ay(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ay(n){return av(n)?()=>{let e=ay(wt(n));return e&&e()}:Eo(n)}function DF(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[oe]&2048&&!Qs(s);){let a=OD(o,s,t,r|2,rr);if(a!==rr)return a;let u=o.parent;if(!u){let l=s[Tv];if(l){let h=l.get(t,rr,r);if(h!==rr)return h}u=kD(s),s=s[Co]}o=u}return i}function kD(n){let e=n[de],t=e.type;return t===2?e.declTNode:t===1?n[bn]:null}function SF(){return zh(Ct(),De())}function zh(n,e){return new or(jn(n,e))}var or=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=SF}return n})();function FD(n){return(n.flags&128)===128}var Sy=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Sy||{}),LD=new Map,AF=0;function RF(){return AF++}function MF(n){LD.set(n[Xc],n)}function cy(n){LD.delete(n[Xc])}var JT="__ngContext__";function ra(n,e){er(e)?(n[JT]=e[Xc],MF(e)):n[JT]=e}function VD(n){return jD(n[Ys])}function UD(n){return jD(n[wn])}function jD(n){for(;n!==null&&!Un(n);)n=n[wn];return n}var uy;function Ay(n){uy=n}function BD(){if(uy!==void 0)return uy;if(typeof document<"u")return document;throw new z(210,!1)}var qh=new q("",{providedIn:"root",factory:()=>PF}),PF="ng",Gh=new q(""),Fo=new q("",{providedIn:"platform",factory:()=>"unknown"});var Wh=new q("",{providedIn:"root",factory:()=>BD().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var xF="h",NF="b";var $D=!1,HD=new q("",{providedIn:"root",factory:()=>$D});var OF=(n,e,t,r)=>{};function kF(n,e,t,r){OF(n,e,t,r)}function Ry(n){return(n.flags&32)===32}var FF=()=>null;function zD(n,e,t=!1){return FF(n,e,t)}function qD(n,e){let t=n.contentQueries;if(t!==null){let r=fe(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];jv(o),a.contentQueries(2,e[s],s)}}}finally{fe(r)}}}function ly(n,e,t){jv(0);let r=fe(null);try{e(n,t)}finally{fe(r)}}function GD(n,e,t){if(Dv(e)){let r=fe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{fe(r)}}}var kr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(kr||{});var dy=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${sv})`}};function My(n){return n instanceof dy?n.changingThisBreaksApplicationSecurity:n}function WD(n){return n instanceof Function?n():n}function LF(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var KD="ng-template";function VF(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&LF(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Py(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Py(n){return n.type===4&&n.value!==KD}function UF(n,e,t){let r=n.type===4&&!t?KD:n.value;return e===r}function jF(n,e,t){let r=4,i=n.attrs,o=i!==null?HF(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!$n(r)&&!$n(u))return!1;if(s&&$n(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!UF(n,u,t)||u===""&&e.length===1){if($n(r))return!1;s=!0}}else if(r&8){if(i===null||!VF(n,i,u,t)){if($n(r))return!1;s=!0}}else{let l=e[++a],h=BF(u,i,Py(n),t);if(h===-1){if($n(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if($n(r))return!1;s=!0}}}}return $n(r)||s}function $n(n){return(n&1)===0}function BF(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return zF(e,n)}function $F(n,e,t=!1){for(let r=0;r<e.length;r++)if(jF(n,e[r],t))return!0;return!1}function HF(n){for(let e=0;e<n.length;e++){let t=n[e];if(mF(t))return e}return n.length}function zF(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function ZT(n,e){return n?":not("+e.trim()+")":e}function qF(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!$n(s)&&(e+=ZT(o,i),i=""),r=s,o=o||!$n(r);t++}return i!==""&&(e+=ZT(o,i)),e}function GF(n){return n.map(qF).join(",")}function WF(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!$n(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Sn={};function KF(n,e){return n.createText(e)}function YF(n,e,t){n.setValue(e,t)}function YD(n,e,t){return n.createElement(e,t)}function Nh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function QD(n,e,t){n.appendChild(e,t)}function XT(n,e,t,r,i){r!==null?Nh(n,e,t,r,i):QD(n,e,t)}function QF(n,e,t,r){n.removeChild(null,e,t,r)}function JF(n,e,t){n.setAttribute(e,"style",t)}function ZF(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function JD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&gF(n,e,r),i!==null&&ZF(n,e,i),o!==null&&JF(n,e,o)}function xy(n,e,t,r,i,o,s,a,u,l,h){let p=Xt+r,g=p+i,y=XF(p,g),M=typeof l=="function"?l():l;return y[de]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:M,incompleteFirstPass:!1,ssrId:h}}function XF(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Sn);return t}function eL(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=xy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Ny(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Vn]=i,p[oe]=r|4|128|8|64|1024,(l!==null||n&&n[oe]&2048)&&(p[oe]|=2048),Rv(p),p[bt]=p[Co]=n,p[Ot]=t,p[Nr]=s||n&&n[Nr],p[Be]=a||n&&n[Be],p[Ii]=u||n&&n[Ii]||null,p[bn]=o,p[Xc]=RF(),p[Zc]=h,p[Tv]=l,p[Cn]=e.type==2?n[Cn]:p,p}function tL(n,e,t){let r=jn(e,n),i=eL(t),o=n[Nr].rendererFactory,s=Oy(n,Ny(n,i,null,ZD(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function ZD(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function XD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Oy(n,e){return n[Ys]?n[Cv][wn]=e:n[Ys]=e,n[Cv]=e,e}function D(n=1){eS(qt(),De(),Or()+n,!1)}function eS(n,e,t,r){if(!r)if((e[oe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Ch(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Th(e,o,0,t)}Ci(t)}var Kh=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Kh||{});function hy(n,e,t,r){let i=fe(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Kh.SignalBased)!==0&&(u=e[o][xt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):ID(e,u,o,r)}finally{fe(i)}}var ir=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(ir||{}),nL;function ky(n,e){return nL(n,e)}var ia=new Set,Yh=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Yh||{}),Lo=new q(""),eD=new Set;function pu(n){eD.has(n)||(eD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var tS=!1,fy=class extends at{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,yT()&&(this.destroyRef=x(Bn,{optional:!0})??void 0,this.pendingTasks=x(nr,{optional:!0})??void 0)}emit(e){let t=fe(null);try{super.next(e)}finally{fe(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ge&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Je=fy;function nS(n){let e,t;function r(){n=cu;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function tD(n){return queueMicrotask(()=>n()),()=>{n=cu}}var Fy="isAngularZone",Oh=Fy+"_ID",rL=0,Me=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Je(!1);onMicrotaskEmpty=new Je(!1);onStable=new Je(!1);onError=new Je(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=tS}=e;if(typeof Zone>"u")throw new z(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,sL(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Fy)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new z(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new z(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,iL,cu,cu);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},iL={};function Ly(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function oL(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){nS(()=>{n.callbackScheduled=!1,py(n),n.isCheckStableRunning=!0,Ly(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),py(n)}function sL(n){let e=()=>{oL(n)},t=rL++;n._inner=n._inner.fork({name:"angular",properties:{[Fy]:!0,[Oh]:t,[Oh+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(aL(u))return r.invokeTask(o,s,a,u);try{return nD(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),rD(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return nD(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!cL(u)&&e(),rD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,py(n),Ly(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function py(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function nD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function rD(n){n._nesting--,Ly(n)}var kh=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Je;onMicrotaskEmpty=new Je;onStable=new Je;onError=new Je;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function aL(n){return rS(n,"__ignore_ng_zone__")}function cL(n){return rS(n,"__scheduler_tick__")}function rS(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Vy=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}return n})(),iS=[0,1,2,3],oS=(()=>{class n{ngZone=x(Me);scheduler=x(Pr);errorHandler=x(Ln,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){x(Lo,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Ne(16),this.executing=!0;for(let r of iS)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Ne(17)}register(t){let{view:r}=t;r!==void 0?((r[Ao]??=[]).push(t),Js(r),r[oe]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Yh.AFTER_NEXT_RENDER,t):t()}static \u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}return n})(),Fh=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ao];e&&(this.view[Ao]=e.filter(t=>t!==this))}};function Qh(n,e){let t=e?.injector??x(Qe);return pu("NgAfterNextRender"),lL(n,t,e,!0)}function uL(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function lL(n,e,t,r){let i=e.get(Vy);i.impl??=e.get(oS);let o=e.get(Lo,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Bn):null,a=e.get(Ih,null,{optional:!0}),u=new Fh(i.impl,uL(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var dL=new q("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function sS(n,e,t){let r=n.get(dL);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function hL(n,e){for(let[t,r]of e)sS(n,r.animateFns)}function iD(n,e,t,r){let i=n?.[tu]?.enter;e!==null&&i&&i.has(t.index)&&hL(r,i)}function ea(n,e,t,r,i,o,s,a){if(i!=null){let u,l=!1;Un(i)?u=i:er(i)&&(l=!0,i=i[Vn]);let h=Tn(i);n===0&&r!==null?(iD(a,r,o,t),s==null?QD(e,r,h):Nh(e,r,h,s||null,!0)):n===1&&r!==null?(iD(a,r,o,t),Nh(e,r,h,s||null,!0)):n===2?oD(a,o,t,p=>{QF(e,h,l,p)}):n===3&&oD(a,o,t,()=>{e.destroyNode(h)}),u!=null&&TL(e,n,t,u,o,r,s)}}function fL(n,e){aS(n,e),e[Vn]=null,e[bn]=null}function pL(n,e,t,r,i,o){r[Vn]=i,r[bn]=e,Jh(n,r,t,1,i,o)}function aS(n,e){e[Nr].changeDetectionScheduler?.notify(9),Jh(n,e,e[Be],2,null,null)}function gL(n){let e=n[Ys];if(!e)return Zv(n[de],n);for(;e;){let t=null;if(er(e))t=e[Ys];else{let r=e[en];r&&(t=r)}if(!t){for(;e&&!e[wn]&&e!==n;)er(e)&&Zv(e[de],e),e=e[bt];e===null&&(e=n),er(e)&&Zv(e[de],e),t=e&&e[wn]}e=t}}function Uy(n,e){let t=n[ru],r=t.indexOf(e);t.splice(r,1)}function cS(n,e){if(Ro(e))return;let t=e[Be];t.destroyNode&&Jh(n,e,t,3,null,null),gL(e)}function Zv(n,e){if(Ro(e))return;let t=fe(null);try{e[oe]&=-129,e[oe]|=256,e[cn]&&jc(e[cn]),yL(n,e),vL(n,e),e[de].type===1&&e[Be].destroy();let r=e[To];if(r!==null&&Un(e[bt])){r!==e[bt]&&Uy(r,e);let i=e[So];i!==null&&i.detachView(n)}cy(e)}finally{fe(t)}}function oD(n,e,t,r){let i=n?.[tu];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&ia.add(n),sS(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),mL(n,r)}else n&&ia.delete(n),r(!1)},i)}function mL(n,e){let t=n[tu]?.running;if(t){t.then(()=>{n[tu].running=void 0,ia.delete(n),e(!0)});return}e(!1)}function vL(n,e){let t=n.cleanup,r=e[Ks];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Ks]=null);let i=e[Rr];if(i!==null){e[Rr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[eu];if(o!==null){e[eu]=null;for(let s of o)s.destroy()}}function yL(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof xo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Ne(4,a,u);try{u.call(a)}finally{Ne(5,a,u)}}else{Ne(4,i,o);try{o.call(i)}finally{Ne(5,i,o)}}}}}function _L(n,e,t){return EL(n,e.parent,t)}function EL(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Vn];if(bi(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===kr.None||i===kr.Emulated)return null}return jn(r,t)}function IL(n,e,t){return bL(n,e,t)}function wL(n,e,t){return n.type&40?jn(n,t):null}var bL=wL,sD;function jy(n,e,t,r){let i=_L(n,r,e),o=e[Be],s=r.parent||e[bn],a=IL(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)XT(o,i,t[u],a,!1);else XT(o,i,t,a,!1);sD!==void 0&&sD(o,r,e,t,i)}function uu(n,e){if(e!==null){let t=e.type;if(t&3)return jn(e,n);if(t&4)return gy(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return uu(n,r);{let i=n[e.index];return Un(i)?gy(-1,i):Tn(i)}}else{if(t&128)return uu(n,e.next);if(t&32)return ky(e,n)()||Tn(n[e.index]);{let r=uS(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=yi(n[Cn]);return uu(i,r)}else return uu(n,e.next)}}}return null}function uS(n,e){if(e!==null){let r=n[Cn][bn],i=e.projection;return r.projection[i]}return null}function gy(n,e){let t=en+n+1;if(t<e.length){let r=e[t],i=r[de].firstChild;if(i!==null)return uu(r,i)}return e[wi]}function By(n,e,t,r,i,o,s){for(;t!=null;){let a=r[Ii];if(t.type===128){t=t.next;continue}let u=r[t.index],l=t.type;if(s&&e===0&&(u&&ra(Tn(u),r),t.flags|=2),!Ry(t))if(l&8)By(n,e,t.child,r,i,o,!1),ea(e,n,a,i,u,t,o,r);else if(l&32){let h=ky(t,r),p;for(;p=h();)ea(e,n,a,i,p,t,o,r);ea(e,n,a,i,u,t,o,r)}else l&16?CL(n,e,r,t,i,o):ea(e,n,a,i,u,t,o,r);t=s?t.projectionNext:t.next}}function Jh(n,e,t,r,i,o){By(t,r,n.firstChild,e,i,o,!1)}function CL(n,e,t,r,i,o){let s=t[Cn],u=s[bn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];ea(e,n,t[Ii],i,h,r,o,t)}else{let l=u,h=s[bt];FD(r)&&(l.flags|=128),By(n,e,l,h,i,o,!0)}}function TL(n,e,t,r,i,o,s){let a=r[wi],u=Tn(r);a!==u&&ea(e,n,t,o,a,i,s);for(let l=en;l<r.length;l++){let h=r[l];Jh(h[de],h,n,e,o,a)}}function DL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:ir.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ir.Important),n.setStyle(t,r,i,o))}}function lS(n,e,t,r,i){let o=Or(),s=r&2;try{Ci(-1),s&&e.length>Xt&&eS(n,e,Xt,!1),Ne(s?2:0,i,t),t(r,i)}finally{Ci(o),Ne(s?3:1,i,t)}}function $y(n,e,t){NL(n,e,t),(t.flags&64)===64&&OL(n,e,t)}function Hy(n,e,t=jn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function SL(n,e,t,r){let o=r.get(HD,$D)||t===kr.ShadowDom,s=n.selectRootElement(e,o);return AL(s),s}function AL(n){RL(n)}var RL=()=>null;function ML(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function dS(n,e,t,r,i,o){let s=e[de];if(zy(n,s,e,t,r)){bi(n)&&xL(e,n.index);return}n.type&3&&(t=ML(t)),PL(n,e,t,r,i,o)}function PL(n,e,t,r,i,o){if(n.type&3){let s=jn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function xL(n,e){let t=Dn(e,n);t[oe]&16||(t[oe]|=64)}function NL(n,e,t){let r=t.directiveStart,i=t.directiveEnd;bi(t)&&tL(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Ph(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=xh(e,n,s,t);if(ra(u,e),o!==null&&VL(e,s-r,u,a,t,o),tr(a)){let l=Dn(t.index,e);l[Ot]=xh(e,n,s,t)}}}function OL(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=kT();try{Ci(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];gh(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&kL(u,l)}}finally{Ci(-1),gh(s)}}function kL(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function hS(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];$F(e,o.selectors,!1)&&(r??=[],tr(o)?r.unshift(o):r.push(o))}return r}function FL(n,e,t,r,i,o){let s=jn(n,e);LL(e[Be],s,o,n.value,t,r,i)}function LL(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Gs(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function VL(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];hy(r,t,u,l)}}function fS(n,e,t,r,i){let o=Xt+t,s=e[de],a=i(s,e,n,r,t);e[o]=a,Zs(n,!0);let u=n.type===2;return u?(JD(e[Be],a,n),(DT()===0||iu(n))&&ra(a,e),ST()):ra(a,e),_h()&&(!u||!Ry(n))&&jy(s,e,a,n),n}function pS(n){let e=n;return Lv()?MT():(e=e.parent,Zs(e,!1)),e}function UL(n,e){let t=n[Ii];if(!t)return;let r;try{r=t.get(tn,null)}catch{r=null}r?.(e)}function zy(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];hy(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];hy(h,l,r,i),a=!0}return a}function jL(n,e){let t=Dn(e,n),r=t[de];BL(r,t);let i=t[Vn];i!==null&&t[Zc]===null&&(t[Zc]=zD(i,t[Ii])),Ne(18),qy(r,t,t[Ot]),Ne(19,t[Ot])}function BL(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function qy(n,e,t){mh(e);try{let r=n.viewQuery;r!==null&&ly(1,r,t);let i=n.template;i!==null&&lS(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[So]?.finishViewCreation(n),n.staticContentQueries&&qD(n,e),n.staticViewQueries&&ly(2,n.viewQuery,t);let o=n.components;o!==null&&$L(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[oe]&=-5,vh()}}function $L(n,e){for(let t=0;t<e.length;t++)jL(n,e[t])}function HL(n,e,t,r){let i=fe(null);try{let o=e.tView,a=n[oe]&4096?4096:16,u=Ny(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[To]=l;let h=n[So];return h!==null&&(u[So]=h.createEmbeddedView(o)),qy(o,u,t),u}finally{fe(i)}}function aD(n,e){return!e||e.firstChild===null||FD(n)}function du(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Tn(o)),Un(o)&&gS(o,r);let s=t.type;if(s&8)du(n,e,t.child,r);else if(s&32){let a=ky(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=uS(e,t);if(Array.isArray(a))r.push(...a);else{let u=yi(e[Cn]);du(u[de],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function gS(n,e){for(let t=en;t<n.length;t++){let r=n[t],i=r[de].firstChild;i!==null&&du(r[de],r,i,e)}n[wi]!==n[Vn]&&e.push(n[wi])}function mS(n){if(n[Ao]!==null){for(let e of n[Ao])e.impl.addSequence(e);n[Ao].length=0}}var vS=[];function zL(n){return n[cn]??qL(n)}function qL(n){let e=vS.pop()??Object.create(WL);return e.lView=n,e}function GL(n){n.lView[cn]!==n&&(n.lView=null,vS.push(n))}var WL=K(L({},Ts),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Js(n.lView)},consumerOnSignalRead(){this.lView[cn]=this}});function KL(n){let e=n[cn]??Object.create(YL);return e.lView=n,e}var YL=K(L({},Ts),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=yi(n.lView);for(;e&&!yS(e[de]);)e=yi(e);e&&Mv(e)},consumerOnSignalRead(){this.lView[cn]=this}});function yS(n){return n.type!==2}function _S(n){if(n[eu]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[eu])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[oe]&8192)}}var QL=100;function ES(n,e=0){let r=n[Nr].rendererFactory,i=!1;i||r.begin?.();try{JL(n,e)}finally{i||r.end?.()}}function JL(n,e){let t=Vv();try{Uv(!0),my(n,e);let r=0;for(;ou(n);){if(r===QL)throw new z(103,!1);r++,my(n,1)}}finally{Uv(t)}}function ZL(n,e,t,r){if(Ro(e))return;let i=e[oe],o=!1,s=!1;mh(e);let a=!0,u=null,l=null;o||(yS(n)?(l=zL(e),u=Ss(l)):Cd()===null?(a=!1,l=KL(e),u=Ss(l)):e[cn]&&(jc(e[cn]),e[cn]=null));try{Rv(e),xT(n.bindingStartIndex),t!==null&&lS(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Ch(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Th(e,y,0,null),Qv(e,0)}if(s||XL(e),_S(e),IS(e,0),n.contentQueries!==null&&qD(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Ch(e,y)}else{let y=n.contentHooks;y!==null&&Th(e,y,1),Qv(e,1)}tV(n,e);let p=n.components;p!==null&&bS(e,p,0);let g=n.viewQuery;if(g!==null&&ly(2,g,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Ch(e,y)}else{let y=n.viewHooks;y!==null&&Th(e,y,2),Qv(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[lh]){for(let y of e[lh])y();e[lh]=null}o||(mS(e),e[oe]&=-73)}catch(h){throw o||Js(e),h}finally{l!==null&&(Vc(l,u),a&&GL(l)),vh()}}function IS(n,e){for(let t=VD(n);t!==null;t=UD(t))for(let r=en;r<t.length;r++){let i=t[r];wS(i,e)}}function XL(n){for(let e=VD(n);e!==null;e=UD(e)){if(!(e[oe]&2))continue;let t=e[ru];for(let r=0;r<t.length;r++){let i=t[r];Mv(i)}}}function eV(n,e,t){Ne(18);let r=Dn(e,n);wS(r,t),Ne(19,r[Ot])}function wS(n,e){hh(n)&&my(n,e)}function my(n,e){let r=n[de],i=n[oe],o=n[cn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Uc(o)),s||=!1,o&&(o.dirty=!1),n[oe]&=-9217,s)ZL(r,n,r.template,n[Ot]);else if(i&8192){let a=fe(null);try{_S(n),IS(n,1);let u=r.components;u!==null&&bS(n,u,1),mS(n)}finally{fe(a)}}}function bS(n,e,t){for(let r=0;r<e.length;r++)eV(n,e[r],t)}function tV(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ci(~i);else{let o=i,s=t[++r],a=t[++r];OT(s,o);let u=e[o];Ne(24,u),a(2,u),Ne(25,u)}}}finally{Ci(-1)}}function Gy(n,e){let t=Vv()?64:1088;for(n[Nr].changeDetectionScheduler?.notify(e);n;){n[oe]|=t;let r=yi(n);if(Qs(n)&&!r)return n;n=r}return null}function CS(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function nV(n,e,t,r=!0){let i=e[de];if(rV(i,e,n,t),r){let s=gy(t,n),a=e[Be],u=a.parentNode(n[wi]);u!==null&&pL(i,n[bn],a,e,u,s)}let o=e[Zc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function vy(n,e){if(n.length<=en)return;let t=en+e,r=n[t];if(r){let i=r[To];i!==null&&i!==n&&Uy(i,r),e>0&&(n[t-1][wn]=r[wn]);let o=Yc(n,en+e);fL(r[de],r);let s=o[So];s!==null&&s.detachView(o[de]),r[bt]=null,r[wn]=null,r[oe]&=-129}return r}function rV(n,e,t,r){let i=en+r,o=t.length;r>0&&(t[i-1][wn]=e),r<o-en?(e[wn]=t[i],mv(t,en+r,e)):(t.push(e),e[wn]=null),e[bt]=t;let s=e[To];s!==null&&t!==s&&TS(s,e);let a=e[So];a!==null&&a.insertView(n),fh(e),e[oe]|=128}function TS(n,e){let t=n[ru],r=e[bt];if(er(r))n[oe]|=2;else{let i=r[bt][Cn];e[Cn]!==i&&(n[oe]|=2)}t===null?n[ru]=[e]:t.push(e)}var Ti=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[de];return du(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Ot]}set context(e){this._lView[Ot]=e}get destroyed(){return Ro(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[bt];if(Un(e)){let t=e[nu],r=t?t.indexOf(this):-1;r>-1&&(vy(e,r),Yc(t,r))}this._attachedToViewContainer=!1}cS(this._lView[de],this._lView)}onDestroy(e){Pv(this._lView,e)}markForCheck(){Gy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[oe]&=-129}reattach(){fh(this._lView),this._lView[oe]|=128}detectChanges(){this._lView[oe]|=1024,ES(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Qs(this._lView),t=this._lView[To];t!==null&&!e&&Uy(t,this._lView),aS(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new z(902,!1);this._appRef=e;let t=Qs(this._lView),r=this._lView[To];r!==null&&!t&&TS(r,this._lView),fh(this._lView)}};var gu=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=iV;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=HL(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Ti(o)}}return n})();function iV(){return oV(Ct(),De())}function oV(n,e){return n.type&4?new gu(e,n,zh(n,e)):null}function Zh(n,e,t,r,i){let o=n.data[e];if(o===null)o=sV(n,e,t,r,i),NT()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=RT();o.injectorIndex=s===null?-1:s.injectorIndex}return Zs(o,!0),o}function sV(n,e,t,r,i){let o=Fv(),s=Lv(),a=s?o:o&&o.parent,u=n.data[e]=cV(n,a,t,e,r,i);return aV(n,u,o,s),u}function aV(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function cV(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return AT()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var gZ=new RegExp(`^(\\d+)*(${NF}|${xF})*(.*)`);var uV=()=>null;function cD(n,e){return uV(n,e)}var DS=class{},Xh=class{},yy=class{resolveComponentFactory(e){throw new z(917,!1)}},mu=class{static NULL=new yy},No=class{},Lr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>lV()}return n})();function lV(){let n=De(),e=Ct(),t=Dn(e.index,n);return(er(t)?t:n)[Be]}var SS=(()=>{class n{static \u0275prov=G({token:n,providedIn:"root",factory:()=>null})}return n})();var Dh={},_y=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Dh,r);return i!==Dh||t===Dh?i:this.parentInjector.get(e,t,r)}};function Lh(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=ih(i,a);else if(o==2){let u=a,l=e[++s];r=ih(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function W(n,e=0){let t=De();if(t===null)return pe(n,e);let r=Ct();return ND(r,t,wt(n),e)}function AS(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}fV(n,e,t,a,o,u,l)}o!==null&&r!==null&&dV(t,r,o)}function dV(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new z(-301,!1);r.push(e[i],o)}}function hV(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function fV(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&tr(y)&&(u=!0,hV(n,t,g)),sy(Ph(t,e),n,y.type)}_V(t,n.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=XD(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(t.mergedAttrs=na(t.mergedAttrs,y.hostAttrs),gV(n,t,e,p,y),yV(p,y,i),s!==null&&s.has(y)){let[k,O]=s.get(y);t.directiveToIndex.set(y.type,[p,k+t.directiveStart,O+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let M=y.type.prototype;!l&&(M.ngOnChanges||M.ngOnInit||M.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(M.ngOnChanges||M.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}pV(n,t,o)}function pV(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))uD(0,e,i,r),uD(1,e,i,r),dD(e,r,!1);else{let o=t.get(i);lD(0,e,o,r),lD(1,e,o,r),dD(e,r,!0)}}}function uD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),RS(e,o)}}function lD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),RS(e,s)}}function RS(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function dD(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Py(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function gV(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Eo(i.type,!0)),s=new xo(o,tr(i),W,null);n.blueprint[r]=s,t[r]=s,mV(n,e,r,XD(n,t,i.hostVars,Sn),i)}function mV(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;vV(s)!=a&&s.push(a),s.push(t,r,o)}}function vV(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function yV(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;tr(e)&&(t[""]=n)}}function _V(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function MS(n,e,t,r,i,o,s,a){let u=e[de],l=u.consts,h=Mo(l,s),p=Zh(u,n,t,r,h);return o&&AS(u,e,p,Mo(l,a),i),p.mergedAttrs=na(p.mergedAttrs,p.attrs),p.attrs!==null&&Lh(p,p.attrs,!1),p.mergedAttrs!==null&&Lh(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function PS(n,e){TD(n,e),Dv(e)&&n.queries.elementEnd(e)}function EV(n,e,t,r,i,o){let s=e.consts,a=Mo(s,i),u=Zh(e,n,t,r,a);if(u.mergedAttrs=na(u.mergedAttrs,u.attrs),o!=null){let l=Mo(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&Lh(u,u.attrs,!1),u.mergedAttrs!==null&&Lh(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Wy(n){return NS(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function xS(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function NS(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Di(n,e,t){if(t===Sn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function IV(n,e,t,r){let i=Di(n,e,t);return Di(n,e+1,r)||i}function Sh(n,e,t){return function r(i){let o=bi(n)?Dn(n.index,e):e;Gy(o,5);let s=e[Ot],a=hD(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=hD(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function hD(n,e,t,r){let i=fe(null);try{return Ne(6,e,t),t(r)!==!1}catch(o){return UL(n,o),!1}finally{Ne(7,e,t),fe(i)}}function OS(n,e,t,r,i,o,s,a){let u=iu(n),l=!1,h=null;if(!r&&u&&(h=bV(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=jn(n,t),g=r?r(p):p;kF(t,g,o,a);let y=i.listen(g,o,a);if(!wV(o)){let M=r?k=>r(Tn(k[n.index])):n.index;kS(M,e,t,o,a,y,!1)}}return l}function wV(n){return n.startsWith("animation")||n.startsWith("transition")}function bV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Ks],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function kS(n,e,t,r,i,o,s){let a=e.firstCreatePass?TT(e):null,u=CT(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function fD(n,e,t,r,i,o){let s=e[t],a=e[de],l=a.data[t].outputs[r],p=s[l].subscribe(o);kS(n.index,a,e,i,o,p,!0)}var Ey=Symbol("BINDING");var Vh=class extends mu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ei(e);return new oa(t,this.ngModule)}};function CV(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Kh.SignalBased)!==0};return i&&(o.transform=i),o})}function TV(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function DV(n,e,t){let r=e instanceof ut?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new _y(t,r):t}function SV(n){let e=n.get(No,null);if(e===null)throw new z(407,!1);let t=n.get(SS,null),r=n.get(Pr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function AV(n,e){let t=FS(n);return YD(e,t,t==="svg"?Sv:t==="math"?ET:null)}function FS(n){return(n.selectors[0][0]||"div").toLowerCase()}var oa=class extends Xh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=CV(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=TV(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=GF(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Ne(22);let a=fe(null);try{let u=this.componentDef,l=RV(r,u,s,o),h=DV(u,i||this.ngModule,e),p=SV(h),g=p.rendererFactory.createRenderer(null,u),y=r?SL(g,r,u.encapsulation,h):AV(u,g),M=s?.some(pD)||o?.some(B=>typeof B!="function"&&B.bindings.some(pD)),k=Ny(null,l,null,512|ZD(u),null,null,p,g,h,null,zD(y,h,!0));k[Xt]=y,mh(k);let O=null;try{let B=MS(Xt,k,2,"#host",()=>l.directiveRegistry,!0,0);JD(g,y,B),ra(y,k),$y(l,k,B),GD(l,B,k),PS(l,B),t!==void 0&&PV(B,this.ngContentSelectors,t),O=Dn(B.index,k),k[Ot]=O[Ot],qy(l,k,null)}catch(B){throw O!==null&&cy(O),cy(k),B}finally{Ne(23),vh()}return new Uh(this.componentType,k,!!M)}finally{fe(a)}}};function RV(n,e,t,r){let i=n?["ng-version","20.3.13"]:WF(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[Ey].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[Ey].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=Ev(p);u.push(g)}return xy(0,null,MV(o,s),1,a,u,null,null,null,[i],null)}function MV(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function pD(n){let e=n[Ey].kind;return e==="input"||e==="twoWay"}var Uh=class extends DS{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=dh(t[de],Xt),this.location=zh(this._tNode,t),this.instance=Dn(this._tNode.index,t)[Ot],this.hostView=this.changeDetectorRef=new Ti(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=zy(r,i[de],i,e,t);this.previousInputValues.set(e,t);let s=Dn(r.index,i);Gy(s,1)}get injector(){return new Po(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function PV(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Vo=(()=>{class n{static __NG_ELEMENT_ID__=xV}return n})();function xV(){let n=Ct();return OV(n,De())}var NV=Vo,LS=class extends NV{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return zh(this._hostTNode,this._hostLView)}get injector(){return new Po(this._hostTNode,this._hostLView)}get parentInjector(){let e=Dy(this._hostTNode,this._hostLView);if(SD(e)){let t=Mh(e,this._hostLView),r=Rh(e),i=t[de].data[r+8];return new Po(i,t)}else return new Po(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=gD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-en}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=cD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,aD(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!aF(e),l;if(u)l=t;else{let O=t||{};l=O.index,r=O.injector,i=O.projectableNodes,o=O.environmentInjector||O.ngModuleRef,s=O.directives,a=O.bindings}let h=u?e:new oa(Ei(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let B=(u?p:this.parentInjector).get(ut,null);B&&(o=B)}let g=Ei(h.componentType??{}),y=cD(this._lContainer,g?.id??null),M=y?.firstChild??null,k=h.create(p,i,M,o,s,a);return this.insertImpl(k.hostView,l,aD(this._hostTNode,y)),k}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(IT(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[bt],l=new LS(u,u[bn],u[bt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return nV(s,i,o,r),e.attachToViewContainerRef(),mv(Xv(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=gD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=vy(this._lContainer,t);r&&(Yc(Xv(this._lContainer),t),cS(r[de],r))}detach(e){let t=this._adjustIndex(e,-1),r=vy(this._lContainer,t);return r&&Yc(Xv(this._lContainer),t)!=null?new Ti(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function gD(n){return n[nu]}function Xv(n){return n[nu]||(n[nu]=[])}function OV(n,e){let t,r=e[n.index];return Un(r)?t=r:(t=CS(r,e,null,n),e[n.index]=t,Oy(e,t)),FV(t,e,n,r),new LS(t,n,e)}function kV(n,e){let t=n[Be],r=t.createComment(""),i=jn(e,n),o=t.parentNode(i);return Nh(t,o,r,t.nextSibling(i),!1),r}var FV=UV,LV=()=>!1;function VV(n,e,t){return LV(n,e,t)}function UV(n,e,t,r){if(n[wi])return;let i;t.type&8?i=Tn(r):i=kV(e,t),n[wi]=i}var Oo=class{},ef=class{};var jh=class extends Oo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Vh(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=_v(e);this._bootstrapComponents=WD(o.bootstrap),this._r3Injector=Hv(e,t,[{provide:Oo,useValue:this},{provide:mu,useValue:this.componentFactoryResolver},...r],Mr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Bh=class extends ef{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new jh(this.moduleType,e,[])}};var hu=class extends Oo{injector;componentFactoryResolver=new Vh(this);instance=null;constructor(e){super();let t=new wo([...e.providers,{provide:Oo,useValue:this},{provide:mu,useValue:this.componentFactoryResolver}],e.parent||Jc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function vu(n,e,t=null){return new hu({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var jV=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Iv(!1,t.type),i=r.length>0?vu([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=G({token:n,providedIn:"environment",factory:()=>new n(pe(ut))})}return n})();function dt(n){return aa(()=>{let e=VS(n),t=K(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Sy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(jV).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||kr.Emulated,styles:n.styles||zt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&pu("NgStandalone"),US(t);let r=n.dependencies;return t.directiveDefs=mD(r,BV),t.pipeDefs=mD(r,hT),t.id=zV(t),t})}function BV(n){return Ei(n)||Ev(n)}function Vr(n){return aa(()=>({type:n.type,bootstrap:n.bootstrap||zt,declarations:n.declarations||zt,imports:n.imports||zt,exports:n.exports||zt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function $V(n,e){if(n==null)return _i;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Kh.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function HV(n){if(n==null)return _i;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Oe(n){return aa(()=>{let e=VS(n);return US(e),e})}function VS(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||_i,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||zt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:$V(n.inputs,e),outputs:HV(n.outputs),debugInfo:null}}function US(n){n.features?.forEach(e=>e(n))}function mD(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function zV(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function qV(n){return Object.getPrototypeOf(n.prototype).constructor}function pt(n){let e=qV(n.type),t=!0,r=[n];for(;e;){let i;if(tr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new z(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=ey(n.inputs),s.declaredInputs=ey(n.declaredInputs),s.outputs=ey(n.outputs);let a=i.hostBindings;a&&QV(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&KV(n,u),l&&YV(n,l),GV(n,i),oT(n.outputs,i.outputs),tr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===pt&&(t=!1)}}e=Object.getPrototypeOf(e)}WV(r)}function GV(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function WV(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=na(i.hostAttrs,t=na(t,i.hostAttrs))}}function ey(n){return n===_i?{}:n===zt?[]:n}function KV(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function YV(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function QV(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function JV(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=na(n.mergedAttrs,n.attrs);let h=n.tView=xy(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Zs(n,!1);let u=XV(t,e,n,r);_h()&&jy(t,e,u,n),ra(u,e);let l=CS(u,e,u,n);e[r+Xt]=l,Oy(e,l),VV(l,n,e)}function ZV(n,e,t,r,i,o,s,a,u,l,h){let p=t+Xt,g;return e.firstCreatePass?(g=Zh(e,p,4,s||null,a||null),Nv()&&AS(e,n,g,Mo(e.consts,l),hS),TD(e,g)):g=e.data[p],JV(g,n,e,t,r,i,o,u),iu(g)&&$y(e,n,g),l!=null&&Hy(n,g,h),g}function te(n,e,t,r,i,o,s,a){let u=De(),l=qt(),h=Mo(l.consts,o);return ZV(u,l,n,e,t,r,i,h,void 0,s,a),te}var XV=e2;function e2(n,e,t,r){return Eh(!0),e[Be].createComment("")}var Ky=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Yy=new q("");function Si(n){return!!n&&typeof n.then=="function"}function Qy(n){return!!n&&typeof n.subscribe=="function"}var jS=new q("");var Jy=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=x(jS,{optional:!0})??[];injector=x(Qe);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=lt(this.injector,i);if(Si(o))t.push(o);else if(Qy(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tf=new q("");function BS(){Dm(()=>{let n="";throw new z(600,n)})}function $S(n){return n.isBoundToModule}var t2=10;var Ur=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=x(tn);afterRenderManager=x(Vy);zonelessEnabled=x(au);rootEffectScheduler=x(Yv);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new at;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=x(nr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ue(t=>!t))}constructor(){x(Lo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=x(ut);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Qe.NULL){return this._injector.get(Me).run(()=>{Ne(10);let s=t instanceof Xh;if(!this._injector.get(Jy).done){let M="";throw new z(405,M)}let u;s?u=t:u=this._injector.get(mu).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=$S(u)?void 0:this._injector.get(Oo),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(Yy,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),lu(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),Ne(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ne(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Yh.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new z(101,!1);let t=fe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,fe(t),this.afterTick.next(),Ne(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(No,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<t2;)Ne(14),this.synchronizeOnce(),Ne(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ou(i))continue;let o=r&&!this.zonelessEnabled?0:1;ES(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>ou(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;lu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(tf,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>lu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new z(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function nf(n,e,t,r){let i=De(),o=su();if(Di(i,o,e)){let s=qt(),a=yh();FL(a,i,n,e,t,r)}return nf}var wZ=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function U(n,e,t){let r=De(),i=su();if(Di(r,i,e)){let o=qt(),s=yh();dS(s,r,n,e,r[Be],t)}return U}function Iy(n,e,t,r,i){zy(e,n,t,i?"class":"style",r)}function I(n,e,t,r){let i=De(),o=i[de],s=n+Xt,a=o.firstCreatePass?MS(s,i,2,e,hS,Nv(),t,r):o.data[s];if(fS(a,i,n,e,HS),iu(a)){let u=i[de];$y(u,i,a),GD(u,a,i)}return r!=null&&Hy(i,a),I}function _(){let n=qt(),e=Ct(),t=pS(e);return n.firstCreatePass&&PS(n,t),Ov(t)&&kv(),xv(),t.classesWithoutHost!=null&&fF(t)&&Iy(n,t,De(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&pF(t)&&Iy(n,t,De(),t.stylesWithoutHost,!1),_}function be(n,e,t,r){return I(n,e,t,r),_(),be}function kt(n,e,t,r){let i=De(),o=i[de],s=n+Xt,a=o.firstCreatePass?EV(s,o,2,e,t,r):o.data[s];return fS(a,i,n,e,HS),r!=null&&Hy(i,a),kt}function Gt(){let n=Ct(),e=pS(n);return Ov(e)&&kv(),xv(),Gt}function rf(n,e,t,r){return kt(n,e,t,r),Gt(),rf}var HS=(n,e,t,r,i)=>(Eh(!0),YD(e[Be],r,BT()));function Ft(){return De()}var yu="en-US";var n2=yu;function zS(n){typeof n=="string"&&(n2=n.toLowerCase().replace(/_/g,"-"))}function he(n,e,t){let r=De(),i=qt(),o=Ct();return qS(i,r,r[Be],o,n,e,t),he}function of(n,e,t){let r=De(),i=qt(),o=Ct();return(o.type&3||t)&&OS(o,i,r,t,r[Be],n,e,Sh(o,r,e)),of}function qS(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Sh(r,e,o),OS(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=Sh(r,e,o),fD(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=Sh(r,e,o),fD(r,e,p,i,i,u)}}function ne(n=1){return jT(n)}function bh(n,e){return n<<17|e<<2}function ko(n){return n>>17&32767}function r2(n){return(n&2)==2}function i2(n,e){return n&131071|e<<17}function wy(n){return n|2}function sa(n){return(n&131068)>>2}function ty(n,e){return n&-131069|e<<2}function o2(n){return(n&1)===1}function by(n){return n|1}function s2(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ko(s),u=sa(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Ws(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let g=ko(n[a+1]);n[r+1]=bh(g,a),g!==0&&(n[g+1]=ty(n[g+1],r)),n[a+1]=i2(n[a+1],r)}else n[r+1]=bh(a,0),a!==0&&(n[a+1]=ty(n[a+1],r)),a=r;else n[r+1]=bh(u,0),a===0?a=r:n[u+1]=ty(n[u+1],r),u=r;l&&(n[r+1]=wy(n[r+1])),vD(n,h,r,!0),vD(n,h,r,!1),a2(e,h,n,r,o),s=bh(a,u),o?e.classBindings=s:e.styleBindings=s}function a2(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Ws(o,e)>=0&&(t[r+1]=by(t[r+1]))}function vD(n,e,t,r){let i=n[t+1],o=e===null,s=r?ko(i):sa(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];c2(u,e)&&(a=!0,n[s+1]=r?by(l):wy(l)),s=r?ko(l):sa(l)}a&&(n[t+1]=r?wy(i):by(i))}function c2(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ws(n,e)>=0:!1}var Hn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function u2(n){return n.substring(Hn.key,Hn.keyEnd)}function l2(n){return d2(n),GS(n,WS(n,0,Hn.textEnd))}function GS(n,e){let t=Hn.textEnd;return t===e?-1:(e=Hn.keyEnd=h2(n,Hn.key=e,t),WS(n,e,t))}function d2(n){Hn.key=0,Hn.keyEnd=0,Hn.value=0,Hn.valueEnd=0,Hn.textEnd=n.length}function WS(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function h2(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function An(n,e,t){return KS(n,e,t,!1),An}function ke(n,e){return KS(n,e,null,!0),ke}function _u(n){p2(E2,f2,n,!0)}function f2(n,e){for(let t=l2(e);t>=0;t=GS(e,t))ch(n,u2(e),!0)}function KS(n,e,t,r){let i=De(),o=qt(),s=ph(2);if(o.firstUpdatePass&&QS(o,n,s,r),e!==Sn&&Di(i,s,e)){let a=o.data[Or()];JS(o,a,i,i[Be],n,i[s+1]=w2(e,t),r,s)}}function p2(n,e,t,r){let i=qt(),o=ph(2);i.firstUpdatePass&&QS(i,null,o,r);let s=De();if(t!==Sn&&Di(s,o,t)){let a=i.data[Or()];if(ZS(a,r)&&!YS(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(t=ih(u,t||"")),Iy(i,a,s,t,r)}else I2(i,a,s,s[Be],s[o+1],s[o+1]=_2(n,e,t),r,o)}}function YS(n,e){return e>=n.expandoStartIndex}function QS(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Or()],s=YS(n,t);ZS(o,r)&&e===null&&!s&&(e=!1),e=g2(i,o,e,r),s2(i,o,e,t,s,r)}}function g2(n,e,t,r){let i=FT(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=ny(null,n,e,t,r),t=fu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=ny(i,n,e,t,r),o===null){let u=m2(n,e,r);u!==void 0&&Array.isArray(u)&&(u=ny(null,n,e,u[1],r),u=fu(u,e.attrs,r),v2(n,e,r,u))}else o=y2(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function m2(n,e,t){let r=t?e.classBindings:e.styleBindings;if(sa(r)!==0)return n[ko(r)]}function v2(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ko(i)]=r}function y2(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=fu(r,s,t)}return fu(r,e.attrs,t)}function ny(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=fu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function fu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),ch(n,s,t?!0:e[++o]))}return n===void 0?null:n}function _2(n,e,t){if(t==null||t==="")return zt;let r=[],i=My(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function E2(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&ch(n,r,t)}function I2(n,e,t,r,i,o,s,a){i===Sn&&(i=zt);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let g=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,M=null,k;h===p?(u+=2,l+=2,g!==y&&(M=p,k=y)):p===null||h!==null&&h<p?(u+=2,M=h):(l+=2,M=p,k=y),M!==null&&JS(n,e,t,r,M,k,s,a),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function JS(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=o2(l)?yD(u,e,t,i,sa(l),s):void 0;if(!$h(h)){$h(o)||r2(l)&&(o=yD(u,null,t,i,a,s));let p=Av(Or(),t);DL(r,s,p,i,o)}}function yD(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=t[i+1];g===Sn&&(g=p?zt:void 0);let y=p?uh(g,r):h===r?g:void 0;if(l&&!$h(y)&&(y=uh(u,r)),$h(y)&&(a=y,s))return a;let M=n[i+1];i=s?ko(M):sa(M)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=uh(u,r))}return a}function $h(n){return n!==void 0}function w2(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Mr(My(n)))),n}function ZS(n,e){return(n.flags&(e?8:16))!==0}function C(n,e=""){let t=De(),r=qt(),i=n+Xt,o=r.firstCreatePass?Zh(r,i,1,e,null):r.data[i],s=b2(r,t,o,e,n);t[i]=s,_h()&&jy(r,t,s,o),Zs(o,!1)}var b2=(n,e,t,r,i)=>(Eh(!0),KF(e[Be],r));function XS(n,e,t,r=""){return Di(n,su(),t)?e+Gs(t)+r:Sn}function C2(n,e,t,r,i,o=""){let s=PT(),a=IV(n,s,t,i);return ph(2),a?e+Gs(t)+r+Gs(i)+o:Sn}function J(n){return ge("",n),J}function ge(n,e,t){let r=De(),i=XS(r,n,e,t);return i!==Sn&&eA(r,Or(),i),ge}function Ai(n,e,t,r,i){let o=De(),s=C2(o,n,e,t,r,i);return s!==Sn&&eA(o,Or(),s),Ai}function eA(n,e,t){let r=Av(e,n);YF(n[Be],r,t)}function jr(n,e,t){Gv(e)&&(e=e());let r=De(),i=su();if(Di(r,i,e)){let o=qt(),s=yh();dS(s,r,n,e,r[Be],t)}return jr}function Ri(n,e){let t=Gv(n);return t&&n.set(e),t}function Br(n,e){let t=De(),r=qt(),i=Ct();return qS(r,t,t[Be],i,n,e),Br}function Eu(n,e,t=""){return XS(De(),n,e,t)}function T2(n,e,t){let r=qt();if(r.firstCreatePass){let i=tr(n);Cy(t,r.data,r.blueprint,i,!0),Cy(e,r.data,r.blueprint,i,!1)}}function Cy(n,e,t,r,i){if(n=wt(n),Array.isArray(n))for(let o=0;o<n.length;o++)Cy(n[o],e,t,r,i);else{let o=qt(),s=De(),a=Ct(),u=Io(n)?n:wt(n.provide),l=bv(n),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Io(n)||!n.multi){let y=new xo(l,i,W,null),M=iy(u,e,i?h:h+g,p);M===-1?(sy(Ph(a,s),o,u),ry(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[M]=y,s[M]=y)}else{let y=iy(u,e,h+g,p),M=iy(u,e,h,h+g),k=y>=0&&t[y],O=M>=0&&t[M];if(i&&!O||!i&&!k){sy(Ph(a,s),o,u);let B=A2(i?S2:D2,t.length,i,r,l,n);!i&&O&&(t[M].providerFactory=B),ry(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(B),s.push(B)}else{let B=tA(t[i?M:y],l,!i&&r);ry(o,n,y>-1?y:M,B)}!i&&r&&O&&t[M].componentProviders++}}}function ry(n,e,t,r){let i=Io(e),o=vT(e);if(i||o){let u=(o?wt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function tA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function iy(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function D2(n,e,t,r,i){return Ty(this.multi,[])}function S2(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=xh(r,r[de],this.providerFactory.index,i);s=u.slice(0,a),Ty(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],Ty(o,s);return s}function Ty(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function A2(n,e,t,r,i,o){let s=new xo(n,t,W,null);return s.multi=[],s.index=e,s.componentProviders=0,tA(s,i,r&&!t),s}function fn(n,e=[]){return t=>{t.providersResolver=(r,i)=>T2(r,i?i(n):n,e)}}var Hh=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Zy=(()=>{class n{compileModuleSync(t){return new Bh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=_v(t),o=WD(i.declarations).reduce((s,a)=>{let u=Ei(a);return u&&s.push(new oa(u)),s},[]);return new Hh(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var R2=(()=>{class n{zone=x(Me);changeDetectionScheduler=x(Pr);applicationRef=x(Ur);applicationErrorHandler=x(tn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nA=new q("",{factory:()=>!1});function Xy({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Me(K(L({},t_()),{scheduleInRootZone:t})),[{provide:Me,useFactory:n},{provide:xr,multi:!0,useFactory:()=>{let r=x(R2,{optional:!0});return()=>r.initialize()}},{provide:xr,multi:!0,useFactory:()=>{let r=x(M2);return()=>{r.initialize()}}},e===!0?{provide:Wv,useValue:!0}:[],{provide:Kv,useValue:t??tS},{provide:tn,useFactory:()=>{let r=x(Me),i=x(ut),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Ln),o.handleError(s))})}}}]}function e_(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=Xy({ngZoneFactory:()=>{let i=t_(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&pu("NgZone_CoalesceEvent"),new Me(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return an([{provide:nA,useValue:!0},{provide:au,useValue:!1},r])}function t_(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var M2=(()=>{class n{subscription=new Ge;initialized=!1;zone=x(Me);pendingTasks=x(nr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Me.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Me.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var rA=(()=>{class n{applicationErrorHandler=x(tn);appRef=x(Ur);taskService=x(nr);ngZone=x(Me);zonelessEnabled=x(au);tracing=x(Lo,{optional:!0});disableScheduling=x(Wv,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ge;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Oh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(x(Kv,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof kh||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?tD:nS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Oh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,tD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function P2(){return typeof $localize<"u"&&$localize.locale||yu}var sf=new q("",{providedIn:"root",factory:()=>x(sf,{optional:!0,skipSelf:!0})||P2()});function Tt(n){return nT(n)}function ca(n,e){return Ad(n,e?.equal)}var iA=class{[xt];constructor(e){this[xt]=e}destroy(){this[xt].destroy()}};var cA=Symbol("InputSignalNode#UNSET"),K2=K(L({},Rd),{transformFn:void 0,applyValueToInputSignal(n,e){Rs(n,e)}});function uA(n,e){let t=Object.create(K2);t.value=n,t.transformFn=e?.transform;function r(){if(Ds(t),t.value===cA){let i=null;throw new z(-950,i)}return t.value}return r[xt]=t,r}var Y2=new q("");Y2.__NG_ELEMENT_ID__=n=>{let e=Ct();if(e===null)throw new z(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new z(204,!1)};function oA(n,e){return uA(n,e)}function Q2(n){return uA(cA,n)}var lA=(oA.required=Q2,oA);var n_=new q(""),J2=new q("");function Iu(n){return!n.moduleRef}function Z2(n){let e=Iu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Me);return t.run(()=>{Iu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(tn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Iu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(n_);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(n_);s.add(o),n.moduleRef.onDestroy(()=>{lu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return eU(r,t,()=>{let o=e.get(nr),s=o.add(),a=e.get(Jy);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(sf,yu);if(zS(u||yu),!e.get(J2,!0))return Iu(n)?e.get(Ur):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Iu(n)){let h=e.get(Ur);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return X2?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var X2;function eU(n,e,t){try{let r=t();return Si(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var af=null;function tU(n=[],e){return Qe.create({name:e,providers:[{provide:Qc,useValue:"platform"},{provide:n_,useValue:new Set([()=>af=null])},...n]})}function nU(n=[]){if(af)return af;let e=tU(n);return af=e,BS(),rU(e),e}function rU(n){let e=n.get(Gh,null);lt(n,()=>{e?.forEach(t=>t())})}function a_(){return!1}var ua=(()=>{class n{static __NG_ELEMENT_ID__=iU}return n})();function iU(n){return oU(Ct(),De(),(n&16)===16)}function oU(n,e,t){if(bi(n)&&!t){let r=Dn(n.index,e);return new Ti(r,r)}else if(n.type&175){let r=e[Cn];return new Ti(r,e)}return null}var r_=class{constructor(){}supports(e){return Wy(e)}create(e){return new i_(e)}},sU=(n,e)=>e,i_=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||sU}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<sA(r,i,o)?t:r,a=sA(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,M=y+g;h<=M&&M<l&&(o[g]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Wy(e))throw new z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,xS(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new o_(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new cf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new cf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},o_=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},s_=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},cf=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new s_,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function sA(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function aA(){return new c_([new r_])}var c_=(()=>{class n{factories;static \u0275prov=G({token:n,providedIn:"root",factory:aA});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=x(n,{optional:!0,skipSelf:!0});return n.create(t,r||aA())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new z(901,!1)}}return n})();function dA(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Ne(8);try{let o=i?.injector??nU(r),s=[Xy({}),{provide:Pr,useExisting:rA},HT,...t||[]],a=new hu({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return Z2({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Ne(9)}}function u_(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var pA=null;function Rn(){return pA}function l_(n){pA??=n}var wu=class{},d_=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>x(gA),providedIn:"platform"})}return n})();var gA=(()=>{class n extends d_{_location;_history;_doc=x(ft);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Rn().getBaseHref(this._doc)}onPopState(t){let r=Rn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Rn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function mA(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function hA(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Pi(n){return n&&n[0]!=="?"?`?${n}`:n}var uf=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>x(yA),providedIn:"root"})}return n})(),vA=new q(""),yA=(()=>{class n extends uf{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(ft).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return mA(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Pi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Pi(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Pi(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(pe(d_),pe(vA,8))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),la=(()=>{class n{_subject=new at;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=uU(hA(fA(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Pi(r))}normalize(t){return n.stripTrailingSlash(cU(this._basePath,fA(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Pi;static joinWithSlash=mA;static stripTrailingSlash=hA;static \u0275fac=function(r){return new(r||n)(pe(uf))};static \u0275prov=G({token:n,factory:()=>aU(),providedIn:"root"})}return n})();function aU(){return new la(pe(uf))}function cU(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function fA(n){return n.replace(/\/index.html$/,"")}function uU(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var h_=/\s+/,_A=[],bu=(()=>{class n{_ngEl;_renderer;initialClasses=_A;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(h_):_A}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(h_):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(h_).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(W(or),W(Lr))};static \u0275dir=Oe({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var lf=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Mn=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new lf(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),EA(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);EA(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(W(Vo),W(gu),W(c_))};static \u0275dir=Oe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function EA(n,e){n.context.$implicit=e.item}var pn=(()=>{class n{_viewContainer;_context=new df;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){IA(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){IA(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(W(Vo),W(gu))};static \u0275dir=Oe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),df=class{$implicit=null;ngIf=null};function IA(n,e){if(n&&!n.createEmbeddedView)throw new z(2020,!1)}var Lt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Vr({type:n});static \u0275inj=Xn({})}return n})();function f_(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Cu=class{};var wA="browser";var Tu=class{_doc;constructor(e){this._doc=e}manager},hf=(()=>{class n extends Tu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(pe(ft))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),pf=new q(""),y_=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof hf));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof hf);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new z(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(pe(pf),pe(Me))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),p_="ng-app-id";function bA(n){for(let e of n)e.remove()}function CA(n,e){let t=e.createElement("style");return t.textContent=n,t}function lU(n,e,t,r){let i=n.head?.querySelectorAll(`style[${p_}="${e}"],link[${p_}="${e}"]`);if(i)for(let o of i)o.removeAttribute(p_),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function m_(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var __=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,lU(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,CA);r?.forEach(i=>this.addUsage(i,this.external,m_))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(bA(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])bA(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,CA(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,m_(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(pe(ft),pe(qh),pe(Wh,8),pe(Fo))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),g_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},E_=/%COMP%/g;var DA="%COMP%",dU=`_nghost-${DA}`,hU=`_ngcontent-${DA}`,fU=!0,pU=new q("",{providedIn:"root",factory:()=>fU});function gU(n){return hU.replace(E_,n)}function mU(n){return dU.replace(E_,n)}function SA(n,e){return e.map(t=>t.replace(E_,n))}var I_=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new Du(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof ff?i.applyToHost(t):i instanceof Su&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case kr.Emulated:o=new ff(u,l,r,this.appId,h,s,a,p,g);break;case kr.ShadowDom:return new v_(u,l,t,r,s,a,this.nonce,p,g);default:o=new Su(u,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(pe(y_),pe(__),pe(qh),pe(pU),pe(ft),pe(Me),pe(Wh),pe(Lo,8))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),Du=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(g_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(TA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(TA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new z(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=g_[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=g_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ir.DashCase|ir.Important)?e.style.setProperty(t,r,i&ir.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ir.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Rn().getGlobalEventTarget(this.doc,e),!e))throw new z(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function TA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var v_=class extends Du{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=SA(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=m_(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Su=class extends Du{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?SA(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&ia.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ff=class extends Su{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=gU(h),this.hostAttr=mU(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var gf=class n extends wu{supportsDOMEvents=!0;static makeCurrent(){l_(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=vU();return t==null?null:yU(t)}resetBaseElement(){Au=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return f_(document.cookie,e)}},Au=null;function vU(){return Au=Au||document.head.querySelector("base"),Au?Au.getAttribute("href"):null}function yU(n){return new URL(n,document.baseURI).pathname}var _U=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})(),AA=["alt","control","meta","shift"],EU={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},IU={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},RA=(()=>{class n extends Tu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Rn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),AA.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=EU[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),AA.forEach(s=>{if(s!==i){let a=IU[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(pe(ft))};static \u0275prov=G({token:n,factory:n.\u0275fac})}return n})();function w_(n,e,t){let r=L({rootComponent:n,platformRef:t?.platformRef},wU(e));return dA(r)}function wU(n){return{appProviders:[...SU,...n?.providers??[]],platformProviders:DU}}function bU(){gf.makeCurrent()}function CU(){return new Ln}function TU(){return Ay(document),document}var DU=[{provide:Fo,useValue:wA},{provide:Gh,useValue:bU,multi:!0},{provide:ft,useFactory:TU}];var SU=[{provide:Qc,useValue:"root"},{provide:Ln,useFactory:CU},{provide:pf,useClass:hf,multi:!0,deps:[ft]},{provide:pf,useClass:RA,multi:!0,deps:[ft]},I_,__,y_,{provide:No,useExisting:I_},{provide:Cu,useClass:_U},[]];var MA=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(pe(ft))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var se="primary",Hu=Symbol("RouteTitle"),S_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Bo(n){return new S_(n)}function VA(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function RU(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!sr(n[t],e[t]))return!1;return!0}function sr(n,e){let t=n?A_(n):void 0,r=e?A_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!UA(n[i],e[i]))return!1;return!0}function A_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function UA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function jA(n){return n.length>0?n[n.length-1]:null}function zr(n){return $m(n)?n:Si(n)?ze(Promise.resolve(n)):re(n)}var MU={exact:$A,subset:HA},BA={exact:PU,subset:xU,ignored:()=>!0};function PA(n,e,t){return MU[t.paths](n.root,e.root,t.matrixParams)&&BA[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function PU(n,e){return sr(n,e)}function $A(n,e,t){if(!Uo(n.segments,e.segments)||!yf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!$A(n.children[r],e.children[r],t))return!1;return!0}function xU(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>UA(n[t],e[t]))}function HA(n,e,t){return zA(n,e,e.segments,t)}function zA(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Uo(i,t)||e.hasChildren()||!yf(i,t,r))}else if(n.segments.length===t.length){if(!Uo(n.segments,t)||!yf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!HA(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Uo(n.segments,i)||!yf(n.segments,i,r)||!n.children[se]?!1:zA(n.children[se],e,o,r)}}function yf(n,e,t){return e.every((r,i)=>BA[t](n[i].parameters,r.parameters))}var cr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Se([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Bo(this.queryParams),this._queryParamMap}toString(){return kU.serialize(this)}},Se=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _f(this)}},xi=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Bo(this.parameters),this._parameterMap}toString(){return GA(this)}};function NU(n,e){return Uo(n,e)&&n.every((t,r)=>sr(t.parameters,e[r].parameters))}function Uo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function OU(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===se&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==se&&(t=t.concat(e(i,r)))}),t}var zu=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>new $o,providedIn:"root"})}return n})(),$o=class{parse(e){let t=new M_(e);return new cr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ru(e.root,!0)}`,r=VU(e.queryParams),i=typeof e.fragment=="string"?`#${FU(e.fragment)}`:"";return`${t}${r}${i}`}},kU=new $o;function _f(n){return n.segments.map(e=>GA(e)).join("/")}function Ru(n,e){if(!n.hasChildren())return _f(n);if(e){let t=n.children[se]?Ru(n.children[se],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==se&&r.push(`${i}:${Ru(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=OU(n,(r,i)=>i===se?[Ru(n.children[se],!1)]:[`${i}:${Ru(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[se]!=null?`${_f(n)}/${t[0]}`:`${_f(n)}/(${t.join("//")})`}}function qA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mf(n){return qA(n).replace(/%3B/gi,";")}function FU(n){return encodeURI(n)}function R_(n){return qA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ef(n){return decodeURIComponent(n)}function xA(n){return Ef(n.replace(/\+/g,"%20"))}function GA(n){return`${R_(n.path)}${LU(n.parameters)}`}function LU(n){return Object.entries(n).map(([e,t])=>`;${R_(e)}=${R_(t)}`).join("")}function VU(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${mf(t)}=${mf(i)}`).join("&"):`${mf(t)}=${mf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var UU=/^[^\/()?;#]+/;function b_(n){let e=n.match(UU);return e?e[0]:""}var jU=/^[^\/()?;=#]+/;function BU(n){let e=n.match(jU);return e?e[0]:""}var $U=/^[^=?&#]+/;function HU(n){let e=n.match($U);return e?e[0]:""}var zU=/^[^&#]+/;function qU(n){let e=n.match(zU);return e?e[0]:""}var M_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Se([],{}):new Se([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[se]=new Se(e,t)),r}parseSegment(){let e=b_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new z(4009,!1);return this.capture(e),new xi(Ef(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=BU(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=b_(this.remaining);i&&(r=i,this.capture(r))}e[Ef(t)]=Ef(r)}parseQueryParam(e){let t=HU(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=qU(this.remaining);s&&(r=s,this.capture(r))}let i=xA(t),o=xA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=b_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=se);let s=this.parseChildren();t[o??se]=Object.keys(s).length===1&&s[se]?s[se]:new Se([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new z(4011,!1)}};function WA(n){return n.segments.length>0?new Se([],{[se]:n}):n}function KA(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=KA(i);if(r===se&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Se(n.segments,e);return GU(t)}function GU(n){if(n.numberOfChildren===1&&n.children[se]){let e=n.children[se];return new Se(n.segments.concat(e.segments),e.children)}return n}function ma(n){return n instanceof cr}function YA(n,e,t=null,r=null){let i=QA(n);return JA(i,e,t,r)}function QA(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Se(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=WA(r);return e??i}function JA(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return C_(i,i,i,t,r);let o=WU(e);if(o.toRoot())return C_(i,i,new Se([],{}),t,r);let s=KU(o,i,n),a=s.processChildren?Pu(s.segmentGroup,s.index,o.commands):XA(s.segmentGroup,s.index,o.commands);return C_(i,s.segmentGroup,a,t,r)}function If(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ou(n){return typeof n=="object"&&n!=null&&n.outlets}function C_(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=ZA(n,e,t);let a=WA(KA(s));return new cr(a,o,i)}function ZA(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=ZA(o,e,t)}),new Se(n.segments,r)}var wf=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&If(r[0]))throw new z(4003,!1);let i=r.find(Ou);if(i&&i!==jA(r))throw new z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function WU(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new wf(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new wf(t,e,r)}var pa=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function KU(n,e,t){if(n.isAbsolute)return new pa(e,!0,0);if(!t)return new pa(e,!1,NaN);if(t.parent===null)return new pa(t,!0,0);let r=If(n.commands[0])?0:1,i=t.segments.length-1+r;return YU(t,i,n.numberOfDoubleDots)}function YU(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new z(4005,!1);i=r.segments.length}return new pa(r,!1,i-o)}function QU(n){return Ou(n[0])?n[0].outlets:{[se]:n}}function XA(n,e,t){if(n??=new Se([],{}),n.segments.length===0&&n.hasChildren())return Pu(n,e,t);let r=JU(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Se(n.segments.slice(0,r.pathIndex),{});return o.children[se]=new Se(n.segments.slice(r.pathIndex),n.children),Pu(o,0,i)}else return r.match&&i.length===0?new Se(n.segments,{}):r.match&&!n.hasChildren()?P_(n,e,t):r.match?Pu(n,0,i):P_(n,e,t)}function Pu(n,e,t){if(t.length===0)return new Se(n.segments,{});{let r=QU(t),i={};if(Object.keys(r).some(o=>o!==se)&&n.children[se]&&n.numberOfChildren===1&&n.children[se].segments.length===0){let o=Pu(n.children[se],e,t);return new Se(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=XA(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Se(n.segments,i)}}function JU(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Ou(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!OA(u,l,s))return o;r+=2}else{if(!OA(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function P_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Ou(o)){let u=ZU(o.outlets);return new Se(r,u)}if(i===0&&If(t[0])){let u=n.segments[e];r.push(new xi(u.path,NA(t[0]))),i++;continue}let s=Ou(o)?o.outlets[se]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&If(a)?(r.push(new xi(s,NA(a))),i+=2):(r.push(new xi(s,{})),i++)}return new Se(r,{})}function ZU(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=P_(new Se([],{}),0,r))}),e}function NA(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function OA(n,e,t){return n==t.path&&sr(e,t.parameters)}var xu="imperative",mt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(mt||{}),mn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Ho=class extends mn{type=mt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},$r=class extends mn{urlAfterRedirects;type=mt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Wt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Wt||{}),ku=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(ku||{}),ar=class extends mn{reason;code;type=mt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Hr=class extends mn{reason;code;type=mt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},va=class extends mn{error;target;type=mt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Fu=class extends mn{urlAfterRedirects;state;type=mt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bf=class extends mn{urlAfterRedirects;state;type=mt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cf=class extends mn{urlAfterRedirects;state;shouldActivate;type=mt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Tf=class extends mn{urlAfterRedirects;state;type=mt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Df=class extends mn{urlAfterRedirects;state;type=mt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sf=class{route;type=mt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Af=class{route;type=mt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Rf=class{snapshot;type=mt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mf=class{snapshot;type=mt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pf=class{snapshot;type=mt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xf=class{snapshot;type=mt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Lu=class{},ya=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function XU(n){return!(n instanceof Lu)&&!(n instanceof ya)}function ej(n,e){return n.providers&&!n._injector&&(n._injector=vu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function qn(n){return n.outlet||se}function tj(n,e){let t=n.filter(r=>qn(r)===e);return t.push(...n.filter(r=>qn(r)!==e)),t}function Ia(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Nf=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ia(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new wa(this.rootInjector)}},wa=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Nf(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(pe(ut))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Of=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=x_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=x_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=N_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return N_(e,this._root).map(t=>t.value)}};function x_(n,e){if(n===e.value)return e;for(let t of e.children){let r=x_(n,t);if(r)return r}return null}function N_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=N_(n,t);if(r.length)return r.unshift(e),r}return[]}var gn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function fa(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Vu=class extends Of{snapshot;constructor(e,t){super(e),this.snapshot=t,B_(this,e)}toString(){return this.snapshot.toString()}};function eR(n){let e=nj(n),t=new It([new xi("",{})]),r=new It({}),i=new It({}),o=new It({}),s=new It(""),a=new Vt(t,r,o,s,i,se,n,e.root);return a.snapshot=e.root,new Vu(new gn(a,[]),e)}function nj(n){let e={},t={},r={},o=new jo([],e,r,"",t,se,n,null,{});return new Uu("",new gn(o,[]))}var Vt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ue(l=>l[Hu]))??re(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ue(e=>Bo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ue(e=>Bo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function kf(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&nR(i)&&(r.resolve[Hu]=i.title),r}var jo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Hu]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Bo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Bo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Uu=class extends Of{url;constructor(e,t){super(t),this.url=e,B_(this,t)}toString(){return tR(this._root)}};function B_(n,e){e.value._routerState=n,e.children.forEach(t=>B_(n,t))}function tR(n){let e=n.children.length>0?` { ${n.children.map(tR).join(", ")} } `:"";return`${n.value}${e}`}function T_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,sr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),sr(e.params,t.params)||n.paramsSubject.next(t.params),RU(e.url,t.url)||n.urlSubject.next(t.url),sr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function O_(n,e){let t=sr(n.params,e.params)&&NU(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||O_(n.parent,e.parent))}function nR(n){return typeof n.title=="string"||n.title===null}var rR=new q(""),qu=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=se;activateEvents=new Je;deactivateEvents=new Je;attachEvents=new Je;detachEvents=new Je;routerOutletData=lA();parentContexts=x(wa);location=x(Vo);changeDetector=x(ua);inputBinder=x(Uf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new z(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new z(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new k_(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Oe({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Fr]})}return n})(),k_=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Vt?this.route:e===wa?this.childContexts:e===rR?this.outletData:this.parent.get(e,t)}},Uf=new q("");var $_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=dt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&be(0,"router-outlet")},dependencies:[qu],encapsulation:2})}return n})();function H_(n){let e=n.children&&n.children.map(H_),t=e?K(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==se&&(t.component=$_),t}function rj(n,e,t){let r=ju(n,e._root,t?t._root:void 0);return new Vu(r,e)}function ju(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=ij(n,e,t);return new gn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ju(n,a)),s}}let r=oj(e.value),i=e.children.map(o=>ju(n,o));return new gn(r,i)}}function ij(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ju(n,r,i);return ju(n,r)})}function oj(n){return new Vt(new It(n.url),new It(n.params),new It(n.queryParams),new It(n.fragment),new It(n.data),n.outlet,n.component,n)}var _a=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},iR="ngNavigationCancelingError";function Ff(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ma(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=oR(!1,Wt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function oR(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[iR]=!0,t.cancellationCode=e,t}function sj(n){return sR(n)&&ma(n.url)}function sR(n){return!!n&&n[iR]}var aj=(n,e,t,r)=>ue(i=>(new F_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),F_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),T_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=fa(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=fa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=fa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=fa(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new xf(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Mf(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(T_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),T_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Lf=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ga=class{component;route;constructor(e,t){this.component=e,this.route=t}};function cj(n,e,t){let r=n._root,i=e?e._root:null;return Mu(r,i,t,[r.value])}function uj(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ba(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!cv(n)?n:e.get(n):r}function Mu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=fa(e);return n.children.forEach(s=>{lj(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Nu(a,t.getContext(s),i)),i}function lj(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=dj(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Lf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Mu(n,e,a?a.children:null,r,i):Mu(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ga(a.outlet.component,s))}else s&&Nu(e,a,i),i.canActivateChecks.push(new Lf(r)),o.component?Mu(n,null,a?a.children:null,r,i):Mu(n,null,t,r,i);return i}function dj(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Uo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Uo(n.url,e.url)||!sr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!O_(n,e)||!sr(n.queryParams,e.queryParams);case"paramsChange":default:return!O_(n,e)}}function Nu(n,e,t){let r=fa(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Nu(s,e.children.getContext(o),t):Nu(s,null,t):Nu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ga(e.outlet.component,i)):t.canDeactivateChecks.push(new ga(null,i)):t.canDeactivateChecks.push(new ga(null,i))}function Gu(n){return typeof n=="function"}function hj(n){return typeof n=="boolean"}function fj(n){return n&&Gu(n.canLoad)}function pj(n){return n&&Gu(n.canActivate)}function gj(n){return n&&Gu(n.canActivateChild)}function mj(n){return n&&Gu(n.canDeactivate)}function vj(n){return n&&Gu(n.canMatch)}function aR(n){return n instanceof Dr||n?.name==="EmptyError"}var vf=Symbol("INITIAL_VALUE");function Ea(){return Zt(n=>Zd(n.map(e=>e.pipe(Sr(1),Gm(vf)))).pipe(ue(e=>{for(let t of e)if(t!==!0){if(t===vf)return vf;if(t===!1||yj(t))return t}return!0}),In(e=>e!==vf),Sr(1)))}function yj(n){return ma(n)||n instanceof _a}function _j(n,e){return ct(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?re(K(L({},t),{guardsResult:!0})):Ej(s,r,i,n).pipe(ct(a=>a&&hj(a)?Ij(r,o,n,e):re(a)),ue(a=>K(L({},t),{guardsResult:a})))})}function Ej(n,e,t,r){return ze(n).pipe(ct(i=>Dj(i.component,i.route,t,e,r)),Ar(i=>i!==!0,!0))}function Ij(n,e,t,r){return ze(e).pipe($s(i=>Bs(bj(i.route.parent,r),wj(i.route,r),Tj(n,i.path,t),Cj(n,i.route,t))),Ar(i=>i!==!0,!0))}function wj(n,e){return n!==null&&e&&e(new Pf(n)),re(!0)}function bj(n,e){return n!==null&&e&&e(new Rf(n)),re(!0)}function Cj(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return re(!0);let i=r.map(o=>Hc(()=>{let s=Ia(e)??t,a=ba(o,s),u=pj(a)?a.canActivate(e,n):lt(s,()=>a(e,n));return zr(u).pipe(Ar())}));return re(i).pipe(Ea())}function Tj(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>uj(s)).filter(s=>s!==null).map(s=>Hc(()=>{let a=s.guards.map(u=>{let l=Ia(s.node)??t,h=ba(u,l),p=gj(h)?h.canActivateChild(r,n):lt(l,()=>h(r,n));return zr(p).pipe(Ar())});return re(a).pipe(Ea())}));return re(o).pipe(Ea())}function Dj(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return re(!0);let s=o.map(a=>{let u=Ia(e)??i,l=ba(a,u),h=mj(l)?l.canDeactivate(n,e,t,r):lt(u,()=>l(n,e,t,r));return zr(h).pipe(Ar())});return re(s).pipe(Ea())}function Sj(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return re(!0);let o=i.map(s=>{let a=ba(s,n),u=fj(a)?a.canLoad(e,t):lt(n,()=>a(e,t));return zr(u)});return re(o).pipe(Ea(),cR(r))}function cR(n){return Om(ht(e=>{if(typeof e!="boolean")throw Ff(n,e)}),ue(e=>e===!0))}function Aj(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return re(!0);let o=i.map(s=>{let a=ba(s,n),u=vj(a)?a.canMatch(e,t):lt(n,()=>a(e,t));return zr(u)});return re(o).pipe(Ea(),cR(r))}var Bu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},$u=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ha(n){return js(new Bu(n))}function Rj(n){return js(new z(4e3,!1))}function Mj(n){return js(oR(!1,Wt.GuardRejected))}var L_=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return re(r);if(i.numberOfChildren>1||!i.children[se])return Rj(`${e.redirectTo}`);i=i.children[se]}}applyRedirectCommands(e,t,r,i,o){return Pj(t,i,o).pipe(ue(s=>{if(s instanceof cr)throw new $u(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new $u(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new cr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Se(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new z(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function Pj(n,e,t){if(typeof n=="string")return re(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return zr(lt(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var V_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function xj(n,e,t,r,i){let o=uR(n,e,t);return o.matched?(r=ej(e,r),Aj(r,e,t,i).pipe(ue(s=>s===!0?o:L({},V_)))):re(o)}function uR(n,e,t){if(e.path==="**")return Nj(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},V_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||VA)(t,n,e);if(!i)return L({},V_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Nj(n){return{matched:!0,parameters:n.length>0?jA(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function kA(n,e,t,r){return t.length>0&&Fj(n,t,r)?{segmentGroup:new Se(e,kj(r,new Se(t,n.children))),slicedSegments:[]}:t.length===0&&Lj(n,t,r)?{segmentGroup:new Se(n.segments,Oj(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Se(n.segments,n.children),slicedSegments:t}}function Oj(n,e,t,r){let i={};for(let o of t)if(jf(n,e,o)&&!r[qn(o)]){let s=new Se([],{});i[qn(o)]=s}return L(L({},r),i)}function kj(n,e){let t={};t[se]=e;for(let r of n)if(r.path===""&&qn(r)!==se){let i=new Se([],{});t[qn(r)]=i}return t}function Fj(n,e,t){return t.some(r=>jf(n,e,r)&&qn(r)!==se)}function Lj(n,e,t){return t.some(r=>jf(n,e,r))}function jf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Vj(n,e,t){return e.length===0&&!n.children[t]}var U_=class{};function Uj(n,e,t,r,i,o,s="emptyOnly"){return new j_(n,e,t,r,i,s,o).recognize()}var jj=31,j_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new L_(this.urlSerializer,this.urlTree)}noMatchError(e){return new z(4002,`'${e.segmentGroup}'`)}recognize(){let e=kA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ue(({children:t,rootSnapshot:r})=>{let i=new gn(r,t),o=new Uu("",i),s=YA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new jo([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),se,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,se,t).pipe(ue(r=>({children:r,rootSnapshot:t})),mi(r=>{if(r instanceof $u)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Bu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ue(s=>s instanceof gn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ze(o).pipe($s(s=>{let a=r.children[s],u=tj(t,s);return this.processSegmentGroup(e,u,a,s,i)}),qm((s,a)=>(s.push(...a),s)),vi(null),zm(),ct(s=>{if(s===null)return ha(r);let a=lR(s);return Bj(a),re(a)}))}processSegment(e,t,r,i,o,s,a){return ze(t).pipe($s(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(mi(l=>{if(l instanceof Bu)return re(null);throw l}))),Ar(u=>!!u),mi(u=>{if(aR(u))return Vj(r,i,o)?re(new U_):ha(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return qn(r)!==s&&(s===se||!jf(i,o,r))?ha(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):ha(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=uR(t,i,o);if(!u)return ha(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>jj&&(this.allowRedirects=!1));let y=new jo(o,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,FA(i),qn(i),i.component??i._loadedComponent??null,i,LA(i)),M=kf(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(M.params),y.data=Object.freeze(M.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(Zt(O=>this.applyRedirects.lineralizeSegments(i,O)),ct(O=>this.processSegment(e,r,t,O.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=xj(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Zt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Zt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,M=new jo(g,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,FA(r),qn(r),r.component??r._loadedComponent??null,r,LA(r)),k=kf(M,s,this.paramsInheritanceStrategy);M.params=Object.freeze(k.params),M.data=Object.freeze(k.data);let{segmentGroup:O,slicedSegments:B}=kA(t,g,y,l);if(B.length===0&&O.hasChildren())return this.processChildren(h,l,O,M).pipe(ue(ie=>new gn(M,ie)));if(l.length===0&&B.length===0)return re(new gn(M,[]));let Z=qn(r)===o;return this.processSegment(h,l,O,B,Z?se:o,!0,M).pipe(ue(ie=>new gn(M,ie instanceof gn?[ie]:[])))}))):ha(t)))}getChildConfig(e,t,r){return t.children?re({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?re({routes:t._loadedRoutes,injector:t._loadedInjector}):Sj(e,t,r,this.urlSerializer).pipe(ct(i=>i?this.configLoader.loadChildren(e,t).pipe(ht(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Mj(t))):re({routes:[],injector:e})}};function Bj(n){n.sort((e,t)=>e.value.outlet===se?-1:t.value.outlet===se?1:e.value.outlet.localeCompare(t.value.outlet))}function $j(n){let e=n.value.routeConfig;return e&&e.path===""}function lR(n){let e=[],t=new Set;for(let r of n){if(!$j(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=lR(r.children);e.push(new gn(r.value,i))}return e.filter(r=>!t.has(r))}function FA(n){return n.data||{}}function LA(n){return n.resolve||{}}function Hj(n,e,t,r,i,o){return ct(s=>Uj(n,e,t,r,s.extractedUrl,i,o).pipe(ue(({state:a,tree:u})=>K(L({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function zj(n,e){return ct(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return re(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of dR(u))s.add(l);let a=0;return ze(s).pipe($s(u=>o.has(u)?qj(u,r,n,e):(u.data=kf(u,u.parent,n).resolve,re(void 0))),ht(()=>a++),Hs(1),ct(u=>a===s.size?re(t):Qt))})}function dR(n){let e=n.children.map(t=>dR(t)).flat();return[n,...e]}function qj(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!nR(i)&&(o[Hu]=i.title),Hc(()=>(n.data=kf(n,n.parent,t).resolve,Gj(o,n,e,r).pipe(ue(s=>(n._resolvedData=s,n.data=L(L({},n.data),s),null)))))}function Gj(n,e,t,r){let i=A_(n);if(i.length===0)return re({});let o={};return ze(i).pipe(ct(s=>Wj(n[s],e,t,r).pipe(Ar(),ht(a=>{if(a instanceof _a)throw Ff(new $o,a);o[s]=a}))),Hs(1),ue(()=>o),mi(s=>aR(s)?Qt:js(s)))}function Wj(n,e,t,r){let i=Ia(e)??r,o=ba(n,i),s=o.resolve?o.resolve(e,t):lt(i,()=>o(e,t));return zr(s)}function D_(n){return Zt(e=>{let t=n(e);return t?ze(t).pipe(ue(()=>e)):re(e)})}var z_=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===se);return r}getResolvedTitleForRoute(t){return t.data[Hu]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>x(hR),providedIn:"root"})}return n})(),hR=(()=>{class n extends z_{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(pe(MA))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wu=new q("",{providedIn:"root",factory:()=>({})}),Ku=new q(""),fR=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=x(Zy);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return re(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=zr(lt(t,()=>r.loadComponent())).pipe(ue(gR),Zt(mR),ht(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),zc(()=>{this.componentLoaders.delete(r)})),o=new Fs(i,()=>new at).pipe(ks());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return re({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=pR(r,this.compiler,t,this.onLoadEndListener).pipe(zc(()=>{this.childrenLoaders.delete(r)})),s=new Fs(o,()=>new at).pipe(ks());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pR(n,e,t,r){return zr(lt(t,()=>n.loadChildren())).pipe(ue(gR),Zt(mR),ct(i=>i instanceof ef||Array.isArray(i)?re(i):ze(e.compileModuleAsync(i))),ue(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Ku,[],{optional:!0,self:!0}).flat()),{routes:s.map(H_),injector:o}}))}function Kj(n){return n&&typeof n=="object"&&"default"in n}function gR(n){return Kj(n)?n.default:n}function mR(n){return re(n)}var Bf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>x(Yj),providedIn:"root"})}return n})(),Yj=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vR=new q("");var yR=new q(""),_R=(()=>{class n{currentNavigation=dn(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new at;transitionAbortWithErrorSubject=new at;configLoader=x(fR);environmentInjector=x(ut);destroyRef=x(Bn);urlSerializer=x(zu);rootContexts=x(wa);location=x(la);inputBindingEnabled=x(Uf,{optional:!0})!==null;titleStrategy=x(z_);options=x(Wu,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=x(Bf);createViewTransition=x(vR,{optional:!0});navigationErrorHandler=x(yR,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>re(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Sf(i)),r=i=>this.events.next(new Af(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Tt(()=>{this.transitions?.next(K(L({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new It(null),this.transitions.pipe(In(r=>r!==null),Zt(r=>{let i=!1;return re(r).pipe(Zt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Wt.SupersededByNewNavigation),Qt;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?K(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Hr(o.id,this.urlSerializer.serialize(o.rawUrl),"",ku.IgnoredSameUrlNavigation)),o.resolve(!1),Qt;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return re(o).pipe(Zt(u=>(this.events.next(new Ho(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Qt:Promise.resolve(u))),Hj(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ht(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new Fu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:g}=o,y=new Ho(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let M=eR(this.rootComponentType).snapshot;return this.currentTransition=r=K(L({},o),{targetSnapshot:M,urlAfterRedirects:l,extras:K(L({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(k=>(k.finalUrl=l,k)),re(r)}else return this.events.next(new Hr(o.id,this.urlSerializer.serialize(o.extractedUrl),"",ku.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Qt}),ht(o=>{let s=new bf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ue(o=>(this.currentTransition=r=K(L({},o),{guards:cj(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),_j(this.environmentInjector,o=>this.events.next(o)),ht(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Ff(this.urlSerializer,o.guardsResult);let s=new Cf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),In(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Wt.GuardRejected),!1)),D_(o=>{if(o.guards.canActivateChecks.length!==0)return re(o).pipe(ht(s=>{let a=new Tf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Zt(s=>{let a=!1;return re(s).pipe(zj(this.paramsInheritanceStrategy,this.environmentInjector),ht({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Wt.NoDataFromResolver)}}))}),ht(s=>{let a=new Df(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),D_(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=Ia(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(ht(h=>{a.component=h}),ue(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return Zd(s(o.targetSnapshot.root)).pipe(vi(null),Sr(1))}),D_(()=>this.afterPreactivation()),Zt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?ze(a).pipe(ue(()=>r)):re(r)}),ue(o=>{let s=rj(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=K(L({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),ht(()=>{this.events.next(new Lu)}),aj(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Sr(1),eh(new X(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(In(()=>!i&&!r.targetRouterState),ht(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Wt.Aborted)}))),ht({next:o=>{i=!0,this.lastSuccessfulNavigation=Tt(this.currentNavigation),this.events.next(new $r(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),eh(this.transitionAbortWithErrorSubject.pipe(ht(o=>{throw o}))),zc(()=>{i||this.cancelNavigationTransition(r,"",Wt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),mi(o=>{if(this.destroyed)return r.resolve(!1),Qt;if(i=!0,sR(o))this.events.next(new ar(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),sj(o)?this.events.next(new ya(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new va(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=lt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof _a){let{message:u,cancellationCode:l}=Ff(this.urlSerializer,a);this.events.next(new ar(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new ya(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Qt}))}))}cancelNavigationTransition(t,r,i){let o=new ar(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Tt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Qj(n){return n!==xu}var ER=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>x(Jj),providedIn:"root"})}return n})(),Vf=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Jj=(()=>{class n extends Vf{static \u0275fac=(()=>{let t;return function(i){return(t||(t=zn(n)))(i||n)}})();static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),IR=(()=>{class n{urlSerializer=x(zu);options=x(Wu,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=x(la);urlHandlingStrategy=x(Bf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new cr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof cr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=eR(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:()=>x(Zj),providedIn:"root"})}return n})(),Zj=(()=>{class n extends IR{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Ho?this.updateStateMemento():t instanceof Hr?this.commitTransition(r):t instanceof Fu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Lu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof ar&&t.code!==Wt.SupersededByNewNavigation&&t.code!==Wt.Redirect?this.restoreHistory(r):t instanceof va?this.restoreHistory(r,!0):t instanceof $r&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=L(L({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=L(L({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=zn(n)))(i||n)}})();static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function q_(n,e){n.events.pipe(In(t=>t instanceof $r||t instanceof ar||t instanceof va||t instanceof Hr),ue(t=>t instanceof $r||t instanceof Hr?0:(t instanceof ar?t.code===Wt.Redirect||t.code===Wt.SupersededByNewNavigation:!1)?2:1),In(t=>t!==2),Sr(1)).subscribe(()=>{e()})}var Xj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},e3={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ze=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=x(Ky);stateManager=x(IR);options=x(Wu,{optional:!0})||{};pendingTasks=x(nr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=x(_R);urlSerializer=x(zu);location=x(la);urlHandlingStrategy=x(Bf);injector=x(ut);_events=new at;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=x(ER);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=x(Ku,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!x(Uf,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ge;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Tt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ar&&r.code!==Wt.Redirect&&r.code!==Wt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof $r)this.navigated=!0;else if(r instanceof ya){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Qj(i.source)},s);this.scheduleNavigation(a,xu,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}XU(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(tn)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Tt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(H_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=QA(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return JA(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ma(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,xu,null,r)}navigate(t,r={skipLocationChange:!1}){return t3(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(qs(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},Xj):r===!1?i=L({},e3):i=r,ma(t))return PA(this.currentUrlTree,t,i);let o=this.parseUrl(t);return PA(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return q_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function t3(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new z(4008,!1)}var r3=new q("");function G_(n,...e){return an([{provide:Ku,multi:!0,useValue:n},[],{provide:Vt,useFactory:i3,deps:[Ze]},{provide:tf,multi:!0,useFactory:o3},e.map(t=>t.\u0275providers)])}function i3(n){return n.routerState.root}function o3(){let n=x(Qe);return e=>{let t=n.get(Ur);if(e!==t.components[0])return;let r=n.get(Ze),i=n.get(s3);n.get(a3)===1&&r.initialNavigation(),n.get(c3,null,{optional:!0})?.setUpPreloading(),n.get(r3,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var s3=new q("",{factory:()=>new at}),a3=new q("",{providedIn:"root",factory:()=>1});var c3=new q("");var bR=()=>{};var DR=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},l3=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},$f={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(t[h],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(DR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):l3(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new K_;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let M=l<<6&192|p;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},K_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},d3=function(n){let e=DR(n);return $f.encodeByteArray(e,!0)},Qu=function(n){return d3(n).replace(/\./g,"")},Hf=function(n){try{return $f.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Q_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var h3=()=>Q_().__FIREBASE_DEFAULTS__,f3=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},p3=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Hf(n[1]);return e&&JSON.parse(e)},zf=()=>{try{return bR()||h3()||f3()||p3()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},J_=n=>{var e,t;return(t=(e=zf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},SR=n=>{let e=J_(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Z_=()=>{var n;return(n=zf())===null||n===void 0?void 0:n.config},X_=n=>{var e;return(e=zf())===null||e===void 0?void 0:e[`_${n}`]};var zo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Ni(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function qf(n){return v(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function AR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Qu(JSON.stringify(t)),Qu(JSON.stringify(s)),""].join(".")}var Yu={};function g3(){let n={prod:[],emulator:[]};for(let e of Object.keys(Yu))Yu[e]?n.emulator.push(e):n.prod.push(e);return n}function m3(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var CR=!1;function Gf(n,e){if(typeof window>"u"||typeof document>"u"||!Ni(window.location.host)||Yu[n]===e||Yu[n]||CR)return;Yu[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=g3().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{CR=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=m3(r),y=t("text"),M=document.getElementById(y)||document.createElement("span"),k=t("learnmore"),O=document.getElementById(k)||document.createElement("a"),B=t("preprendIcon"),Z=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let ie=g.element;a(ie),h(O,k);let Fe=l();u(Z,B),ie.append(Z,M,O,Fe),document.body.appendChild(ie)}o?(M.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function v3(){var n;let e=(n=zf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PR(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function xR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NR(){let n=vt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function OR(){return!v3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ju(){try{return typeof indexedDB=="object"}catch{return!1}}function kR(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var y3="FirebaseError",vn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=y3,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gn.prototype.create)}},Gn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?_3(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new vn(i,a,r)}};function _3(n,e){return n.replace(E3,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var E3=/\{\$([^}]+)}/g;function FR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ur(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(TR(o)&&TR(s)){if(!ur(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function TR(n){return n!==null&&typeof n=="object"}function Zu(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ca(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Ta(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function LR(n,e){let t=new Y_(n,e);return t.subscribe.bind(t)}var Y_=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");I3(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=W_),i.error===void 0&&(i.error=W_),i.complete===void 0&&(i.complete=W_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function I3(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function W_(){}var hce=14400*1e3;function We(n){return n&&n._delegate?n._delegate:n}var Kt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var qo="[DEFAULT]";var eE=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new zo;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(b3(e))try{this.getOrInitializeService({instanceIdentifier:qo})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=qo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return v(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=qo){return this.instances.has(e)}getOptions(e=qo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:w3(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qo){return this.component?this.component.multipleInstances?e:qo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function w3(n){return n===qo?void 0:n}function b3(n){return n.instantiationMode==="EAGER"}var Wf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new eE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var C3=[],ye=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(ye||{}),T3={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},D3=ye.INFO,S3={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},A3=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=S3[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},lr=class{constructor(e){this.name=e,this._logLevel=D3,this._logHandler=A3,this._userLogHandler=null,C3.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?T3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}};var R3=(n,e)=>e.some(t=>n instanceof t),VR,UR;function M3(){return VR||(VR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function P3(){return UR||(UR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var jR=new WeakMap,nE=new WeakMap,BR=new WeakMap,tE=new WeakMap,iE=new WeakMap;function x3(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(dr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&jR.set(t,n)}).catch(()=>{}),iE.set(e,n),e}function N3(n){if(nE.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});nE.set(n,e)}var rE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return nE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||BR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return dr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function $R(n){rE=n(rE)}function O3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Kf(this),e,...t);return BR.set(r,e.sort?e.sort():[e]),dr(r)}:P3().includes(n)?function(...e){return n.apply(Kf(this),e),dr(jR.get(this))}:function(...e){return dr(n.apply(Kf(this),e))}}function k3(n){return typeof n=="function"?O3(n):(n instanceof IDBTransaction&&N3(n),R3(n,M3())?new Proxy(n,rE):n)}function dr(n){if(n instanceof IDBRequest)return x3(n);if(tE.has(n))return tE.get(n);let e=k3(n);return e!==n&&(tE.set(n,e),iE.set(e,n)),e}var Kf=n=>iE.get(n);function Yf(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=dr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(dr(s.result),u.oldVersion,u.newVersion,dr(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var F3=["get","getKey","getAll","getAllKeys","count"],L3=["put","add","delete","clear"],oE=new Map;function HR(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(oE.get(e))return oE.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=L3.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||F3.includes(t)))return;let o=function(s,...a){return v(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return oE.set(e,o),o}$R(n=>K(L({},n),{get:(e,t,r)=>HR(e,t)||n.get(e,t,r),has:(e,t)=>!!HR(e,t)||n.has(e,t)}));var aE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(V3(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function V3(n){let e=n.getComponent();return e?.type==="VERSION"}var cE="@firebase/app",zR="0.13.2";var qr=new lr("@firebase/app"),U3="@firebase/app-compat",j3="@firebase/analytics-compat",B3="@firebase/analytics",$3="@firebase/app-check-compat",H3="@firebase/app-check",z3="@firebase/auth",q3="@firebase/auth-compat",G3="@firebase/database",W3="@firebase/data-connect",K3="@firebase/database-compat",Y3="@firebase/functions",Q3="@firebase/functions-compat",J3="@firebase/installations",Z3="@firebase/installations-compat",X3="@firebase/messaging",eB="@firebase/messaging-compat",tB="@firebase/performance",nB="@firebase/performance-compat",rB="@firebase/remote-config",iB="@firebase/remote-config-compat",oB="@firebase/storage",sB="@firebase/storage-compat",aB="@firebase/firestore",cB="@firebase/ai",uB="@firebase/firestore-compat",lB="firebase",dB="11.10.0";var uE="[DEFAULT]",hB={[cE]:"fire-core",[U3]:"fire-core-compat",[B3]:"fire-analytics",[j3]:"fire-analytics-compat",[H3]:"fire-app-check",[$3]:"fire-app-check-compat",[z3]:"fire-auth",[q3]:"fire-auth-compat",[G3]:"fire-rtdb",[W3]:"fire-data-connect",[K3]:"fire-rtdb-compat",[Y3]:"fire-fn",[Q3]:"fire-fn-compat",[J3]:"fire-iid",[Z3]:"fire-iid-compat",[X3]:"fire-fcm",[eB]:"fire-fcm-compat",[tB]:"fire-perf",[nB]:"fire-perf-compat",[rB]:"fire-rc",[iB]:"fire-rc-compat",[oB]:"fire-gcs",[sB]:"fire-gcs-compat",[aB]:"fire-fst",[uB]:"fire-fst-compat",[cB]:"fire-vertex","fire-js":"fire-js",[lB]:"fire-js-all"};var Xu=new Map,fB=new Map,lE=new Map;function qR(n,e){try{n.container.addComponent(e)}catch(t){qr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Wn(n){let e=n.name;if(lE.has(e))return qr.debug(`There were multiple attempts to register component ${e}.`),!1;lE.set(e,n);for(let t of Xu.values())qR(t,n);for(let t of fB.values())qR(t,n);return!0}function Da(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function nn(n){return n==null?!1:n.settings!==void 0}var pB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oi=new Gn("app","Firebase",pB);var dE=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oi.create("app-deleted",{appName:this._name})}};var ki=dB;function pE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:uE,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Oi.create("bad-app-name",{appName:String(i)});if(t||(t=Z_()),!t)throw Oi.create("no-options");let o=Xu.get(i);if(o){if(ur(t,o.options)&&ur(r,o.config))return o;throw Oi.create("duplicate-app",{appName:i})}let s=new Wf(i);for(let u of lE.values())s.addComponent(u);let a=new dE(t,r,s);return Xu.set(i,a),a}function Go(n=uE){let e=Xu.get(n);if(!e&&n===uE&&Z_())return pE();if(!e)throw Oi.create("no-app",{appName:n});return e}function Qf(){return Array.from(Xu.values())}function Ke(n,e,t){var r;let i=(r=hB[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qr.warn(a.join(" "));return}Wn(new Kt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var gB="firebase-heartbeat-database",mB=1,el="firebase-heartbeat-store",sE=null;function YR(){return sE||(sE=Yf(gB,mB,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(el)}catch(t){console.warn(t)}}}}).catch(n=>{throw Oi.create("idb-open",{originalErrorMessage:n.message})})),sE}function vB(n){return v(this,null,function*(){try{let t=(yield YR()).transaction(el),r=yield t.objectStore(el).get(QR(n));return yield t.done,r}catch(e){if(e instanceof vn)qr.warn(e.message);else{let t=Oi.create("idb-get",{originalErrorMessage:e?.message});qr.warn(t.message)}}})}function GR(n,e){return v(this,null,function*(){try{let r=(yield YR()).transaction(el,"readwrite");yield r.objectStore(el).put(e,QR(n)),yield r.done}catch(t){if(t instanceof vn)qr.warn(t.message);else{let r=Oi.create("idb-set",{originalErrorMessage:t?.message});qr.warn(r.message)}}})}function QR(n){return`${n.name}!${n.options.appId}`}var yB=1024,_B=30,hE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new fE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=WR();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>_B){let s=IB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){qr.warn(r)}})}getHeartbeatsHeader(){return v(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=WR(),{heartbeatsToSend:r,unsentEntries:i}=EB(this._heartbeatsCache.heartbeats),o=Qu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return qr.warn(t),""}})}};function WR(){return new Date().toISOString().substring(0,10)}function EB(n,e=yB){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),KR(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),KR(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var fE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return Ju()?kR().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield vB(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return GR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return GR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function KR(n){return Qu(JSON.stringify({version:2,heartbeats:n})).length}function IB(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function wB(n){Wn(new Kt("platform-logger",e=>new aE(e),"PRIVATE")),Wn(new Kt("heartbeat",e=>new hE(e),"PRIVATE")),Ke(cE,zR,n),Ke(cE,zR,"esm2017"),Ke("fire-js","")}wB("");var bB="firebase",CB="11.10.0";Ke(bB,CB,"app");function JR(n){n===void 0&&(n=x(Qe));let e=n.get(Xs);return t=>new X(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Fi=new yo("ANGULARFIRE2_VERSION");function tl(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Aa=(n,e)=>{let t=e?[e]:Qf(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Sa=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Sa||{}),ZR=a_()&&typeof Zone<"u"?Sa.WARN:Sa.SILENT;var Jf=class{zone;delegate;constructor(e,t=jm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Li=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=x(Me);this.outsideAngular=t.runOutsideAngular(()=>new Jf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Jf(typeof Zone>"u"?void 0:Zone.current,Um))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),XR=!1;function TB(n,e){!XR&&(ZR>Sa.SILENT||a_())&&(XR=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),ZR>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function DB(n){let e=x(Me,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Wo(n){let e=x(Me,{optional:!0});return e?e.run(()=>n()):n()}var SB=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),lt(t,()=>Wo(()=>n.apply(void 0,r)))),Xe=(n,e,t)=>(t||=e?Sa.WARN:Sa.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=x(Li),s=x(Xs),a=x(ut)}catch{return TB(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Wo(()=>s.add())),i[l]=SB(i[l],r,a));let u=DB(()=>n.apply(this,i));return e?u instanceof X?u.pipe(gi(o.outsideAngular),pi(o.insideAngular),JR(a)):u instanceof Promise?Wo(()=>{let l=s.add();return new Promise((h,p)=>{u.then(g=>lt(a,()=>Wo(()=>h(g))),g=>lt(a,()=>Wo(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Wo(()=>u):u instanceof X?u.pipe(gi(o.outsideAngular),pi(o.insideAngular)):Wo(()=>u)});var Gr=class{constructor(e){return e}},Ko=class{constructor(){return Qf()}};function AB(n){return n&&n.length===1?n[0]:new Gr(Go())}var gE=new q("angularfire2._apps"),RB={provide:Gr,useFactory:AB,deps:[[new hn,gE]]},MB={provide:Ko,deps:[[new hn,gE]]};function PB(n){return(e,t)=>{let r=t.get(Fo);Ke("angularfire",Fi.full,"core"),Ke("angularfire",Fi.full,"app"),Ke("angular",ov.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Gr(i)}}function eM(n,...e){return an([RB,MB,{provide:gE,useFactory:PB(n),multi:!0,deps:[Me,Qe,Li,...e]}])}var tM=Xe(pE,!0);var xB=new Map,NB={activated:!1,tokenObservers:[]},OB={initialized:!1,enabled:!1};function Kn(n){return xB.get(n)||Object.assign({},NB)}function oM(){return OB}var kB="https://content-firebaseappcheck.googleapis.com/v1";var FB="exchangeDebugToken",nM={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},gue=1440*60*1e3;var yE=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return v(this,null,function*(){this.stop();try{this.pending=new zo,this.pending.promise.catch(t=>{}),yield LB(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new zo,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function LB(n){return new Promise(e=>{setTimeout(e,n)})}var VB={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Vi=new Gn("appCheck","AppCheck",VB);function sM(n){if(!Kn(n).activated)throw Vi.create("use-before-activation",{appName:n.name})}function aM(r,i){return v(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw Vi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Vi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Vi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Vi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+p,issuedAtTimeMillis:g}})}function cM(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${kB}/projects/${t}/apps/${r}:${FB}?key=${i}`,body:{debug_token:e}}}var UB="firebase-app-check-database",jB=1,_E="firebase-app-check-store";var Zf=null;function BB(){return Zf||(Zf=new Promise((n,e)=>{try{let t=indexedDB.open(UB,jB);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Vi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(_E,{keyPath:"compositeKey"})}}}catch(t){e(Vi.create("storage-open",{originalErrorMessage:t?.message}))}}),Zf)}function $B(n,e){return HB(zB(n),e)}function HB(n,e){return v(this,null,function*(){let r=(yield BB()).transaction(_E,"readwrite"),o=r.objectStore(_E).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Vi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function zB(n){return`${n.options.appId}-${n.name}`}var nl=new lr("@firebase/app-check");function mE(n,e){return Ju()?$B(n,e).catch(t=>{nl.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function uM(){return oM().enabled}function lM(){return v(this,null,function*(){let n=oM();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var qB={error:"UNKNOWN_ERROR"};function GB(n){return $f.encodeString(JSON.stringify(n),!1)}function EE(n,e=!1,t=!1){return v(this,null,function*(){let r=n.app;sM(r);let i=Kn(r),o=i.token,s;if(o&&!rl(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(rl(l)?o=l:yield mE(r,void 0))}if(!e&&o&&rl(o))return{token:o.token};let a=!1;if(uM())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=aM(cM(r,yield lM()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield mE(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?nl.warn(l.message):t&&nl.error(l),vE(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Kn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?nl.warn(l.message):t&&nl.error(l),s=l}let u;return o?s?rl(o)?u={token:o.token,internalError:s}:u=vE(s):(u={token:o.token},i.token=o,yield mE(r,o)):u=vE(s),a&&QB(r,u),u})}function WB(n){return v(this,null,function*(){let e=n.app;sM(e);let{provider:t}=Kn(e);if(uM()){let r=yield lM(),{token:i}=yield aM(cM(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function KB(n,e,t,r){let{app:i}=n,o=Kn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&rl(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),rM(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>rM(n))}function dM(n,e){let t=Kn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function rM(n){let{app:e}=n,t=Kn(e),r=t.tokenRefresher;r||(r=YB(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function YB(n){let{app:e}=n;return new yE(()=>v(null,null,function*(){let t=Kn(e),r;if(t.token?r=yield EE(n,!0):r=yield EE(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Kn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},nM.RETRIAL_MIN_WAIT,nM.RETRIAL_MAX_WAIT)}function QB(n,e){let t=Kn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function rl(n){return n.expireTimeMillis-Date.now()>0}function vE(n){return{token:GB(qB),error:n}}var IE=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Kn(this.app);for(let t of e)dM(this.app,t.next);return Promise.resolve()}};function JB(n,e){return new IE(n,e)}function ZB(n){return{getToken:e=>EE(n,e),getLimitedUseToken:()=>WB(n),addTokenListener:e=>KB(n,"INTERNAL",e),removeTokenListener:e=>dM(n.app,e)}}var XB="@firebase/app-check",e6="0.10.1";var t6="app-check",iM="app-check-internal";function n6(){Wn(new Kt(t6,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return JB(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(iM).initialize()})),Wn(new Kt(iM,n=>{let e=n.getProvider("app-check").getImmediate();return ZB(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ke(XB,e6)}n6();var r6="app-check";var Ra=class{constructor(){return Aa(r6)}};var i6=["localhost","0.0.0.0","127.0.0.1"],Aue=typeof window<"u"&&i6.includes(window.location.hostname);var hM=()=>{};var fM=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},o6=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},pM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(t[h],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(fM(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):o6(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new bE;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let M=l<<6&192|p;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},bE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},s6=function(n){let e=fM(n);return pM.encodeByteArray(e,!0)},TE=function(n){return s6(n).replace(/\./g,"")},Xf=function(n){try{return pM.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function a6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var c6=()=>a6().__FIREBASE_DEFAULTS__,u6=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},l6=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Xf(n[1]);return e&&JSON.parse(e)},d6=()=>{try{return hM()||c6()||u6()||l6()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var gM=n=>d6()?.[`_${n}`];function DE(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yn())}function vM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yM(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function _M(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EM(){try{return typeof indexedDB=="object"}catch{return!1}}function IM(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var h6="FirebaseError",hr=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=h6,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wr.prototype.create)}},Wr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?f6(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new hr(i,a,r)}};function f6(n,e){return n.replace(p6,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var p6=/\{\$([^}]+)}/g;function SE(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function wM(n,e){let t=new CE(n,e);return t.subscribe.bind(t)}var CE=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");g6(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=wE),i.error===void 0&&(i.error=wE),i.complete===void 0&&(i.complete=wE);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function g6(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function wE(){}var Nue=14400*1e3;function Ma(n){return n&&n._delegate?n._delegate:n}var Kr=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var m6=[],Ve=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Ve||{}),v6={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},y6=Ve.INFO,_6={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},E6=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=_6[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Pa=class{constructor(e){this.name=e,this._logLevel=y6,this._logHandler=E6,this._userLogHandler=null,m6.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?v6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}};var RE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(w6(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function w6(n){return n.getComponent()?.type==="VERSION"}var ME="@firebase/app",bM="0.14.6";var Yr=new Pa("@firebase/app"),b6="@firebase/app-compat",C6="@firebase/analytics-compat",T6="@firebase/analytics",D6="@firebase/app-check-compat",S6="@firebase/app-check",A6="@firebase/auth",R6="@firebase/auth-compat",M6="@firebase/database",P6="@firebase/data-connect",x6="@firebase/database-compat",N6="@firebase/functions",O6="@firebase/functions-compat",k6="@firebase/installations",F6="@firebase/installations-compat",L6="@firebase/messaging",V6="@firebase/messaging-compat",U6="@firebase/performance",j6="@firebase/performance-compat",B6="@firebase/remote-config",$6="@firebase/remote-config-compat",H6="@firebase/storage",z6="@firebase/storage-compat",q6="@firebase/firestore",G6="@firebase/ai",W6="@firebase/firestore-compat",K6="firebase",Y6="12.6.0";var Q6={[ME]:"fire-core",[b6]:"fire-core-compat",[T6]:"fire-analytics",[C6]:"fire-analytics-compat",[S6]:"fire-app-check",[D6]:"fire-app-check-compat",[A6]:"fire-auth",[R6]:"fire-auth-compat",[M6]:"fire-rtdb",[P6]:"fire-data-connect",[x6]:"fire-rtdb-compat",[N6]:"fire-fn",[O6]:"fire-fn-compat",[k6]:"fire-iid",[F6]:"fire-iid-compat",[L6]:"fire-fcm",[V6]:"fire-fcm-compat",[U6]:"fire-perf",[j6]:"fire-perf-compat",[B6]:"fire-rc",[$6]:"fire-rc-compat",[H6]:"fire-gcs",[z6]:"fire-gcs-compat",[q6]:"fire-fst",[W6]:"fire-fst-compat",[G6]:"fire-vertex","fire-js":"fire-js",[K6]:"fire-js-all"};var J6=new Map,Z6=new Map,CM=new Map;function TM(n,e){try{n.container.addComponent(e)}catch(t){Yr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Na(n){let e=n.name;if(CM.has(e))return Yr.debug(`There were multiple attempts to register component ${e}.`),!1;CM.set(e,n);for(let t of J6.values())TM(t,n);for(let t of Z6.values())TM(t,n);return!0}function Yo(n){return n==null?!1:n.settings!==void 0}var X6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},NE=new Wr("app","Firebase",X6);var ep=Y6;function xa(n,e,t){let r=Q6[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yr.warn(s.join(" "));return}Na(new Kr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var e4="firebase-heartbeat-database",t4=1,il="firebase-heartbeat-store",AE=null;function RM(){return AE||(AE=Yf(e4,t4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(il)}catch(t){console.warn(t)}}}}).catch(n=>{throw NE.create("idb-open",{originalErrorMessage:n.message})})),AE}function n4(n){return v(this,null,function*(){try{let t=(yield RM()).transaction(il),r=yield t.objectStore(il).get(MM(n));return yield t.done,r}catch(e){if(e instanceof hr)Yr.warn(e.message);else{let t=NE.create("idb-get",{originalErrorMessage:e?.message});Yr.warn(t.message)}}})}function DM(n,e){return v(this,null,function*(){try{let r=(yield RM()).transaction(il,"readwrite");yield r.objectStore(il).put(e,MM(n)),yield r.done}catch(t){if(t instanceof hr)Yr.warn(t.message);else{let r=NE.create("idb-set",{originalErrorMessage:t?.message});Yr.warn(r.message)}}})}function MM(n){return`${n.name}!${n.options.appId}`}var r4=1024,i4=30,PE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new xE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return v(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=SM();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>i4){let i=s4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Yr.warn(e)}})}getHeartbeatsHeader(){return v(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=SM(),{heartbeatsToSend:t,unsentEntries:r}=o4(this._heartbeatsCache.heartbeats),i=TE(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Yr.warn(e),""}})}};function SM(){return new Date().toISOString().substring(0,10)}function o4(n,e=r4){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),AM(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),AM(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var xE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(this,null,function*(){return EM()?IM().then(()=>!0).catch(()=>!1):!1})}read(){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield n4(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return DM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return v(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return DM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function AM(n){return TE(JSON.stringify({version:2,heartbeats:n})).length}function s4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function a4(n){Na(new Kr("platform-logger",e=>new RE(e),"PRIVATE")),Na(new Kr("heartbeat",e=>new PE(e),"PRIVATE")),xa(ME,bM,n),xa(ME,bM,"esm2020"),xa("fire-js","")}a4("");function VM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var UM=VM,jM=new Wr("auth","Firebase",VM());var ip=new Pa("@firebase/auth");function c4(n,...e){ip.logLevel<=Ve.WARN&&ip.warn(`Auth (${ep}): ${n}`,...e)}function np(n,...e){ip.logLevel<=Ve.ERROR&&ip.error(`Auth (${ep}): ${n}`,...e)}function PM(n,...e){throw qE(n,...e)}function zE(n,...e){return qE(n,...e)}function BM(n,e,t){let r=K(L({},UM()),{[e]:t});return new Wr("auth","Firebase",r).create(e,{appName:n.name})}function rp(n){return BM(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qE(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return jM.create(n,...e)}function Ae(n,e,...t){if(!n)throw qE(e,...t)}function ol(n){let e="INTERNAL ASSERTION FAILED: "+n;throw np(e),new Error(e)}function op(n,e){n||ol(e)}function u4(){return xM()==="http:"||xM()==="https:"}function xM(){return typeof self<"u"&&self.location?.protocol||null}function l4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(u4()||yM()||"connection"in navigator)?navigator.onLine:!0}function d4(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Zo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,op(t>e,"Short delay should be less than long delay!"),this.isMobile=mM()||_M()}get(){return l4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function h4(n,e){op(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var sp=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ol("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ol("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ol("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var f4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var p4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],g4=new Zo(3e4,6e4);function $M(n,e){return n.tenantId&&!e.tenantId?K(L({},e),{tenantId:n.tenantId}):e}function dp(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){return HM(n,i,()=>v(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=SE(L({key:n.config.apiKey},h)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let y=L({method:e,headers:g},l);return vM()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&DE(n.emulatorConfig.host)&&(y.credentials="include"),sp.fetch()(yield zM(n,n.config.apiHost,t,p),y)}))})}function HM(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=L(L({},f4),e);try{let i=new FE(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw tp(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw tp(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw tp(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw tp(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw BM(n,h,l);PM(n,h)}}catch(i){if(i instanceof hr)throw i;PM(n,"network-request-failed",{message:String(i)})}})}function zM(n,e,t,r){return v(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?h4(n.config,i):`${n.config.apiScheme}://${i}`;return p4.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var FE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(zE(this.auth,"network-request-failed")),g4.get())})}};function tp(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=zE(n,e,r);return i.customData._tokenResponse=t,i}function m4(n,e){return v(this,null,function*(){return dp(n,"POST","/v1/accounts:delete",e)})}function ap(n,e){return v(this,null,function*(){return dp(n,"POST","/v1/accounts:lookup",e)})}function sl(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function qM(n,e=!1){return v(this,null,function*(){let t=Ma(n),r=yield t.getIdToken(e),i=GM(r);Ae(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:sl(OE(i.auth_time)),issuedAtTime:sl(OE(i.iat)),expirationTime:sl(OE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function OE(n){return Number(n)*1e3}function GM(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return np("JWT malformed, contained fewer than 3 sections"),null;try{let i=Xf(t);return i?JSON.parse(i):(np("Failed to decode base64 JWT payload"),null)}catch(i){return np("Caught error parsing JWT payload as JSON",i?.toString()),null}}function NM(n){let e=GM(n);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function LE(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof hr&&v4(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function v4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var VE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var cl=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=sl(this.lastLoginAt),this.creationTime=sl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function cp(n){return v(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),r=yield LE(n,ap(e,{idToken:t}));Ae(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let o=i.providerUserInfo?.length?KM(i.providerUserInfo):[],s=y4(n.providerData,o),a=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!s?.length,l=a?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new cl(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(n,h)})}function WM(n){return v(this,null,function*(){let e=Ma(n);yield cp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function y4(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function KM(n){return n.map(r=>{var i=r,{providerId:e}=i,t=Em(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function _4(n,e){return v(this,null,function*(){let t=yield HM(n,{},()=>v(null,null,function*(){let r=SE({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield zM(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&DE(n.emulatorConfig.host)&&(u.credentials="include"),sp.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function E4(n,e){return v(this,null,function*(){return dp(n,"POST","/v2/accounts:revokeToken",$M(n,e))})}var al=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):NM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");let t=NM(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield _4(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Ae(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Ae(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Ae(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ol("not implemented")}};function Ui(n,e){Ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Qo=class n{constructor(o){var s=o,{uid:e,auth:t,stsTokenManager:r}=s,i=Em(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new VE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new cl(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield LE(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return qM(this,e)}reload(){return WM(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>L({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(K(L({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield cp(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(Yo(this.auth.app))return Promise.reject(rp(this.auth));let e=yield this.getIdToken();return yield LE(this,m4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return K(L({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>L({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,u=t._redirectEventId??void 0,l=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:y,providerData:M,stsTokenManager:k}=t;Ae(p&&k,e,"internal-error");let O=al.fromJSON(this.name,k);Ae(typeof p=="string",e,"internal-error"),Ui(r,e.name),Ui(i,e.name),Ae(typeof g=="boolean",e,"internal-error"),Ae(typeof y=="boolean",e,"internal-error"),Ui(o,e.name),Ui(s,e.name),Ui(a,e.name),Ui(u,e.name),Ui(l,e.name),Ui(h,e.name);let B=new n({uid:p,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:O,createdAt:l,lastLoginAt:h});return M&&Array.isArray(M)&&(B.providerData=M.map(Z=>L({},Z))),u&&(B._redirectEventId=u),B}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new al;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield cp(o),o})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];Ae(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?KM(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new al;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new cl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var OM=new Map;function Jo(n){op(n instanceof Function,"Expected a class definition");let e=OM.get(n);return e?(op(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,OM.set(n,e),e)}var I4=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),UE=I4;function kE(n,e,t){return`firebase:${n}:${e}:${t}`}var up=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=kE(this.userKey,i.apiKey,o),this.fullPersistenceKey=kE("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield ap(this.auth,{idToken:e}).catch(()=>{});return t?Qo._fromGetAccountInfoResponse(this.auth,t,e):null}return Qo._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(Jo(UE),e,r);let i=(yield Promise.all(t.map(l=>v(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Jo(UE),s=kE(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let g=yield ap(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield Qo._fromGetAccountInfoResponse(e,g,h)}else p=Qo._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>v(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function kM(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(T4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(w4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(S4(e))return"Blackberry";if(A4(e))return"Webos";if(b4(e))return"Safari";if((e.includes("chrome/")||C4(e))&&!e.includes("edge/"))return"Chrome";if(D4(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function w4(n=Yn()){return/firefox\//i.test(n)}function b4(n=Yn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function C4(n=Yn()){return/crios\//i.test(n)}function T4(n=Yn()){return/iemobile/i.test(n)}function D4(n=Yn()){return/android/i.test(n)}function S4(n=Yn()){return/blackberry/i.test(n)}function A4(n=Yn()){return/webos/i.test(n)}function YM(n,e=[]){let t;switch(n){case"Browser":t=kM(Yn());break;case"Worker":t=`${kM(Yn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ep}/${r}`}var jE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function R4(t){return v(this,arguments,function*(n,e={}){return dp(n,"GET","/v2/passwordPolicy",$M(n,e))})}var M4=6,BE=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??M4,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var $E=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lp(this),this.idTokenSubscription=new lp(this),this.beforeStateQueue=new jE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Jo(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield up.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield ap(this,{idToken:e}),r=yield Qo._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){if(Yo(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield cp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=d4()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(Yo(this.app))return Promise.reject(rp(this));let t=e?Ma(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return Yo(this.app)?Promise.reject(rp(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Yo(this.app)?Promise.reject(rp(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Jo(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield R4(this),t=new BE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield E4(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Jo(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=yield up.create(this,[Jo(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return v(this,null,function*(){if(Yo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&c4(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function P4(n){return Ma(n)}var lp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=wM(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var x4={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function N4(n){x4=n}function O4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function k4(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Jo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function GE(n,e,t,r){return Ma(n).onIdTokenChanged(e,t,r)}var fle=O4("rcb"),ple=new Zo(3e4,6e4);var gle=new Zo(2e3,1e4);var mle=600*1e3;var vle=new Zo(3e4,6e4);var yle=new Zo(5e3,15e3);var _le=encodeURIComponent("fac");var FM="@firebase/auth",LM="1.11.1";var HE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function F4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function L4(n){Na(new Kr("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Ae(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YM(n)},l=new $E(r,i,o,u);return k4(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Na(new Kr("auth-internal",e=>{let t=P4(e.getProvider("auth").getImmediate());return(r=>new HE(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xa(FM,LM,F4(n)),xa(FM,LM,"esm2020")}var V4=300,Ele=gM("authIdTokenMaxAge")||V4;function U4(){return document.getElementsByTagName("head")?.[0]??document}N4({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=zE("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",U4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});L4("Browser");function QM(n){return new X(function(e){var t=GE(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function hP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var fP=hP,pP=new Gn("auth","Firebase",hP());var vp=new lr("@firebase/auth");function $4(n,...e){vp.logLevel<=ye.WARN&&vp.warn(`Auth (${ki}): ${n}`,...e)}function fp(n,...e){vp.logLevel<=ye.ERROR&&vp.error(`Auth (${ki}): ${n}`,...e)}function pr(n,...e){throw vI(n,...e)}function Xo(n,...e){return vI(n,...e)}function gP(n,e,t){let r=Object.assign(Object.assign({},fP()),{[e]:t});return new Gn("auth","Firebase",r).create(e,{appName:n.name})}function Zr(n){return gP(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return pP.create(n,...e)}function ee(n,e,...t){if(!n)throw vI(e,...t)}function Qr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw fp(e),new Error(e)}function $i(n,e){n||Qr(e)}function QE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function H4(){return JM()==="http:"||JM()==="https:"}function JM(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function z4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(H4()||PR()||"connection"in navigator)?navigator.onLine:!0}function q4(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var es=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,$i(t>e,"Short delay should be less than long delay!"),this.isMobile=RR()||xR()}get(){return z4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function yI(n,e){$i(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var yp=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var G4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var W4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],K4=new es(3e4,6e4);function Hi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Xr(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){return mP(n,i,()=>v(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Zu(Object.assign({key:n.config.apiKey},h)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:g},l);return MR()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Ni(n.emulatorConfig.host)&&(y.credentials="include"),yp.fetch()(yield vP(n,n.config.apiHost,t,p),y)}))})}function mP(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},G4),e);try{let i=new JE(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw hp(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw hp(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw hp(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw hp(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw gP(n,h,l);pr(n,h)}}catch(i){if(i instanceof vn)throw i;pr(n,"network-request-failed",{message:String(i)})}})}function ml(o,s,a,u){return v(this,arguments,function*(n,e,t,r,i={}){let l=yield Xr(n,e,t,r,i);return"mfaPendingCredential"in l&&pr(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function vP(n,e,t,r){return v(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?yI(n.config,i):`${n.config.apiScheme}://${i}`;return W4.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function Y4(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var JE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Xo(this.auth,"network-request-failed")),K4.get())})}};function hp(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Xo(n,e,r);return i.customData._tokenResponse=t,i}function ZM(n){return n!==void 0&&n.enterprise!==void 0}var ZE=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Y4(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function Q4(n,e){return v(this,null,function*(){return Xr(n,"GET","/v2/recaptchaConfig",Hi(n,e))})}function J4(n,e){return v(this,null,function*(){return Xr(n,"POST","/v1/accounts:delete",e)})}function _p(n,e){return v(this,null,function*(){return Xr(n,"POST","/v1/accounts:lookup",e)})}function ll(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function _I(n,e=!1){return v(this,null,function*(){let t=We(n),r=yield t.getIdToken(e),i=EI(r);ee(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:ll(WE(i.auth_time)),issuedAtTime:ll(WE(i.iat)),expirationTime:ll(WE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function WE(n){return Number(n)*1e3}function EI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return fp("JWT malformed, contained fewer than 3 sections"),null;try{let i=Hf(t);return i?JSON.parse(i):(fp("Failed to decode base64 JWT payload"),null)}catch(i){return fp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function XM(n){let e=EI(n);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Oa(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof vn&&Z4(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Z4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var XE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var hl=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ll(this.lastLoginAt),this.creationTime=ll(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ep(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Oa(n,_p(t,{idToken:r}));ee(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?yP(o.providerUserInfo):[],a=X4(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new hl(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function II(n){return v(this,null,function*(){let e=We(n);yield Ep(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function X4(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function yP(n){return n.map(e=>{var{providerId:t}=e,r=Bm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function e$(n,e){return v(this,null,function*(){let t=yield mP(n,{},()=>v(null,null,function*(){let r=Zu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield vP(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&Ni(n.emulatorConfig.host)&&(u.credentials="include"),yp.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function t$(n,e){return v(this,null,function*(){return Xr(n,"POST","/v2/accounts:revokeToken",Hi(n,e))})}var dl=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):XM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ee(e.length!==0,"internal-error");let t=XM(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield e$(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(ee(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ee(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ee(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Qr("not implemented")}};function ji(n,e){ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Bi=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Bm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new hl(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield Oa(this,this.stsTokenManager.getToken(this.auth,e));return ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return _I(this,e)}reload(){return II(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Ep(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(nn(this.auth.app))return Promise.reject(Zr(this.auth));let e=yield this.getIdToken();return yield Oa(this,J4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,M=(s=t.photoURL)!==null&&s!==void 0?s:void 0,k=(a=t.tenantId)!==null&&a!==void 0?a:void 0,O=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,B=(l=t.createdAt)!==null&&l!==void 0?l:void 0,Z=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:ie,emailVerified:Fe,isAnonymous:Bt,providerData:xe,stsTokenManager:S}=t;ee(ie&&S,e,"internal-error");let E=dl.fromJSON(this.name,S);ee(typeof ie=="string",e,"internal-error"),ji(p,e.name),ji(g,e.name),ee(typeof Fe=="boolean",e,"internal-error"),ee(typeof Bt=="boolean",e,"internal-error"),ji(y,e.name),ji(M,e.name),ji(k,e.name),ji(O,e.name),ji(B,e.name),ji(Z,e.name);let b=new n({uid:ie,auth:e,email:g,emailVerified:Fe,displayName:p,isAnonymous:Bt,photoURL:M,phoneNumber:y,tenantId:k,stsTokenManager:E,createdAt:B,lastLoginAt:Z});return xe&&Array.isArray(xe)&&(b.providerData=xe.map(T=>Object.assign({},T))),O&&(b._redirectEventId=O),b}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new dl;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ep(o),o})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];ee(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?yP(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new dl;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new hl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var eP=new Map;function Jr(n){$i(n instanceof Function,"Expected a class definition");let e=eP.get(n);return e?($i(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,eP.set(n,e),e)}var n$=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),eI=n$;function pp(n,e,t){return`firebase:${n}:${e}:${t}`}var Ip=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=pp(this.userKey,i.apiKey,o),this.fullPersistenceKey=pp("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield _p(this.auth,{idToken:e}).catch(()=>{});return t?Bi._fromGetAccountInfoResponse(this.auth,t,e):null}return Bi._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(Jr(eI),e,r);let i=(yield Promise.all(t.map(l=>v(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Jr(eI),s=pp(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let g=yield _p(e,{idToken:h}).catch(()=>{});if(!g)break;p=yield Bi._fromGetAccountInfoResponse(e,g,h)}else p=Bi._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>v(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function tP(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_P(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CP(e))return"Blackberry";if(TP(e))return"Webos";if(EP(e))return"Safari";if((e.includes("chrome/")||IP(e))&&!e.includes("edge/"))return"Chrome";if(bP(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function _P(n=vt()){return/firefox\//i.test(n)}function EP(n=vt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function IP(n=vt()){return/crios\//i.test(n)}function wP(n=vt()){return/iemobile/i.test(n)}function bP(n=vt()){return/android/i.test(n)}function CP(n=vt()){return/blackberry/i.test(n)}function TP(n=vt()){return/webos/i.test(n)}function wI(n=vt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function r$(n=vt()){var e;return wI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function i$(){return NR()&&document.documentMode===10}function DP(n=vt()){return wI(n)||bP(n)||TP(n)||CP(n)||/windows phone/i.test(n)||wP(n)}function SP(n,e=[]){let t;switch(n){case"Browser":t=tP(vt());break;case"Worker":t=`${tP(vt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ki}/${r}`}var tI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function o$(t){return v(this,arguments,function*(n,e={}){return Xr(n,"GET","/v2/passwordPolicy",Hi(n,e))})}var s$=6,nI=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:s$,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var rI=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wp(this),this.idTokenSubscription=new wp(this),this.beforeStateQueue=new tI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Jr(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Ip.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield _p(this,{idToken:e}),r=yield Bi._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(nn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield Ep(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=q4()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(nn(this.app))return Promise.reject(Zr(this));let t=e?We(e):null;return t&&ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return nn(this.app)?Promise.reject(Zr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return nn(this.app)?Promise.reject(Zr(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(Jr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield o$(this),t=new nI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield t$(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Jr(e)||this._popupRedirectResolver;ee(t,this,"argument-error"),this.redirectPersistenceManager=yield Ip.create(this,[Jr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;if(nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&$4(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function ns(n){return We(n)}var wp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=LR(t=>this.observer=t)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Rp={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function a$(n){Rp=n}function AP(n){return Rp.loadJS(n)}function c$(){return Rp.recaptchaEnterpriseScript}function u$(){return Rp.gapiScript}function RP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var iI=class{constructor(){this.enterprise=new oI}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},oI=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var l$="recaptcha-enterprise",MP="NO_RECAPTCHA",sI=class{constructor(e){this.type=l$,this.auth=ns(e)}verify(e="verify",t=!1){return v(this,null,function*(){function r(o){return v(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>v(null,null,function*(){Q4(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new ZE(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;ZM(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(MP)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new iI().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&ZM(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=c$();u.length!==0&&(u+=a),AP(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function ul(n,e,t,r=!1,i=!1){return v(this,null,function*(){let o=new sI(n),s;if(i)s=MP;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function aI(n,e,t,r,i){return v(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield ul(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>v(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield ul(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield ul(n,e,t);return r(n,a).catch(u=>v(null,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield ul(n,e,t,!1,!0);return r(n,h)}return Promise.reject(u)}))}else{let a=yield ul(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function bI(n,e){let t=Da(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(ur(o,e??{}))return i;pr(i,"already-initialized")}return t.initialize({options:e})}function d$(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Jr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function CI(n,e,t){let r=ns(n);ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=PP(e),{host:s,port:a}=h$(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ee(ur(l,r.config.emulator)&&ur(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ni(s)?(qf(`${o}//${s}${u}`),Gf("Auth",!0)):i||f$()}function PP(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function h$(n){let e=PP(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:nP(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:nP(s)}}}function nP(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function f$(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var fl=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qr("not implemented")}_getIdTokenResponse(e){return Qr("not implemented")}_linkToIdToken(e,t){return Qr("not implemented")}_getReauthenticationResolver(e){return Qr("not implemented")}};function p$(n,e){return v(this,null,function*(){return Xr(n,"POST","/v1/accounts:signUp",e)})}function g$(n,e){return v(this,null,function*(){return ml(n,"POST","/v1/accounts:signInWithPassword",Hi(n,e))})}function m$(n,e){return v(this,null,function*(){return ml(n,"POST","/v1/accounts:signInWithEmailLink",Hi(n,e))})}function v$(n,e){return v(this,null,function*(){return ml(n,"POST","/v1/accounts:signInWithEmailLink",Hi(n,e))})}var pl=class n extends fl{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return v(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return aI(e,t,"signInWithPassword",g$,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return m$(e,{email:this._email,oobCode:this._password});default:pr(e,"internal-error")}})}_linkToIdToken(e,t){return v(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return aI(e,r,"signUpPassword",p$,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return v$(e,{idToken:t,email:this._email,oobCode:this._password});default:pr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function KE(n,e){return v(this,null,function*(){return ml(n,"POST","/v1/accounts:signInWithIdp",Hi(n,e))})}function y$(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _$(n){let e=Ca(Ta(n)).link,t=e?Ca(Ta(e)).deep_link_id:null,r=Ca(Ta(n)).deep_link_id;return(r?Ca(Ta(r)).link:null)||r||t||e||n}var bp=class n{constructor(e){var t,r,i,o,s,a;let u=Ca(Ta(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=y$((i=u.mode)!==null&&i!==void 0?i:null);ee(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=_$(e);try{return new n(t)}catch{return null}}};var xP=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return pl._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=bp.parseLink(r);return ee(i,"argument-error"),pl._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Cp=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var cI=class extends Cp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function E$(n,e){return v(this,null,function*(){return ml(n,"POST","/v1/accounts:signUp",Hi(n,e))})}var ka=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let o=yield Bi._fromIdTokenResponse(e,r,i),s=rP(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=rP(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function rP(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var uI=class n extends vn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function NP(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?uI._fromErrorAndOperation(n,o,e,r):o})}function I$(n,e,t=!1){return v(this,null,function*(){let r=yield Oa(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ka._forOperation(n,"link",r)})}function w$(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(nn(r.app))return Promise.reject(Zr(r));let i="reauthenticate";try{let o=yield Oa(n,NP(r,i,e,n),t);ee(o.idToken,r,"internal-error");let s=EI(o.idToken);ee(s,r,"internal-error");let{sub:a}=s;return ee(n.uid===a,r,"user-mismatch"),ka._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&pr(r,"user-mismatch"),o}})}function OP(n,e,t=!1){return v(this,null,function*(){if(nn(n.app))return Promise.reject(Zr(n));let r="signIn",i=yield NP(n,r,e),o=yield ka._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function TI(n,e){return v(this,null,function*(){return OP(ns(n),e)})}function kP(n){return v(this,null,function*(){let e=ns(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function DI(n,e,t){return v(this,null,function*(){if(nn(n.app))return Promise.reject(Zr(n));let r=ns(n),s=yield aI(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",E$,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&kP(n),u}),a=yield ka._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function SI(n,e,t){return nn(n.app)?Promise.reject(Zr(n)):TI(We(n),xP.credential(e,t)).catch(r=>v(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&kP(n),r}))}function b$(n,e){return v(this,null,function*(){return Xr(n,"POST","/v1/accounts:update",e)})}function AI(r,i){return v(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=We(n),a={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=yield Oa(o,b$(o.auth,a));o.displayName=u.displayName||null,o.photoURL=u.photoUrl||null;let l=o.providerData.find(({providerId:h})=>h==="password");l&&(l.displayName=o.displayName,l.photoURL=o.photoURL),yield o._updateTokensIfNecessary(u)})}function RI(n,e,t,r){return We(n).onIdTokenChanged(e,t,r)}function MI(n,e,t){return We(n).beforeAuthStateChanged(e,t)}function PI(n){return We(n).signOut()}var Tp="__sak";var Dp=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Tp,"1"),this.storage.removeItem(Tp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var C$=1e3,T$=10,D$=(()=>{class n extends Dp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DP(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);i$()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,T$):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},C$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield Tr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield Tr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield Tr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),FP=D$;var S$=(()=>{class n extends Dp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),xI=S$;function A$(n){return Promise.all(n.map(e=>v(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var R$=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,s)})),l=yield A$(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function LP(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var lI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=LP("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function fr(){return window}function M$(n){fr().location.href=n}function VP(){return typeof fr().WorkerGlobalScope<"u"&&typeof fr().importScripts=="function"}function P$(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function x$(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function N$(){return VP()?self:null}var UP="firebaseLocalStorageDb",O$=1,Sp="firebaseLocalStorage",jP="fbase_key",ts=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Mp(n,e){return n.transaction([Sp],e?"readwrite":"readonly").objectStore(Sp)}function k$(){let n=indexedDB.deleteDatabase(UP);return new ts(n).toPromise()}function dI(){let n=indexedDB.open(UP,O$);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Sp,{keyPath:jP})}catch(i){t(i)}}),n.addEventListener("success",()=>v(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Sp)?e(r):(r.close(),yield k$(),e(yield dI()))}))})}function iP(n,e,t){return v(this,null,function*(){let r=Mp(n,!0).put({[jP]:e,value:t});return new ts(r).toPromise()})}function F$(n,e){return v(this,null,function*(){let t=Mp(n,!1).get(e),r=yield new ts(t).toPromise();return r===void 0?null:r.value})}function oP(n,e){let t=Mp(n,!0).delete(e);return new ts(t).toPromise()}var L$=800,V$=3,U$=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield dI(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>V$)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return VP()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=R$._getInstance(N$()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield P$(),!this.activeServiceWorker)return;this.sender=new lI(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||x$()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield dI();return yield iP(t,Tp,"1"),yield oP(t,Tp),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>iP(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>F$(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>oP(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(o=>{let s=Mp(o,!1).getAll();return new ts(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),L$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),BP=U$;var uhe=RP("rcb"),lhe=new es(3e4,6e4);function j$(n,e){return e?Jr(e):(ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var gl=class extends fl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return KE(e,this._buildIdpRequest())}_linkToIdToken(e,t){return KE(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return KE(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function B$(n){return OP(n.auth,new gl(n),n.bypassAuthState)}function $$(n){let{auth:e,user:t}=n;return ee(t,e,"internal-error"),w$(t,new gl(n),n.bypassAuthState)}function H$(n){return v(this,null,function*(){let{auth:e,user:t}=n;return ee(t,e,"internal-error"),I$(t,new gl(n),n.bypassAuthState)})}var hI=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return B$;case"linkViaPopup":case"linkViaRedirect":return H$;case"reauthViaPopup":case"reauthViaRedirect":return $$;default:pr(this.auth,"internal-error")}}resolve(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var dhe=new es(2e3,1e4);var z$="pendingRedirect",gp=new Map,fI=class n extends hI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=gp.get(this.auth._key());if(!e){try{let r=(yield q$(this.resolver,this.auth))?yield Tr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}gp.set(this.auth._key(),e)}return this.bypassAuthState||gp.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return Tr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Tr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function q$(n,e){return v(this,null,function*(){let t=K$(e),r=W$(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function G$(n,e){gp.set(n._key(),e)}function W$(n){return Jr(n._redirectPersistence)}function K$(n){return pp(z$,n.config.apiKey,n.name)}function Y$(n,e,t=!1){return v(this,null,function*(){if(nn(n.app))return Promise.reject(Zr(n));let r=ns(n),i=j$(r,e),s=yield new fI(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var Q$=600*1e3,pI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!J$(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!$P(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Xo(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Q$&&this.cachedEventUids.clear(),this.cachedEventUids.has(sP(e))}saveEventToCache(e){this.cachedEventUids.add(sP(e)),this.lastProcessedEventTime=Date.now()}};function sP(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function $P({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function J$(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $P(n);default:return!1}}function Z$(t){return v(this,arguments,function*(n,e={}){return Xr(n,"GET","/v1/projects",e)})}var X$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eH=/^https?/;function tH(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Z$(n);for(let t of e)try{if(nH(t))return}catch{}pr(n,"unauthorized-domain")})}function nH(n){let e=QE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!eH.test(t))return!1;if(X$.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var rH=new es(3e4,6e4);function aP(){let n=fr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function iH(n){return new Promise((e,t)=>{var r,i,o;function s(){aP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{aP(),t(Xo(n,"network-request-failed"))},timeout:rH.get()})}if(!((i=(r=fr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=fr().gapi)===null||o===void 0)&&o.load)s();else{let a=RP("iframefcb");return fr()[a]=()=>{gapi.load?s():t(Xo(n,"network-request-failed"))},AP(`${u$()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw mp=null,e})}var mp=null;function oH(n){return mp=mp||iH(n),mp}var sH=new es(5e3,15e3),aH="__/auth/iframe",cH="emulator/auth/iframe",uH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dH(n){let e=n.config;ee(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?yI(e,cH):`https://${n.config.authDomain}/${aH}`,r={apiKey:e.apiKey,appName:n.name,v:ki},i=lH.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Zu(r).slice(1)}`}function hH(n){return v(this,null,function*(){let e=yield oH(n),t=fr().gapi;return ee(t,n,"internal-error"),e.open({where:document.body,url:dH(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uH,dontclear:!0},r=>new Promise((i,o)=>v(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Xo(n,"network-request-failed"),a=fr().setTimeout(()=>{o(s)},sH.get());function u(){fr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var fH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pH=500,gH=600,mH="_blank",vH="http://localhost",Ap=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function yH(n,e,t,r=pH,i=gH){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},fH),{width:r.toString(),height:i.toString(),top:o,left:s}),l=vt().toLowerCase();t&&(a=IP(l)?mH:t),_P(l)&&(e=e||vH,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,M])=>`${g}${y}=${M},`,"");if(r$(l)&&a!=="_self")return _H(e||"",a),new Ap(null);let p=window.open(e||"",a,h);ee(p,n,"popup-blocked");try{p.focus()}catch{}return new Ap(p)}function _H(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var EH="__/auth/handler",IH="emulator/auth/handler",wH=encodeURIComponent("fac");function cP(n,e,t,r,i,o){return v(this,null,function*(){ee(n.config.authDomain,n,"auth-domain-config-required"),ee(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ki,eventId:i};if(e instanceof Cp){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",FR(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof cI){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${wH}=${encodeURIComponent(u)}`:"";return`${bH(n)}?${Zu(a).slice(1)}${l}`})}function bH({config:n}){return n.emulator?yI(n,IH):`https://${n.authDomain}/${EH}`}var YE="webStorageSupport",gI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xI,this._completeRedirectFn=Y$,this._overrideRedirectResult=G$}_openPopup(e,t,r,i){return v(this,null,function*(){var o;$i((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield cP(e,t,r,QE(),i);return yH(e,s,LP())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let o=yield cP(e,t,r,QE(),i);return M$(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):($i(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield hH(e),r=new pI(e);return t.register("authEvent",i=>(ee(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(YE,{type:YE},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[YE];s!==void 0&&t(!!s),pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=tH(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return DP()||EP()||wI()}},HP=gI;var uP="@firebase/auth",lP="1.10.8";var mI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function CH(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TH(n){Wn(new Kt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ee(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SP(n)},l=new rI(r,i,o,u);return d$(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Wn(new Kt("auth-internal",e=>{let t=ns(e.getProvider("auth").getImmediate());return(r=>new mI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ke(uP,lP,CH(n)),Ke(uP,lP,"esm2017")}var DH=300,SH=X_("authIdTokenMaxAge")||DH,dP=null,AH=n=>e=>v(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>SH)return;let i=t?.token;dP!==i&&(dP=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function NI(n=Go()){let e=Da(n,"auth");if(e.isInitialized())return e.getImmediate();let t=bI(n,{popupRedirectResolver:HP,persistence:[BP,FP,xI]}),r=X_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=AH(o.toString());MI(t,s,()=>s(t.currentUser)),RI(t,a=>s(a))}}let i=J_("auth");return i&&CI(t,`http://${i}`),t}function RH(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}a$({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Xo("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",RH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TH("Browser");var zP="auth",rs=class{constructor(e){return e}},vl=class{constructor(){return Aa(zP)}};var OI=new q("angularfire2.auth-instances");function v5(n,e){let t=tl(zP,n,e);return t&&new rs(t)}function y5(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new rs(r)}}var _5={provide:vl,deps:[[new hn,OI]]},E5={provide:rs,useFactory:v5,deps:[[new hn,OI],Gr]};function qP(n,...e){return Ke("angularfire",Fi.full,"auth"),an([E5,_5,{provide:OI,useFactory:y5(n),multi:!0,deps:[Me,Qe,Li,Ko,[new hn,Ra],...e]}])}var GP=Xe(QM,!0);var WP=Xe(DI,!0,2);var KP=Xe(NI,!0);var YP=Xe(SI,!0,2);var QP=Xe(PI,!0,2);var JP=Xe(AI,!0,2);var ZP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},XP={};var ei,kI;(function(){var n;function e(S,E){function b(){}b.prototype=E.prototype,S.D=E.prototype,S.prototype=new b,S.prototype.constructor=S,S.C=function(T,A,P){for(var w=Array(arguments.length-2),wr=2;wr<arguments.length;wr++)w[wr-2]=arguments[wr];return E.prototype[A].apply(T,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,E,b){b||(b=0);var T=Array(16);if(typeof E=="string")for(var A=0;16>A;++A)T[A]=E.charCodeAt(b++)|E.charCodeAt(b++)<<8|E.charCodeAt(b++)<<16|E.charCodeAt(b++)<<24;else for(A=0;16>A;++A)T[A]=E[b++]|E[b++]<<8|E[b++]<<16|E[b++]<<24;E=S.g[0],b=S.g[1],A=S.g[2];var P=S.g[3],w=E+(P^b&(A^P))+T[0]+3614090360&4294967295;E=b+(w<<7&4294967295|w>>>25),w=P+(A^E&(b^A))+T[1]+3905402710&4294967295,P=E+(w<<12&4294967295|w>>>20),w=A+(b^P&(E^b))+T[2]+606105819&4294967295,A=P+(w<<17&4294967295|w>>>15),w=b+(E^A&(P^E))+T[3]+3250441966&4294967295,b=A+(w<<22&4294967295|w>>>10),w=E+(P^b&(A^P))+T[4]+4118548399&4294967295,E=b+(w<<7&4294967295|w>>>25),w=P+(A^E&(b^A))+T[5]+1200080426&4294967295,P=E+(w<<12&4294967295|w>>>20),w=A+(b^P&(E^b))+T[6]+2821735955&4294967295,A=P+(w<<17&4294967295|w>>>15),w=b+(E^A&(P^E))+T[7]+4249261313&4294967295,b=A+(w<<22&4294967295|w>>>10),w=E+(P^b&(A^P))+T[8]+1770035416&4294967295,E=b+(w<<7&4294967295|w>>>25),w=P+(A^E&(b^A))+T[9]+2336552879&4294967295,P=E+(w<<12&4294967295|w>>>20),w=A+(b^P&(E^b))+T[10]+4294925233&4294967295,A=P+(w<<17&4294967295|w>>>15),w=b+(E^A&(P^E))+T[11]+2304563134&4294967295,b=A+(w<<22&4294967295|w>>>10),w=E+(P^b&(A^P))+T[12]+1804603682&4294967295,E=b+(w<<7&4294967295|w>>>25),w=P+(A^E&(b^A))+T[13]+4254626195&4294967295,P=E+(w<<12&4294967295|w>>>20),w=A+(b^P&(E^b))+T[14]+2792965006&4294967295,A=P+(w<<17&4294967295|w>>>15),w=b+(E^A&(P^E))+T[15]+1236535329&4294967295,b=A+(w<<22&4294967295|w>>>10),w=E+(A^P&(b^A))+T[1]+4129170786&4294967295,E=b+(w<<5&4294967295|w>>>27),w=P+(b^A&(E^b))+T[6]+3225465664&4294967295,P=E+(w<<9&4294967295|w>>>23),w=A+(E^b&(P^E))+T[11]+643717713&4294967295,A=P+(w<<14&4294967295|w>>>18),w=b+(P^E&(A^P))+T[0]+3921069994&4294967295,b=A+(w<<20&4294967295|w>>>12),w=E+(A^P&(b^A))+T[5]+3593408605&4294967295,E=b+(w<<5&4294967295|w>>>27),w=P+(b^A&(E^b))+T[10]+38016083&4294967295,P=E+(w<<9&4294967295|w>>>23),w=A+(E^b&(P^E))+T[15]+3634488961&4294967295,A=P+(w<<14&4294967295|w>>>18),w=b+(P^E&(A^P))+T[4]+3889429448&4294967295,b=A+(w<<20&4294967295|w>>>12),w=E+(A^P&(b^A))+T[9]+568446438&4294967295,E=b+(w<<5&4294967295|w>>>27),w=P+(b^A&(E^b))+T[14]+3275163606&4294967295,P=E+(w<<9&4294967295|w>>>23),w=A+(E^b&(P^E))+T[3]+4107603335&4294967295,A=P+(w<<14&4294967295|w>>>18),w=b+(P^E&(A^P))+T[8]+1163531501&4294967295,b=A+(w<<20&4294967295|w>>>12),w=E+(A^P&(b^A))+T[13]+2850285829&4294967295,E=b+(w<<5&4294967295|w>>>27),w=P+(b^A&(E^b))+T[2]+4243563512&4294967295,P=E+(w<<9&4294967295|w>>>23),w=A+(E^b&(P^E))+T[7]+1735328473&4294967295,A=P+(w<<14&4294967295|w>>>18),w=b+(P^E&(A^P))+T[12]+2368359562&4294967295,b=A+(w<<20&4294967295|w>>>12),w=E+(b^A^P)+T[5]+4294588738&4294967295,E=b+(w<<4&4294967295|w>>>28),w=P+(E^b^A)+T[8]+2272392833&4294967295,P=E+(w<<11&4294967295|w>>>21),w=A+(P^E^b)+T[11]+1839030562&4294967295,A=P+(w<<16&4294967295|w>>>16),w=b+(A^P^E)+T[14]+4259657740&4294967295,b=A+(w<<23&4294967295|w>>>9),w=E+(b^A^P)+T[1]+2763975236&4294967295,E=b+(w<<4&4294967295|w>>>28),w=P+(E^b^A)+T[4]+1272893353&4294967295,P=E+(w<<11&4294967295|w>>>21),w=A+(P^E^b)+T[7]+4139469664&4294967295,A=P+(w<<16&4294967295|w>>>16),w=b+(A^P^E)+T[10]+3200236656&4294967295,b=A+(w<<23&4294967295|w>>>9),w=E+(b^A^P)+T[13]+681279174&4294967295,E=b+(w<<4&4294967295|w>>>28),w=P+(E^b^A)+T[0]+3936430074&4294967295,P=E+(w<<11&4294967295|w>>>21),w=A+(P^E^b)+T[3]+3572445317&4294967295,A=P+(w<<16&4294967295|w>>>16),w=b+(A^P^E)+T[6]+76029189&4294967295,b=A+(w<<23&4294967295|w>>>9),w=E+(b^A^P)+T[9]+3654602809&4294967295,E=b+(w<<4&4294967295|w>>>28),w=P+(E^b^A)+T[12]+3873151461&4294967295,P=E+(w<<11&4294967295|w>>>21),w=A+(P^E^b)+T[15]+530742520&4294967295,A=P+(w<<16&4294967295|w>>>16),w=b+(A^P^E)+T[2]+3299628645&4294967295,b=A+(w<<23&4294967295|w>>>9),w=E+(A^(b|~P))+T[0]+4096336452&4294967295,E=b+(w<<6&4294967295|w>>>26),w=P+(b^(E|~A))+T[7]+1126891415&4294967295,P=E+(w<<10&4294967295|w>>>22),w=A+(E^(P|~b))+T[14]+2878612391&4294967295,A=P+(w<<15&4294967295|w>>>17),w=b+(P^(A|~E))+T[5]+4237533241&4294967295,b=A+(w<<21&4294967295|w>>>11),w=E+(A^(b|~P))+T[12]+1700485571&4294967295,E=b+(w<<6&4294967295|w>>>26),w=P+(b^(E|~A))+T[3]+2399980690&4294967295,P=E+(w<<10&4294967295|w>>>22),w=A+(E^(P|~b))+T[10]+4293915773&4294967295,A=P+(w<<15&4294967295|w>>>17),w=b+(P^(A|~E))+T[1]+2240044497&4294967295,b=A+(w<<21&4294967295|w>>>11),w=E+(A^(b|~P))+T[8]+1873313359&4294967295,E=b+(w<<6&4294967295|w>>>26),w=P+(b^(E|~A))+T[15]+4264355552&4294967295,P=E+(w<<10&4294967295|w>>>22),w=A+(E^(P|~b))+T[6]+2734768916&4294967295,A=P+(w<<15&4294967295|w>>>17),w=b+(P^(A|~E))+T[13]+1309151649&4294967295,b=A+(w<<21&4294967295|w>>>11),w=E+(A^(b|~P))+T[4]+4149444226&4294967295,E=b+(w<<6&4294967295|w>>>26),w=P+(b^(E|~A))+T[11]+3174756917&4294967295,P=E+(w<<10&4294967295|w>>>22),w=A+(E^(P|~b))+T[2]+718787259&4294967295,A=P+(w<<15&4294967295|w>>>17),w=b+(P^(A|~E))+T[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(A+(w<<21&4294967295|w>>>11))&4294967295,S.g[2]=S.g[2]+A&4294967295,S.g[3]=S.g[3]+P&4294967295}r.prototype.u=function(S,E){E===void 0&&(E=S.length);for(var b=E-this.blockSize,T=this.B,A=this.h,P=0;P<E;){if(A==0)for(;P<=b;)i(this,S,P),P+=this.blockSize;if(typeof S=="string"){for(;P<E;)if(T[A++]=S.charCodeAt(P++),A==this.blockSize){i(this,T),A=0;break}}else for(;P<E;)if(T[A++]=S[P++],A==this.blockSize){i(this,T),A=0;break}}this.h=A,this.o+=E},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;var b=8*this.o;for(E=S.length-8;E<S.length;++E)S[E]=b&255,b/=256;for(this.u(S),S=Array(16),E=b=0;4>E;++E)for(var T=0;32>T;T+=8)S[b++]=this.g[E]>>>T&255;return S};function o(S,E){var b=a;return Object.prototype.hasOwnProperty.call(b,S)?b[S]:b[S]=E(S)}function s(S,E){this.h=E;for(var b=[],T=!0,A=S.length-1;0<=A;A--){var P=S[A]|0;T&&P==E||(b[A]=P,T=!1)}this.g=b}var a={};function u(S){return-128<=S&&128>S?o(S,function(E){return new s([E|0],0>E?-1:0)}):new s([S|0],0>S?-1:0)}function l(S){if(isNaN(S)||!isFinite(S))return p;if(0>S)return O(l(-S));for(var E=[],b=1,T=0;S>=b;T++)E[T]=S/b|0,b*=4294967296;return new s(E,0)}function h(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return O(h(S.substring(1),E));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=l(Math.pow(E,8)),T=p,A=0;A<S.length;A+=8){var P=Math.min(8,S.length-A),w=parseInt(S.substring(A,A+P),E);8>P?(P=l(Math.pow(E,P)),T=T.j(P).add(l(w))):(T=T.j(b),T=T.add(l(w)))}return T}var p=u(0),g=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(k(this))return-O(this).m();for(var S=0,E=1,b=0;b<this.g.length;b++){var T=this.i(b);S+=(0<=T?T:4294967296+T)*E,E*=4294967296}return S},n.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(M(this))return"0";if(k(this))return"-"+O(this).toString(S);for(var E=l(Math.pow(S,6)),b=this,T="";;){var A=Fe(b,E).g;b=B(b,A.j(E));var P=((0<b.g.length?b.g[0]:b.h)>>>0).toString(S);if(b=A,M(b))return P+T;for(;6>P.length;)P="0"+P;T=P+T}},n.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function M(S){if(S.h!=0)return!1;for(var E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function k(S){return S.h==-1}n.l=function(S){return S=B(this,S),k(S)?-1:M(S)?0:1};function O(S){for(var E=S.g.length,b=[],T=0;T<E;T++)b[T]=~S.g[T];return new s(b,~S.h).add(g)}n.abs=function(){return k(this)?O(this):this},n.add=function(S){for(var E=Math.max(this.g.length,S.g.length),b=[],T=0,A=0;A<=E;A++){var P=T+(this.i(A)&65535)+(S.i(A)&65535),w=(P>>>16)+(this.i(A)>>>16)+(S.i(A)>>>16);T=w>>>16,P&=65535,w&=65535,b[A]=w<<16|P}return new s(b,b[b.length-1]&-2147483648?-1:0)};function B(S,E){return S.add(O(E))}n.j=function(S){if(M(this)||M(S))return p;if(k(this))return k(S)?O(this).j(O(S)):O(O(this).j(S));if(k(S))return O(this.j(O(S)));if(0>this.l(y)&&0>S.l(y))return l(this.m()*S.m());for(var E=this.g.length+S.g.length,b=[],T=0;T<2*E;T++)b[T]=0;for(T=0;T<this.g.length;T++)for(var A=0;A<S.g.length;A++){var P=this.i(T)>>>16,w=this.i(T)&65535,wr=S.i(A)>>>16,yc=S.i(A)&65535;b[2*T+2*A]+=w*yc,Z(b,2*T+2*A),b[2*T+2*A+1]+=P*yc,Z(b,2*T+2*A+1),b[2*T+2*A+1]+=w*wr,Z(b,2*T+2*A+1),b[2*T+2*A+2]+=P*wr,Z(b,2*T+2*A+2)}for(T=0;T<E;T++)b[T]=b[2*T+1]<<16|b[2*T];for(T=E;T<2*E;T++)b[T]=0;return new s(b,0)};function Z(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function ie(S,E){this.g=S,this.h=E}function Fe(S,E){if(M(E))throw Error("division by zero");if(M(S))return new ie(p,p);if(k(S))return E=Fe(O(S),E),new ie(O(E.g),O(E.h));if(k(E))return E=Fe(S,O(E)),new ie(O(E.g),E.h);if(30<S.g.length){if(k(S)||k(E))throw Error("slowDivide_ only works with positive integers.");for(var b=g,T=E;0>=T.l(S);)b=Bt(b),T=Bt(T);var A=xe(b,1),P=xe(T,1);for(T=xe(T,2),b=xe(b,2);!M(T);){var w=P.add(T);0>=w.l(S)&&(A=A.add(b),P=w),T=xe(T,1),b=xe(b,1)}return E=B(S,A.j(E)),new ie(A,E)}for(A=p;0<=S.l(E);){for(b=Math.max(1,Math.floor(S.m()/E.m())),T=Math.ceil(Math.log(b)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),P=l(b),w=P.j(E);k(w)||0<w.l(S);)b-=T,P=l(b),w=P.j(E);M(P)&&(P=g),A=A.add(P),S=B(S,w)}return new ie(A,S)}n.A=function(S){return Fe(this,S).h},n.and=function(S){for(var E=Math.max(this.g.length,S.g.length),b=[],T=0;T<E;T++)b[T]=this.i(T)&S.i(T);return new s(b,this.h&S.h)},n.or=function(S){for(var E=Math.max(this.g.length,S.g.length),b=[],T=0;T<E;T++)b[T]=this.i(T)|S.i(T);return new s(b,this.h|S.h)},n.xor=function(S){for(var E=Math.max(this.g.length,S.g.length),b=[],T=0;T<E;T++)b[T]=this.i(T)^S.i(T);return new s(b,this.h^S.h)};function Bt(S){for(var E=S.g.length+1,b=[],T=0;T<E;T++)b[T]=S.i(T)<<1|S.i(T-1)>>>31;return new s(b,S.h)}function xe(S,E){var b=E>>5;E%=32;for(var T=S.g.length-b,A=[],P=0;P<T;P++)A[P]=0<E?S.i(P+b)>>>E|S.i(P+b+1)<<32-E:S.i(P+b);return new s(A,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,kI=XP.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,ei=XP.Integer=s}).apply(typeof ZP<"u"?ZP:typeof self<"u"?self:typeof window<"u"?window:{});var Pp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ti={};var FI,I5,Fa,LI,yl,xp,VI,UI,jI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pp=="object"&&Pp];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var R=c[m];if(!(R in f))break e;f=f[R]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,R={next:function(){if(!m&&f<c.length){var N=f++;return{value:d(N,c[N]),done:!1}}return m=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,m),c.apply(d,R)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function M(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,R,N){for(var j=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)j[Le-2]=arguments[Le];return d.prototype[R].apply(m,j)}}function k(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function O(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let R=c.length||0,N=m.length||0;c.length=R+N;for(let j=0;j<N;j++)c[R+j]=m[j]}else c.push(m)}}class B{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function Z(c){return/^[\s\xa0]*$/.test(c)}function ie(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Fe(c){return Fe[" "](c),c}Fe[" "]=function(){};var Bt=ie().indexOf("Gecko")!=-1&&!(ie().toLowerCase().indexOf("webkit")!=-1&&ie().indexOf("Edge")==-1)&&!(ie().indexOf("Trident")!=-1||ie().indexOf("MSIE")!=-1)&&ie().indexOf("Edge")==-1;function xe(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function S(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function E(c){let d={};for(let f in c)d[f]=c[f];return d}let b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(c,d){let f,m;for(let R=1;R<arguments.length;R++){m=arguments[R];for(f in m)c[f]=m[f];for(let N=0;N<b.length;N++)f=b[N],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function A(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function P(c){a.setTimeout(()=>{throw c},0)}function w(){var c=Yg;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class wr{constructor(){this.h=this.g=null}add(d,f){let m=yc.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var yc=new B(()=>new gO,c=>c.reset());class gO{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let _c,Ec=!1,Yg=new wr,_b=()=>{let c=a.Promise.resolve(void 0);_c=()=>{c.then(mO)}};var mO=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(f){P(f)}var d=yc;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ec=!1};function ui(){this.s=this.s,this.C=this.C}ui.prototype.s=!1,ui.prototype.ma=function(){this.s||(this.s=!0,this.N())},ui.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function St(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}St.prototype.h=function(){this.defaultPrevented=!0};var vO=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function Ic(c,d){if(St.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Bt){e:{try{Fe(d.nodeName);var R=!0;break e}catch{}R=!1}R||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:yO[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ic.aa.h.call(this)}}M(Ic,St);var yO={2:"touch",3:"pen",4:"mouse"};Ic.prototype.h=function(){Ic.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var wc="closure_listenable_"+(1e6*Math.random()|0),_O=0;function EO(c,d,f,m,R){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=R,this.key=++_O,this.da=this.fa=!1}function td(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function nd(c){this.src=c,this.g={},this.h=0}nd.prototype.add=function(c,d,f,m,R){var N=c.toString();c=this.g[N],c||(c=this.g[N]=[],this.h++);var j=Jg(c,d,m,R);return-1<j?(d=c[j],f||(d.fa=!1)):(d=new EO(d,this.src,N,!!m,R),d.fa=f,c.push(d)),d};function Qg(c,d){var f=d.type;if(f in c.g){var m=c.g[f],R=Array.prototype.indexOf.call(m,d,void 0),N;(N=0<=R)&&Array.prototype.splice.call(m,R,1),N&&(td(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Jg(c,d,f,m){for(var R=0;R<c.length;++R){var N=c[R];if(!N.da&&N.listener==d&&N.capture==!!f&&N.ha==m)return R}return-1}var Zg="closure_lm_"+(1e6*Math.random()|0),Xg={};function Eb(c,d,f,m,R){if(m&&m.once)return wb(c,d,f,m,R);if(Array.isArray(d)){for(var N=0;N<d.length;N++)Eb(c,d[N],f,m,R);return null}return f=rm(f),c&&c[wc]?c.K(d,f,l(m)?!!m.capture:!!m,R):Ib(c,d,f,!1,m,R)}function Ib(c,d,f,m,R,N){if(!d)throw Error("Invalid event type");var j=l(R)?!!R.capture:!!R,Le=tm(c);if(Le||(c[Zg]=Le=new nd(c)),f=Le.add(d,f,m,j,N),f.proxy)return f;if(m=IO(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)vO||(R=j),R===void 0&&(R=!1),c.addEventListener(d.toString(),m,R);else if(c.attachEvent)c.attachEvent(Cb(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function IO(){function c(f){return d.call(c.src,c.listener,f)}let d=wO;return c}function wb(c,d,f,m,R){if(Array.isArray(d)){for(var N=0;N<d.length;N++)wb(c,d[N],f,m,R);return null}return f=rm(f),c&&c[wc]?c.L(d,f,l(m)?!!m.capture:!!m,R):Ib(c,d,f,!0,m,R)}function bb(c,d,f,m,R){if(Array.isArray(d))for(var N=0;N<d.length;N++)bb(c,d[N],f,m,R);else m=l(m)?!!m.capture:!!m,f=rm(f),c&&c[wc]?(c=c.i,d=String(d).toString(),d in c.g&&(N=c.g[d],f=Jg(N,f,m,R),-1<f&&(td(N[f]),Array.prototype.splice.call(N,f,1),N.length==0&&(delete c.g[d],c.h--)))):c&&(c=tm(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Jg(d,f,m,R)),(f=-1<c?d[c]:null)&&em(f))}function em(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[wc])Qg(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(Cb(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=tm(d))?(Qg(f,c),f.h==0&&(f.src=null,d[Zg]=null)):td(c)}}}function Cb(c){return c in Xg?Xg[c]:Xg[c]="on"+c}function wO(c,d){if(c.da)c=!0;else{d=new Ic(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&em(c),c=f.call(m,d)}return c}function tm(c){return c=c[Zg],c instanceof nd?c:null}var nm="__closure_events_fn_"+(1e9*Math.random()>>>0);function rm(c){return typeof c=="function"?c:(c[nm]||(c[nm]=function(d){return c.handleEvent(d)}),c[nm])}function At(){ui.call(this),this.i=new nd(this),this.M=this,this.F=null}M(At,ui),At.prototype[wc]=!0,At.prototype.removeEventListener=function(c,d,f,m){bb(this,c,d,f,m)};function $t(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new St(d,c);else if(d instanceof St)d.target=d.target||c;else{var R=d;d=new St(m,c),T(d,R)}if(R=!0,f)for(var N=f.length-1;0<=N;N--){var j=d.g=f[N];R=rd(j,m,!0,d)&&R}if(j=d.g=c,R=rd(j,m,!0,d)&&R,R=rd(j,m,!1,d)&&R,f)for(N=0;N<f.length;N++)j=d.g=f[N],R=rd(j,m,!1,d)&&R}At.prototype.N=function(){if(At.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)td(f[m]);delete c.g[d],c.h--}}this.F=null},At.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},At.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function rd(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var R=!0,N=0;N<d.length;++N){var j=d[N];if(j&&!j.da&&j.capture==f){var Le=j.listener,Et=j.ha||j.src;j.fa&&Qg(c.i,j),R=Le.call(Et,m)!==!1&&R}}return R&&!m.defaultPrevented}function Tb(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Db(c){c.g=Tb(()=>{c.g=null,c.i&&(c.i=!1,Db(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class bO extends ui{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Db(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bc(c){ui.call(this),this.h=c,this.g={}}M(bc,ui);var Sb=[];function Ab(c){xe(c.g,function(d,f){this.g.hasOwnProperty(f)&&em(d)},c),c.g={}}bc.prototype.N=function(){bc.aa.N.call(this),Ab(this)},bc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var im=a.JSON.stringify,CO=a.JSON.parse,TO=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function om(){}om.prototype.h=null;function Rb(c){return c.h||(c.h=c.i())}function Mb(){}var Cc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sm(){St.call(this,"d")}M(sm,St);function am(){St.call(this,"c")}M(am,St);var co={},Pb=null;function id(){return Pb=Pb||new At}co.La="serverreachability";function xb(c){St.call(this,co.La,c)}M(xb,St);function Tc(c){let d=id();$t(d,new xb(d))}co.STAT_EVENT="statevent";function Nb(c,d){St.call(this,co.STAT_EVENT,c),this.stat=d}M(Nb,St);function Ht(c){let d=id();$t(d,new Nb(d,c))}co.Ma="timingevent";function Ob(c,d){St.call(this,co.Ma,c),this.size=d}M(Ob,St);function Dc(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Sc(){this.g=!0}Sc.prototype.xa=function(){this.g=!1};function DO(c,d,f,m,R,N){c.info(function(){if(c.g)if(N)for(var j="",Le=N.split("&"),Et=0;Et<Le.length;Et++){var Te=Le[Et].split("=");if(1<Te.length){var Rt=Te[0];Te=Te[1];var Mt=Rt.split("_");j=2<=Mt.length&&Mt[1]=="type"?j+(Rt+"="+Te+"&"):j+(Rt+"=redacted&")}}else j=null;else j=N;return"XMLHTTP REQ ("+m+") [attempt "+R+"]: "+d+`
`+f+`
`+j})}function SO(c,d,f,m,R,N,j){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+R+"]: "+d+`
`+f+`
`+N+" "+j})}function Es(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+RO(c,f)+(m?" "+m:"")})}function AO(c,d){c.info(function(){return"TIMEOUT: "+d})}Sc.prototype.info=function(){};function RO(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var R=m[1];if(Array.isArray(R)&&!(1>R.length)){var N=R[0];if(N!="noop"&&N!="stop"&&N!="close")for(var j=1;j<R.length;j++)R[j]=""}}}}return im(f)}catch{return d}}var od={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cm;function sd(){}M(sd,om),sd.prototype.g=function(){return new XMLHttpRequest},sd.prototype.i=function(){return{}},cm=new sd;function li(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new bc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fb}function Fb(){this.i=null,this.g="",this.h=!1}var Lb={},um={};function lm(c,d,f){c.L=1,c.v=ld(br(d)),c.m=f,c.P=!0,Vb(c,null)}function Vb(c,d){c.F=Date.now(),ad(c),c.A=br(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),Zb(f.i,"t",m),c.C=0,f=c.j.J,c.h=new Fb,c.g=mC(c.j,f?d:null,!c.m),0<c.O&&(c.M=new bO(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var R="readystatechange";Array.isArray(R)||(R&&(Sb[0]=R.toString()),R=Sb);for(var N=0;N<R.length;N++){var j=Eb(f,R[N],m||d.handleEvent,!1,d.h||d);if(!j)break;d.g[j.key]=j}d=c.H?E(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Tc(),DO(c.i,c.u,c.A,c.l,c.R,c.m)}li.prototype.ca=function(c){c=c.target;let d=this.M;d&&Cr(c)==3?d.j():this.Y(c)},li.prototype.Y=function(c){try{if(c==this.g)e:{let Mt=Cr(this.g);var d=this.g.Ba();let bs=this.g.Z();if(!(3>Mt)&&(Mt!=3||this.g&&(this.h.h||this.g.oa()||oC(this.g)))){this.J||Mt!=4||d==7||(d==8||0>=bs?Tc(3):Tc(2)),dm(this);var f=this.g.Z();this.X=f;t:if(Ub(this)){var m=oC(this.g);c="";var R=m.length,N=Cr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){uo(this),Ac(this);var j="";break t}this.h.i=new a.TextDecoder}for(d=0;d<R;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(N&&d==R-1)});m.length=0,this.h.g+=c,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,SO(this.i,this.u,this.A,this.l,this.R,Mt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,Et=this.g;if((Le=Et.g?Et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(Le)){var Te=Le;break t}}Te=null}if(f=Te)Es(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hm(this,f);else{this.o=!1,this.s=3,Ht(12),uo(this),Ac(this);break e}}if(this.P){f=!0;let kn;for(;!this.J&&this.C<j.length;)if(kn=MO(this,j),kn==um){Mt==4&&(this.s=4,Ht(14),f=!1),Es(this.i,this.l,null,"[Incomplete Response]");break}else if(kn==Lb){this.s=4,Ht(15),Es(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else Es(this.i,this.l,kn,null),hm(this,kn);if(Ub(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||j.length!=0||this.h.h||(this.s=1,Ht(16),f=!1),this.o=this.o&&f,!f)Es(this.i,this.l,j,"[Invalid Chunked Response]"),uo(this),Ac(this);else if(0<j.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),ym(Rt),Rt.M=!0,Ht(11))}}else Es(this.i,this.l,j,null),hm(this,j);Mt==4&&uo(this),this.o&&!this.J&&(Mt==4?hC(this.j,this):(this.o=!1,ad(this)))}else WO(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,Ht(12)):(this.s=0,Ht(13)),uo(this),Ac(this)}}}catch{}finally{}};function Ub(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function MO(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?um:(f=Number(d.substring(f,m)),isNaN(f)?Lb:(m+=1,m+f>d.length?um:(d=d.slice(m,m+f),c.C=m+f,d)))}li.prototype.cancel=function(){this.J=!0,uo(this)};function ad(c){c.S=Date.now()+c.I,jb(c,c.I)}function jb(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Dc(g(c.ba,c),d)}function dm(c){c.B&&(a.clearTimeout(c.B),c.B=null)}li.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(AO(this.i,this.A),this.L!=2&&(Tc(),Ht(17)),uo(this),this.s=2,Ac(this)):jb(this,this.S-c)};function Ac(c){c.j.G==0||c.J||hC(c.j,c)}function uo(c){dm(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,Ab(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function hm(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||fm(f.h,c))){if(!c.K&&fm(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var R=m;if(R[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)gd(f),fd(f);else break e;vm(f),Ht(18)}}else f.za=R[1],0<f.za-f.T&&37500>R[2]&&f.F&&f.v==0&&!f.C&&(f.C=Dc(g(f.Za,f),6e3));if(1>=Hb(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ho(f,11)}else if((c.K||f.g==c)&&gd(f),!Z(d))for(R=f.Da.g.parse(d),d=0;d<R.length;d++){let Te=R[d];if(f.T=Te[0],Te=Te[1],f.G==2)if(Te[0]=="c"){f.K=Te[1],f.ia=Te[2];let Rt=Te[3];Rt!=null&&(f.la=Rt,f.j.info("VER="+f.la));let Mt=Te[4];Mt!=null&&(f.Aa=Mt,f.j.info("SVER="+f.Aa));let bs=Te[5];bs!=null&&typeof bs=="number"&&0<bs&&(m=1.5*bs,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let kn=c.g;if(kn){let vd=kn.g?kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vd){var N=m.h;N.g||vd.indexOf("spdy")==-1&&vd.indexOf("quic")==-1&&vd.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(pm(N,N.h),N.h=null))}if(m.D){let _m=kn.g?kn.g.getResponseHeader("X-HTTP-Session-Id"):null;_m&&(m.ya=_m,je(m.I,m.D,_m))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var j=c;if(m.qa=gC(m,m.J?m.ia:null,m.W),j.K){zb(m.h,j);var Le=j,Et=m.L;Et&&(Le.I=Et),Le.B&&(dm(Le),ad(Le)),m.g=j}else lC(m);0<f.i.length&&pd(f)}else Te[0]!="stop"&&Te[0]!="close"||ho(f,7);else f.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?ho(f,7):mm(f):Te[0]!="noop"&&f.l&&f.l.ta(Te),f.v=0)}}Tc(4)}catch{}}var PO=class{constructor(c,d){this.g=c,this.map=d}};function Bb(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $b(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Hb(c){return c.h?1:c.g?c.g.size:0}function fm(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function pm(c,d){c.g?c.g.add(d):c.h=d}function zb(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}Bb.prototype.cancel=function(){if(this.i=qb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function qb(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return k(c.i)}function xO(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function NO(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function Gb(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=NO(c),m=xO(c),R=m.length,N=0;N<R;N++)d.call(void 0,m[N],f&&f[N],c)}var Wb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function OO(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),R=null;if(0<=m){var N=c[f].substring(0,m);R=c[f].substring(m+1)}else N=c[f];d(N,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function lo(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof lo){this.h=c.h,cd(this,c.j),this.o=c.o,this.g=c.g,ud(this,c.s),this.l=c.l;var d=c.i,f=new Pc;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Kb(this,f),this.m=c.m}else c&&(d=String(c).match(Wb))?(this.h=!1,cd(this,d[1]||"",!0),this.o=Rc(d[2]||""),this.g=Rc(d[3]||"",!0),ud(this,d[4]),this.l=Rc(d[5]||"",!0),Kb(this,d[6]||"",!0),this.m=Rc(d[7]||"")):(this.h=!1,this.i=new Pc(null,this.h))}lo.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Mc(d,Yb,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Mc(d,Yb,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Mc(f,f.charAt(0)=="/"?LO:FO,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Mc(f,UO)),c.join("")};function br(c){return new lo(c)}function cd(c,d,f){c.j=f?Rc(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function ud(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Kb(c,d,f){d instanceof Pc?(c.i=d,jO(c.i,c.h)):(f||(d=Mc(d,VO)),c.i=new Pc(d,c.h))}function je(c,d,f){c.i.set(d,f)}function ld(c){return je(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Rc(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Mc(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,kO),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function kO(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Yb=/[#\/\?@]/g,FO=/[#\?:]/g,LO=/[#\?]/g,VO=/[#\?@]/g,UO=/#/g;function Pc(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function di(c){c.g||(c.g=new Map,c.h=0,c.i&&OO(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Pc.prototype,n.add=function(c,d){di(this),this.i=null,c=Is(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Qb(c,d){di(c),d=Is(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Jb(c,d){return di(c),d=Is(c,d),c.g.has(d)}n.forEach=function(c,d){di(this),this.g.forEach(function(f,m){f.forEach(function(R){c.call(d,R,m,this)},this)},this)},n.na=function(){di(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let R=c[m];for(let N=0;N<R.length;N++)f.push(d[m])}return f},n.V=function(c){di(this);let d=[];if(typeof c=="string")Jb(this,c)&&(d=d.concat(this.g.get(Is(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return di(this),this.i=null,c=Is(this,c),Jb(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Zb(c,d,f){Qb(c,d),0<f.length&&(c.i=null,c.g.set(Is(c,d),k(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let N=encodeURIComponent(String(m)),j=this.V(m);for(m=0;m<j.length;m++){var R=N;j[m]!==""&&(R+="="+encodeURIComponent(String(j[m]))),c.push(R)}}return this.i=c.join("&")};function Is(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function jO(c,d){d&&!c.j&&(di(c),c.i=null,c.g.forEach(function(f,m){var R=m.toLowerCase();m!=R&&(Qb(this,m),Zb(this,R,f))},c)),c.j=d}function BO(c,d){let f=new Sc;if(a.Image){let m=new Image;m.onload=y(hi,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(hi,f,"TestLoadImage: error",!1,d,m),m.onabort=y(hi,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(hi,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function $O(c,d){let f=new Sc,m=new AbortController,R=setTimeout(()=>{m.abort(),hi(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(N=>{clearTimeout(R),N.ok?hi(f,"TestPingServer: ok",!0,d):hi(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(R),hi(f,"TestPingServer: error",!1,d)})}function hi(c,d,f,m,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),m(f)}catch{}}function HO(){this.g=new TO}function zO(c,d,f){let m=f||"";try{Gb(c,function(R,N){let j=R;l(R)&&(j=im(R)),d.push(m+N+"="+encodeURIComponent(j))})}catch(R){throw d.push(m+"type="+encodeURIComponent("_badmap")),R}}function xc(c){this.l=c.Ub||null,this.j=c.eb||!1}M(xc,om),xc.prototype.g=function(){return new dd(this.l,this.j)},xc.prototype.i=(function(c){return function(){return c}})({});function dd(c,d){At.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(dd,At),n=dd.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Oc(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nc(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Oc(this)),this.g&&(this.readyState=3,Oc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xb(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xb(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Nc(this):Oc(this),this.readyState==3&&Xb(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Nc(this))},n.Qa=function(c){this.g&&(this.response=c,Nc(this))},n.ga=function(){this.g&&Nc(this)};function Nc(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Oc(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Oc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(dd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function eC(c){let d="";return xe(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function gm(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=eC(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):je(c,d,f))}function qe(c){At.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(qe,At);var qO=/^https?$/i,GO=["POST","PUT"];n=qe.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cm.g(),this.v=this.o?Rb(this.o):Rb(cm),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(N){tC(this,N);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var R in m)f.set(R,m[R]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let N of m.keys())f.set(N,m.get(N));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(N=>N.toLowerCase()=="content-type"),R=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(GO,d,void 0))||m||R||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,j]of f)this.g.setRequestHeader(N,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{iC(this),this.u=!0,this.g.send(c),this.u=!1}catch(N){tC(this,N)}};function tC(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,nC(c),hd(c)}function nC(c){c.A||(c.A=!0,$t(c,"complete"),$t(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,$t(this,"complete"),$t(this,"abort"),hd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hd(this,!0)),qe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?rC(this):this.bb())},n.bb=function(){rC(this)};function rC(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Cr(c)!=4||c.Z()!=2)){if(c.u&&Cr(c)==4)Tb(c.Ea,0,c);else if($t(c,"readystatechange"),Cr(c)==4){c.h=!1;try{let j=c.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=j===0){var R=String(c.D).match(Wb)[1]||null;!R&&a.self&&a.self.location&&(R=a.self.location.protocol.slice(0,-1)),m=!qO.test(R?R.toLowerCase():"")}f=m}if(f)$t(c,"complete"),$t(c,"success");else{c.m=6;try{var N=2<Cr(c)?c.g.statusText:""}catch{N=""}c.l=N+" ["+c.Z()+"]",nC(c)}}finally{hd(c)}}}}function hd(c,d){if(c.g){iC(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||$t(c,"ready");try{f.onreadystatechange=m}catch{}}}function iC(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Cr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Cr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),CO(d)}};function oC(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function WO(c){let d={};c=(c.g&&2<=Cr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(Z(c[m]))continue;var f=A(c[m]);let R=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let N=d[R]||[];d[R]=N,N.push(f)}S(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function kc(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function sC(c){this.Aa=0,this.i=[],this.j=new Sc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=kc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=kc("baseRetryDelayMs",5e3,c),this.cb=kc("retryDelaySeedMs",1e4,c),this.Wa=kc("forwardChannelMaxRetries",2,c),this.wa=kc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Bb(c&&c.concurrentRequestLimit),this.Da=new HO,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=sC.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,m){Ht(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=gC(this,null,this.W),pd(this)};function mm(c){if(aC(c),c.G==3){var d=c.U++,f=br(c.I);if(je(f,"SID",c.K),je(f,"RID",d),je(f,"TYPE","terminate"),Fc(c,f),d=new li(c,c.j,d),d.L=2,d.v=ld(br(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=mC(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ad(d)}pC(c)}function fd(c){c.g&&(ym(c),c.g.cancel(),c.g=null)}function aC(c){fd(c),c.u&&(a.clearTimeout(c.u),c.u=null),gd(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function pd(c){if(!$b(c.h)&&!c.s){c.s=!0;var d=c.Ga;_c||_b(),Ec||(_c(),Ec=!0),Yg.add(d,c),c.B=0}}function KO(c,d){return Hb(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Dc(g(c.Ga,c,d),fC(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let R=new li(this,this.j,c),N=this.o;if(this.S&&(N?(N=E(N),T(N,this.S)):N=this.S),this.m!==null||this.O||(R.H=N,N=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=uC(this,R,d),f=br(this.I),je(f,"RID",c),je(f,"CVER",22),this.D&&je(f,"X-HTTP-Session-Id",this.D),Fc(this,f),N&&(this.O?d="headers="+encodeURIComponent(String(eC(N)))+"&"+d:this.m&&gm(f,this.m,N)),pm(this.h,R),this.Ua&&je(f,"TYPE","init"),this.P?(je(f,"$req",d),je(f,"SID","null"),R.T=!0,lm(R,f,null)):lm(R,f,d),this.G=2}}else this.G==3&&(c?cC(this,c):this.i.length==0||$b(this.h)||cC(this))};function cC(c,d){var f;d?f=d.l:f=c.U++;let m=br(c.I);je(m,"SID",c.K),je(m,"RID",f),je(m,"AID",c.T),Fc(c,m),c.m&&c.o&&gm(m,c.m,c.o),f=new li(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=uC(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),pm(c.h,f),lm(f,m,d)}function Fc(c,d){c.H&&xe(c.H,function(f,m){je(d,m,f)}),c.l&&Gb({},function(f,m){je(d,m,f)})}function uC(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var R=c.i;let N=-1;for(;;){let j=["count="+f];N==-1?0<f?(N=R[0].g,j.push("ofs="+N)):N=0:j.push("ofs="+N);let Le=!0;for(let Et=0;Et<f;Et++){let Te=R[Et].g,Rt=R[Et].map;if(Te-=N,0>Te)N=Math.max(0,R[Et].g-100),Le=!1;else try{zO(Rt,j,"req"+Te+"_")}catch{m&&m(Rt)}}if(Le){m=j.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function lC(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;_c||_b(),Ec||(_c(),Ec=!0),Yg.add(d,c),c.v=0}}function vm(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Dc(g(c.Fa,c),fC(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,dC(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Dc(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ht(10),fd(this),dC(this))};function ym(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function dC(c){c.g=new li(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=br(c.qa);je(d,"RID","rpc"),je(d,"SID",c.K),je(d,"AID",c.T),je(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&je(d,"TO",c.ja),je(d,"TYPE","xmlhttp"),Fc(c,d),c.m&&c.o&&gm(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=ld(br(d)),f.m=null,f.P=!0,Vb(f,c)}n.Za=function(){this.C!=null&&(this.C=null,fd(this),vm(this),Ht(19))};function gd(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function hC(c,d){var f=null;if(c.g==d){gd(c),ym(c),c.g=null;var m=2}else if(fm(c.h,d))f=d.D,zb(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var R=c.B;m=id(),$t(m,new Ob(m,f)),pd(c)}else lC(c);else if(R=d.s,R==3||R==0&&0<d.X||!(m==1&&KO(c,d)||m==2&&vm(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),R){case 1:ho(c,5);break;case 4:ho(c,10);break;case 3:ho(c,6);break;default:ho(c,2)}}}function fC(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ho(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let R=!m;m=new lo(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||cd(m,"https"),ld(m),R?BO(m.toString(),f):$O(m.toString(),f)}else Ht(2);c.G=0,c.l&&c.l.sa(d),pC(c),aC(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function pC(c){if(c.G=0,c.ka=[],c.l){let d=qb(c.h);(d.length!=0||c.i.length!=0)&&(O(c.ka,d),O(c.ka,c.i),c.h.i.length=0,k(c.i),c.i.length=0),c.l.ra()}}function gC(c,d,f){var m=f instanceof lo?br(f):new lo(f);if(m.g!="")d&&(m.g=d+"."+m.g),ud(m,m.s);else{var R=a.location;m=R.protocol,d=d?d+"."+R.hostname:R.hostname,R=+R.port;var N=new lo(null);m&&cd(N,m),d&&(N.g=d),R&&ud(N,R),f&&(N.l=f),m=N}return f=c.D,d=c.ya,f&&d&&je(m,f,d),je(m,"VER",c.la),Fc(c,m),m}function mC(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new qe(new xc({eb:f})):new qe(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function vC(){}n=vC.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function md(){}md.prototype.g=function(c,d){return new rn(c,d)};function rn(c,d){At.call(this),this.g=new sC(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!Z(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!Z(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new ws(this)}M(rn,At),rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){mm(this.g)},rn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=im(c),c=f);d.i.push(new PO(d.Ya++,c)),d.G==3&&pd(d)},rn.prototype.N=function(){this.g.l=null,delete this.j,mm(this.g),delete this.g,rn.aa.N.call(this)};function yC(c){sm.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}M(yC,sm);function _C(){am.call(this),this.status=1}M(_C,am);function ws(c){this.g=c}M(ws,vC),ws.prototype.ua=function(){$t(this.g,"a")},ws.prototype.ta=function(c){$t(this.g,new yC(c))},ws.prototype.sa=function(c){$t(this.g,new _C)},ws.prototype.ra=function(){$t(this.g,"b")},md.prototype.createWebChannel=md.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,jI=ti.createWebChannelTransport=function(){return new md},UI=ti.getStatEventTarget=function(){return id()},VI=ti.Event=co,xp=ti.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},od.NO_ERROR=0,od.TIMEOUT=8,od.HTTP_ERROR=6,yl=ti.ErrorCode=od,kb.COMPLETE="complete",LI=ti.EventType=kb,Mb.EventType=Cc,Cc.OPEN="a",Cc.CLOSE="b",Cc.ERROR="c",Cc.MESSAGE="d",At.prototype.listen=At.prototype.K,Fa=ti.WebChannel=Mb,I5=ti.FetchXmlHttpFactory=xc,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,FI=ti.XhrIo=qe}).apply(typeof Pp<"u"?Pp:typeof self<"u"?self:typeof window<"u"?window:{});var ex="@firebase/firestore",tx="4.8.0";var yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");var rc="11.10.0";var cs=new lr("@firebase/firestore");function La(){return cs.logLevel}function H(n,...e){if(cs.logLevel<=ye.DEBUG){let t=e.map(Mw);cs.debug(`Firestore (${rc}): ${n}`,...t)}}function ii(n,...e){if(cs.logLevel<=ye.ERROR){let t=e.map(Mw);cs.error(`Firestore (${rc}): ${n}`,...t)}}function Yi(n,...e){if(cs.logLevel<=ye.WARN){let t=e.map(Mw);cs.warn(`Firestore (${rc}): ${n}`,...t)}}function Mw(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Q(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Kx(n,r,t)}function Kx(n,e,t){let r=`FIRESTORE (${rc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ii(r),new Error(r)}function Pe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Kx(e,i,r)}function ae(n,e){return n}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends vn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ni=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Up=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},qI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yt.UNAUTHENTICATED))}shutdown(){}},GI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},WI=class{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pe(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ni,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ni)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string",31837,{l:r}),new Up(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string",2055,{h:e}),new yt(e)}},KI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},YI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new KI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},jp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},QI=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Pe(this.o===void 0,3512);let r=o=>{o.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,H("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new jp(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new jp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function w5(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function Yx(){return new TextEncoder}var Cl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=w5(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ve(n,e){return n<e?-1:n>e?1:0}function JI(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ve(r,i);{let o=Yx(),s=b5(o.encode(nx(n,t)),o.encode(nx(e,t)));return s!==0?s:ve(r,i)}}t+=r>65535?2:1}return ve(n.length,e.length)}function nx(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function b5(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ve(n[t],e[t]);return ve(n.length,e.length)}function qa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var rx="__name__",Bp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Q(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Q(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ve(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):JI(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ei.fromString(e.substring(4,e.length-2))}},He=class n extends Bp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},C5=/^[_a-zA-Z][_a-zA-Z0-9]*$/,_n=class n extends Bp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return C5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rx}static keyField(){return new n([rx])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new $(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new $(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Y=class n{constructor(e){this.path=e}static fromPath(e){return new n(He.fromString(e))}static fromName(e){return new n(He.fromString(e).popFirst(5))}static empty(){return new n(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return He.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new He(e.slice()))}};function Qx(n,e,t){if(!t)throw new $(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function T5(n,e,t,r){if(e===!0&&r===!0)throw new $(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ix(n){if(!Y.isDocumentKey(n))throw new $(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ox(n){if(Y.isDocumentKey(n))throw new $(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function _g(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Q(12329,{type:typeof n})}function zi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=_g(n);throw new $(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function st(n,e){let t={typeString:n};return e&&(t.value=e),t}function Fl(n,e){if(!Jx(n))throw new $(F.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new $(F.INVALID_ARGUMENT,t);return!0}var sx=-62135596800,ax=1e6,Ue=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ax);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<sx)throw new $(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ax}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fl(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-sx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ue._jsonSchemaVersion="firestore/timestamp/1.0",Ue._jsonSchema={type:st("string",Ue._jsonSchemaVersion),seconds:st("number"),nanoseconds:st("number")};var le=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ue(0,0))}static max(){return new n(new Ue(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Tl=-1,ZI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};ZI.UNKNOWN_ID=-1;function D5(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new Ue(t+1,0):new Ue(t,r));return new us(i,Y.empty(),e)}function S5(n){return new us(n.readTime,n.key,Tl)}var us=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(le.min(),Y.empty(),Tl)}static max(){return new n(le.max(),Y.empty(),Tl)}};function A5(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Y.comparator(n.documentKey,e.documentKey),t!==0?t:ve(n.largestBatchId,e.largestBatchId))}var R5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",XI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ic(n){return v(this,null,function*(){if(n.code!==F.FAILED_PRECONDITION||n.message!==R5)throw n;H("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function M5(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function oc(n){return n.name==="IndexedDbTransactionError"}var Pw=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),xw=-1;function Eg(n){return n==null}function Dl(n){return n===0&&1/n==-1/0}function P5(n){return typeof n=="number"&&Number.isInteger(n)&&!Dl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Zx="";function x5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=cx(e)),e=N5(n.get(t),e);return cx(e)}function N5(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case Zx:t+="";break;default:t+=o}}return t}function cx(n){return n+Zx+""}var O5="remoteDocuments",Xx="owner";var eN="mutationQueues";var tN="mutations";var nN="documentMutations",k5="remoteDocumentsV14";var rN="remoteDocumentGlobal";var iN="targets";var oN="targetDocuments";var sN="targetGlobal",aN="collectionParents";var cN="clientMetadata";var uN="bundles";var lN="namedQueries";var F5="indexConfiguration";var L5="indexState";var V5="indexEntries";var dN="documentOverlays";var U5="globals";var j5=[eN,tN,nN,O5,iN,Xx,sN,oN,cN,rN,aN,uN,lN],pfe=[...j5,dN],B5=[eN,tN,nN,k5,iN,Xx,sN,oN,cN,rN,aN,uN,lN,dN],$5=B5,H5=[...$5,F5,L5,V5];var gfe=[...H5,U5];function ux(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function to(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ye=class n{constructor(e,t){this.comparator=e,this.root=t||gr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ba(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ba(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ba(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ba(this.root,e,this.comparator,!0)}},Ba=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},gr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}};gr.EMPTY=null,gr.RED=!0,gr.BLACK=!1;gr.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new gr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var _t=class n{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $p(this.data.getIterator())}getIteratorFrom(e){return new $p(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},$p=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var xn=class n{constructor(e){this.fields=e,e.sort(_n.comparator)}static empty(){return new n([])}unionWith(e){let t=new _t(_n.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qa(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Hp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var jt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Hp("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};jt.EMPTY_BYTE_STRING=new jt("");var z5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oi(n){if(Pe(!!n,39018),typeof n=="string"){let e=0,t=z5.exec(n);if(Pe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$e(n.seconds),nanos:$e(n.nanos)}}function $e(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function si(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}var fN="server_timestamp",pN="__type__",gN="__previous_value__",mN="__local_write_time__";function Nw(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[pN])===null||t===void 0?void 0:t.stringValue)===fN}function Ig(n){let e=n.mapValue.fields[gN];return Nw(e)?Ig(e):e}function Sl(n){let e=oi(n.mapValue.fields[mN].timestampValue);return new Ue(e.seconds,e.nanos)}var e0=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},zp="(default)",qp=class n{constructor(e,t){this.projectId=e,this.database=t||zp}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===zp}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Ow="__type__",vN="__max__",Np={mapValue:{fields:{__type__:{stringValue:vN}}}},kw="__vector__",Ga="value";function Qi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Nw(n)?4:_N(n)?9007199254740991:yN(n)?10:11:Q(28295,{value:n})}function yr(n,e){if(n===e)return!0;let t=Qi(n);if(t!==Qi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sl(n).isEqual(Sl(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=oi(i.timestampValue),a=oi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return si(i.bytesValue).isEqual(si(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return $e(i.geoPointValue.latitude)===$e(o.geoPointValue.latitude)&&$e(i.geoPointValue.longitude)===$e(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return $e(i.integerValue)===$e(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=$e(i.doubleValue),a=$e(o.doubleValue);return s===a?Dl(s)===Dl(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return qa(n.arrayValue.values||[],e.arrayValue.values||[],yr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(ux(s)!==ux(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!yr(s[u],a[u])))return!1;return!0})(n,e);default:return Q(52216,{left:n})}}function Al(n,e){return(n.values||[]).find(t=>yr(t,e))!==void 0}function Wa(n,e){if(n===e)return 0;let t=Qi(n),r=Qi(e);if(t!==r)return ve(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ve(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=$e(o.integerValue||o.doubleValue),u=$e(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(n,e);case 3:return lx(n.timestampValue,e.timestampValue);case 4:return lx(Sl(n),Sl(e));case 5:return JI(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=si(o),u=si(s);return a.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ve(a[l],u[l]);if(h!==0)return h}return ve(a.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ve($e(o.latitude),$e(s.latitude));return a!==0?a:ve($e(o.longitude),$e(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return dx(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[Ga])===null||a===void 0?void 0:a.arrayValue,M=(u=g[Ga])===null||u===void 0?void 0:u.arrayValue,k=ve(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=M?.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:dx(y,M)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Np.mapValue&&s===Np.mapValue)return 0;if(o===Np.mapValue)return 1;if(s===Np.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=JI(u[p],h[p]);if(g!==0)return g;let y=Wa(a[u[p]],l[h[p]]);if(y!==0)return y}return ve(u.length,h.length)})(n.mapValue,e.mapValue);default:throw Q(23264,{le:t})}}function lx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ve(n,e);let t=oi(n),r=oi(e),i=ve(t.seconds,r.seconds);return i!==0?i:ve(t.nanos,r.nanos)}function dx(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Wa(t[i],r[i]);if(o)return o}return ve(t.length,r.length)}function Ka(n){return t0(n)}function t0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=oi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return si(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Y.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=t0(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${t0(t.fields[s])}`;return i+"}"})(n.mapValue):Q(61005,{value:n})}function Fp(n){switch(Qi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Ig(n);return e?16+Fp(e):16;case 5:return 2*n.stringValue.length;case 6:return si(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Fp(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return to(r.fields,(o,s)=>{i+=o.length+Fp(s)}),i})(n.mapValue);default:throw Q(13486,{value:n})}}function hx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function n0(n){return!!n&&"integerValue"in n}function Fw(n){return!!n&&"arrayValue"in n}function fx(n){return!!n&&"nullValue"in n}function px(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Lp(n){return!!n&&"mapValue"in n}function yN(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ow])===null||t===void 0?void 0:t.stringValue)===kw}function El(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return to(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=El(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=El(n.arrayValue.values[t]);return e}return Object.assign({},n)}function _N(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===vN}var vfe={mapValue:{fields:{[Ow]:{stringValue:kw},[Ga]:{arrayValue:{}}}}};var yn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Lp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=El(t)}setAll(e){let t=_n.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=El(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Lp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Lp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){to(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(El(this.value))}};function EN(n){let e=[];return to(n.fields,(t,r)=>{let i=new _n([t]);if(Lp(r)){let o=EN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new xn(e)}var Qn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,le.min(),le.min(),le.min(),yn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,le.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,le.min(),le.min(),yn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,le.min(),le.min(),yn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ya=class{constructor(e,t){this.position=e,this.inclusive=t}};function gx(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Y.comparator(Y.fromName(s.referenceValue),t.key):r=Wa(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function mx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!yr(n.position[t],e.position[t]))return!1;return!0}var ls=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function q5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Gp=class{},ot=class n extends Gp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new i0(e,t,r):t==="array-contains"?new a0(e,r):t==="in"?new c0(e,r):t==="not-in"?new u0(e,r):t==="array-contains-any"?new l0(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new o0(e,r):new s0(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Wa(t,this.value)):t!==null&&Qi(this.value)===Qi(t)&&this.matchesComparison(Wa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Jn=class n extends Gp{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return IN(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function IN(n){return n.op==="and"}function wN(n){return G5(n)&&IN(n)}function G5(n){for(let e of n.filters)if(e instanceof Jn)return!1;return!0}function r0(n){if(n instanceof ot)return n.field.canonicalString()+n.op.toString()+Ka(n.value);if(wN(n))return n.filters.map(e=>r0(e)).join(",");{let e=n.filters.map(t=>r0(t)).join(",");return`${n.op}(${e})`}}function bN(n,e){return n instanceof ot?(function(r,i){return i instanceof ot&&r.op===i.op&&r.field.isEqual(i.field)&&yr(r.value,i.value)})(n,e):n instanceof Jn?(function(r,i){return i instanceof Jn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&bN(s,i.filters[a]),!0):!1})(n,e):void Q(19439)}function CN(n){return n instanceof ot?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ka(t.value)}`})(n):n instanceof Jn?(function(t){return t.op.toString()+" {"+t.getFilters().map(CN).join(" ,")+"}"})(n):"Filter"}var i0=class extends ot{constructor(e,t,r){super(e,t,r),this.key=Y.fromName(r.referenceValue)}matches(e){let t=Y.comparator(e.key,this.key);return this.matchesComparison(t)}},o0=class extends ot{constructor(e,t){super(e,"in",t),this.keys=TN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},s0=class extends ot{constructor(e,t){super(e,"not-in",t),this.keys=TN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function TN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Y.fromName(r.referenceValue))}var a0=class extends ot{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Fw(t)&&Al(t.arrayValue,this.value)}},c0=class extends ot{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Al(this.value.arrayValue,t)}},u0=class extends ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(Al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Al(this.value.arrayValue,t)}},l0=class extends ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Fw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Al(this.value.arrayValue,r))}};var d0=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function vx(n,e=null,t=[],r=[],i=null,o=null,s=null){return new d0(n,e,t,r,i,o,s)}function Lw(n){let e=ae(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>r0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Eg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ka(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ka(r)).join(",")),e.Pe=t}return e.Pe}function Vw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!q5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!bN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!mx(n.startAt,e.startAt)&&mx(n.endAt,e.endAt)}function h0(n){return Y.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ji=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function W5(n,e,t,r,i,o,s,a){return new Ji(n,e,t,r,i,o,s,a)}function Uw(n){return new Ji(n)}function yx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function DN(n){return n.collectionGroup!==null}function Il(n){let e=ae(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new _t(_n.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new ls(o,r))}),t.has(_n.keyField().canonicalString())||e.Te.push(new ls(_n.keyField(),r))}return e.Te}function mr(n){let e=ae(n);return e.Ie||(e.Ie=K5(e,Il(n))),e.Ie}function K5(n,e){if(n.limitType==="F")return vx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ls(i.field,o)});let t=n.endAt?new Ya(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ya(n.startAt.position,n.startAt.inclusive):null;return vx(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function f0(n,e){let t=n.filters.concat([e]);return new Ji(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function p0(n,e,t){return new Ji(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wg(n,e){return Vw(mr(n),mr(e))&&n.limitType===e.limitType}function SN(n){return`${Lw(mr(n))}|lt:${n.limitType}`}function Va(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>CN(i)).join(", ")}]`),Eg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ka(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ka(i)).join(",")),`Target(${r})`})(mr(n))}; limitType=${n.limitType})`}function bg(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Y.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Il(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=gx(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,Il(r),i)||r.endAt&&!(function(s,a,u){let l=gx(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,Il(r),i))})(n,e)}function Y5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function AN(n){return(e,t)=>{let r=!1;for(let i of Il(n)){let o=Q5(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Q5(n,e,t){let r=n.field.isKeyField()?Y.comparator(e.key,t.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Wa(u,l):Q(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Q(19790,{direction:n.dir})}}var ai=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){to(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return hN(this.inner)}size(){return this.innerSize}};var J5=new Ye(Y.comparator);function ci(){return J5}var RN=new Ye(Y.comparator);function _l(...n){let e=RN;for(let t of n)e=e.insert(t.key,t);return e}function MN(n){let e=RN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function is(){return wl()}function PN(){return wl()}function wl(){return new ai(n=>n.toString(),(n,e)=>n.isEqual(e))}var Z5=new Ye(Y.comparator),X5=new _t(Y.comparator);function Ee(...n){let e=X5;for(let t of n)e=e.add(t);return e}var ez=new _t(ve);function tz(){return ez}function jw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dl(e)?"-0":e}}function xN(n){return{integerValue:""+n}}function nz(n,e){return P5(e)?xN(e):jw(n,e)}var Qa=class{constructor(){this._=void 0}};function rz(n,e,t){return n instanceof Ja?(function(i,o){let s={fields:{[pN]:{stringValue:fN},[mN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Nw(o)&&(o=Ig(o)),o&&(s.fields[gN]=o),{mapValue:s}})(t,e):n instanceof ds?ON(n,e):n instanceof hs?kN(n,e):(function(i,o){let s=NN(i,o),a=_x(s)+_x(i.Ee);return n0(s)&&n0(i.Ee)?xN(a):jw(i.serializer,a)})(n,e)}function iz(n,e,t){return n instanceof ds?ON(n,e):n instanceof hs?kN(n,e):t}function NN(n,e){return n instanceof Za?(function(r){return n0(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Ja=class extends Qa{},ds=class extends Qa{constructor(e){super(),this.elements=e}};function ON(n,e){let t=FN(e);for(let r of n.elements)t.some(i=>yr(i,r))||t.push(r);return{arrayValue:{values:t}}}var hs=class extends Qa{constructor(e){super(),this.elements=e}};function kN(n,e){let t=FN(e);for(let r of n.elements)t=t.filter(i=>!yr(i,r));return{arrayValue:{values:t}}}var Za=class extends Qa{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function _x(n){return $e(n.integerValue||n.doubleValue)}function FN(n){return Fw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function oz(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof ds&&i instanceof ds||r instanceof hs&&i instanceof hs?qa(r.elements,i.elements,yr):r instanceof Za&&i instanceof Za?yr(r.Ee,i.Ee):r instanceof Ja&&i instanceof Ja})(n.transform,e.transform)}var g0=class{constructor(e,t){this.version=e,this.transformResults=t}},ri=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Vp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Xa=class{};function LN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Rl(n.key,ri.none()):new fs(n.key,n.data,ri.none());{let t=n.data,r=yn.empty(),i=new _t(_n.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new _r(n.key,r,new xn(i.toArray()),ri.none())}}function sz(n,e,t){n instanceof fs?(function(i,o,s){let a=i.value.clone(),u=Ix(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof _r?(function(i,o,s){if(!Vp(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=Ix(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(VN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function bl(n,e,t,r){return n instanceof fs?(function(o,s,a,u){if(!Vp(o.precondition,s))return a;let l=o.value.clone(),h=wx(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof _r?(function(o,s,a,u){if(!Vp(o.precondition,s))return a;let l=wx(o.fieldTransforms,u,s),h=s.data;return h.setAll(VN(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return Vp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function az(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=NN(r.transform,i||null);o!=null&&(t===null&&(t=yn.empty()),t.set(r.field,o))}return t||null}function Ex(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qa(r,i,(o,s)=>oz(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var fs=class extends Xa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},_r=class extends Xa{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function VN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Ix(n,e,t){let r=new Map;Pe(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,iz(s,a,t[i]))}return r}function wx(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,rz(o,s,e))}return r}var Rl=class extends Xa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},m0=class extends Xa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var v0=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&sz(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=bl(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=bl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=PN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=LN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ee())}isEqual(e){return this.batchId===e.batchId&&qa(this.mutations,e.mutations,(t,r)=>Ex(t,r))&&qa(this.baseMutations,e.baseMutations,(t,r)=>Ex(t,r))}},y0=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pe(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return Z5})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var _0=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var E0=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var rt,Ce;function cz(n){switch(n){case F.OK:return Q(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return Q(15467,{code:n})}}function UN(n){if(n===void 0)return ii("GRPC error has no .code"),F.UNKNOWN;switch(n){case rt.OK:return F.OK;case rt.CANCELLED:return F.CANCELLED;case rt.UNKNOWN:return F.UNKNOWN;case rt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case rt.INTERNAL:return F.INTERNAL;case rt.UNAVAILABLE:return F.UNAVAILABLE;case rt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case rt.NOT_FOUND:return F.NOT_FOUND;case rt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case rt.ABORTED:return F.ABORTED;case rt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case rt.DATA_LOSS:return F.DATA_LOSS;default:return Q(39323,{code:n})}}(Ce=rt||(rt={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";var bx=null;var uz=new ei([4294967295,4294967295],0);function Cx(n){let e=Yx().encode(n),t=new kI;return t.update(e),new Uint8Array(t.digest())}function Tx(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ei([t,r],0),new ei([i,o],0)]}var I0=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new os(`Invalid padding: ${t}`);if(r<0)throw new os(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new os(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new os(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ei.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(ei.fromNumber(r)));return i.compare(uz)===1&&(i=new ei([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=Cx(e),[r,i]=Tx(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=Cx(e),[r,i]=Tx(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},os=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Wp=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Ml.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(le.min(),i,new Ye(ve),ci(),Ee())}},Ml=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ee(),Ee(),Ee())}};var $a=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Kp=class{constructor(e,t){this.targetId=e,this.De=t}},Yp=class{constructor(e,t,r=jt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Qp=class{constructor(){this.ve=0,this.Ce=Dx(),this.Fe=jt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ee(),t=Ee(),r=Ee();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Q(38017,{changeType:o})}}),new Ml(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=Dx()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Pe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},w0=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=ci(),this.je=Op(),this.Je=Op(),this.He=new Ye(ve)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Q(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(h0(o))if(r===0){let s=new Y(o.path);this.Xe(t,s,Qn.newNoDocument(s,le.min()))}else Pe(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}bx?.ct((function(h,p,g,y,M){var k,O,B,Z,ie,Fe;let Bt={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},xe=p.unchangedNames;return xe&&(Bt.bloomFilter={applied:M===0,hashCount:(k=xe?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(Z=(B=(O=xe?.bits)===null||O===void 0?void 0:O.bitmap)===null||B===void 0?void 0:B.length)!==null&&Z!==void 0?Z:0,padding:(Fe=(ie=xe?.bits)===null||ie===void 0?void 0:ie.padding)!==null&&Fe!==void 0?Fe:0,mightContain:S=>{var E;return(E=y?.mightContain(S))!==null&&E!==void 0&&E}}),Bt})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=si(r).toUint8Array()}catch(u){if(u instanceof Hp)return Yi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new I0(s,i,o)}catch(u){return Yi(u instanceof os?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&h0(a.target)){let u=new Y(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,Qn.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=Ee();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Wp(e,t,this.He,this.ze,r);return this.ze=ci(),this.je=Op(),this.Je=Op(),this.He=new Ye(ve),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Qp,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new _t(ve),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new _t(ve),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||H("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Qp),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Op(){return new Ye(Y.comparator)}function Dx(){return new Ye(Y.comparator)}var lz={asc:"ASCENDING",desc:"DESCENDING"},dz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hz={and:"AND",or:"OR"},b0=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function C0(n,e){return n.useProto3Json||Eg(e)?e:{value:e}}function Jp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function fz(n,e){return Jp(n,e.toTimestamp())}function vr(n){return Pe(!!n,49232),le.fromTimestamp((function(t){let r=oi(t);return new Ue(r.seconds,r.nanos)})(n))}function Bw(n,e){return T0(n,e).canonicalString()}function T0(n,e){let t=(function(i){return new He(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function BN(n){let e=He.fromString(n);return Pe(GN(e),10190,{key:e.toString()}),e}function D0(n,e){return Bw(n.databaseId,e.path)}function BI(n,e){let t=BN(e);if(t.get(1)!==n.databaseId.projectId)throw new $(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Y(HN(t))}function $N(n,e){return Bw(n.databaseId,e)}function pz(n){let e=BN(n);return e.length===4?He.emptyPath():HN(e)}function S0(n){return new He(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function HN(n){return Pe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Sx(n,e,t){return{name:D0(n,e),fields:t.value.mapValue.fields}}function gz(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Q(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(Pe(h===void 0||typeof h=="string",58123),jt.fromBase64String(h||"")):(Pe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),jt.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?F.UNKNOWN:UN(l.code);return new $(h,l.message||"")})(s);t=new Yp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=BI(n,r.document.name),o=vr(r.document.updateTime),s=r.document.createTime?vr(r.document.createTime):le.min(),a=new yn({mapValue:{fields:r.document.fields}}),u=Qn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new $a(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=BI(n,r.document),o=r.readTime?vr(r.readTime):le.min(),s=Qn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new $a([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=BI(n,r.document),o=r.removedTargetIds||[];t=new $a([],o,i,null)}else{if(!("filter"in e))return Q(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new E0(i,o),a=r.targetId;t=new Kp(a,s)}}return t}function mz(n,e){let t;if(e instanceof fs)t={update:Sx(n,e.key,e.value)};else if(e instanceof Rl)t={delete:D0(n,e.key)};else if(e instanceof _r)t={update:Sx(n,e.key,e.data),updateMask:Tz(e.fieldMask)};else{if(!(e instanceof m0))return Q(16599,{Rt:e.type});t={verify:D0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Ja)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ds)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof hs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Za)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw Q(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:fz(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Q(27497)})(n,e.precondition)),t}function vz(n,e){return n&&n.length>0?(Pe(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?vr(i.updateTime):vr(o);return s.isEqual(le.min())&&(s=vr(o)),new g0(s,i.transformResults||[])})(t,e))):[]}function yz(n,e){return{documents:[$N(n,e.path)]}}function _z(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=$N(n,i);let o=(function(l){if(l.length!==0)return qN(Jn.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(g){return{field:Ua(g.field),direction:wz(g.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=C0(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function Ez(n){let e=pz(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Pe(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(p){let g=zN(p);return g instanceof Jn&&wN(g)?g.getFilters():[g]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(g=>(function(M){return new ls(ja(M.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(g))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,Eg(g)?null:g})(t.limit));let u=null;t.startAt&&(u=(function(p){let g=!!p.before,y=p.values||[];return new Ya(y,g)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let g=!p.before,y=p.values||[];return new Ya(y,g)})(t.endAt)),W5(e,i,s,o,a,"F",u,l)}function Iz(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function zN(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ja(t.unaryFilter.field);return ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ja(t.unaryFilter.field);return ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ja(t.unaryFilter.field);return ot.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ja(t.unaryFilter.field);return ot.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}})(n):n.fieldFilter!==void 0?(function(t){return ot.create(ja(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Jn.create(t.compositeFilter.filters.map(r=>zN(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q(1026)}})(t.compositeFilter.op))})(n):Q(30097,{filter:n})}function wz(n){return lz[n]}function bz(n){return dz[n]}function Cz(n){return hz[n]}function Ua(n){return{fieldPath:n.canonicalString()}}function ja(n){return _n.fromServerFormat(n.fieldPath)}function qN(n){return n instanceof ot?(function(t){if(t.op==="=="){if(px(t.value))return{unaryFilter:{field:Ua(t.field),op:"IS_NAN"}};if(fx(t.value))return{unaryFilter:{field:Ua(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(px(t.value))return{unaryFilter:{field:Ua(t.field),op:"IS_NOT_NAN"}};if(fx(t.value))return{unaryFilter:{field:Ua(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ua(t.field),op:bz(t.op),value:t.value}}})(n):n instanceof Jn?(function(t){let r=t.getFilters().map(i=>qN(i));return r.length===1?r[0]:{compositeFilter:{op:Cz(t.op),filters:r}}})(n):Q(54877,{filter:n})}function Tz(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function GN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Pl=class n{constructor(e,t,r,i,o=le.min(),s=le.min(),a=jt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var A0=class{constructor(e){this.gt=e}};function Dz(n){let e=Ez({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?p0(e,e.limit,"L"):e}var Zp=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft($e(e.integerValue));else if("doubleValue"in e){let r=$e(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Dl(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=oi(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(si(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?_N(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):yN(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Q(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Ga,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft($e(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),Y.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Zp.Ut=new Zp;var R0=class{constructor(){this.Dn=new M0}addToCollectionParentIndex(e,t){return this.Dn.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(us.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(us.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}},M0=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _t(He.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _t(He.comparator)).toArray()}};var yfe=new Uint8Array(0);var Ax={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WN=41943040,Pn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(WN,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);var xl=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var Rx="LruGarbageCollector",Sz=1048576;function Mx([n,e],[t,r]){let i=ve(n,t);return i===0?ve(e,r):i}var P0=class{constructor(e){this.Tr=e,this.buffer=new _t(Mx),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Mx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},x0=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){H(Rx,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>v(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){oc(t)?H(Rx,"Ignoring IndexedDB error during garbage collection: ",t):yield ic(t)}yield this.Rr(3e5)}))}},N0=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return V.resolve(Pw.ue);let r=new P0(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(Ax)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ax):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),La()<=ye.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Az(n,e){return new N0(n,e)}var O0=class{constructor(){this.changes=new ai(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var k0=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var F0=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&bl(r.mutation,i,xn.empty(),Ue.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ee()){let i=is();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=_l();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=is();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ee()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=ci(),s=wl(),a=(function(){return wl()})();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof _r)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),bl(h.mutation,l,h.mutation.getFieldMask(),Ue.now())):s.set(l.key,xn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new k0(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=wl(),i=new Ye((s,a)=>s-a),o=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||xn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||Ee()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=PN();h.forEach(g=>{if(!o.has(g)){let y=LN(t.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return Y.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):DN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):V.resolve(is()),a=Tl,u=o;return s.next(l=>V.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?V.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,Ee())).next(h=>({batchId:a,changes:MN(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Y(t)).next(r=>{let i=_l();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=_l();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,u=>{let l=(function(p,g){return new Ji(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Qn.newInvalidDocument(h)))});let a=_l();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&bl(h.mutation,l,xn.empty(),Ue.now()),bg(t,l)&&(a=a.insert(u,l))}),a})}};var L0=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return V.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:vr(i.createTime)}})(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:Dz(i.bundledQuery),readTime:vr(i.readTime)}})(t)),V.resolve()}};var V0=class{constructor(){this.overlays=new Ye(Y.comparator),this.kr=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){let r=is();return V.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),V.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){let i=is(),o=t.length+1,s=new Y(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return V.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ye((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=is(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=is(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return V.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new _0(t,r));let o=this.kr.get(t);o===void 0&&(o=Ee(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var U0=class{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}};var Nl=class{constructor(){this.qr=new _t(it.Qr),this.$r=new _t(it.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new it(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new it(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new Y(new He([])),r=new it(t,e),i=new it(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new Y(new He([])),r=new it(t,e),i=new it(t,e+1),o=Ee();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new it(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},it=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Y.comparator(e.key,t.key)||ve(e.Hr,t.Hr)}static Ur(e,t){return ve(e.Hr,t.Hr)||Y.comparator(e.key,t.key)}};var j0=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new _t(it.Qr)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new v0(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new it(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,t){return V.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?xw:this.er-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new it(t,0),i=new it(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _t(ve);return t.forEach(i=>{let o=new it(i,0),s=new it(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),V.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;Y.isDocumentKey(o)||(o=o.child(""));let s=new it(new Y(o),0),a=new _t(ve);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),V.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Pe(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return V.forEach(t.mutations,i=>{let o=new it(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new it(t,0),i=this.Yr.firstAfterOrEqual(r);return V.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var B0=class{constructor(e){this.ni=e,this.docs=(function(){return new Ye(Y.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():Qn.newInvalidDocument(t))}getEntries(e,t){let r=ci();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Qn.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ci(),s=t.path,a=new Y(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||A5(S5(h),r)<=0||(i.has(h.key)||bg(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Q(9500)}ri(e,t){return V.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $0(this)}getSize(e){return V.resolve(this.size)}},$0=class extends O0{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),V.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var H0=class{constructor(e){this.persistence=e,this.ii=new ai(t=>Lw(t),Vw),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.si=0,this.oi=new Nl,this.targetCount=0,this._i=xl.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),V.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new xl(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.hr(t),V.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),V.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this.oi.containsKey(t))}};var Xp=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Pw(0),this.ci=!1,this.ci=!0,this.li=new U0,this.referenceDelegate=e(this),this.hi=new H0(this),this.indexManager=new R0,this.remoteDocumentCache=(function(i){return new B0(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new A0(t),this.Ti=new L0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new V0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new j0(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){H("MemoryPersistence","Starting transaction:",e);let i=new z0(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return V.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},z0=class extends XI{constructor(e){super(),this.currentSequenceNumber=e}},q0=class n{constructor(e){this.persistence=e,this.Ai=new Nl,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw Q(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),V.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.mi,r=>{let i=Y.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,le.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return V.or([()=>V.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},eg=class n{constructor(e,t){this.persistence=e,this.gi=new ai(r=>x5(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Az(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return V.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return V.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?V.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,le.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),V.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),V.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fp(e.data.value)),t}Sr(e,t,r){return V.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return V.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var G0=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Ee(),i=Ee();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var W0=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var K0=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return OR()?8:M5(vt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new W0;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(La()<=ye.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Va(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),V.resolve()):(La()<=ye.DEBUG&&H("QueryEngine","Query:",Va(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(La()<=ye.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Va(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mr(t))):V.resolve())}ps(e,t){if(yx(t))return V.resolve(null);let r=mr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=p0(t,null,"F"),r=mr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ee(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,a);return this.Ds(t,l,s,u.readTime)?this.ps(e,p0(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return yx(t)||i.isEqual(le.min())?V.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?V.resolve(null):(La()<=ye.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Va(t)),this.vs(e,s,t,D5(i,Tl)).next(a=>a))})}bs(e,t){let r=new _t(AN(e));return t.forEach((i,o)=>{bg(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return La()<=ye.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Va(t)),this.gs.getDocumentsMatchingQuery(e,t,us.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var $w="LocalStore",Rz=3e8,Y0=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Ye(ve),this.Ms=new ai(o=>Lw(o),Vw),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new F0(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function Mz(n,e,t,r){return new Y0(n,e,t,r)}function KN(n,e){return v(this,null,function*(){let t=ae(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=Ee();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function Pz(n,e){let t=ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,g=p.keys(),y=V.resolve();return g.forEach(M=>{y=y.next(()=>h.getEntry(u,M)).next(k=>{let O=l.docVersions.get(M);Pe(O!==null,48541),k.version.compareTo(O)<0&&(p.applyToRemoteDocument(k,l),k.isValidDocument()&&(k.setReadTime(l.commitVersion),h.addEntry(k)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=Ee();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function YN(n){let e=ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function xz(n,e){let t=ae(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(jt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(k,O,B){return k.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=Rz?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(g,y,h)&&a.push(t.hi.updateTargetData(o,y))});let u=ci(),l=Ee();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Nz(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(le.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function Nz(n,e,t){let r=Ee(),i=Ee();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=ci();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(le.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):H($w,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function Oz(n,e){let t=ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=xw),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function kz(n,e){let t=ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Pl(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function Q0(n,e,t){return v(this,null,function*(){let r=ae(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!oc(s))throw s;H($w,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function Px(n,e,t){let r=ae(n),i=le.min(),o=Ee();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=ae(u),g=p.Ms.get(h);return g!==void 0?V.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)})(r,s,mr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:le.min(),t?o:Ee())).next(a=>(Fz(r,Y5(e),a),{documents:a,qs:o})))}function Fz(n,e,t){let r=n.xs.get(e)||le.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var tg=class{constructor(){this.activeTargetIds=tz()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var J0=class{constructor(){this.Fo=new tg,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new tg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Z0=class{xo(e){}shutdown(){}};var xx="ConnectivityMonitor",ng=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){H(xx,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){H(xx,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var kp=null;function X0(){return kp===null?kp=(function(){return 268435456+Math.round(2147483648*Math.random())})():kp++,"0x"+kp.toString(16)}var $I="RestConnection",Lz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},ew=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===zp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=X0(),a=this.Go(e,t.toUriEncodedString());H($I,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=Ni(l);return this.jo(e,a,u,r,h).then(p=>(H($I,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Yi($I,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+rc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=Lz[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var tw=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Ut="WebChannelConnection",nw=class extends ew{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=X0();return new Promise((a,u)=>{let l=new FI;l.setWithCredentials(!0),l.listenOnce(LI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case yl.NO_ERROR:let p=l.getResponseJson();H(Ut,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case yl.TIMEOUT:H(Ut,`RPC '${e}' ${s} timed out`),u(new $(F.DEADLINE_EXCEEDED,"Request time out"));break;case yl.HTTP_ERROR:let g=l.getStatus();if(H(Ut,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let M=y?.error;if(M&&M.status&&M.message){let k=(function(B){let Z=B.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(Z)>=0?Z:F.UNKNOWN})(M.status);u(new $(k,M.message))}else u(new $(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new $(F.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{H(Ut,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);H(Ut,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=X0(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=jI(),a=UI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");H(Ut,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let g=!1,y=!1,M=new tw({Ho:O=>{y?H(Ut,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(g||(H(Ut,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),H(Ut,`RPC '${e}' stream ${i} sending:`,O),p.send(O))},Yo:()=>p.close()}),k=(O,B,Z)=>{O.listen(B,ie=>{try{Z(ie)}catch(Fe){setTimeout(()=>{throw Fe},0)}})};return k(p,Fa.EventType.OPEN,()=>{y||(H(Ut,`RPC '${e}' stream ${i} transport opened.`),M.s_())}),k(p,Fa.EventType.CLOSE,()=>{y||(y=!0,H(Ut,`RPC '${e}' stream ${i} transport closed`),M.__(),this.I_(p))}),k(p,Fa.EventType.ERROR,O=>{y||(y=!0,Yi(Ut,`RPC '${e}' stream ${i} transport errored. Name:`,O.name,"Message:",O.message),M.__(new $(F.UNAVAILABLE,"The operation could not be completed")))}),k(p,Fa.EventType.MESSAGE,O=>{var B;if(!y){let Z=O.data[0];Pe(!!Z,16349);let ie=Z,Fe=ie?.error||((B=ie[0])===null||B===void 0?void 0:B.error);if(Fe){H(Ut,`RPC '${e}' stream ${i} received error:`,Fe);let Bt=Fe.status,xe=(function(b){let T=rt[b];if(T!==void 0)return UN(T)})(Bt),S=Fe.message;xe===void 0&&(xe=F.INTERNAL,S="Unknown error status: "+Bt+" with message "+Fe.message),y=!0,M.__(new $(xe,S)),p.close()}else H(Ut,`RPC '${e}' stream ${i} received:`,Z),M.a_(Z)}}),k(a,VI.STAT_EVENT,O=>{O.stat===xp.PROXY?H(Ut,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===xp.NOPROXY&&H(Ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.o_()},0),M}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function HI(){return typeof document<"u"?document:null}function Cg(n){return new b0(n,!0)}var rg=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var Nx="PersistentStream",ig=class{constructor(e,t,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new rg(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return v(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return v(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return v(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(ii(t.toString()),ii("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new $(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>v(this,null,function*(){this.state=0,this.start()}))}G_(e){return H(Nx,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(H(Nx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},rw=class extends ig{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=gz(this.serializer,e),r=(function(o){if(!("targetChange"in o))return le.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?le.min():s.readTime?vr(s.readTime):le.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=S0(this.serializer),t.addTarget=(function(o,s){let a,u=s.target;if(a=h0(u)?{documents:yz(o,u)}:{query:_z(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=jN(o,s.resumeToken);let l=C0(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(le.min())>0){a.readTime=Jp(o,s.snapshotVersion.toTimestamp());let l=C0(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=Iz(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=S0(this.serializer),t.removeTarget=e,this.k_(t)}},iw=class extends ig{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=vz(e.writeResults,e.commitTime),r=vr(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=S0(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>mz(this.serializer,r))};this.k_(t)}};var ow=class{},sw=class extends ow{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new $(F.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,T0(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(F.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,T0(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(F.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},aw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ii(t),this._a=!1):H("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var ps="RemoteStore",cw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>v(this,null,function*(){ms(this)&&(H(ps,"Restarting streams for network reachability change."),yield(function(u){return v(this,null,function*(){let l=ae(u);l.Ia.add(4),yield Ll(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield Tg(l)})})(this))}))}),this.Aa=new aw(r,i)}};function Tg(n){return v(this,null,function*(){if(ms(n))for(let e of n.da)yield e(!0)})}function Ll(n){return v(this,null,function*(){for(let e of n.da)yield e(!1)})}function QN(n,e){let t=ae(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Gw(t)?qw(t):sc(t).x_()&&zw(t,e))}function Hw(n,e){let t=ae(n),r=sc(t);t.Ta.delete(e),r.x_()&&JN(t,e),t.Ta.size===0&&(r.x_()?r.B_():ms(t)&&t.Aa.set("Unknown"))}function zw(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}sc(n).H_(e)}function JN(n,e){n.Ra.$e(e),sc(n).Y_(e)}function qw(n){n.Ra=new w0({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),sc(n).start(),n.Aa.aa()}function Gw(n){return ms(n)&&!sc(n).M_()&&n.Ta.size>0}function ms(n){return ae(n).Ia.size===0}function ZN(n){n.Ra=void 0}function Vz(n){return v(this,null,function*(){n.Aa.set("Online")})}function Uz(n){return v(this,null,function*(){n.Ta.forEach((e,t)=>{zw(n,e)})})}function jz(n,e){return v(this,null,function*(){ZN(n),Gw(n)?(n.Aa.la(e),qw(n)):n.Aa.set("Unknown")})}function Bz(n,e,t){return v(this,null,function*(){if(n.Aa.set("Online"),e instanceof Yp&&e.state===2&&e.cause)try{yield(function(i,o){return v(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(n,e)}catch(r){H(ps,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield og(n,r)}else if(e instanceof $a?n.Ra.Ye(e):e instanceof Kp?n.Ra.it(e):n.Ra.et(e),!t.isEqual(le.min()))try{let r=yield YN(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(jt.EMPTY_BYTE_STRING,h.snapshotVersion)),JN(o,u);let p=new Pl(h.target,u,l,h.sequenceNumber);zw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){H(ps,"Failed to raise snapshot:",r),yield og(n,r)}})}function og(n,e,t){return v(this,null,function*(){if(!oc(e))throw e;n.Ia.add(1),yield Ll(n),n.Aa.set("Offline"),t||(t=()=>YN(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(null,null,function*(){H(ps,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield Tg(n)}))})}function XN(n,e){return e().catch(t=>og(n,t,e))}function Dg(n){return v(this,null,function*(){let e=ae(n),t=Zi(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:xw;for(;$z(e);)try{let i=yield Oz(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,Hz(e,i)}catch(i){yield og(e,i)}e1(e)&&t1(e)})}function $z(n){return ms(n)&&n.Pa.length<10}function Hz(n,e){n.Pa.push(e);let t=Zi(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function e1(n){return ms(n)&&!Zi(n).M_()&&n.Pa.length>0}function t1(n){Zi(n).start()}function zz(n){return v(this,null,function*(){Zi(n).na()})}function qz(n){return v(this,null,function*(){let e=Zi(n);for(let t of n.Pa)e.X_(t.mutations)})}function Gz(n,e,t){return v(this,null,function*(){let r=n.Pa.shift(),i=y0.from(r,e,t);yield XN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Dg(n)})}function Wz(n,e){return v(this,null,function*(){e&&Zi(n).Z_&&(yield(function(r,i){return v(this,null,function*(){if((function(s){return cz(s)&&s!==F.ABORTED})(i.code)){let o=r.Pa.shift();Zi(r).N_(),yield XN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Dg(r)}})})(n,e)),e1(n)&&t1(n)})}function Ox(n,e){return v(this,null,function*(){let t=ae(n);t.asyncQueue.verifyOperationInProgress(),H(ps,"RemoteStore received new credentials");let r=ms(t);t.Ia.add(3),yield Ll(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield Tg(t)})}function Kz(n,e){return v(this,null,function*(){let t=ae(n);e?(t.Ia.delete(2),yield Tg(t)):e||(t.Ia.add(2),yield Ll(t),t.Aa.set("Unknown"))})}function sc(n){return n.Va||(n.Va=(function(t,r,i){let o=ae(t);return o.ia(),new rw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:Vz.bind(null,n),e_:Uz.bind(null,n),n_:jz.bind(null,n),J_:Bz.bind(null,n)}),n.da.push(e=>v(null,null,function*(){e?(n.Va.N_(),Gw(n)?qw(n):n.Aa.set("Unknown")):(yield n.Va.stop(),ZN(n))}))),n.Va}function Zi(n){return n.ma||(n.ma=(function(t,r,i){let o=ae(t);return o.ia(),new iw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:zz.bind(null,n),n_:Wz.bind(null,n),ea:qz.bind(null,n),ta:Gz.bind(null,n)}),n.da.push(e=>v(null,null,function*(){e?(n.ma.N_(),yield Dg(n)):(yield n.ma.stop(),n.Pa.length>0&&(H(ps,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var uw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ww(n,e){if(ii("AsyncQueue",`${e}: ${n}`),oc(n))return new $(F.UNAVAILABLE,`${e}: ${n}`);throw n}var sg=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Y.comparator(t.key,r.key):(t,r)=>Y.comparator(t.key,r.key),this.keyedMap=_l(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var ag=class{constructor(){this.fa=new Ye(Y.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Q(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},ec=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,sg.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var lw=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},dw=class{constructor(){this.queries=kx(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ae(t),o=i.queries;i.queries=kx(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new $(F.ABORTED,"Firestore shutting down"))}};function kx(){return new ai(n=>SN(n),wg)}function Yz(n,e){return v(this,null,function*(){let t=ae(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new lw,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Ww(s,`Initialization of query '${Va(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&Kw(t)})}function Qz(n,e){return v(this,null,function*(){let t=ae(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Jz(n,e){let t=ae(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&Kw(t)}function Zz(n,e,t){let r=ae(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function Kw(n){n.Da.forEach(e=>{e.next()})}var hw,Fx;(Fx=hw||(hw={})).Fa="default",Fx.Cache="cache";var fw=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ec(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ec.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==hw.Cache}};var cg=class{constructor(e){this.key=e}},ug=class{constructor(e){this.key=e}},pw=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ee(),this.mutatedKeys=Ee(),this.Xa=AN(e),this.eu=new sg(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new ag,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=bg(this.query,p)?p:null,M=!!g&&this.mutatedKeys.has(g.key),k=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),O=!1;g&&y?g.data.isEqual(y.data)?M!==k&&(r.track({type:3,doc:y}),O=!0):this.iu(g,y)||(r.track({type:2,doc:y}),O=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),O=!0):g&&!y&&(r.track({type:1,doc:g}),O=!0,(u||l)&&(a=!0)),O&&(y?(s=s.add(y),o=k?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,M){let k=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{At:O})}};return k(y)-k(M)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new ec(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new ag,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Ee(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new ug(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new cg(r))}),t}uu(e){this.Ha=e.qs,this.Za=Ee();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ec.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Yw="SyncEngine",gw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},mw=class{constructor(e){this.key=e,this.lu=!1}},vw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new ai(a=>SN(a),wg),this.Tu=new Map,this.Iu=new Set,this.du=new Ye(Y.comparator),this.Eu=new Map,this.Au=new Nl,this.Ru={},this.Vu=new Map,this.mu=xl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function Xz(n,e,t=!0){return v(this,null,function*(){let r=a1(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield n1(r,e,t,!0),i})}function e8(n,e){return v(this,null,function*(){let t=a1(n);yield n1(t,e,!0,!1)})}function n1(n,e,t,r){return v(this,null,function*(){let i=yield kz(n.localStore,mr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield t8(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&QN(n.remoteStore,i),a})}function t8(n,e,t,r,i){return v(this,null,function*(){n.gu=(p,g,y)=>(function(k,O,B,Z){return v(this,null,function*(){let ie=O.view.nu(B);ie.Ds&&(ie=yield Px(k.localStore,O.query,!1).then(({documents:S})=>O.view.nu(S,ie)));let Fe=Z&&Z.targetChanges.get(O.targetId),Bt=Z&&Z.targetMismatches.get(O.targetId)!=null,xe=O.view.applyChanges(ie,k.isPrimaryClient,Fe,Bt);return Vx(k,O.targetId,xe._u),xe.snapshot})})(n,p,g,y);let o=yield Px(n.localStore,e,!0),s=new pw(e,o.qs),a=s.nu(o.documents),u=Ml.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);Vx(n,t,l._u);let h=new gw(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function n8(n,e,t){return v(this,null,function*(){let r=ae(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!wg(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Q0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Hw(r.remoteStore,i.targetId),yw(r,i.targetId)}).catch(ic))):(yw(r,i.targetId),yield Q0(r.localStore,i.targetId,!0))})}function r8(n,e){return v(this,null,function*(){let t=ae(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Hw(t.remoteStore,r.targetId))})}function i8(n,e,t){return v(this,null,function*(){let r=d8(n);try{let i=yield(function(s,a){let u=ae(s),l=Ue.now(),h=a.reduce((y,M)=>y.add(M.key),Ee()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let M=ci(),k=Ee();return u.Os.getEntries(y,h).next(O=>{M=O,M.forEach((B,Z)=>{Z.isValidDocument()||(k=k.add(B))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,M)).next(O=>{p=O;let B=[];for(let Z of a){let ie=az(Z,p.get(Z.key).overlayedDocument);ie!=null&&B.push(new _r(Z.key,ie,EN(ie.value.mapValue),ri.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,B,a)}).next(O=>{g=O;let B=O.applyToLocalDocumentSet(p,k);return u.documentOverlayCache.saveOverlays(y,O.batchId,B)})}).then(()=>({batchId:g.batchId,changes:MN(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Ye(ve)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),yield Vl(r,i.changes),yield Dg(r.remoteStore)}catch(i){let o=Ww(i,"Failed to persist write");t.reject(o)}})}function r1(n,e){return v(this,null,function*(){let t=ae(n);try{let r=yield xz(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Pe(s.lu,14607):i.removedDocuments.size>0&&(Pe(s.lu,42227),s.lu=!1))}),yield Vl(t,r,e)}catch(r){yield ic(r)}})}function Lx(n,e,t){let r=ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=ae(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&Kw(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function o8(n,e,t){return v(this,null,function*(){let r=ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Ye(Y.comparator);s=s.insert(o,Qn.newNoDocument(o,le.min()));let a=Ee().add(o),u=new Wp(le.min(),new Map,new Ye(ve),s,a);yield r1(r,u),r.du=r.du.remove(o),r.Eu.delete(e),Qw(r)}else yield Q0(r.localStore,e,!1).then(()=>yw(r,e,t)).catch(ic)})}function s8(n,e){return v(this,null,function*(){let t=ae(n),r=e.batch.batchId;try{let i=yield Pz(t.localStore,e);o1(t,r,null),i1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Vl(t,i)}catch(i){yield ic(i)}})}function a8(n,e,t){return v(this,null,function*(){let r=ae(n);try{let i=yield(function(s,a){let u=ae(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Pe(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);o1(r,e,t),i1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Vl(r,i)}catch(i){yield ic(i)}})}function i1(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function o1(n,e,t){let r=ae(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function yw(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||s1(n,r)})}function s1(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Hw(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Qw(n))}function Vx(n,e,t){for(let r of t)r instanceof cg?(n.Au.addReference(r.key,e),c8(n,r)):r instanceof ug?(H(Yw,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||s1(n,r.key)):Q(19791,{yu:r})}function c8(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(H(Yw,"New document in limbo: "+t),n.Iu.add(r),Qw(n))}function Qw(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new Y(He.fromString(e)),r=n.mu.next();n.Eu.set(r,new mw(t)),n.du=n.du.insert(t,r),QN(n.remoteStore,new Pl(mr(Uw(t.path)),r,"TargetPurposeLimboResolution",Pw.ue))}}function Vl(n,e,t){return v(this,null,function*(){let r=ae(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=G0.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return v(this,null,function*(){let h=ae(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>V.forEach(l,g=>V.forEach(g.Is,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>V.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!oc(p))throw p;H($w,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Fs.get(g),M=y.snapshotVersion,k=y.withLastLimboFreeSnapshotVersion(M);h.Fs=h.Fs.insert(g,k)}}})})(r.localStore,o))})}function u8(n,e){return v(this,null,function*(){let t=ae(n);if(!t.currentUser.isEqual(e)){H(Yw,"User change. New user:",e.toKey());let r=yield KN(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new $(F.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Vl(t,r.Bs)}})}function l8(n,e){let t=ae(n),r=t.Eu.get(e);if(r&&r.lu)return Ee().add(r.key);{let i=Ee(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function a1(n){let e=ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=r1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=l8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=o8.bind(null,e),e.hu.J_=Jz.bind(null,e.eventManager),e.hu.pu=Zz.bind(null,e.eventManager),e}function d8(n){let e=ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=a8.bind(null,e),e}var c1=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=Cg(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return Mz(this.persistence,new K0,t.initialUser,this.serializer)}Du(t){return new Xp(q0.Vi,this.serializer)}bu(t){return new J0}terminate(){return v(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),_w=class extends c1{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Pe(this.persistence.referenceDelegate instanceof eg,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new x0(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new Xp(r=>eg.Vi(r,t),this.serializer)}};var h8=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Lx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=u8.bind(null,this.syncEngine),yield Kz(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new dw})()}createDatastore(t){let r=Cg(t.databaseInfo.databaseId),i=(function(s){return new nw(s)})(t.databaseInfo);return(function(s,a,u,l){return new sw(s,a,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,u){return new cw(i,o,s,a,u)})(this.localStore,this.datastore,t.asyncQueue,r=>Lx(this.syncEngine,r,0),(function(){return ng.C()?new ng:new Z0})())}createSyncEngine(t,r){return(function(o,s,a,u,l,h,p){let g=new vw(o,s,a,u,l,h);return p&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var t,r;yield(function(o){return v(this,null,function*(){let s=ae(o);H(ps,"RemoteStore shutting down."),s.Ia.add(5),yield Ll(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Ew=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ii("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Xi="FirestoreClient",Iw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=Cl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>v(this,null,function*(){H(Xi,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(H(Xi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Ww(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function zI(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),H(Xi,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(null,null,function*(){r.isEqual(i)||(yield KN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Yi("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{H("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Yi("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function Ux(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield f8(n);H(Xi,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Ox(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Ox(e.remoteStore,i)),n._onlineComponents=e})}function f8(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){H(Xi,"Using user provided OfflineComponentProvider");try{yield zI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Yi("Error using user provided cache. Falling back to memory cache: "+t),yield zI(n,new c1)}}else H(Xi,"Using default OfflineComponentProvider"),yield zI(n,new _w(void 0));return n._offlineComponents})}function u1(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(H(Xi,"Using user provided OnlineComponentProvider"),yield Ux(n,n._uninitializedComponentsProvider._online)):(H(Xi,"Using default OnlineComponentProvider"),yield Ux(n,new h8))),n._onlineComponents})}function p8(n){return u1(n).then(e=>e.syncEngine)}function jx(n){return v(this,null,function*(){let e=yield u1(n),t=e.eventManager;return t.onListen=Xz.bind(null,e.syncEngine),t.onUnlisten=n8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=e8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=r8.bind(null,e.syncEngine),t})}function l1(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Bx=new Map;var d1="firestore.googleapis.com",$x=!0,lg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=d1,this.ssl=$x}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:$x;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Sz)throw new $(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}T5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=l1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new $(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new $(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new $(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},tc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new qI;switch(r.type){case"firstParty":return new YI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=Bx.get(t);r&&(H("ComponentProvider","Removing Datastore"),Bx.delete(t),r.terminate())})(this),Promise.resolve()}};function h1(n,e,t,r={}){var i;n=zi(n,tc);let o=Ni(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(qf(`https://${u}`),Gf("Firestore",!0)),s.host!==d1&&s.host!==u&&Yi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!ur(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=yt.MOCK_USER;else{h=AR(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new $(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new yt(g)}n._authCredentials=new GI(new Up(h,p))}}var gs=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Dt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Fl(t,n._jsonSchema))return new n(e,r||null,new Y(He.fromString(t.referencePath)))}};Dt._jsonSchemaVersion="firestore/documentReference/1.0",Dt._jsonSchema={type:st("string",Dt._jsonSchemaVersion),referencePath:st("string")};var qi=class n extends gs{constructor(e,t,r){super(e,t,Uw(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new Y(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function f1(n,e,...t){if(n=We(n),Qx("collection","path",e),n instanceof tc){let r=He.fromString(e,...t);return ox(r),new qi(n,null,r)}{if(!(n instanceof Dt||n instanceof qi))throw new $(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(He.fromString(e,...t));return ox(r),new qi(n.firestore,null,r)}}function Jw(n,e,...t){if(n=We(n),arguments.length===1&&(e=Cl.newId()),Qx("doc","path",e),n instanceof tc){let r=He.fromString(e,...t);return ix(r),new Dt(n,null,new Y(r))}{if(!(n instanceof Dt||n instanceof qi))throw new $(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(He.fromString(e,...t));return ix(r),new Dt(n.firestore,n instanceof qi?n.converter:null,new Y(r))}}var Hx="AsyncQueue",dg=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new rg(this,"async_queue_retry"),this.oc=()=>{let r=HI();r&&H(Hx,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=HI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=HI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new ni;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return v(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!oc(e))throw e;H(Hx,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ii("INTERNAL UNHANDLED ERROR: ",zx(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=uw.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&Q(47125,{hc:zx(this.tc)})}verifyOperationInProgress(){}Pc(){return v(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function zx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function qx(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var eo=class extends tc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new dg,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new dg(e),this._firestoreClient=void 0,yield e}})}};function p1(n,e){let t=typeof n=="object"?n:Go(),r=typeof n=="string"?n:e||zp,i=Da(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=SR("firestore");o&&h1(i,...o)}return i}function g1(n){if(n._terminated)throw new $(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||g8(n),n._firestoreClient}function g8(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,u,l,h){return new e0(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,l1(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Iw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(n._componentsProvider))}var Gi=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(jt.fromBase64String(e))}catch(t){throw new $(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fl(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Gi._jsonSchemaVersion="firestore/bytes/1.0",Gi._jsonSchema={type:st("string",Gi._jsonSchemaVersion),bytes:st("string")};var nc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new $(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ol=class{constructor(e){this._methodName=e}};var Wi=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Fl(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Wi._jsonSchemaVersion="firestore/geoPoint/1.0",Wi._jsonSchema={type:st("string",Wi._jsonSchemaVersion),latitude:st("number"),longitude:st("number")};var Ki=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fl(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new $(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ki._jsonSchemaVersion="firestore/vectorValue/1.0",Ki._jsonSchema={type:st("string",Ki._jsonSchemaVersion),vectorValues:st("object")};var m8=/^__.*__$/,ww=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new _r(e,this.data,this.fieldMask,t,this.fieldTransforms):new fs(e,this.data,t,this.fieldTransforms)}},hg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new _r(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function m1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ec:n})}}var bw=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return pg(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(m1(this.Ec)&&m8.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},Cw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Cg(e)}Dc(e,t,r,i=!1){return new bw({Ec:e,methodName:t,bc:r,path:_n.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Zw(n){let e=n._freezeSettings(),t=Cg(n._databaseId);return new Cw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function v8(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);Xw("Data must be an object, but it was:",s,r);let a=v1(r,s),u,l;if(o.merge)u=new xn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=Tw(e,p,t);if(!s.contains(g))throw new $(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);_1(h,g)||h.push(g)}u=new xn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new ww(new yn(a),u,l)}var fg=class n extends Ol{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function y8(n,e,t,r){let i=n.Dc(1,e,t);Xw("Data must be an object, but it was:",i,r);let o=[],s=yn.empty();to(r,(u,l)=>{let h=eb(e,u,t);l=We(l);let p=i.gc(h);if(l instanceof fg)o.push(h);else{let g=Ul(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new xn(o);return new hg(s,a,i.fieldTransforms)}function _8(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[Tw(e,r,t)],u=[i];if(o.length%2!=0)throw new $(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(Tw(e,o[g])),u.push(o[g+1]);let l=[],h=yn.empty();for(let g=a.length-1;g>=0;--g)if(!_1(l,a[g])){let y=a[g],M=u[g];M=We(M);let k=s.gc(y);if(M instanceof fg)l.push(y);else{let O=Ul(M,k);O!=null&&(l.push(y),h.set(y,O))}}let p=new xn(l);return new hg(h,p,s.fieldTransforms)}function E8(n,e,t,r=!1){return Ul(t,n.Dc(r?4:3,e))}function Ul(n,e){if(y1(n=We(n)))return Xw("Unsupported field value:",e,n),v1(n,e);if(n instanceof Ol)return(function(r,i){if(!m1(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=Ul(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nz(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ue.fromDate(r);return{timestampValue:Jp(i.serializer,o)}}if(r instanceof Ue){let o=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jp(i.serializer,o)}}if(r instanceof Wi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gi)return{bytesValue:jN(i.serializer,r._byteString)};if(r instanceof Dt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Bw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ki)return(function(s,a){return{mapValue:{fields:{[Ow]:{stringValue:kw},[Ga]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return jw(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${_g(r)}`)})(n,e)}function v1(n,e){let t={};return hN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):to(n,(r,i)=>{let o=Ul(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function y1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ue||n instanceof Wi||n instanceof Gi||n instanceof Dt||n instanceof Ol||n instanceof Ki)}function Xw(n,e,t){if(!y1(t)||!Jx(t)){let r=_g(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Tw(n,e,t){if((e=We(e))instanceof nc)return e._internalPath;if(typeof e=="string")return eb(n,e);throw pg("Field path arguments must be of type string or ",n,!1,void 0,t)}var I8=new RegExp("[~\\*/\\[\\]]");function eb(n,e,t){if(e.search(I8)>=0)throw pg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new nc(...e.split("."))._internalPath}catch{throw pg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function pg(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new $(F.INVALID_ARGUMENT,a+n+u)}function _1(n,e){return n.some(t=>t.isEqual(e))}var gg=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Dw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Sg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Dw=class extends gg{data(){return super.data()}};function Sg(n,e){return typeof e=="string"?eb(n,e):e instanceof nc?e._internalPath:e._delegate._internalPath}function w8(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new $(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var kl=class{},mg=class extends kl{};function E1(n,e,...t){let r=[];e instanceof kl&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(u=>u instanceof Sw).length,a=o.filter(u=>u instanceof vg).length;if(s>1||s>0&&a>0)throw new $(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var vg=class n extends mg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return b1(e._query,t),new gs(e.firestore,e.converter,f0(e._query,t))}_parse(e){let t=Zw(e.firestore);return(function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Wx(p,h);let M=[];for(let k of p)M.push(Gx(u,o,k));g={arrayValue:{values:M}}}else g=Gx(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Wx(p,h),g=E8(a,s,p,h==="in"||h==="not-in");return ot.create(l,h,g)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function I1(n,e,t){let r=e,i=Sg("where",n);return vg._create(i,r,t)}var Sw=class n extends kl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Jn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)b1(s,u),s=f0(s,u)})(e._query,t),new gs(e.firestore,e.converter,f0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Aw=class n extends mg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new $(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ls(o,s)})(e._query,this._field,this._direction);return new gs(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Ji(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function w1(n,e="asc"){let t=e,r=Sg("orderBy",n);return Aw._create(r,t)}function Gx(n,e,t){if(typeof(t=We(t))=="string"){if(t==="")throw new $(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DN(e)&&t.indexOf("/")!==-1)throw new $(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(He.fromString(t));if(!Y.isDocumentKey(r))throw new $(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hx(n,new Y(r))}if(t instanceof Dt)return hx(n,t._key);throw new $(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_g(t)}.`)}function Wx(n,e){if(!Array.isArray(n)||n.length===0)throw new $(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function b1(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new $(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Rw=class{convertValue(e,t="none"){switch(Qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Q(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return to(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Ga].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>$e(s.doubleValue));return new Ki(o)}convertGeoPoint(e){return new Wi($e(e.latitude),$e(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Ig(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Sl(e));default:return null}}convertTimestamp(e){let t=oi(e);return new Ue(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=He.fromString(e);Pe(GN(r),9688,{name:e});let i=new qp(r.get(1),r.get(3)),o=new Y(r.popFirst(5));return i.isEqual(t)||ii(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function b8(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var ss=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},as=class n extends gg{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ha(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Sg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};as._jsonSchemaVersion="firestore/documentSnapshot/1.0",as._jsonSchema={type:st("string",as._jsonSchemaVersion),bundleSource:st("string","DocumentSnapshot"),bundleName:st("string"),bundle:st("string")};var Ha=class extends as{data(e={}){return super.data(e)}},za=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ss(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ha(this._firestore,this._userDataWriter,r.key,r,new ss(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ha(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ss(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ha(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ss(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:C8(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function C8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:n})}}za._jsonSchemaVersion="firestore/querySnapshot/1.0",za._jsonSchema={type:st("string",za._jsonSchemaVersion),bundleSource:st("string","QuerySnapshot"),bundleName:st("string"),bundle:st("string")};var yg=class extends Rw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,t)}};function C1(n,e,t,...r){n=zi(n,Dt);let i=zi(n.firestore,eo),o=Zw(i),s;return s=typeof(e=We(e))=="string"||e instanceof nc?_8(o,"updateDoc",n._key,e,t,r):y8(o,"updateDoc",n._key,e),tb(i,[s.toMutation(n._key,ri.exists(!0))])}function T1(n){return tb(zi(n.firestore,eo),[new Rl(n._key,ri.none())])}function D1(n,e){let t=zi(n.firestore,eo),r=Jw(n),i=b8(n.converter,e);return tb(t,[v8(Zw(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ri.exists(!1))]).then(()=>r)}function S1(n,...e){var t,r,i;n=We(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||qx(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(qx(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Dt)l=zi(n.firestore,eo),h=Uw(n._key.path),u={next:p=>{e[s]&&e[s](T8(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=zi(n,gs);l=zi(p.firestore,eo),h=p._query;let g=new yg(l);u={next:y=>{e[s]&&e[s](new za(l,g,p,y))},error:e[s+1],complete:e[s+2]},w8(n._query)}return(function(g,y,M,k){let O=new Ew(k),B=new fw(y,O,M);return g.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return Yz(yield jx(g),B)})),()=>{O.Ou(),g.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return Qz(yield jx(g),B)}))}})(g1(l),h,a,u)}function tb(n,e){return(function(r,i){let o=new ni;return r.asyncQueue.enqueueAndForget(()=>v(null,null,function*(){return i8(yield p8(r),i,o)})),o.promise})(g1(n),e)}function T8(n,e,t){let r=t.docs.get(e._key),i=new yg(n);return new as(n,i,e._key,r,new ss(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){rc=i})(ki),Wn(new Kt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new eo(new WI(r.getProvider("auth-internal")),new QI(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new $(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qp(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ke(ex,tx,e),Ke(ex,tx,"esm2017")})();var vs=class{constructor(e){return e}},A1="firestore",nb=class{constructor(){return Aa(A1)}};var rb=new q("angularfire2.firestore-instances");function D8(n,e){let t=tl(A1,n,e);return t&&new vs(t)}function S8(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new vs(r)}}var A8={provide:nb,deps:[[new hn,rb]]},R8={provide:vs,useFactory:D8,deps:[[new hn,rb],Gr]};function R1(n,...e){return Ke("angularfire",Fi.full,"fst"),an([R8,A8,{provide:rb,useFactory:S8(n),multi:!0,deps:[Me,Qe,Li,Ko,[new hn,vl],[new hn,Ra],...e]}])}var ib=Xe(D1,!0,2);var ob=Xe(f1,!0,2);var M1=Xe(T1,!0,2);var Ag=Xe(Jw,!0,2);var P1=Xe(p1,!0);var ac=Xe(S1,!0);var jl=Xe(w1,!0,2),Bl=Xe(E1,!0,2);var x1=Xe(C1,!0,2);var Rg=Xe(I1,!0,2);var N1={production:!1,firebase:{apiKey:"AIzaSyBhfFnuSwiVvRPOmqVxC0BUU8ZvMUGiye0",authDomain:"sistema-evaluacion-5b6eb.firebaseapp.com",projectId:"sistema-evaluacion-5b6eb",storageBucket:"sistema-evaluacion-5b6eb.firebasestorage.app",messagingSenderId:"858778646472",appId:"1:858778646472:web:2aaf997dac54ce3732b2fd"}};var H1=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(W(Lr),W(or))};static \u0275dir=Oe({type:n})}return n})(),Kl=(()=>{class n extends H1{static \u0275fac=(()=>{let t;return function(i){return(t||(t=zn(n)))(i||n)}})();static \u0275dir=Oe({type:n,features:[pt]})}return n})(),ys=new q("");var M8={provide:ys,useExisting:Nt(()=>Nn),multi:!0};function P8(){let n=Rn()?Rn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var x8=new q(""),Nn=(()=>{class n extends H1{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!P8())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(W(Lr),W(or),W(x8,8))};static \u0275dir=Oe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&he("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[fn([M8]),pt]})}return n})();function db(n){return n==null||hb(n)===0}function hb(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var dc=new q(""),Yl=new q(""),N8=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ie=class{static min(e){return z1(e)}static max(e){return O8(e)}static required(e){return k8(e)}static requiredTrue(e){return F8(e)}static email(e){return L8(e)}static minLength(e){return V8(e)}static maxLength(e){return U8(e)}static pattern(e){return j8(e)}static nullValidator(e){return Pg()}static compose(e){return Q1(e)}static composeAsync(e){return Z1(e)}};function z1(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function O8(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function k8(n){return db(n.value)?{required:!0}:null}function F8(n){return n.value===!0?null:{required:!0}}function L8(n){return db(n.value)||N8.test(n.value)?null:{email:!0}}function V8(n){return e=>{let t=e.value?.length??hb(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function U8(n){return e=>{let t=e.value?.length??hb(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function j8(n){if(!n)return Pg;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(db(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Pg(n){return null}function q1(n){return n!=null}function G1(n){return Si(n)?ze(n):n}function W1(n){let e={};return n.forEach(t=>{e=t!=null?L(L({},e),t):e}),Object.keys(e).length===0?null:e}function K1(n,e){return e.map(t=>t(n))}function B8(n){return!n.validate}function Y1(n){return n.map(e=>B8(e)?e:t=>e.validate(t))}function Q1(n){if(!n)return null;let e=n.filter(q1);return e.length==0?null:function(t){return W1(K1(t,e))}}function J1(n){return n!=null?Q1(Y1(n)):null}function Z1(n){if(!n)return null;let e=n.filter(q1);return e.length==0?null:function(t){let r=K1(t,e).map(G1);return Hm(r).pipe(ue(W1))}}function X1(n){return n!=null?Z1(Y1(n)):null}function O1(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function eO(n){return n._rawValidators}function tO(n){return n._rawAsyncValidators}function sb(n){return n?Array.isArray(n)?n:[n]:[]}function xg(n,e){return Array.isArray(n)?n.includes(e):n===e}function k1(n,e){let t=sb(e);return sb(n).forEach(i=>{xg(t,i)||t.push(i)}),t}function F1(n,e){return sb(e).filter(t=>!xg(n,t))}var Ng=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=J1(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=X1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},En=class extends Ng{name;get formDirective(){return null}get path(){return null}},no=class extends Ng{_parent=null;name=null;valueAccessor=null},Og=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},$8={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},$pe=K(L({},$8),{"[class.ng-submitted]":"isSubmitted"}),Er=(()=>{class n extends Og{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(W(no,2))};static \u0275dir=Oe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ke("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[pt]})}return n})(),hc=(()=>{class n extends Og{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(W(En,10))};static \u0275dir=Oe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ke("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[pt]})}return n})();var $l="VALID",Mg="INVALID",cc="PENDING",Hl="DISABLED",ro=class{},kg=class extends ro{value;source;constructor(e,t){super(),this.value=e,this.source=t}},zl=class extends ro{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},ql=class extends ro{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},uc=class extends ro{status;source;constructor(e,t){super(),this.status=e,this.source=t}},ab=class extends ro{source;constructor(e){super(),this.source=e}},Wl=class extends ro{source;constructor(e){super(),this.source=e}};function fb(n){return(Ug(n)?n.validators:n)||null}function H8(n){return Array.isArray(n)?J1(n):n||null}function pb(n,e){return(Ug(e)?e.asyncValidators:n)||null}function z8(n){return Array.isArray(n)?X1(n):n||null}function Ug(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function nO(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new z(1e3,"");if(!r[t])throw new z(1001,"")}function rO(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new z(1002,"")})}var lc=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Tt(this.statusReactive)}set status(e){Tt(()=>this.statusReactive.set(e))}_status=ca(()=>this.statusReactive());statusReactive=dn(void 0);get valid(){return this.status===$l}get invalid(){return this.status===Mg}get pending(){return this.status==cc}get disabled(){return this.status===Hl}get enabled(){return this.status!==Hl}errors;get pristine(){return Tt(this.pristineReactive)}set pristine(e){Tt(()=>this.pristineReactive.set(e))}_pristine=ca(()=>this.pristineReactive());pristineReactive=dn(!0);get dirty(){return!this.pristine}get touched(){return Tt(this.touchedReactive)}set touched(e){Tt(()=>this.touchedReactive.set(e))}_touched=ca(()=>this.touchedReactive());touchedReactive=dn(!1);get untouched(){return!this.touched}_events=new at;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(k1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(k1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(F1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(F1(e,this._rawAsyncValidators))}hasValidator(e){return xg(this._rawValidators,e)}hasAsyncValidator(e){return xg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(K(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ql(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new ql(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(K(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new zl(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new zl(!0,r))}markAsPending(e={}){this.status=cc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new uc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(K(L({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Hl,this.errors=null,this._forEachChild(i=>{i.disable(K(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new kg(this.value,r)),this._events.next(new uc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(K(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=$l,this._forEachChild(r=>{r.enable(K(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(K(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$l||this.status===cc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new kg(this.value,t)),this._events.next(new uc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(K(L({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Hl:$l}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=cc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=G1(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new uc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Je,this.statusChanges=new Je}_calculateStatus(){return this._allControlsDisabled()?Hl:this.errors?Mg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(cc)?cc:this._anyControlsHaveStatus(Mg)?Mg:$l}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new zl(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new ql(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ug(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=H8(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=z8(this._rawAsyncValidators)}},Fg=class extends lc{constructor(e,t,r){super(fb(t),pb(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){rO(this,!0,e),Object.keys(e).forEach(r=>{nO(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Wl(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var cb=class extends Fg{};var Ql=new q("",{providedIn:"root",factory:()=>Jl}),Jl="always";function jg(n,e){return[...e.path,n]}function ub(n,e,t=Jl){gb(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),G8(n,e),K8(n,e),W8(n,e),q8(n,e)}function L1(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Vg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Lg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function q8(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function gb(n,e){let t=eO(n);e.validator!==null?n.setValidators(O1(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=tO(n);e.asyncValidator!==null?n.setAsyncValidators(O1(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Lg(e._rawValidators,i),Lg(e._rawAsyncValidators,i)}function Vg(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=eO(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=tO(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Lg(e._rawValidators,r),Lg(e._rawAsyncValidators,r),t}function G8(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&iO(n,e)})}function W8(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&iO(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function iO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function K8(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Y8(n,e){n==null,gb(n,e)}function Q8(n,e){return Vg(n,e)}function oO(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function J8(n){return Object.getPrototypeOf(n.constructor)===Kl}function Z8(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function sO(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Nn?t=o:J8(o)?r=o:i=o}),i||r||t||null}function X8(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function V1(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function U1(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Gl=class extends lc{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(fb(t),pb(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ug(t)&&(t.nonNullable||t.initialValueIsDefault)&&(U1(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Wl(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){V1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){V1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){U1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var eq=n=>n instanceof Gl,tq=(()=>{class n extends En{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return jg(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let t;return function(i){return(t||(t=zn(n)))(i||n)}})();static \u0275dir=Oe({type:n,standalone:!1,features:[pt]})}return n})();var nq={provide:no,useExisting:Nt(()=>Zl)},j1=Promise.resolve(),Zl=(()=>{class n extends no{_changeDetectorRef;callSetDisabledState;control=new Gl;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Je;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=sO(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),oO(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ub(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){j1.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&u_(r);j1.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?jg(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(W(En,9),W(dc,10),W(Yl,10),W(ys,10),W(ua,8),W(Ql,8))};static \u0275dir=Oe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[fn([nq]),pt,Fr]})}return n})();var fc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Oe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),rq={provide:ys,useExisting:Nt(()=>mb),multi:!0},mb=(()=>{class n extends Kl{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=zn(n)))(i||n)}})();static \u0275dir=Oe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&he("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[fn([rq]),pt]})}return n})(),iq={provide:ys,useExisting:Nt(()=>vb),multi:!0};var oq=(()=>{class n{_accessors=[];add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t){this._accessors.splice(r,1);return}}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return t[0].control?t[0]._parent===r._control._parent&&t[1].name===r.name:!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vb=(()=>{class n extends Kl{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=x(Ql,{optional:!0})??Jl;constructor(t,r,i,o){super(t,r),this._registry=i,this._injector=o}ngOnInit(){this._control=this._injector.get(no),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(r){return new(r||n)(W(Lr),W(or),W(oq),W(Qe))};static \u0275dir=Oe({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&he("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[fn([iq]),pt]})}return n})();var aO=new q("");var sq={provide:En,useExisting:Nt(()=>io)},io=(()=>{class n extends En{callSetDisabledState;get submitted(){return Tt(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=ca(()=>this._submittedReactive());_submittedReactive=dn(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Je;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Vg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return ub(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){L1(t.control||null,t,!1),X8(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),Z8(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new ab(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(L1(r||null,t),eq(i)&&(ub(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);Y8(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&Q8(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){gb(this.form,this),this._oldForm&&Vg(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(W(dc,10),W(Yl,10),W(Ql,8))};static \u0275dir=Oe({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&he("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[fn([sq]),pt,Fr]})}return n})(),aq={provide:En,useExisting:Nt(()=>pc)},pc=(()=>{class n extends tq{name=null;constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){cO(this._parent)}static \u0275fac=function(r){return new(r||n)(W(En,13),W(dc,10),W(Yl,10))};static \u0275dir=Oe({type:n,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[fn([aq]),pt]})}return n})(),cq={provide:En,useExisting:Nt(()=>gc)},gc=(()=>{class n extends En{_parent;name=null;constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){cO(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return jg(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(r){return new(r||n)(W(En,13),W(dc,10),W(Yl,10))};static \u0275dir=Oe({type:n,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[fn([cq]),pt]})}return n})();function cO(n){return!(n instanceof pc)&&!(n instanceof io)&&!(n instanceof gc)}var uq={provide:no,useExisting:Nt(()=>_s)},_s=(()=>{class n extends no{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Je;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=sO(this,o)}ngOnChanges(t){this._added||this._setUpControl(),oO(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return jg(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(W(En,13),W(dc,10),W(Yl,10),W(ys,10),W(aO,8))};static \u0275dir=Oe({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[fn([uq]),pt,Fr]})}return n})();var lq={provide:ys,useExisting:Nt(()=>Ir),multi:!0};function uO(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function dq(n){return n.split(":")[0]}var Ir=(()=>{class n extends Kl{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=x(Ur).injector;destroyRef=x(Bn);cdr=x(ua);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Qh({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=uO(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=dq(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=zn(n)))(i||n)}})();static \u0275dir=Oe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&he("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[fn([lq]),pt]})}return n})(),oo=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(uO(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(W(or),W(Lr),W(Ir,9))};static \u0275dir=Oe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),hq={provide:ys,useExisting:Nt(()=>lO),multi:!0};function B1(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function fq(n){return n.split(":")[0]}var lO=(()=>{class n extends Kl{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=fq(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=zn(n)))(i||n)}})();static \u0275dir=Oe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&he("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[fn([hq]),pt]})}return n})(),so=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(B1(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(B1(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(W(or),W(Lr),W(lO,9))};static \u0275dir=Oe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function pq(n){return typeof n=="number"?n:parseFloat(n)}var gq=(()=>{class n{_validator=Pg;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Pg,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Oe({type:n,features:[Fr]})}return n})();var mq={provide:dc,useExisting:Nt(()=>yb),multi:!0},yb=(()=>{class n extends gq{min;inputName="min";normalizeInput=t=>pq(t);createValidator=t=>z1(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=zn(n)))(i||n)}})();static \u0275dir=Oe({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&nf("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[fn([mq]),pt]})}return n})();var dO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Vr({type:n});static \u0275inj=Xn({})}return n})(),lb=class extends lc{constructor(e,t,r){super(fb(t),pb(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){rO(this,!1,e),e.forEach((r,i)=>{nO(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Wl(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function $1(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var mc=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return $1(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Fg(i,o)}record(t,r=null){let i=this._reduceControls(t);return new cb(i,r)}control(t,r,i){let o={};return this.useNonNullable?($1(r)?o=r:(o.validators=r,o.asyncValidators=i),new Gl(t,K(L({},o),{nonNullable:!0}))):new Gl(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new lb(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Gl)return t;if(t instanceof lc)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Bg=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ql,useValue:t.callSetDisabledState??Jl}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Vr({type:n});static \u0275inj=Xn({imports:[dO]})}return n})(),vc=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:aO,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ql,useValue:t.callSetDisabledState??Jl}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Vr({type:n});static \u0275inj=Xn({imports:[dO]})}return n})();var Yt=class n{auth=x(rs);user$=GP(this.auth);currentUser=null;constructor(){this.user$.subscribe(e=>{this.currentUser=e})}register(e,t,r){return v(this,null,function*(){try{let i=yield WP(this.auth,e,t);i.user&&(yield JP(i.user,{displayName:r}))}catch(i){throw console.error("Error al registrar:",i),i}})}login(e,t){return v(this,null,function*(){try{yield YP(this.auth,e,t)}catch(r){throw console.error("Error al iniciar sesi\xF3n:",r),r}})}logout(){return v(this,null,function*(){try{yield QP(this.auth)}catch(e){throw console.error("Error al cerrar sesi\xF3n:",e),e}})}getCurrentUser(){return this.currentUser}getUser(){return this.user$}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};function yq(n,e){n&1&&(I(0,"span",31),C(1," Ingresa un correo v\xE1lido "),_())}function _q(n,e){n&1&&(I(0,"span",31),C(1," La contrase\xF1a debe tener al menos 6 caracteres "),_())}function Eq(n,e){if(n&1&&(I(0,"div",31),C(1),_()),n&2){let t=ne(2);D(),ge(" ",t.errorMessage," ")}}function Iq(n,e){if(n&1){let t=Ft();I(0,"form",19),he("ngSubmit",function(){tt(t);let i=ne();return nt(i.onLogin())}),I(1,"div",20)(2,"label",21),C(3,"Tipo de Usuario"),_(),I(4,"select",22)(5,"option",23),C(6,"\u{1F468}\u200D\u{1F393} Estudiante"),_(),I(7,"option",24),C(8,"\u{1F468}\u200D\u{1F3EB} Profesor"),_()()(),I(9,"div",20)(10,"label",25),C(11,"Correo Electr\xF3nico"),_(),be(12,"input",26),te(13,yq,2,0,"span",27),_(),I(14,"div",20)(15,"label",28),C(16,"Contrase\xF1a"),_(),be(17,"input",29),te(18,_q,2,0,"span",27),_(),te(19,Eq,2,1,"div",27),I(20,"button",30),C(21),_()()}if(n&2){let t,r,i,o,s=ne();U("formGroup",s.loginForm),D(12),ke("error",((t=s.loginForm.get("email"))==null?null:t.invalid)&&((t=s.loginForm.get("email"))==null?null:t.touched)),D(),U("ngIf",((r=s.loginForm.get("email"))==null?null:r.invalid)&&((r=s.loginForm.get("email"))==null?null:r.touched)),D(4),ke("error",((i=s.loginForm.get("password"))==null?null:i.invalid)&&((i=s.loginForm.get("password"))==null?null:i.touched)),D(),U("ngIf",((o=s.loginForm.get("password"))==null?null:o.invalid)&&((o=s.loginForm.get("password"))==null?null:o.touched)),D(),U("ngIf",s.errorMessage),D(),U("disabled",s.loading||s.loginForm.invalid),D(),ge(" ",s.loading?"Iniciando sesi\xF3n...":"Iniciar Sesi\xF3n"," ")}}function wq(n,e){n&1&&(I(0,"span",31),C(1," El nombre debe tener al menos 3 caracteres "),_())}function bq(n,e){n&1&&(I(0,"span",31),C(1," Ingresa un correo v\xE1lido "),_())}function Cq(n,e){n&1&&(I(0,"span",31),C(1," La contrase\xF1a debe tener al menos 6 caracteres "),_())}function Tq(n,e){n&1&&(I(0,"span",31),C(1," Confirma tu contrase\xF1a "),_())}function Dq(n,e){if(n&1&&(I(0,"div",31),C(1),_()),n&2){let t=ne(2);D(),ge(" ",t.errorMessage," ")}}function Sq(n,e){if(n&1){let t=Ft();I(0,"form",19),he("ngSubmit",function(){tt(t);let i=ne();return nt(i.onRegister())}),I(1,"div",20)(2,"label",32),C(3,"Tipo de Usuario"),_(),I(4,"select",33)(5,"option",23),C(6,"\u{1F468}\u200D\u{1F393} Estudiante"),_(),I(7,"option",24),C(8,"\u{1F468}\u200D\u{1F3EB} Profesor"),_()()(),I(9,"div",20)(10,"label",34),C(11,"Nombre Completo"),_(),be(12,"input",35),te(13,wq,2,0,"span",27),_(),I(14,"div",20)(15,"label",36),C(16,"Correo Electr\xF3nico"),_(),be(17,"input",37),te(18,bq,2,0,"span",27),_(),I(19,"div",20)(20,"label",38),C(21,"Contrase\xF1a"),_(),be(22,"input",39),te(23,Cq,2,0,"span",27),_(),I(24,"div",20)(25,"label",40),C(26,"Confirmar Contrase\xF1a"),_(),be(27,"input",41),te(28,Tq,2,0,"span",27),_(),te(29,Dq,2,1,"div",27),I(30,"button",30),C(31),_()()}if(n&2){let t,r,i,o,s,a,u,l,h=ne();U("formGroup",h.registerForm),D(12),ke("error",((t=h.registerForm.get("displayName"))==null?null:t.invalid)&&((t=h.registerForm.get("displayName"))==null?null:t.touched)),D(),U("ngIf",((r=h.registerForm.get("displayName"))==null?null:r.invalid)&&((r=h.registerForm.get("displayName"))==null?null:r.touched)),D(4),ke("error",((i=h.registerForm.get("email"))==null?null:i.invalid)&&((i=h.registerForm.get("email"))==null?null:i.touched)),D(),U("ngIf",((o=h.registerForm.get("email"))==null?null:o.invalid)&&((o=h.registerForm.get("email"))==null?null:o.touched)),D(4),ke("error",((s=h.registerForm.get("password"))==null?null:s.invalid)&&((s=h.registerForm.get("password"))==null?null:s.touched)),D(),U("ngIf",((a=h.registerForm.get("password"))==null?null:a.invalid)&&((a=h.registerForm.get("password"))==null?null:a.touched)),D(4),ke("error",((u=h.registerForm.get("confirmPassword"))==null?null:u.invalid)&&((u=h.registerForm.get("confirmPassword"))==null?null:u.touched)),D(),U("ngIf",((l=h.registerForm.get("confirmPassword"))==null?null:l.invalid)&&((l=h.registerForm.get("confirmPassword"))==null?null:l.touched)),D(),U("ngIf",h.errorMessage),D(),U("disabled",h.loading||h.registerForm.invalid),D(),ge(" ",h.loading?"Creando cuenta...":"Registrarse"," ")}}var $g=class n{fb=x(mc);authService=x(Yt);router=x(Ze);loginForm;registerForm;isLoginMode=!0;errorMessage="";loading=!1;constructor(){this.loginForm=this.fb.group({email:["",[Ie.required,Ie.email]],password:["",[Ie.required,Ie.minLength(6)]],rol:["estudiante",[Ie.required]]}),this.registerForm=this.fb.group({displayName:["",[Ie.required,Ie.minLength(3)]],email:["",[Ie.required,Ie.email]],password:["",[Ie.required,Ie.minLength(6)]],confirmPassword:["",[Ie.required]],rol:["estudiante",[Ie.required]]})}toggleMode(){this.isLoginMode=!this.isLoginMode,this.errorMessage=""}onLogin(){return v(this,null,function*(){if(this.loginForm.invalid){this.errorMessage="Por favor, completa todos los campos correctamente.";return}this.loading=!0,this.errorMessage="";try{let{email:e,password:t,rol:r}=this.loginForm.value;yield this.authService.login(e,t),r==="profesor"?this.router.navigate(["/evaluaciones"]):this.router.navigate(["/evaluaciones-disponibles"])}catch(e){this.errorMessage=this.getErrorMessage(e.code)}finally{this.loading=!1}})}onRegister(){return v(this,null,function*(){if(this.registerForm.invalid){this.errorMessage="Por favor, completa todos los campos correctamente.";return}let{password:e,confirmPassword:t}=this.registerForm.value;if(e!==t){this.errorMessage="Las contrase\xF1as no coinciden.";return}this.loading=!0,this.errorMessage="";try{let{displayName:r,email:i,password:o,rol:s}=this.registerForm.value;yield this.authService.register(i,o,r),s==="profesor"?this.router.navigate(["/evaluaciones"]):this.router.navigate(["/evaluaciones-disponibles"])}catch(r){this.errorMessage=this.getErrorMessage(r.code)}finally{this.loading=!1}})}getErrorMessage(e){return{"auth/email-already-in-use":"Este correo electr\xF3nico ya est\xE1 registrado.","auth/invalid-email":"El correo electr\xF3nico no es v\xE1lido.","auth/operation-not-allowed":"Operaci\xF3n no permitida.","auth/weak-password":"La contrase\xF1a es demasiado d\xE9bil.","auth/user-disabled":"Esta cuenta ha sido deshabilitada.","auth/user-not-found":"No existe una cuenta con este correo.","auth/wrong-password":"Contrase\xF1a incorrecta.","auth/invalid-credential":"Credenciales inv\xE1lidas. Verifica tu correo y contrase\xF1a."}[e]||"Ocurri\xF3 un error. Int\xE9ntalo de nuevo."}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=dt({type:n,selectors:[["app-login"]],decls:26,vars:5,consts:[[1,"login-container"],[1,"login-card"],[1,"login-header"],[1,"logo-container"],["viewBox","0 0 100 100","xmlns","http://www.w3.org/2000/svg",1,"logo-icon"],["id","logoGrad","x1","0%","y1","0%","x2","100%","y2","100%"],["offset","0%",2,"stop-color","#667eea","stop-opacity","1"],["offset","100%",2,"stop-color","#764ba2","stop-opacity","1"],["x","20","y","10","width","60","height","80","rx","5","fill","url(#logoGrad)"],["x","30","y","25","width","40","height","3","rx","1.5","fill","white","opacity","0.8"],["x","30","y","35","width","40","height","3","rx","1.5","fill","white","opacity","0.8"],["x","30","y","45","width","30","height","3","rx","1.5","fill","white","opacity","0.8"],["cx","50","cy","65","r","18","fill","white"],["d","M 42 65 L 48 71 L 58 59","stroke","#667eea","stroke-width","4","stroke-linecap","round","stroke-linejoin","round","fill","none"],[1,"animate-fade-in"],[1,"animate-slide-up"],["class","login-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"toggle-mode"],[3,"click"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","login-rol"],["id","login-rol","formControlName","rol",1,"rol-select"],["value","estudiante"],["value","profesor"],["for","login-email"],["type","email","id","login-email","formControlName","email","placeholder","ejemplo@correo.com"],["class","error-message",4,"ngIf"],["for","login-password"],["type","password","id","login-password","formControlName","password","placeholder","M\xEDnimo 6 caracteres"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error-message"],["for","register-rol"],["id","register-rol","formControlName","rol",1,"rol-select"],["for","register-name"],["type","text","id","register-name","formControlName","displayName","placeholder","Tu nombre"],["for","register-email"],["type","email","id","register-email","formControlName","email","placeholder","ejemplo@correo.com"],["for","register-password"],["type","password","id","register-password","formControlName","password","placeholder","M\xEDnimo 6 caracteres"],["for","register-confirm"],["type","password","id","register-confirm","formControlName","confirmPassword","placeholder","Repite tu contrase\xF1a"]],template:function(t,r){t&1&&(I(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),un(),I(4,"svg",4)(5,"defs")(6,"linearGradient",5),be(7,"stop",6)(8,"stop",7),_()(),be(9,"rect",8)(10,"rect",9)(11,"rect",10)(12,"rect",11)(13,"circle",12)(14,"path",13),_()(),ln(),I(15,"h1",14),C(16,"Sistema de Evaluaci\xF3n Online"),_(),I(17,"p",15),C(18),_()(),te(19,Iq,22,10,"form",16)(20,Sq,32,16,"form",16),I(21,"div",17)(22,"p"),C(23),I(24,"a",18),he("click",function(){return r.toggleMode()}),C(25),_()()()()()),t&2&&(D(18),J(r.isLoginMode?"Inicia sesi\xF3n para continuar":"Crea tu cuenta para empezar"),D(),U("ngIf",r.isLoginMode),D(),U("ngIf",!r.isLoginMode),D(3),ge(" ",r.isLoginMode?"\xBFNo tienes cuenta?":"\xBFYa tienes cuenta?"," "),D(2),ge(" ",r.isLoginMode?"Reg\xEDstrate":"Inicia sesi\xF3n"," "))},dependencies:[Lt,pn,vc,fc,oo,so,Nn,Ir,Er,hc,io,_s],styles:['.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px;position:relative;overflow:hidden}.login-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 1px,transparent 1px);background-size:50px 50px;animation:_ngcontent-%COMP%_moveBackground 20s linear infinite}@keyframes _ngcontent-%COMP%_moveBackground{0%{transform:translate(0)}to{transform:translate(50px,50px)}}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 20px 60px #0000004d;padding:40px;width:100%;max-width:450px;position:relative;z-index:1;animation:_ngcontent-%COMP%_slideIn .5s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.logo-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.logo-icon[_ngcontent-%COMP%]{width:80px;height:80px;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.login-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;font-size:28px;margin-bottom:10px;font-weight:600}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .8s ease-out .2s both}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:16px}.animate-slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .8s ease-out .4s both}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;animation:_ngcontent-%COMP%_fadeInUp .6s ease-out both}.form-group[_ngcontent-%COMP%]:nth-child(1){animation-delay:.5s}.form-group[_ngcontent-%COMP%]:nth-child(2){animation-delay:.6s}.form-group[_ngcontent-%COMP%]:nth-child(3){animation-delay:.7s}.form-group[_ngcontent-%COMP%]:nth-child(4){animation-delay:.8s}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#333;font-weight:500;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .rol-select[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .rol-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a;transform:translateY(-2px)}.rol-select[_ngcontent-%COMP%]{cursor:pointer;background-color:#fff}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%]{border-color:#e74c3c;animation:_ngcontent-%COMP%_shake .5s}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}10%,30%,50%,70%,90%{transform:translate(-5px)}20%,40%,60%,80%{transform:translate(5px)}}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:12px;margin-top:4px;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.btn[_ngcontent-%COMP%]{padding:14px 24px;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;margin-top:10px;position:relative;overflow:hidden}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#ffffff4d;transform:translate(-50%,-50%);transition:width .6s,height .6s}.btn[_ngcontent-%COMP%]:hover:before{width:300px;height:300px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 15px #667eea4d}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 6px 20px #667eea80}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.toggle-mode[_ngcontent-%COMP%]{text-align:center;margin-top:20px;padding-top:20px;border-top:1px solid #e0e0e0;animation:_ngcontent-%COMP%_fadeIn 1s ease-out .9s both}.toggle-mode[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}.toggle-mode[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;font-weight:600;cursor:pointer;text-decoration:none;margin-left:5px;transition:all .3s ease;position:relative}.toggle-mode[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{content:"";position:absolute;width:0;height:2px;bottom:-2px;left:0;background-color:#667eea;transition:width .3s ease}.toggle-mode[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:after{width:100%}']})};var On=class n{firestore=x(vs);evaluacionesCollection=ob(this.firestore,"evaluaciones");respuestasCollection=ob(this.firestore,"respuestas");crearEvaluacion(e){return v(this,null,function*(){try{console.log("\u{1F4BE} Guardando evaluaci\xF3n:",e);let t=K(L({},e),{fechaCreacion:Ue.fromDate(new Date(e.fechaCreacion)),fechaLimite:Ue.fromDate(new Date(e.fechaLimite))});console.log("\u{1F4E4} Datos a guardar:",t);let r=yield ib(this.evaluacionesCollection,t);return console.log("\u2705 Evaluaci\xF3n guardada con ID:",r.id),r.id}catch(t){throw console.error("\u274C Error al crear evaluaci\xF3n:",t),t}})}getEvaluacionesByUser(e){return console.log("\u{1F50D} Buscando evaluaciones para userId:",e),new X(t=>{let r=Bl(this.evaluacionesCollection,Rg("userId","==",e),jl("fechaCreacion","desc")),i=ac(r,o=>{console.log("\u{1F4E6} Evaluaciones recibidas:",o.size);let s=o.docs.map(a=>{let u=a.data();return K(L({id:a.id},u),{fechaCreacion:u.fechaCreacion?.toDate(),fechaLimite:u.fechaLimite?.toDate()})});console.log("\u{1F4CB} Datos procesados:",s),t.next(s)},o=>{console.error("\u274C Error en snapshot:",o),t.error(o)});return()=>i()})}getTodasEvaluaciones(){return new X(e=>{let t=Bl(this.evaluacionesCollection,jl("fechaCreacion","desc")),r=ac(t,i=>{let o=i.docs.map(s=>{let a=s.data();return K(L({id:s.id},a),{fechaCreacion:a.fechaCreacion?.toDate(),fechaLimite:a.fechaLimite?.toDate()})});e.next(o)},i=>{e.error(i)});return()=>r()})}getEvaluacionesActivas(){return new X(e=>{let t=Bl(this.evaluacionesCollection,Rg("estado","==","activa"),jl("fechaCreacion","desc")),r=ac(t,i=>{let o=i.docs.map(s=>{let a=s.data();return K(L({id:s.id},a),{fechaCreacion:a.fechaCreacion?.toDate(),fechaLimite:a.fechaLimite?.toDate()})});e.next(o)},i=>{e.error(i)});return()=>r()})}getEvaluacionById(e){return new X(t=>{let r=Ag(this.firestore,`evaluaciones/${e}`),i=ac(r,o=>{if(o.exists()){let s=o.data(),a=K(L({id:o.id},s),{fechaCreacion:s.fechaCreacion?.toDate(),fechaLimite:s.fechaLimite?.toDate()});t.next(a)}else t.next(void 0)},o=>{t.error(o)});return()=>i()})}actualizarEvaluacion(e,t){return v(this,null,function*(){try{let r=Ag(this.firestore,`evaluaciones/${e}`),i=L({},t);t.fechaCreacion&&(i.fechaCreacion=Ue.fromDate(new Date(t.fechaCreacion))),t.fechaLimite&&(i.fechaLimite=Ue.fromDate(new Date(t.fechaLimite))),yield x1(r,i)}catch(r){throw console.error("Error al actualizar evaluaci\xF3n:",r),r}})}eliminarEvaluacion(e){return v(this,null,function*(){try{let t=Ag(this.firestore,`evaluaciones/${e}`);yield M1(t)}catch(t){throw console.error("Error al eliminar evaluaci\xF3n:",t),t}})}buscarEvaluaciones(e,t){return this.getEvaluacionesByUser(t).pipe(ue(r=>r.filter(i=>i.titulo.toLowerCase().includes(e.toLowerCase())||i.categoria.toLowerCase().includes(e.toLowerCase())||i.descripcion.toLowerCase().includes(e.toLowerCase()))))}filtrarPorEstado(e,t){return this.getEvaluacionesByUser(t).pipe(ue(r=>r.filter(i=>i.estado===e)))}filtrarPorCategoria(e,t){return this.getEvaluacionesByUser(t).pipe(ue(r=>r.filter(i=>i.categoria===e)))}guardarRespuesta(e){return v(this,null,function*(){try{let t=K(L({},e),{fechaEntrega:Ue.fromDate(new Date(e.fechaEntrega))});return(yield ib(this.respuestasCollection,t)).id}catch(t){throw console.error("Error al guardar respuesta:",t),t}})}getRespuestasByEvaluacion(e){return new X(t=>{let r=Bl(this.respuestasCollection,Rg("evaluacionId","==",e),jl("fechaEntrega","desc")),i=ac(r,o=>{let s=o.docs.map(a=>{let u=a.data();return K(L({id:a.id},u),{fechaEntrega:u.fechaEntrega?.toDate()})});t.next(s)},o=>{t.error(o)});return()=>i()})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};function Rq(n,e){if(n&1&&(I(0,"option",35),C(1),_()),n&2){let t=e.$implicit;U("value",t),D(),J(t)}}function Mq(n,e){if(n&1){let t=Ft();I(0,"button",36),he("click",function(){tt(t);let i=ne();return nt(i.limpiarFiltros())}),C(1," Limpiar filtros "),_()}}function Pq(n,e){n&1&&(I(0,"div",37)(1,"p"),C(2,"Cargando evaluaciones..."),_()())}function xq(n,e){if(n&1){let t=Ft();I(0,"button",31),he("click",function(){tt(t);let i=ne(2);return nt(i.crearNuevaEvaluacion())}),C(1," Crear Primera Evaluaci\xF3n "),_()}}function Nq(n,e){if(n&1&&(I(0,"div",38)(1,"div",39),C(2,"\u{1F4CB}"),_(),I(3,"h2"),C(4),_(),I(5,"p"),C(6),_(),te(7,xq,2,0,"button",40),_()),n&2){let t=ne();D(4),J(t.searchTerm||t.filtroEstado||t.filtroCategoria?"No se encontraron evaluaciones":"No tienes evaluaciones a\xFAn"),D(2),J(t.searchTerm||t.filtroEstado||t.filtroCategoria?"Intenta con otros criterios de b\xFAsqueda":"Comienza creando tu primera evaluaci\xF3n"),D(),U("ngIf",!t.searchTerm&&!t.filtroEstado&&!t.filtroCategoria)}}function Oq(n,e){if(n&1){let t=Ft();I(0,"div",43)(1,"div",44)(2,"h3"),C(3),_(),I(4,"span",45),C(5),_()(),I(6,"div",46)(7,"p",47),C(8),_(),I(9,"div",48)(10,"div",49)(11,"span",50),C(12,"Categor\xEDa:"),_(),I(13,"span",51),C(14),_()(),I(15,"div",49)(16,"span",50),C(17,"Puntaje m\xE1ximo:"),_(),I(18,"span",51),C(19),_()(),I(20,"div",49)(21,"span",50),C(22,"Fecha creaci\xF3n:"),_(),I(23,"span",51),C(24),_()(),I(25,"div",49)(26,"span",50),C(27,"Fecha l\xEDmite:"),_(),I(28,"span",51),C(29),_()(),I(30,"div",49)(31,"span",50),C(32,"Preguntas:"),_(),I(33,"span",51),C(34),_()()()(),I(35,"div",52)(36,"button",53),he("click",function(){let i=tt(t).$implicit,o=ne(2);return nt(o.verEstadisticas(i.id))}),C(37," \u{1F4CA} Estad\xEDsticas "),_(),I(38,"button",54),he("click",function(){let i=tt(t).$implicit,o=ne(2);return nt(o.editarEvaluacion(i.id))}),C(39," \u270F\uFE0F Editar "),_(),I(40,"button",55),he("click",function(){let i=tt(t).$implicit,o=ne(2);return nt(o.eliminarEvaluacion(i))}),C(41," \u{1F5D1}\uFE0F Eliminar "),_()()()}if(n&2){let t=e.$implicit,r=ne(2);D(3),J(t.titulo),D(),U("ngClass",r.getEstadoClass(t.estado)),D(),ge(" ",t.estado," "),D(3),J(t.descripcion),D(6),J(t.categoria),D(5),ge("",t.puntajeMaximo," pts"),D(5),J(r.formatearFecha(t.fechaCreacion)),D(5),J(r.formatearFecha(t.fechaLimite)),D(5),J((t.preguntas==null?null:t.preguntas.length)||0)}}function kq(n,e){if(n&1&&(I(0,"div",41),te(1,Oq,42,9,"div",42),_()),n&2){let t=ne();D(),U("ngForOf",t.evaluacionesFiltradas)}}var Hg=class n{evaluacionService=x(On);authService=x(Yt);router=x(Ze);evaluaciones=[];evaluacionesFiltradas=[];loading=!0;searchTerm="";filtroEstado="";filtroCategoria="";categorias=[];ngOnInit(){this.cargarEvaluaciones()}cargarEvaluaciones(){let e=this.authService.getCurrentUser();if(!e){console.log("\u274C No hay usuario autenticado"),this.router.navigate(["/login"]);return}console.log("\u{1F464} Usuario actual:",e.uid,e.email),this.loading=!0,this.evaluacionService.getEvaluacionesByUser(e.uid).subscribe({next:t=>{console.log("\u2705 Evaluaciones cargadas:",t.length),this.evaluaciones=t,this.evaluacionesFiltradas=t,this.loading=!1,this.categorias=[...new Set(t.map(r=>r.categoria))]},error:t=>{console.error("\u274C Error al cargar evaluaciones:",t),console.error("Detalles del error:",t.message),this.loading=!1}})}aplicarFiltros(){let e=[...this.evaluaciones];if(this.searchTerm.trim()){let t=this.searchTerm.toLowerCase();e=e.filter(r=>r.titulo.toLowerCase().includes(t)||r.descripcion.toLowerCase().includes(t)||r.categoria.toLowerCase().includes(t))}this.filtroEstado&&(e=e.filter(t=>t.estado===this.filtroEstado)),this.filtroCategoria&&(e=e.filter(t=>t.categoria===this.filtroCategoria)),this.evaluacionesFiltradas=e}onSearchChange(){this.aplicarFiltros()}onEstadoChange(){this.aplicarFiltros()}onCategoriaChange(){this.aplicarFiltros()}limpiarFiltros(){this.searchTerm="",this.filtroEstado="",this.filtroCategoria="",this.evaluacionesFiltradas=[...this.evaluaciones]}crearNuevaEvaluacion(){this.router.navigate(["/evaluaciones/nueva"])}editarEvaluacion(e){e&&this.router.navigate(["/evaluaciones/editar",e])}eliminarEvaluacion(e){return v(this,null,function*(){if(!(!e.id||!confirm(`\xBFEst\xE1s seguro de eliminar la evaluaci\xF3n "${e.titulo}"?`)))try{yield this.evaluacionService.eliminarEvaluacion(e.id)}catch(r){console.error("Error al eliminar:",r),alert("Error al eliminar la evaluaci\xF3n")}})}verEstadisticas(e){e&&this.router.navigate(["/evaluaciones/estadisticas",e])}getEstadoClass(e){return{activa:"estado-activa",cerrada:"estado-cerrada",borrador:"estado-borrador"}[e]||""}formatearFecha(e){return new Date(e).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})}logout(){return v(this,null,function*(){try{yield this.authService.logout(),this.router.navigate(["/login"])}catch(e){console.error("Error al cerrar sesi\xF3n:",e)}})}get userName(){return this.authService.getCurrentUser()?.displayName||"Usuario"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=dt({type:n,selectors:[["app-evaluaciones-list"]],decls:49,vars:10,consts:[[1,"evaluaciones-container"],[1,"header"],[1,"header-content"],[1,"header-left"],["viewBox","0 0 50 50","xmlns","http://www.w3.org/2000/svg",1,"header-icon"],["x","10","y","5","width","30","height","40","rx","2","fill","white","opacity","0.9"],["x","15","y","12","width","20","height","1.5","rx","0.75","fill","white"],["x","15","y","17","width","20","height","1.5","rx","0.75","fill","white"],["x","15","y","22","width","15","height","1.5","rx","0.75","fill","white"],["cx","25","cy","32","r","7","fill","white"],["d","M 21 32 L 24 35 L 29 29","stroke","#667eea","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","fill","none"],[1,"animate-slide-in"],[1,"user-info"],[1,"user-avatar"],[1,"btn","btn-secondary",3,"click"],["width","16","height","16","viewBox","0 0 16 16","fill","none"],["d","M6 14H3C2.44772 14 2 13.5523 2 13V3C2 2.44772 2.44772 2 3 2H6","stroke","currentColor","stroke-width","2","stroke-linecap","round"],["d","M11 11L14 8M14 8L11 5M14 8H6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"content"],[1,"toolbar"],[1,"search-box"],["type","text","placeholder","Buscar por t\xEDtulo, descripci\xF3n o categor\xEDa...",1,"search-input",3,"ngModelChange","ngModel"],[1,"search-icon"],[1,"filters"],[1,"filter-select",3,"ngModelChange","ngModel"],["value",""],["value","activa"],["value","borrador"],["value","cerrada"],[3,"value",4,"ngFor","ngForOf"],["class","btn btn-link",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],["class","loading",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","evaluaciones-grid",4,"ngIf"],[3,"value"],[1,"btn","btn-link",3,"click"],[1,"loading"],[1,"empty-state"],[1,"empty-icon"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"evaluaciones-grid"],["class","evaluacion-card",4,"ngFor","ngForOf"],[1,"evaluacion-card"],[1,"card-header"],[1,"estado-badge",3,"ngClass"],[1,"card-body"],[1,"descripcion"],[1,"info-grid"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"card-actions"],[1,"btn","btn-small","btn-info",3,"click"],[1,"btn","btn-small","btn-secondary",3,"click"],[1,"btn","btn-small","btn-danger",3,"click"]],template:function(t,r){t&1&&(I(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3),un(),I(4,"svg",4),be(5,"rect",5)(6,"rect",6)(7,"rect",7)(8,"rect",8)(9,"circle",9)(10,"path",10),_(),ln(),I(11,"h1",11),C(12,"Evaluaciones Online"),_()(),I(13,"div",12)(14,"div",13),C(15),_(),I(16,"span"),C(17),_(),I(18,"button",14),he("click",function(){return r.logout()}),un(),I(19,"svg",15),be(20,"path",16)(21,"path",17),_(),C(22," Cerrar Sesi\xF3n "),_()()()(),ln(),I(23,"div",18)(24,"div",19)(25,"div",20)(26,"input",21),Br("ngModelChange",function(o){return Ri(r.searchTerm,o)||(r.searchTerm=o),o}),he("ngModelChange",function(){return r.onSearchChange()}),_(),I(27,"span",22),C(28,"\u{1F50D}"),_()(),I(29,"div",23)(30,"select",24),Br("ngModelChange",function(o){return Ri(r.filtroEstado,o)||(r.filtroEstado=o),o}),he("ngModelChange",function(){return r.onEstadoChange()}),I(31,"option",25),C(32,"Todos los estados"),_(),I(33,"option",26),C(34,"Activa"),_(),I(35,"option",27),C(36,"Borrador"),_(),I(37,"option",28),C(38,"Cerrada"),_()(),I(39,"select",24),Br("ngModelChange",function(o){return Ri(r.filtroCategoria,o)||(r.filtroCategoria=o),o}),he("ngModelChange",function(){return r.onCategoriaChange()}),I(40,"option",25),C(41,"Todas las categor\xEDas"),_(),te(42,Rq,2,2,"option",29),_(),te(43,Mq,2,0,"button",30),_(),I(44,"button",31),he("click",function(){return r.crearNuevaEvaluacion()}),C(45," \u2795 Nueva Evaluaci\xF3n "),_()(),te(46,Pq,3,0,"div",32)(47,Nq,8,3,"div",33)(48,kq,2,1,"div",34),_()()),t&2&&(D(15),J(r.userName.charAt(0).toUpperCase()),D(2),J(r.userName),D(9),jr("ngModel",r.searchTerm),D(4),jr("ngModel",r.filtroEstado),D(9),jr("ngModel",r.filtroCategoria),D(3),U("ngForOf",r.categorias),D(),U("ngIf",r.searchTerm||r.filtroEstado||r.filtroCategoria),D(3),U("ngIf",r.loading),D(),U("ngIf",!r.loading&&r.evaluacionesFiltradas.length===0),D(),U("ngIf",!r.loading&&r.evaluacionesFiltradas.length>0))},dependencies:[Lt,bu,Mn,pn,Bg,oo,so,Nn,Ir,Er,Zl],styles:['.evaluaciones-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#f5f7fa;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:20px 0;box-shadow:0 4px 12px #00000026;position:relative;overflow:hidden}.header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;right:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 1px,transparent 1px);background-size:40px 40px;animation:_ngcontent-%COMP%_movePattern 15s linear infinite}@keyframes _ngcontent-%COMP%_movePattern{0%{transform:translate(0) rotate(0)}to{transform:translate(40px,40px) rotate(360deg)}}.header-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;justify-content:space-between;align-items:center;position:relative;z-index:1}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.header-icon[_ngcontent-%COMP%]{width:40px;height:40px;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px}.animate-slide-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInFromLeft .6s ease-out}@keyframes _ngcontent-%COMP%_slideInFromLeft{0%{opacity:0;transform:translate(-30px)}to{opacity:1;transform:translate(0)}}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;animation:_ngcontent-%COMP%_slideInFromRight .6s ease-out}@keyframes _ngcontent-%COMP%_slideInFromRight{0%{opacity:0;transform:translate(30px)}to{opacity:1;transform:translate(0)}}.user-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:#ffffff4d;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px;border:2px solid white;animation:_ngcontent-%COMP%_bounceIn .8s ease-out}@keyframes _ngcontent-%COMP%_bounceIn{0%{opacity:0;transform:scale(.3)}50%{transform:scale(1.05)}70%{transform:scale(.9)}to{opacity:1;transform:scale(1)}}.content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:30px 20px}.toolbar[_ngcontent-%COMP%]{display:flex;gap:15px;margin-bottom:30px;flex-wrap:wrap;align-items:center;animation:_ngcontent-%COMP%_slideUp .6s ease-out .2s both}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.search-box[_ngcontent-%COMP%]{position:relative;flex:1;min-width:250px}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 40px 12px 16px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px;transition:all .3s ease;background:#fff}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a;transform:translateY(-1px)}.search-icon[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);color:#999;transition:color .3s}.search-input[_ngcontent-%COMP%]:focus ~ .search-icon[_ngcontent-%COMP%]{color:#667eea}.filters[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}.filter-select[_ngcontent-%COMP%]{padding:10px 14px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px;background:#fff;cursor:pointer;transition:all .3s ease}.filter-select[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 2px 8px #667eea26}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#ffffff4d;transform:translate(-50%,-50%);transition:width .6s,height .6s}.btn[_ngcontent-%COMP%]:active:before{width:300px;height:300px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 6px #667eea33}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #667eea66}.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#667eea;border:2px solid #667eea}.btn-secondary[_ngcontent-%COMP%]:hover{background:#667eea;color:#fff;box-shadow:0 4px 12px #667eea4d}.btn-link[_ngcontent-%COMP%]{background:transparent;color:#667eea;text-decoration:underline}.btn-small[_ngcontent-%COMP%]{padding:8px 12px;font-size:12px}.btn-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db,#2980b9);color:#fff;box-shadow:0 4px 6px #3498db33}.btn-info[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #3498db66}.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c,#c0392b);color:#fff;box-shadow:0 4px 6px #e74c3c33}.btn-danger[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #e74c3c66}.loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.loading[_ngcontent-%COMP%]:after{content:"";display:block;width:50px;height:50px;margin:20px auto;border:4px solid #f3f3f3;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 20px;animation:_ngcontent-%COMP%_fadeIn .8s ease-out}.empty-icon[_ngcontent-%COMP%]{font-size:80px;margin-bottom:20px;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-20px)}}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:10px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:30px}.evaluaciones-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px}.evaluacion-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden;transition:all .3s ease;animation:_ngcontent-%COMP%_cardSlideUp .5s ease-out backwards}.evaluacion-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.evaluacion-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.evaluacion-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.evaluacion-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.evaluacion-card[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}.evaluacion-card[_ngcontent-%COMP%]:nth-child(6){animation-delay:.6s}@keyframes _ngcontent-%COMP%_cardSlideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.evaluacion-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px) scale(1.02);box-shadow:0 8px 24px #667eea33}.card-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #f0f0f0;display:flex;justify-content:space-between;align-items:start;gap:10px;background:linear-gradient(to right,rgba(102,126,234,.02),transparent)}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333;font-size:18px;flex:1;transition:color .3s ease}.evaluacion-card[_ngcontent-%COMP%]:hover   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#667eea}.estado-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;transition:all .3s ease;box-shadow:0 2px 4px #0000001a}.estado-badge[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 4px 8px #00000026}.estado-activa[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4edda,#c3e6cb);color:#155724}.estado-cerrada[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8d7da,#f5c6cb);color:#721c24}.estado-borrador[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3cd,#ffeaa7);color:#856404}.card-body[_ngcontent-%COMP%]{padding:20px}.descripcion[_ngcontent-%COMP%]{color:#666;margin-bottom:20px;line-height:1.5;transition:color .3s ease}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;padding:8px;border-radius:6px;background:#667eea08;transition:all .3s ease}.info-item[_ngcontent-%COMP%]:hover{background:#667eea14;transform:translate(3px)}.info-label[_ngcontent-%COMP%]{font-size:12px;color:#999;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.info-value[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:600}.card-actions[_ngcontent-%COMP%]{padding:15px 20px;border-top:1px solid #f0f0f0;display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap;background:#f8f9fa80}.card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:80px}@media (max-width: 768px){.toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-box[_ngcontent-%COMP%]{width:100%}.filters[_ngcontent-%COMP%]{flex-direction:column}.filter-select[_ngcontent-%COMP%]{width:100%}.evaluaciones-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:15px;text-align:center}}']})};function Fq(n,e){n&1&&(I(0,"span",38),C(1," El t\xEDtulo debe tener al menos 3 caracteres "),_())}function Lq(n,e){n&1&&(I(0,"span",38),C(1," La categor\xEDa es obligatoria "),_())}function Vq(n,e){n&1&&(I(0,"span",38),C(1," La descripci\xF3n debe tener al menos 10 caracteres "),_())}function Uq(n,e){n&1&&(I(0,"span",38),C(1," La fecha l\xEDmite es obligatoria "),_())}function jq(n,e){if(n&1){let t=Ft();I(0,"button",51),he("click",function(){tt(t);let i=ne().index,o=ne();return nt(o.eliminarPregunta(i))}),C(1," \u{1F5D1}\uFE0F Eliminar "),_()}}function Bq(n,e){n&1&&(I(0,"span",38),C(1," La pregunta debe tener al menos 5 caracteres "),_())}function $q(n,e){n&1&&(I(0,"span",38),C(1," Debes agregar las opciones "),_())}function Hq(n,e){if(n&1&&(I(0,"div",13)(1,"label",42),C(2,"Opciones (una por l\xEDnea) *"),_(),be(3,"textarea",52),te(4,$q,2,0,"span",16),_()),n&2){let t,r,i=ne(),o=i.$implicit,s=i.index;D(),U("for","opciones-"+s),D(2),ke("error",((t=o.get("opciones"))==null?null:t.invalid)&&((t=o.get("opciones"))==null?null:t.touched)),U("id","opciones-"+s),D(),U("ngIf",((r=o.get("opciones"))==null?null:r.invalid)&&((r=o.get("opciones"))==null?null:r.touched))}}function zq(n,e){n&1&&(I(0,"span",38),C(1," La respuesta correcta es obligatoria "),_())}function qq(n,e){if(n&1){let t=Ft();I(0,"div",39)(1,"div",40)(2,"h3"),C(3),_(),te(4,jq,2,0,"button",41),_(),I(5,"div",13)(6,"label",42),C(7,"Texto de la Pregunta *"),_(),be(8,"textarea",43),te(9,Bq,2,0,"span",16),_(),I(10,"div",12)(11,"div",13)(12,"label",42),C(13,"Tipo de Pregunta *"),_(),I(14,"select",44)(15,"option",45),C(16,"Opci\xF3n M\xFAltiple"),_(),I(17,"option",46),C(18,"Verdadero/Falso"),_(),I(19,"option",47),C(20,"Respuesta Corta"),_()()(),I(21,"div",13)(22,"label",42),C(23,"Puntaje *"),_(),I(24,"input",48),he("change",function(){tt(t);let i=ne();return nt(i.onPuntajeChange())}),_()()(),te(25,Hq,5,5,"div",49),I(26,"div",13)(27,"label",42),C(28,"Respuesta Correcta *"),_(),be(29,"input",50),te(30,zq,2,0,"span",16),_()()}if(n&2){let t,r,i,o,s,a,u,l=e.$implicit,h=e.index,p=ne();U("formGroupName",h),D(3),ge("Pregunta ",h+1),D(),U("ngIf",p.preguntas.length>1),D(2),U("for","texto-"+h),D(2),ke("error",((t=l.get("texto"))==null?null:t.invalid)&&((t=l.get("texto"))==null?null:t.touched)),U("id","texto-"+h),D(),U("ngIf",((r=l.get("texto"))==null?null:r.invalid)&&((r=l.get("texto"))==null?null:r.touched)),D(3),U("for","tipo-"+h),D(2),U("id","tipo-"+h),D(8),U("for","puntaje-"+h),D(2),ke("error",((i=l.get("puntaje"))==null?null:i.invalid)&&((i=l.get("puntaje"))==null?null:i.touched)),U("id","puntaje-"+h),D(),U("ngIf",((o=l.get("tipo"))==null?null:o.value)==="opcion-multiple"),D(2),U("for","respuesta-"+h),D(2),ke("error",((s=l.get("respuestaCorrecta"))==null?null:s.invalid)&&((s=l.get("respuestaCorrecta"))==null?null:s.touched)),U("id","respuesta-"+h)("placeholder",((a=l.get("tipo"))==null?null:a.value)==="opcion-multiple"?"Escribe la opci\xF3n correcta exactamente como aparece arriba":"Escribe la respuesta correcta"),D(),U("ngIf",((u=l.get("respuestaCorrecta"))==null?null:u.invalid)&&((u=l.get("respuestaCorrecta"))==null?null:u.touched))}}function Gq(n,e){n&1&&(I(0,"div",53)(1,"p"),C(2,"No hay preguntas. Agrega al menos una pregunta."),_()())}function Wq(n,e){if(n&1&&(I(0,"div",38),C(1),_()),n&2){let t=ne();D(),ge(" ",t.errorMessage," ")}}var ed=class n{fb=x(mc);evaluacionService=x(On);authService=x(Yt);router=x(Ze);route=x(Vt);evaluacionForm;isEditMode=!1;evaluacionId=null;loading=!1;errorMessage="";constructor(){this.evaluacionForm=this.fb.group({titulo:["",[Ie.required,Ie.minLength(3)]],descripcion:["",[Ie.required,Ie.minLength(10)]],categoria:["",Ie.required],fechaLimite:["",Ie.required],puntajeMaximo:[0,[Ie.required,Ie.min(1)]],estado:["borrador",Ie.required],preguntas:this.fb.array([])})}ngOnInit(){this.evaluacionId=this.route.snapshot.paramMap.get("id"),this.evaluacionId?(this.isEditMode=!0,this.cargarEvaluacion()):this.agregarPregunta()}get preguntas(){return this.evaluacionForm.get("preguntas")}crearPreguntaForm(e){return this.fb.group({id:[e?.id||this.generarId()],texto:[e?.texto||"",[Ie.required,Ie.minLength(5)]],tipo:[e?.tipo||"opcion-multiple",Ie.required],opciones:[e?.opciones?.join(`
`)||"",Ie.required],respuestaCorrecta:[e?.respuestaCorrecta||"",Ie.required],puntaje:[e?.puntaje||1,[Ie.required,Ie.min(.5)]]})}agregarPregunta(){this.preguntas.push(this.crearPreguntaForm()),this.calcularPuntajeMaximo()}eliminarPregunta(e){this.preguntas.length>1?(this.preguntas.removeAt(e),this.calcularPuntajeMaximo()):alert("Debe haber al menos una pregunta")}calcularPuntajeMaximo(){let e=0;this.preguntas.controls.forEach(t=>{e+=Number(t.get("puntaje")?.value||0)}),this.evaluacionForm.patchValue({puntajeMaximo:e})}onPuntajeChange(){this.calcularPuntajeMaximo()}cargarEvaluacion(){this.evaluacionId&&(this.loading=!0,this.evaluacionService.getEvaluacionById(this.evaluacionId).subscribe({next:e=>{if(e){for(;this.preguntas.length;)this.preguntas.removeAt(0);e.preguntas?.forEach(i=>{this.preguntas.push(this.crearPreguntaForm(i))});let t=new Date(e.fechaLimite),r=this.formatearFechaParaInput(t);this.evaluacionForm.patchValue({titulo:e.titulo,descripcion:e.descripcion,categoria:e.categoria,fechaLimite:r,puntajeMaximo:e.puntajeMaximo,estado:e.estado})}this.loading=!1},error:e=>{console.error("Error al cargar evaluaci\xF3n:",e),this.errorMessage="Error al cargar la evaluaci\xF3n",this.loading=!1}}))}onSubmit(){return v(this,null,function*(){if(this.evaluacionForm.invalid){this.errorMessage="Por favor, completa todos los campos correctamente.",this.marcarCamposComoTocados();return}let e=this.authService.getCurrentUser();if(!e){this.router.navigate(["/login"]);return}this.loading=!0,this.errorMessage="";try{let t=this.evaluacionForm.value,r=t.preguntas.map(o=>({id:o.id,texto:o.texto,tipo:o.tipo,opciones:o.tipo==="opcion-multiple"?o.opciones.split(`
`).filter(s=>s.trim()):void 0,respuestaCorrecta:o.respuestaCorrecta,puntaje:Number(o.puntaje)})),i={titulo:t.titulo,descripcion:t.descripcion,categoria:t.categoria,fechaCreacion:this.isEditMode?new Date:new Date,fechaLimite:new Date(t.fechaLimite),puntajeMaximo:Number(t.puntajeMaximo),estado:t.estado,userId:e.uid,preguntas:r};this.isEditMode&&this.evaluacionId?yield this.evaluacionService.actualizarEvaluacion(this.evaluacionId,i):yield this.evaluacionService.crearEvaluacion(i),this.router.navigate(["/evaluaciones"])}catch(t){console.error("Error al guardar:",t),this.errorMessage="Error al guardar la evaluaci\xF3n. Int\xE9ntalo de nuevo."}finally{this.loading=!1}})}cancelar(){this.router.navigate(["/evaluaciones"])}marcarCamposComoTocados(){Object.keys(this.evaluacionForm.controls).forEach(e=>{this.evaluacionForm.get(e)?.markAsTouched()}),this.preguntas.controls.forEach(e=>{Object.keys(e.controls).forEach(t=>{e.get(t)?.markAsTouched()})})}generarId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}formatearFechaParaInput(e){let t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),s=String(e.getMinutes()).padStart(2,"0");return`${t}-${r}-${i}T${o}:${s}`}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=dt({type:n,selectors:[["app-evaluacion-form"]],decls:70,vars:19,consts:[[1,"form-container"],[1,"form-header","animate-slide-down"],[1,"header-title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"form-icon"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["points","10 9 9 9 8 9"],[1,"btn","btn-secondary",3,"click"],[1,"evaluacion-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-row"],[1,"form-group"],["for","titulo"],["type","text","id","titulo","formControlName","titulo","placeholder","Ej: Examen de Matem\xE1ticas - Unidad 1"],["class","error-message",4,"ngIf"],["for","categoria"],["type","text","id","categoria","formControlName","categoria","placeholder","Ej: Matem\xE1ticas, Historia, Ciencias"],["for","descripcion"],["id","descripcion","formControlName","descripcion","rows","3","placeholder","Describe el contenido y objetivos de esta evaluaci\xF3n..."],["for","fechaLimite"],["type","datetime-local","id","fechaLimite","formControlName","fechaLimite"],["for","estado"],["id","estado","formControlName","estado"],["value","borrador"],["value","activa"],["value","cerrada"],["for","puntajeMaximo"],["type","number","id","puntajeMaximo","formControlName","puntajeMaximo","readonly","",1,"readonly-input"],[1,"section-header"],["type","button",1,"btn","btn-success",3,"click"],["formArrayName","preguntas",1,"preguntas-list"],["class","pregunta-card",3,"formGroupName",4,"ngFor","ngForOf"],["class","empty-preguntas",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error-message"],[1,"pregunta-card",3,"formGroupName"],[1,"pregunta-header"],["type","button","class","btn btn-danger btn-small",3,"click",4,"ngIf"],[3,"for"],["formControlName","texto","rows","2","placeholder","Escribe la pregunta...",3,"id"],["formControlName","tipo",3,"id"],["value","opcion-multiple"],["value","verdadero-falso"],["value","respuesta-corta"],["type","number","formControlName","puntaje","step","0.5","min","0.5",3,"change","id"],["class","form-group",4,"ngIf"],["type","text","formControlName","respuestaCorrecta",3,"id","placeholder"],["type","button",1,"btn","btn-danger","btn-small",3,"click"],["formControlName","opciones","rows","4","placeholder",`Opci\xF3n 1
Opci\xF3n 2
Opci\xF3n 3
Opci\xF3n 4`,3,"id"],[1,"empty-preguntas"]],template:function(t,r){if(t&1&&(I(0,"div",0)(1,"div",1)(2,"div",2),un(),I(3,"svg",3),be(4,"path",4)(5,"polyline",5)(6,"line",6)(7,"line",7)(8,"polyline",8),_(),ln(),I(9,"h1"),C(10),_()(),I(11,"button",9),he("click",function(){return r.cancelar()}),C(12,"\u2190 Volver"),_()(),I(13,"form",10),he("ngSubmit",function(){return r.onSubmit()}),I(14,"div",11)(15,"h2"),C(16,"Informaci\xF3n General"),_(),I(17,"div",12)(18,"div",13)(19,"label",14),C(20,"T\xEDtulo de la Evaluaci\xF3n *"),_(),be(21,"input",15),te(22,Fq,2,0,"span",16),_(),I(23,"div",13)(24,"label",17),C(25,"Categor\xEDa *"),_(),be(26,"input",18),te(27,Lq,2,0,"span",16),_()(),I(28,"div",13)(29,"label",19),C(30,"Descripci\xF3n *"),_(),be(31,"textarea",20),te(32,Vq,2,0,"span",16),_(),I(33,"div",12)(34,"div",13)(35,"label",21),C(36,"Fecha y Hora L\xEDmite *"),_(),be(37,"input",22),te(38,Uq,2,0,"span",16),_(),I(39,"div",13)(40,"label",23),C(41,"Estado *"),_(),I(42,"select",24)(43,"option",25),C(44,"Borrador"),_(),I(45,"option",26),C(46,"Activa"),_(),I(47,"option",27),C(48,"Cerrada"),_()()(),I(49,"div",13)(50,"label",28),C(51,"Puntaje M\xE1ximo"),_(),be(52,"input",29),I(53,"small"),C(54,"Se calcula autom\xE1ticamente seg\xFAn las preguntas"),_()()()(),I(55,"div",11)(56,"div",30)(57,"h2"),C(58,"Preguntas"),_(),I(59,"button",31),he("click",function(){return r.agregarPregunta()}),C(60," \u2795 Agregar Pregunta "),_()(),I(61,"div",32),te(62,qq,31,21,"div",33)(63,Gq,3,0,"div",34),_()(),te(64,Wq,2,1,"div",16),I(65,"div",35)(66,"button",36),he("click",function(){return r.cancelar()}),C(67,"Cancelar"),_(),I(68,"button",37),C(69),_()()()()),t&2){let i,o,s,a,u,l,h,p;D(10),J(r.isEditMode?"Editar Evaluaci\xF3n":"Nueva Evaluaci\xF3n"),D(3),U("formGroup",r.evaluacionForm),D(8),ke("error",((i=r.evaluacionForm.get("titulo"))==null?null:i.invalid)&&((i=r.evaluacionForm.get("titulo"))==null?null:i.touched)),D(),U("ngIf",((o=r.evaluacionForm.get("titulo"))==null?null:o.invalid)&&((o=r.evaluacionForm.get("titulo"))==null?null:o.touched)),D(4),ke("error",((s=r.evaluacionForm.get("categoria"))==null?null:s.invalid)&&((s=r.evaluacionForm.get("categoria"))==null?null:s.touched)),D(),U("ngIf",((a=r.evaluacionForm.get("categoria"))==null?null:a.invalid)&&((a=r.evaluacionForm.get("categoria"))==null?null:a.touched)),D(4),ke("error",((u=r.evaluacionForm.get("descripcion"))==null?null:u.invalid)&&((u=r.evaluacionForm.get("descripcion"))==null?null:u.touched)),D(),U("ngIf",((l=r.evaluacionForm.get("descripcion"))==null?null:l.invalid)&&((l=r.evaluacionForm.get("descripcion"))==null?null:l.touched)),D(5),ke("error",((h=r.evaluacionForm.get("fechaLimite"))==null?null:h.invalid)&&((h=r.evaluacionForm.get("fechaLimite"))==null?null:h.touched)),D(),U("ngIf",((p=r.evaluacionForm.get("fechaLimite"))==null?null:p.invalid)&&((p=r.evaluacionForm.get("fechaLimite"))==null?null:p.touched)),D(24),U("ngForOf",r.preguntas.controls),D(),U("ngIf",r.preguntas.length===0),D(),U("ngIf",r.errorMessage),D(4),U("disabled",r.loading||r.evaluacionForm.invalid),D(),ge(" ",r.loading?"Guardando...":r.isEditMode?"Actualizar Evaluaci\xF3n":"Crear Evaluaci\xF3n"," ")}},dependencies:[Lt,Mn,pn,vc,fc,oo,so,Nn,mb,Ir,Er,hc,yb,io,_s,pc,gc],styles:['.form-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f5f7fa,#e9ecef);padding:30px 20px;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.form-header[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto 30px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}.animate-slide-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .6s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}.header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.form-icon[_ngcontent-%COMP%]{width:40px;height:40px;color:#667eea;animation:_ngcontent-%COMP%_bounce 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-8px)}}.form-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;font-size:32px;margin:0}.evaluacion-form[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.form-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:30px;margin-bottom:20px;box-shadow:0 2px 8px #0000001a;animation:_ngcontent-%COMP%_slideUp .6s ease-out backwards;transition:all .3s ease}.form-section[_ngcontent-%COMP%]:hover{box-shadow:0 4px 20px #667eea26}.form-section[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.form-section[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.form-section[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;font-size:22px;margin:0 0 25px;padding-bottom:15px;border-bottom:2px solid #f0f0f0;position:relative}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-2px;left:0;width:60px;height:2px;background:linear-gradient(to right,#667eea,#764ba2);animation:_ngcontent-%COMP%_expandWidth .6s ease-out}@keyframes _ngcontent-%COMP%_expandWidth{0%{width:0}to{width:60px}}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px;padding-bottom:15px;border-bottom:2px solid #f0f0f0}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;padding:0;border:none}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:20px;animation:_ngcontent-%COMP%_fadeInUp .5s ease-out backwards}.form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.form-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#333;font-weight:600;font-size:14px;transition:color .3s ease}.form-group[_ngcontent-%COMP%]:focus-within   label[_ngcontent-%COMP%]{color:#667eea}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px;font-family:inherit;transition:all .3s ease;background:#fff}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a;transform:translateY(-2px)}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.error[_ngcontent-%COMP%]{border-color:#e74c3c;animation:_ngcontent-%COMP%_shake .4s ease-in-out}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-8px)}75%{transform:translate(8px)}}.form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#999;font-size:12px;opacity:0;animation:_ngcontent-%COMP%_fadeIn .5s ease-out .3s forwards}.readonly-input[_ngcontent-%COMP%]{background-color:#f5f5f5;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{color:#e74c3c;font-size:12px;margin-top:4px;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.preguntas-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.pregunta-card[_ngcontent-%COMP%]{background:#f8f9fa;border:2px solid #e9ecef;border-radius:12px;padding:20px;transition:all .3s ease;animation:_ngcontent-%COMP%_scaleIn .4s ease-out backwards}.pregunta-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.pregunta-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.pregunta-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.pregunta-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.pregunta-card[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 4px 16px #667eea26;transform:translate(5px)}.pregunta-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:2px solid #dee2e6}.pregunta-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#495057;font-size:18px;transition:color .3s ease}.pregunta-card[_ngcontent-%COMP%]:hover   .pregunta-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#667eea}.empty-preguntas[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#999}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:15px;max-width:1000px;margin:30px auto 0}.btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#ffffff4d;transform:translate(-50%,-50%);transition:width .6s,height .6s}.btn[_ngcontent-%COMP%]:active:before{width:300px;height:300px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 6px #667eea33}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 16px #667eea66}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#667eea;border:2px solid #667eea}.btn-secondary[_ngcontent-%COMP%]:hover{background:#667eea;color:#fff;box-shadow:0 4px 12px #667eea4d}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);color:#fff;box-shadow:0 4px 6px #28a74533}.btn-success[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#218838,#1aa179);transform:translateY(-2px);box-shadow:0 6px 16px #28a74566}.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c,#c0392b);color:#fff;box-shadow:0 4px 6px #e74c3c33}.btn-danger[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#c0392b,#a93226);transform:translateY(-2px);box-shadow:0 6px 16px #e74c3c66}.btn-small[_ngcontent-%COMP%]{padding:8px 16px;font-size:14px}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}@media (max-width: 768px){.form-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.btn[_ngcontent-%COMP%]{width:100%}.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:15px}.section-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}.pregunta-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}}']})};function Kq(n,e){n&1&&(I(0,"div",12)(1,"p"),C(2,"Cargando estad\xEDsticas..."),_()())}function Yq(n,e){n&1&&(I(0,"div",22)(1,"div",23),C(2,"\u{1F4CA}"),_(),I(3,"h2"),C(4,"No hay respuestas registradas"),_(),I(5,"p"),C(6,"A\xFAn no hay estudiantes que hayan completado esta evaluaci\xF3n."),_()())}function Qq(n,e){if(n&1&&(I(0,"div",40)(1,"div",41)(2,"span",42),C(3),_(),I(4,"span",43),C(5),_()(),I(6,"div",44),be(7,"div",45),_()()),n&2){let t=e.$implicit,r=ne(3);D(3),ge("",t.rango," pts"),D(2),ge("",t.cantidad," estudiantes"),D(2),An("width",r.getBarWidth(t.cantidad))}}function Jq(n,e){if(n&1&&(I(0,"tr")(1,"td"),C(2),_(),I(3,"td"),C(4),_(),I(5,"td")(6,"strong"),C(7),_(),C(8),_(),I(9,"td")(10,"span",46),C(11),_()(),I(12,"td")(13,"span",47),C(14),_()()()),n&2){let t=e.$implicit,r=ne(3);D(2),J(t.userName),D(2),J(r.formatearFecha(t.fechaEntrega)),D(3),J(r.redondear(t.puntajeObtenido)),D(),ge(" / ",r.evaluacion.puntajeMaximo),D(2),U("ngClass",t.estado==="completada"?"estado-activa":"estado-borrador"),D(),ge(" ",t.estado," "),D(2),U("ngClass",t.puntajeObtenido>=r.evaluacion.puntajeMaximo*.6?"success":"danger"),D(),ge(" ",r.redondear(t.puntajeObtenido/r.evaluacion.puntajeMaximo*100),"% ")}}function Zq(n,e){if(n&1&&(I(0,"div",24)(1,"div",25)(2,"h3"),C(3,"\u{1F4C8} Resumen General"),_(),I(4,"div",26)(5,"div",27)(6,"span",28),C(7,"Total de respuestas:"),_(),I(8,"span",29),C(9),_()(),I(10,"div",27)(11,"span",28),C(12,"Promedio general:"),_(),I(13,"span",29),C(14),_()(),I(15,"div",27)(16,"span",28),C(17,"Puntaje m\xE1s alto:"),_(),I(18,"span",30),C(19),_()(),I(20,"div",27)(21,"span",28),C(22,"Puntaje m\xE1s bajo:"),_(),I(23,"span",31),C(24),_()()()(),I(25,"div",25)(26,"h3"),C(27,"\u2713 Aprobaci\xF3n"),_(),I(28,"div",26)(29,"div",27)(30,"span",28),C(31,"Aprobados:"),_(),I(32,"span",30),C(33),_()(),I(34,"div",27)(35,"span",28),C(36,"Reprobados:"),_(),I(37,"span",31),C(38),_()()(),I(39,"div",32),be(40,"div",33)(41,"div",34),_()(),I(42,"div",35)(43,"h3"),C(44,"\u{1F4CA} Distribuci\xF3n de Puntajes"),_(),I(45,"div",36),te(46,Qq,8,4,"div",37),_()(),I(47,"div",35)(48,"h3"),C(49,"\u{1F4DD} Respuestas Individuales"),_(),I(50,"div",38)(51,"table")(52,"thead")(53,"tr")(54,"th"),C(55,"Estudiante"),_(),I(56,"th"),C(57,"Fecha de Entrega"),_(),I(58,"th"),C(59,"Puntaje"),_(),I(60,"th"),C(61,"Estado"),_(),I(62,"th"),C(63,"Porcentaje"),_()()(),I(64,"tbody"),te(65,Jq,15,8,"tr",39),_()()()()()),n&2){let t=ne(2);D(9),J(t.estadisticas.totalRespuestas),D(5),Ai("",t.redondear(t.estadisticas.promedioGeneral)," / ",t.evaluacion.puntajeMaximo),D(5),J(t.redondear(t.estadisticas.puntajeMaximo)),D(5),J(t.redondear(t.estadisticas.puntajeMinimo)),D(9),Ai("",t.estadisticas.aprobados," (",t.redondear(t.estadisticas.porcentajeAprobacion),"%)"),D(5),Ai("",t.estadisticas.reprobados," (",t.redondear(100-t.estadisticas.porcentajeAprobacion),"%)"),D(2),An("width",t.estadisticas.porcentajeAprobacion+"%"),D(),An("width",100-t.estadisticas.porcentajeAprobacion+"%"),D(5),U("ngForOf",t.estadisticas.distribucionPuntajes),D(19),U("ngForOf",t.respuestas)}}function Xq(n,e){if(n&1&&(I(0,"div")(1,"div",13)(2,"h2"),C(3),_(),I(4,"p",14),C(5),_(),I(6,"div",15)(7,"div",16)(8,"span",17),C(9,"Categor\xEDa:"),_(),I(10,"span",18),C(11),_()(),I(12,"div",16)(13,"span",17),C(14,"Estado:"),_(),I(15,"span",19),C(16),_()(),I(17,"div",16)(18,"span",17),C(19,"Fecha l\xEDmite:"),_(),I(20,"span",18),C(21),_()(),I(22,"div",16)(23,"span",17),C(24,"Puntaje m\xE1ximo:"),_(),I(25,"span",18),C(26),_()(),I(27,"div",16)(28,"span",17),C(29,"Total preguntas:"),_(),I(30,"span",18),C(31),_()()()(),te(32,Yq,7,0,"div",20)(33,Zq,66,15,"div",21),_()),n&2){let t=ne();D(3),J(t.evaluacion.titulo),D(2),J(t.evaluacion.descripcion),D(6),J(t.evaluacion.categoria),D(4),U("ngClass","estado-"+t.evaluacion.estado),D(),J(t.evaluacion.estado),D(5),J(t.formatearFecha(t.evaluacion.fechaLimite)),D(5),ge("",t.evaluacion.puntajeMaximo," puntos"),D(5),J((t.evaluacion.preguntas==null?null:t.evaluacion.preguntas.length)||0),D(),U("ngIf",!t.estadisticas),D(),U("ngIf",t.estadisticas)}}var zg=class n{evaluacionService=x(On);router=x(Ze);route=x(Vt);evaluacion=null;respuestas=[];estadisticas=null;loading=!0;ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&this.cargarDatos(e)}cargarDatos(e){this.loading=!0,this.evaluacionService.getEvaluacionById(e).subscribe({next:t=>{this.evaluacion=t||null,this.evaluacionService.getRespuestasByEvaluacion(e).subscribe({next:r=>{this.respuestas=r,this.calcularEstadisticas(),this.loading=!1},error:r=>{console.error("Error al cargar respuestas:",r),this.loading=!1}})},error:t=>{console.error("Error al cargar evaluaci\xF3n:",t),this.loading=!1}})}calcularEstadisticas(){if(!this.evaluacion||this.respuestas.length===0){this.estadisticas=null;return}let e=this.respuestas.filter(y=>y.estado==="completada").map(y=>y.puntajeObtenido);if(e.length===0){this.estadisticas=null;return}let t=e.length,i=e.reduce((y,M)=>y+M,0)/t,o=Math.max(...e),s=Math.min(...e),a=this.evaluacion.puntajeMaximo*.6,u=e.filter(y=>y>=a).length,l=t-u,h=u/t*100,p=this.evaluacion.puntajeMaximo,g=[{rango:`0-${Math.floor(p*.25)}`,cantidad:e.filter(y=>y<p*.25).length},{rango:`${Math.floor(p*.25)}-${Math.floor(p*.5)}`,cantidad:e.filter(y=>y>=p*.25&&y<p*.5).length},{rango:`${Math.floor(p*.5)}-${Math.floor(p*.75)}`,cantidad:e.filter(y=>y>=p*.5&&y<p*.75).length},{rango:`${Math.floor(p*.75)}-${p}`,cantidad:e.filter(y=>y>=p*.75).length}];this.estadisticas={totalRespuestas:t,promedioGeneral:i,puntajeMaximo:o,puntajeMinimo:s,aprobados:u,reprobados:l,porcentajeAprobacion:h,distribucionPuntajes:g}}volver(){this.router.navigate(["/evaluaciones"])}formatearFecha(e){return new Date(e).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}redondear(e){return Math.round(e*100)/100}getBarWidth(e){return!this.estadisticas||this.estadisticas.totalRespuestas===0?"0%":`${e/this.estadisticas.totalRespuestas*100}%`}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=dt({type:n,selectors:[["app-estadisticas"]],decls:15,vars:2,consts:[[1,"estadisticas-container"],[1,"header"],[1,"header-content","animate-slide-down"],[1,"header-title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"stats-icon"],["x1","18","y1","20","x2","18","y2","10"],["x1","12","y1","20","x2","12","y2","4"],["x1","6","y1","20","x2","6","y2","14"],[1,"btn","btn-secondary",3,"click"],[1,"content"],["class","loading",4,"ngIf"],[4,"ngIf"],[1,"loading"],[1,"info-card"],[1,"descripcion"],[1,"info-grid"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"info-value","badge",3,"ngClass"],["class","empty-state",4,"ngIf"],["class","estadisticas-grid",4,"ngIf"],[1,"empty-state"],[1,"empty-icon"],[1,"estadisticas-grid"],[1,"stats-card"],[1,"stats-list"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value","highlight"],[1,"stat-value","success"],[1,"stat-value","danger"],[1,"progress-bar"],[1,"progress-fill","success"],[1,"progress-fill","danger"],[1,"stats-card","full-width"],[1,"distribution-chart"],["class","distribution-item",4,"ngFor","ngForOf"],[1,"respuestas-table"],[4,"ngFor","ngForOf"],[1,"distribution-item"],[1,"distribution-header"],[1,"range-label"],[1,"range-count"],[1,"distribution-bar"],[1,"bar-fill"],[1,"badge",3,"ngClass"],[3,"ngClass"]],template:function(t,r){t&1&&(I(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),un(),I(4,"svg",4),be(5,"line",5)(6,"line",6)(7,"line",7),_(),ln(),I(8,"h1"),C(9,"Estad\xEDsticas de Evaluaci\xF3n"),_()(),I(10,"button",8),he("click",function(){return r.volver()}),C(11,"\u2190 Volver a Evaluaciones"),_()()(),I(12,"div",9),te(13,Kq,3,0,"div",10)(14,Xq,34,10,"div",11),_()()),t&2&&(D(13),U("ngIf",r.loading),D(),U("ngIf",!r.loading&&r.evaluacion))},dependencies:[Lt,bu,Mn,pn],styles:['.estadisticas-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f5f7fa,#e9ecef);animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:20px 0;box-shadow:0 4px 12px #00000026;position:relative;overflow:hidden}.header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;right:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 1px,transparent 1px);background-size:30px 30px;animation:_ngcontent-%COMP%_movePattern 20s linear infinite}@keyframes _ngcontent-%COMP%_movePattern{0%{transform:translate(0) rotate(0)}to{transform:translate(30px,30px) rotate(360deg)}}.header-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px;position:relative;z-index:1}.animate-slide-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .6s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}.header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.stats-icon[_ngcontent-%COMP%]{width:36px;height:36px;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px}.content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:30px 20px}.loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.loading[_ngcontent-%COMP%]:after{content:"";display:block;width:50px;height:50px;margin:20px auto;border:4px solid #f3f3f3;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.info-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:30px;margin-bottom:30px;box-shadow:0 2px 8px #0000001a;animation:_ngcontent-%COMP%_slideUp .6s ease-out;transition:all .3s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.info-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 24px #667eea26}.info-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin:0 0 15px;font-size:24px;position:relative;padding-bottom:10px}.info-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:60px;height:3px;background:linear-gradient(to right,#667eea,#764ba2);animation:_ngcontent-%COMP%_expandWidth .8s ease-out}@keyframes _ngcontent-%COMP%_expandWidth{0%{width:0}to{width:60px}}.descripcion[_ngcontent-%COMP%]{color:#666;margin-bottom:25px;line-height:1.6}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;padding:12px;border-radius:8px;background:#667eea08;transition:all .3s ease;animation:_ngcontent-%COMP%_fadeInUp .5s ease-out backwards}.info-item[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.info-item[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.info-item[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.info-item[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.info-item[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.info-item[_ngcontent-%COMP%]:hover{background:#667eea14;transform:translateY(-3px);box-shadow:0 4px 12px #667eea1a}.info-label[_ngcontent-%COMP%]{font-size:13px;color:#999;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.info-value[_ngcontent-%COMP%]{font-size:15px;color:#333;font-weight:600}.badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;transition:all .3s ease;box-shadow:0 2px 4px #0000001a}.badge[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 4px 8px #00000026}.estado-activa[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4edda,#c3e6cb);color:#155724}.estado-cerrada[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8d7da,#f5c6cb);color:#721c24}.estado-borrador[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff3cd,#ffeaa7);color:#856404}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:80px 20px;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;animation:_ngcontent-%COMP%_fadeIn .8s ease-out}.empty-icon[_ngcontent-%COMP%]{font-size:80px;margin-bottom:20px;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-20px)}}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:10px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.estadisticas-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.stats-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:25px;box-shadow:0 2px 8px #0000001a;transition:all .3s ease;animation:_ngcontent-%COMP%_slideUp .5s ease-out backwards}.stats-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.stats-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.stats-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.stats-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.stats-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 24px #667eea26;transform:translateY(-5px)}.stats-card.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.stats-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:#333;font-size:18px;padding-bottom:15px;border-bottom:2px solid #f0f0f0;position:relative}.stats-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-2px;left:0;width:40px;height:2px;background:linear-gradient(to right,#667eea,#764ba2)}.stats-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.stat-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px;background:#f8f9fa;border-radius:8px;transition:all .3s ease;animation:_ngcontent-%COMP%_fadeInLeft .5s ease-out backwards}.stat-item[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.stat-item[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.stat-item[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.stat-item[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.stat-item[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}.stat-item[_ngcontent-%COMP%]:hover{background:#667eea14;transform:translate(5px)}.stat-label[_ngcontent-%COMP%]{color:#666;font-size:14px}.stat-value[_ngcontent-%COMP%]{color:#333;font-size:16px;font-weight:700;transition:transform .3s ease}.stat-item[_ngcontent-%COMP%]:hover   .stat-value[_ngcontent-%COMP%]{transform:scale(1.1)}.stat-value.highlight[_ngcontent-%COMP%]{color:#667eea}.stat-value.success[_ngcontent-%COMP%]{color:#28a745}.stat-value.danger[_ngcontent-%COMP%]{color:#e74c3c}.progress-bar[_ngcontent-%COMP%]{display:flex;height:30px;border-radius:8px;overflow:hidden;margin-top:20px;box-shadow:0 2px 4px #0000001a}.progress-fill[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;transition:width 1s ease-out;animation:_ngcontent-%COMP%_fillProgress 1.5s ease-out}@keyframes _ngcontent-%COMP%_fillProgress{0%{width:0!important}}.progress-fill[_ngcontent-%COMP%]{color:#fff;font-size:12px;font-weight:600;transition:width 1s ease-out}.progress-fill.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997)}.progress-fill.danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c,#c0392b)}.distribution-chart[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.distribution-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.distribution-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.range-label[_ngcontent-%COMP%]{font-weight:600;color:#333}.range-count[_ngcontent-%COMP%]{color:#666;font-size:14px}.distribution-bar[_ngcontent-%COMP%]{height:30px;background:#f0f0f0;border-radius:8px;overflow:hidden;box-shadow:inset 0 2px 4px #0000001a}.bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(135deg,#667eea,#764ba2);transition:width 1s ease-out;display:flex;align-items:center;padding:0 10px;animation:_ngcontent-%COMP%_fillProgress 1.5s ease-out}.respuestas-table[_ngcontent-%COMP%]{overflow-x:auto;animation:_ngcontent-%COMP%_slideUp .6s ease-out .5s backwards}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}thead[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef)}th[_ngcontent-%COMP%]{text-align:left;padding:12px;font-weight:600;color:#333;border-bottom:2px solid #667eea;text-transform:uppercase;font-size:12px;letter-spacing:.5px}td[_ngcontent-%COMP%]{padding:12px;border-bottom:1px solid #f0f0f0;color:#666;transition:all .3s ease}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#667eea0d;transform:scale(1.01)}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{color:#333}.success[_ngcontent-%COMP%]{color:#28a745;font-weight:600}.danger[_ngcontent-%COMP%]{color:#e74c3c;font-weight:600}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:#667eea4d;transform:translate(-50%,-50%);transition:width .6s,height .6s}.btn[_ngcontent-%COMP%]:active:before{width:300px;height:300px}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#667eea;border:2px solid white;box-shadow:0 2px 8px #0000001a}.btn-secondary[_ngcontent-%COMP%]:hover{background:#fffffff2;transform:translateY(-2px);box-shadow:0 4px 12px #00000026}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.estadisticas-grid[_ngcontent-%COMP%], .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}table[_ngcontent-%COMP%]{font-size:12px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px}}']})};function eG(n,e){if(n&1&&(I(0,"option",20),C(1),_()),n&2){let t=e.$implicit;U("value",t),D(),J(t)}}function tG(n,e){n&1&&(I(0,"div",21)(1,"p"),C(2,"Cargando evaluaciones disponibles..."),_()())}function nG(n,e){if(n&1&&(I(0,"div",22),C(1),_()),n&2){let t=ne();D(),ge(" ",t.errorMessage," ")}}function rG(n,e){n&1&&(I(0,"div",23)(1,"div",24),C(2,"\u{1F4ED}"),_(),I(3,"h2"),C(4,"No hay evaluaciones disponibles"),_(),I(5,"p"),C(6,"No se encontraron evaluaciones activas en este momento."),_()())}function iG(n,e){if(n&1){let t=Ft();I(0,"div",27)(1,"div",28)(2,"h3"),C(3),_(),I(4,"span",29),C(5),_()(),I(6,"div",30)(7,"p",31),C(8),_(),I(9,"div",32)(10,"div",33)(11,"span",34),C(12,"\u{1F4DD} Preguntas:"),_(),I(13,"span",35),C(14),_()(),I(15,"div",33)(16,"span",34),C(17,"\u2B50 Puntaje M\xE1ximo:"),_(),I(18,"span",35),C(19),_()(),I(20,"div",33)(21,"span",34),C(22,"\u23F0 Tiempo Restante:"),_(),I(23,"span",35),C(24),_()(),I(25,"div",33)(26,"span",34),C(27,"\u{1F4C5} Fecha L\xEDmite:"),_(),I(28,"span",35),C(29),_()()()(),I(30,"div",36)(31,"button",37),he("click",function(){let i=tt(t).$implicit,o=ne(2);return nt(o.comenzarEvaluacion(i.id))}),C(32," \u25B6\uFE0F Comenzar Evaluaci\xF3n "),_()()()}if(n&2){let t=e.$implicit,r=e.index,i=ne(2);An("animation-delay",r*.1+"s"),D(3),J(t.titulo),D(2),J(t.categoria),D(3),J(t.descripcion),D(6),J(t.preguntas.length),D(5),J(t.puntajeMaximo),D(4),ke("tiempo-critico",i.calcularTiempoRestante(t.fechaLimite).includes("m")&&!i.calcularTiempoRestante(t.fechaLimite).includes("h")),D(),ge(" ",i.calcularTiempoRestante(t.fechaLimite)," "),D(5),J(t.fechaLimite.toLocaleString())}}function oG(n,e){if(n&1&&(I(0,"div",25),te(1,iG,33,11,"div",26),_()),n&2){let t=ne();D(),U("ngForOf",t.evaluacionesFiltradas)}}function sG(n,e){if(n&1&&(I(0,"div",38),C(1),_()),n&2){let t=ne();D(),Ai(" Mostrando ",t.evaluacionesFiltradas.length," de ",t.evaluaciones.length," evaluaciones ")}}var qg=class n{constructor(e,t,r){this.evaluacionService=e;this.authService=t;this.router=r}evaluaciones=[];evaluacionesFiltradas=[];categorias=["Todas","Matem\xE1ticas","Ciencias","Lenguaje","Historia","Geograf\xEDa","Ingl\xE9s","Programaci\xF3n","Arte","M\xFAsica","Educaci\xF3n F\xEDsica","Otros"];categoriaSeleccionada="Todas";busqueda="";loading=!0;errorMessage="";currentUser=null;subscription;ngOnInit(){console.log("\u{1F393} Cargando evaluaciones disponibles para estudiantes"),this.currentUser=this.authService.getCurrentUser(),this.cargarEvaluaciones()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}cargarEvaluaciones(){this.loading=!0,this.errorMessage="",this.subscription=this.evaluacionService.getEvaluacionesActivas().subscribe({next:e=>{console.log("\u2705 Evaluaciones activas cargadas:",e.length);let t=new Date;this.evaluaciones=e.filter(r=>{let i=new Date(r.fechaLimite);return r.estado==="activa"&&i>t}),this.aplicarFiltros(),this.loading=!1},error:e=>{console.error("\u274C Error al cargar evaluaciones:",e),this.errorMessage="Error al cargar las evaluaciones disponibles",this.loading=!1}})}aplicarFiltros(){this.evaluacionesFiltradas=this.evaluaciones.filter(e=>{let t=this.categoriaSeleccionada==="Todas"||e.categoria===this.categoriaSeleccionada,r=this.busqueda===""||e.titulo.toLowerCase().includes(this.busqueda.toLowerCase())||e.descripcion.toLowerCase().includes(this.busqueda.toLowerCase());return t&&r}),console.log("\u{1F50D} Evaluaciones filtradas:",this.evaluacionesFiltradas.length)}onCategoriaChange(){this.aplicarFiltros()}onBusquedaChange(){this.aplicarFiltros()}comenzarEvaluacion(e){console.log("\u25B6\uFE0F Comenzando evaluaci\xF3n:",e),this.router.navigate(["/tomar-evaluacion",e])}calcularTiempoRestante(e){let t=new Date,i=new Date(e).getTime()-t.getTime();if(i<=0)return"Vencida";let o=Math.floor(i/(1e3*60*60*24)),s=Math.floor(i%(1e3*60*60*24)/(1e3*60*60)),a=Math.floor(i%(1e3*60*60)/(1e3*60));return o>0?`${o}d ${s}h`:s>0?`${s}h ${a}m`:`${a}m`}cerrarSesion(){this.authService.logout().then(()=>{this.router.navigate(["/login"])})}static \u0275fac=function(t){return new(t||n)(W(On),W(Yt),W(Ze))};static \u0275cmp=dt({type:n,selectors:[["app-evaluaciones-disponibles"]],decls:27,vars:9,consts:[[1,"disponibles-container"],[1,"header"],[1,"header-content"],[1,"header-left"],[1,"subtitle"],[1,"header-right"],[1,"btn","btn-logout",3,"click"],[1,"content"],[1,"filtros-section","animate-slide-down"],[1,"filtro-group"],["for","busqueda"],["type","text","id","busqueda","placeholder","Buscar por t\xEDtulo o descripci\xF3n...",1,"input-busqueda",3,"ngModelChange","input","ngModel"],["for","categoria"],["id","categoria",1,"select-categoria",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","loading",4,"ngIf"],["class","alert alert-error animate-shake",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","evaluaciones-grid",4,"ngIf"],["class","resultados-info",4,"ngIf"],[3,"value"],[1,"loading"],[1,"alert","alert-error","animate-shake"],[1,"empty-state"],[1,"empty-icon"],[1,"evaluaciones-grid"],["class","evaluacion-card animate-fade-in",3,"animation-delay",4,"ngFor","ngForOf"],[1,"evaluacion-card","animate-fade-in"],[1,"card-header"],[1,"badge","badge-categoria"],[1,"card-body"],[1,"descripcion"],[1,"info-grid"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"card-footer"],[1,"btn","btn-comenzar",3,"click"],[1,"resultados-info"]],template:function(t,r){t&1&&(I(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"h1"),C(5,"\u{1F4DA} Evaluaciones Disponibles"),_(),I(6,"p",4),C(7),_()(),I(8,"div",5)(9,"button",6),he("click",function(){return r.cerrarSesion()}),C(10," \u{1F6AA} Cerrar Sesi\xF3n "),_()()()(),I(11,"div",7)(12,"div",8)(13,"div",9)(14,"label",10),C(15,"\u{1F50D} Buscar:"),_(),I(16,"input",11),Br("ngModelChange",function(o){return Ri(r.busqueda,o)||(r.busqueda=o),o}),he("input",function(){return r.onBusquedaChange()}),_()(),I(17,"div",9)(18,"label",12),C(19,"\u{1F4C2} Categor\xEDa:"),_(),I(20,"select",13),Br("ngModelChange",function(o){return Ri(r.categoriaSeleccionada,o)||(r.categoriaSeleccionada=o),o}),he("change",function(){return r.onCategoriaChange()}),te(21,eG,2,2,"option",14),_()()(),te(22,tG,3,0,"div",15)(23,nG,2,1,"div",16)(24,rG,7,0,"div",17)(25,oG,2,1,"div",18)(26,sG,2,2,"div",19),_()()),t&2&&(D(7),ge("Bienvenido, ",r.currentUser==null?null:r.currentUser.email),D(9),jr("ngModel",r.busqueda),D(4),jr("ngModel",r.categoriaSeleccionada),D(),U("ngForOf",r.categorias),D(),U("ngIf",r.loading),D(),U("ngIf",!r.loading&&r.errorMessage),D(),U("ngIf",!r.loading&&r.evaluacionesFiltradas.length===0),D(),U("ngIf",!r.loading&&r.evaluacionesFiltradas.length>0),D(),U("ngIf",!r.loading&&r.evaluaciones.length>0))},dependencies:[Lt,Mn,pn,Bg,oo,so,Nn,Ir,Er,Zl],styles:[".disponibles-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2)}.header[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-bottom:2px solid rgba(255,255,255,.2);padding:1.5rem 2rem;animation:_ngcontent-%COMP%_slideDown .5s ease-out}.header-content[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;display:flex;justify-content:space-between;align-items:center}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:2rem;margin:0 0 .3rem;font-weight:700}.subtitle[_ngcontent-%COMP%]{color:#ffffffe6;margin:0;font-size:1rem}.btn-logout[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:2px solid rgba(255,255,255,.3)}.btn-logout[_ngcontent-%COMP%]:hover{background:#ffffff4d}.content[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:2rem}.filtros-section[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:12px;margin-bottom:2rem;display:flex;gap:1.5rem;box-shadow:0 4px 12px #0000001a}.filtro-group[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.5rem}.filtro-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:.95rem}.input-busqueda[_ngcontent-%COMP%], .select-categoria[_ngcontent-%COMP%]{padding:.75rem 1rem;border:2px solid #e0e0e0;border-radius:8px;font-size:1rem;transition:all .3s ease}.input-busqueda[_ngcontent-%COMP%]:focus, .select-categoria[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 4px #667eea1a}.loading[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:#fff;font-size:1.2rem;animation:_ngcontent-%COMP%_pulse 1.5s infinite}.alert[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-radius:8px;margin-bottom:1.5rem;font-weight:500;background:#fff}.alert-error[_ngcontent-%COMP%]{color:#c62828;border:2px solid #ef5350}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:#fff;border-radius:12px;box-shadow:0 4px 12px #0000001a}.empty-icon[_ngcontent-%COMP%]{font-size:5rem;margin-bottom:1rem;animation:_ngcontent-%COMP%_bounce 2s infinite}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1.1rem}.evaluaciones-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem;margin-bottom:2rem}.evaluacion-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;transition:all .3s ease;box-shadow:0 4px 12px #0000001a;display:flex;flex-direction:column}.evaluacion-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 12px 24px #00000026}.card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1.5rem;display:flex;justify-content:space-between;align-items:flex-start;gap:1rem}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.3rem;font-weight:700;flex:1}.badge-categoria[_ngcontent-%COMP%]{background:#ffffff40;padding:.4rem .8rem;border-radius:12px;font-size:.85rem;font-weight:600;white-space:nowrap}.card-body[_ngcontent-%COMP%]{padding:1.5rem;flex:1}.descripcion[_ngcontent-%COMP%]{color:#555;font-size:.95rem;margin-bottom:1.5rem;line-height:1.5}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.3rem}.info-label[_ngcontent-%COMP%]{font-size:.85rem;color:#666;font-weight:500}.info-value[_ngcontent-%COMP%]{font-size:1rem;color:#333;font-weight:700}.tiempo-critico[_ngcontent-%COMP%]{color:#d32f2f!important;animation:_ngcontent-%COMP%_pulse 1.5s infinite}.card-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:2px solid #f5f5f5}.btn[_ngcontent-%COMP%]{padding:.875rem 1.5rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;justify-content:center;gap:.5rem}.btn-comenzar[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 12px #667eea4d}.btn-comenzar[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #667eea66}.resultados-info[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:1rem;font-weight:600;padding:1rem;background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:8px}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-20px)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}.animate-slide-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .5s ease-out}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .6s ease-in;animation-fill-mode:both}.animate-shake[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .5s ease-in-out}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}.header-left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.filtros-section[_ngcontent-%COMP%]{flex-direction:column;padding:1rem}.evaluaciones-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.content[_ngcontent-%COMP%]{padding:1rem}}"]})};function aG(n,e){n&1&&(I(0,"div",4)(1,"p"),C(2,"Cargando evaluaci\xF3n..."),_()())}function cG(n,e){if(n&1){let t=Ft();I(0,"div",5)(1,"div",6),C(2,"\u274C"),_(),I(3,"h2"),C(4),_(),I(5,"button",7),he("click",function(){tt(t);let i=ne();return nt(i.volverAEvaluaciones())}),C(6," Volver a Evaluaciones "),_()()}if(n&2){let t=ne();D(4),J(t.errorMessage)}}function uG(n,e){if(n&1&&(I(0,"label",33),be(1,"input",34),I(2,"span",35),C(3),_()()),n&2){let t=e.$implicit,r=e.index,i=ne(2).index;D(),U("value",t)("id","pregunta-"+i+"-opcion-"+r),D(2),J(t)}}function lG(n,e){if(n&1&&(I(0,"div",31),te(1,uG,4,3,"label",32),_()),n&2){let t=ne().index,r=ne(2);D(),U("ngForOf",r.evaluacion.preguntas[t].opciones)}}function dG(n,e){n&1&&(I(0,"span",39),C(1," Esta pregunta es obligatoria "),_())}function hG(n,e){if(n&1&&(I(0,"div",36)(1,"textarea",37),C(2,"            "),_(),te(3,dG,2,0,"span",38),_()),n&2){let t,r,i=ne().$implicit;D(),ke("error",((t=i.get("respuesta"))==null?null:t.invalid)&&((t=i.get("respuesta"))==null?null:t.touched)),D(2),U("ngIf",((r=i.get("respuesta"))==null?null:r.invalid)&&((r=i.get("respuesta"))==null?null:r.touched))}}function fG(n,e){if(n&1&&(I(0,"div",24)(1,"div",25)(2,"span",26),C(3),_(),I(4,"span",27),C(5),_()(),I(6,"div",28),C(7),_(),te(8,lG,2,1,"div",29)(9,hG,4,3,"div",30),_()),n&2){let t=e.index,r=ne(2);An("animation-delay",t*.1+"s"),U("formGroupName",t),D(3),ge("Pregunta ",t+1),D(2),ge("",r.evaluacion.preguntas[t].puntaje," pts"),D(2),ge(" ",r.evaluacion.preguntas[t].texto," "),D(),U("ngIf",r.evaluacion.preguntas[t].tipo==="opcion-multiple"),D(),U("ngIf",r.evaluacion.preguntas[t].tipo==="abierta")}}function pG(n,e){if(n&1&&(I(0,"div",40),C(1),_()),n&2){let t=ne(2);D(),ge(" ",t.errorMessage," ")}}function gG(n,e){n&1&&(I(0,"span"),C(1,"\u{1F4DD} Enviar Respuestas"),_())}function mG(n,e){n&1&&(I(0,"span"),C(1,"Enviando..."),_())}function vG(n,e){if(n&1){let t=Ft();I(0,"div",8)(1,"div",9)(2,"div",10)(3,"h1"),C(4),_(),I(5,"p",11),C(6),_(),I(7,"div",12)(8,"span",13),C(9),_(),I(10,"span",14),C(11),_(),I(12,"span",15),C(13),_()()()(),I(14,"form",16),he("ngSubmit",function(){tt(t);let i=ne();return nt(i.enviarRespuestas())}),I(15,"div",17),te(16,fG,10,8,"div",18),_(),te(17,pG,2,1,"div",19),I(18,"div",20)(19,"button",21),he("click",function(){tt(t);let i=ne();return nt(i.cancelar())}),C(20," Cancelar "),_(),I(21,"button",22),te(22,gG,2,0,"span",23)(23,mG,2,0,"span",23),_()()()()}if(n&2){let t=ne();D(4),J(t.evaluacion.titulo),D(2),J(t.evaluacion.descripcion),D(3),ge("\u{1F4DA} ",t.evaluacion.categoria),D(2),ge("\u2B50 ",t.evaluacion.puntajeMaximo," puntos"),D(),ke("tiempo-critico",t.tiempoRestante.includes("0h")),D(),ge(" \u23F0 ",t.tiempoRestante," "),D(),U("formGroup",t.respuestaForm),D(2),U("ngForOf",t.respuestas.controls),D(),U("ngIf",t.errorMessage),D(2),U("disabled",t.enviando),D(2),U("disabled",t.enviando||t.respuestaForm.invalid),D(),U("ngIf",!t.enviando),D(),U("ngIf",t.enviando)}}var Gg=class n{fb=x(mc);evaluacionService=x(On);authService=x(Yt);router=x(Ze);route=x(Vt);evaluacion=null;respuestaForm;loading=!0;enviando=!1;evaluacionId=null;errorMessage="";tiempoRestante="";intervalo;constructor(){this.respuestaForm=this.fb.group({respuestas:this.fb.array([])})}ngOnInit(){this.evaluacionId=this.route.snapshot.paramMap.get("id"),this.evaluacionId?this.cargarEvaluacion():this.router.navigate(["/evaluaciones-disponibles"])}get respuestas(){return this.respuestaForm.get("respuestas")}cargarEvaluacion(){this.evaluacionId&&this.evaluacionService.getEvaluacionById(this.evaluacionId).subscribe({next:e=>{e&&e.estado==="activa"?(this.evaluacion=e,this.inicializarFormulario(),this.iniciarContador(),this.loading=!1):(this.errorMessage="Esta evaluaci\xF3n no est\xE1 disponible",this.loading=!1)},error:e=>{console.error("Error al cargar evaluaci\xF3n:",e),this.errorMessage="Error al cargar la evaluaci\xF3n",this.loading=!1}})}inicializarFormulario(){this.evaluacion&&this.evaluacion.preguntas.forEach(e=>{this.respuestas.push(this.fb.group({preguntaId:[e.id],respuesta:["",Ie.required]}))})}iniciarContador(){this.evaluacion&&(this.intervalo=setInterval(()=>{let e=new Date().getTime(),r=new Date(this.evaluacion.fechaLimite).getTime()-e;if(r<0)clearInterval(this.intervalo),this.tiempoRestante="Tiempo agotado",this.enviarRespuestas();else{let i=Math.floor(r%864e5/36e5),o=Math.floor(r%(1e3*60*60)/(1e3*60)),s=Math.floor(r%(1e3*60)/1e3);this.tiempoRestante=`${i}h ${o}m ${s}s`}},1e3))}enviarRespuestas(){return v(this,null,function*(){if(this.respuestaForm.invalid){this.errorMessage="Por favor, responde todas las preguntas.";return}let e=this.authService.getCurrentUser();if(!(!e||!this.evaluacion||!this.evaluacionId)){this.enviando=!0,this.errorMessage="";try{let t=0,r=this.respuestaForm.value.respuestas,i={};r.forEach((s,a)=>{let u=this.evaluacion.preguntas[a];i[u.id]=s.respuesta;let l=String(u.respuestaCorrecta).toLowerCase().trim(),h=String(s.respuesta).toLowerCase().trim();l===h&&(t+=u.puntaje)});let o={evaluacionId:this.evaluacionId,userId:e.uid,userName:e.email||"Estudiante",respuestas:i,puntajeObtenido:t,fechaEntrega:new Date,estado:"completada"};yield this.evaluacionService.guardarRespuesta(o),this.intervalo&&clearInterval(this.intervalo),alert(`\u2705 \xA1Respuestas enviadas exitosamente!

Tu evaluaci\xF3n ha sido guardada correctamente.`),this.router.navigate(["/evaluaciones-disponibles"])}catch(t){console.error("Error al enviar respuestas:",t),this.errorMessage="Error al enviar las respuestas. Intenta de nuevo.",this.enviando=!1}}})}cancelar(){confirm("\xBFEst\xE1s seguro de que quieres salir? Se perder\xE1n tus respuestas.")&&(this.intervalo&&clearInterval(this.intervalo),this.router.navigate(["/evaluaciones-disponibles"]))}volverAEvaluaciones(){this.intervalo&&clearInterval(this.intervalo),this.router.navigate(["/evaluaciones-disponibles"])}ngOnDestroy(){this.intervalo&&clearInterval(this.intervalo)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=dt({type:n,selectors:[["app-tomar-evaluacion"]],decls:4,vars:3,consts:[[1,"evaluacion-container"],["class","loading",4,"ngIf"],["class","error-state",4,"ngIf"],["class","evaluacion-content animate-fade-in",4,"ngIf"],[1,"loading"],[1,"error-state"],[1,"error-icon"],[1,"btn","btn-primary",3,"click"],[1,"evaluacion-content","animate-fade-in"],[1,"evaluacion-header"],[1,"header-info"],[1,"descripcion"],[1,"info-badges"],[1,"badge","badge-categoria"],[1,"badge","badge-puntaje"],[1,"badge","badge-tiempo"],[1,"respuesta-form",3,"ngSubmit","formGroup"],["formArrayName","respuestas",1,"preguntas-container"],["class","pregunta-card animate-slide-up",3,"formGroupName","animation-delay",4,"ngFor","ngForOf"],["class","alert alert-error animate-shake",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],[1,"pregunta-card","animate-slide-up",3,"formGroupName"],[1,"pregunta-header"],[1,"pregunta-numero"],[1,"pregunta-puntaje"],[1,"pregunta-texto"],["class","opciones-list",4,"ngIf"],["class","respuesta-abierta",4,"ngIf"],[1,"opciones-list"],["class","opcion-item",4,"ngFor","ngForOf"],[1,"opcion-item"],["type","radio","formControlName","respuesta",3,"value","id"],[1,"opcion-label"],[1,"respuesta-abierta"],["formControlName","respuesta","rows","4","placeholder","Escribe tu respuesta aqu\xED..."],["class","error-message",4,"ngIf"],[1,"error-message"],[1,"alert","alert-error","animate-shake"]],template:function(t,r){t&1&&(I(0,"div",0),te(1,aG,3,0,"div",1)(2,cG,7,1,"div",2)(3,vG,24,14,"div",3),_()),t&2&&(D(),U("ngIf",r.loading),D(),U("ngIf",!r.loading&&r.errorMessage&&!r.evaluacion),D(),U("ngIf",!r.loading&&r.evaluacion))},dependencies:[Lt,Mn,pn,vc,fc,Nn,vb,Er,hc,io,_s,pc,gc],styles:[".evaluacion-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:2rem;animation:_ngcontent-%COMP%_fadeIn .5s ease-in}.loading[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;animation:_ngcontent-%COMP%_fadeIn .5s ease-in}.error-state[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem;animation:_ngcontent-%COMP%_bounce 1s ease-in-out}.error-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#d32f2f;margin-bottom:2rem}.evaluacion-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:2.5rem;border-radius:16px;margin-bottom:2rem;box-shadow:0 10px 30px #667eea4d;animation:_ngcontent-%COMP%_slideDown .5s ease-out}.header-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:.5rem;font-weight:700}.descripcion[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:1.5rem;opacity:.95;line-height:1.6}.info-badges[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.badge[_ngcontent-%COMP%]{background:#fff3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:.5rem 1rem;border-radius:20px;font-size:.9rem;font-weight:600;display:inline-flex;align-items:center;gap:.3rem;transition:all .3s ease}.badge[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:translateY(-2px)}.badge-tiempo[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}.tiempo-critico[_ngcontent-%COMP%]{background:#ff52524d!important;animation:_ngcontent-%COMP%_shake .5s ease-in-out infinite}.preguntas-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;margin-bottom:2rem}.pregunta-card[_ngcontent-%COMP%]{background:#fff;border:2px solid #e0e0e0;border-radius:12px;padding:1.5rem;transition:all .3s ease;box-shadow:0 4px 6px #0000000d}.pregunta-card[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 8px 16px #667eea26;transform:translateY(-4px)}.pregunta-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:.75rem;border-bottom:2px solid #f5f5f5}.pregunta-numero[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;color:#667eea}.pregunta-puntaje[_ngcontent-%COMP%]{background:linear-gradient(135deg,gold,#ffed4e);color:#333;padding:.3rem .8rem;border-radius:12px;font-weight:600;font-size:.9rem}.pregunta-texto[_ngcontent-%COMP%]{font-size:1.1rem;color:#333;margin-bottom:1.5rem;line-height:1.6;font-weight:500}.opciones-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.opcion-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem;border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;transition:all .3s ease;background:#fafafa}.opcion-item[_ngcontent-%COMP%]:hover{border-color:#667eea;background:#f0f3ff;transform:translate(8px)}.opcion-item[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-right:1rem;width:20px;height:20px;accent-color:#667eea;cursor:pointer}.opcion-item[_ngcontent-%COMP%]:has(input:checked){border-color:#667eea;background:linear-gradient(135deg,#e8eeff,#f0f3ff);font-weight:600}.opcion-label[_ngcontent-%COMP%]{font-size:1rem;color:#333;flex:1}.respuesta-abierta[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:1rem;border:2px solid #e0e0e0;border-radius:8px;font-size:1rem;font-family:inherit;transition:all .3s ease;resize:vertical;min-height:100px}.respuesta-abierta[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 4px #667eea1a}.respuesta-abierta[_ngcontent-%COMP%]   textarea.error[_ngcontent-%COMP%]{border-color:#d32f2f}.error-message[_ngcontent-%COMP%]{color:#d32f2f;font-size:.875rem;margin-top:.5rem;display:block;animation:_ngcontent-%COMP%_shake .3s ease-in-out}.alert[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-radius:8px;margin-bottom:1.5rem;font-weight:500}.alert-error[_ngcontent-%COMP%]{background:#ffebee;color:#c62828;border:2px solid #ef5350}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;padding-top:1.5rem;border-top:2px solid #f5f5f5}.btn[_ngcontent-%COMP%]{padding:.875rem 2rem;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;gap:.5rem}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;transform:none!important}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 12px #667eea4d}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 20px #667eea66}.btn-secondary[_ngcontent-%COMP%]{background:#f5f5f5;color:#666;border:2px solid #e0e0e0}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#e0e0e0;transform:translateY(-2px)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-20px)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .6s ease-in}.animate-slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .6s ease-out;animation-fill-mode:both}.animate-shake[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .5s ease-in-out}@media (max-width: 768px){.evaluacion-container[_ngcontent-%COMP%]{padding:1rem}.evaluacion-header[_ngcontent-%COMP%]{padding:1.5rem}.header-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.info-badges[_ngcontent-%COMP%]{flex-direction:column}.badge[_ngcontent-%COMP%]{width:100%;justify-content:center}.pregunta-card[_ngcontent-%COMP%]{padding:1rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})};var Wg=class n{constructor(e,t){this.route=e;this.router=t}puntajeObtenido=0;puntajeMaximo=0;porcentaje=0;aprobado=!1;ngOnInit(){this.route.queryParams.subscribe(e=>{this.puntajeObtenido=Number(e.puntaje)||0,this.puntajeMaximo=Number(e.maximo)||0,this.puntajeMaximo>0&&(this.porcentaje=Math.round(this.puntajeObtenido/this.puntajeMaximo*100),this.aprobado=this.porcentaje>=60),console.log("\u{1F4CA} Resultado:",{puntajeObtenido:this.puntajeObtenido,puntajeMaximo:this.puntajeMaximo,porcentaje:this.porcentaje,aprobado:this.aprobado})})}volverAEvaluaciones(){this.router.navigate(["/evaluaciones-disponibles"])}getMensaje(){return this.porcentaje>=90?"\xA1Excelente! Demostraste un dominio excepcional del tema.":this.porcentaje>=75?"\xA1Muy bien! Tienes un buen entendimiento del tema.":this.porcentaje>=60?"Aprobado. Sigue practicando para mejorar.":this.porcentaje>=40?"No aprobaste. Te recomendamos revisar el material y volver a intentarlo.":"Necesitas estudiar m\xE1s el tema. No te desanimes, sigue intentando."}getIcono(){return this.porcentaje>=90?"\u{1F3C6}":this.porcentaje>=75?"\u{1F389}":this.porcentaje>=60?"\u{1F44D}":this.porcentaje>=40?"\u{1F4DA}":"\u{1F4AA}"}getEstadoClase(){return this.aprobado?"aprobado":"reprobado"}static \u0275fac=function(t){return new(t||n)(W(Vt),W(Ze))};static \u0275cmp=dt({type:n,selectors:[["app-resultado-evaluacion"]],decls:32,vars:22,consts:[[1,"resultado-container"],[1,"resultado-card","animate-scale-in"],[1,"icon-emoji"],[1,"titulo"],[1,"puntaje-section"],[1,"puntaje-display"],[1,"puntaje-obtenido"],[1,"separador"],[1,"puntaje-maximo"],[1,"puntaje-label"],[1,"porcentaje-section"],["viewBox","0 0 100 100"],["cx","50","cy","50","r","45",1,"porcentaje-bg"],["cx","50","cy","50","r","45",1,"porcentaje-fill"],[1,"porcentaje-text"],[1,"porcentaje-valor"],[1,"mensaje"],[1,"acciones"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){t&1&&(kt(0,"div",0)(1,"div",1)(2,"div")(3,"span",2),C(4),Gt()(),kt(5,"h1",3),C(6),Gt(),kt(7,"div",4)(8,"div",5)(9,"span",6),C(10),Gt(),kt(11,"span",7),C(12,"/"),Gt(),kt(13,"span",8),C(14),Gt()(),kt(15,"p",9),C(16,"Puntos obtenidos"),Gt()(),kt(17,"div",10)(18,"div"),un(),kt(19,"svg",11),rf(20,"circle",12)(21,"circle",13),Gt(),ln(),kt(22,"div",14)(23,"span",15),C(24),Gt()()()(),kt(25,"div"),C(26),Gt(),kt(27,"p",16),C(28),Gt(),kt(29,"div",17)(30,"button",18),of("click",function(){return r.volverAEvaluaciones()}),C(31," \u{1F4DA} Volver a Evaluaciones "),Gt()()()()),t&2&&(D(2),_u(Eu("estado-icon ",r.getEstadoClase())),D(2),J(r.getIcono()),D(),ke("aprobado",r.aprobado)("reprobado",!r.aprobado),D(),ge(" ",r.aprobado?"\xA1Felicitaciones!":"Resultado"," "),D(4),J(r.puntajeObtenido),D(4),J(r.puntajeMaximo),D(4),_u(Eu("porcentaje-circle ",r.getEstadoClase())),D(3),An("stroke-dasharray",r.porcentaje*283/100+" 283"),D(3),ge("",r.porcentaje,"%"),D(),_u(Eu("estado-badge ",r.getEstadoClase())),D(),ge(" ",r.aprobado?"\u2713 Aprobado":"\u2717 No Aprobado"," "),D(2),J(r.getMensaje()))},dependencies:[Lt],styles:[".resultado-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:2rem}.resultado-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:3rem;max-width:600px;width:100%;box-shadow:0 20px 60px #0000004d;text-align:center}.estado-icon[_ngcontent-%COMP%]{width:120px;height:120px;margin:0 auto 2rem;border-radius:50%;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_bounce 1s ease-in-out}.estado-icon.aprobado[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4caf50,#81c784);box-shadow:0 10px 30px #4caf5066}.estado-icon.reprobado[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f44336,#ef5350);box-shadow:0 10px 30px #f4433666}.icon-emoji[_ngcontent-%COMP%]{font-size:4rem;animation:_ngcontent-%COMP%_pulse 2s infinite}.titulo[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin-bottom:2rem}.titulo.aprobado[_ngcontent-%COMP%]{color:#4caf50}.titulo.reprobado[_ngcontent-%COMP%]{color:#333}.puntaje-section[_ngcontent-%COMP%]{margin-bottom:2rem}.puntaje-display[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;color:#333;margin-bottom:.5rem}.puntaje-obtenido[_ngcontent-%COMP%]{color:#667eea;animation:_ngcontent-%COMP%_scaleUp .5s ease-out}.separador[_ngcontent-%COMP%]{color:#999;margin:0 .5rem}.puntaje-maximo[_ngcontent-%COMP%]{color:#666}.puntaje-label[_ngcontent-%COMP%]{color:#666;font-size:1.1rem;font-weight:500}.porcentaje-section[_ngcontent-%COMP%]{margin:2rem 0;display:flex;justify-content:center}.porcentaje-circle[_ngcontent-%COMP%]{position:relative;width:200px;height:200px}.porcentaje-circle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%;transform:rotate(-90deg)}.porcentaje-bg[_ngcontent-%COMP%]{fill:none;stroke:#f0f0f0;stroke-width:8}.porcentaje-fill[_ngcontent-%COMP%]{fill:none;stroke-width:8;stroke-linecap:round;transition:stroke-dasharray 1s ease-out}.porcentaje-circle.aprobado[_ngcontent-%COMP%]   .porcentaje-fill[_ngcontent-%COMP%]{stroke:#4caf50}.porcentaje-circle.reprobado[_ngcontent-%COMP%]   .porcentaje-fill[_ngcontent-%COMP%]{stroke:#f44336}.porcentaje-text[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.porcentaje-valor[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#333}.estado-badge[_ngcontent-%COMP%]{display:inline-block;padding:.75rem 2rem;border-radius:50px;font-size:1.2rem;font-weight:700;margin-bottom:1.5rem;animation:_ngcontent-%COMP%_fadeIn .5s ease-in}.estado-badge.aprobado[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4caf50,#81c784);color:#fff;box-shadow:0 4px 15px #4caf5066}.estado-badge.reprobado[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f44336,#ef5350);color:#fff;box-shadow:0 4px 15px #f4433666}.mensaje[_ngcontent-%COMP%]{font-size:1.1rem;color:#555;line-height:1.6;margin-bottom:2rem;padding:1rem;background:#f8f9fa;border-radius:12px;animation:_ngcontent-%COMP%_slideUp .6s ease-out}.acciones[_ngcontent-%COMP%]{margin-top:2rem}.btn[_ngcontent-%COMP%]{padding:1rem 2.5rem;border:none;border-radius:12px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;gap:.5rem}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 15px #667eea66}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 25px #667eea80}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-20px)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_scaleUp{0%{transform:scale(0)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}.animate-scale-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_scaleIn .5s ease-out}@media (max-width: 768px){.resultado-container[_ngcontent-%COMP%]{padding:1rem}.resultado-card[_ngcontent-%COMP%]{padding:2rem 1.5rem}.titulo[_ngcontent-%COMP%]{font-size:2rem}.estado-icon[_ngcontent-%COMP%]{width:100px;height:100px}.icon-emoji[_ngcontent-%COMP%]{font-size:3rem}.puntaje-display[_ngcontent-%COMP%]{font-size:2.5rem}.porcentaje-circle[_ngcontent-%COMP%]{width:150px;height:150px}.porcentaje-valor[_ngcontent-%COMP%]{font-size:2rem}.mensaje[_ngcontent-%COMP%]{font-size:1rem}}"]})};var ao=()=>{let n=x(Yt),e=x(Ze);return n.getUser().pipe(ue(t=>t?!0:(e.navigate(["/login"]),!1)))},hO=()=>{let n=x(Yt),e=x(Ze);return n.getUser().pipe(ue(t=>t?(e.navigate(["/evaluaciones"]),!1):!0))};var fO=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:$g,canActivate:[hO]},{path:"evaluaciones",component:Hg,canActivate:[ao]},{path:"evaluaciones/nueva",component:ed,canActivate:[ao]},{path:"evaluaciones/editar/:id",component:ed,canActivate:[ao]},{path:"evaluaciones/estadisticas/:id",component:zg,canActivate:[ao]},{path:"evaluaciones-disponibles",component:qg,canActivate:[ao]},{path:"tomar-evaluacion/:id",component:Gg,canActivate:[ao]},{path:"resultado-evaluacion",component:Wg,canActivate:[ao]},{path:"**",redirectTo:"/login"}];var pO={providers:[zv(),e_({eventCoalescing:!0}),G_(fO),eM(()=>tM(N1.firebase)),qP(()=>KP()),R1(()=>P1())]};var Kg=class n{title=dn("Sistema_de_evaluacion_online");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=dt({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&be(0,"router-outlet")},dependencies:[qu],encapsulation:2})};w_(Kg,pO).catch(n=>console.error(n));
